2026-01-28 16:19:11.487 -03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-01-28 16:19:11.847 -03:00 [DBG] The index {'ProductoId'} was not created on entity type 'Stock' as the properties are already covered by the index {'ProductoId', 'SucursalId'}.
2026-01-28 16:19:11.849 -03:00 [DBG] The index {'EmpresaId'} was not created on entity type 'Usuario' as the properties are already covered by the index {'EmpresaId', 'Email'}.
2026-01-28 16:19:11.850 -03:00 [DBG] The index {'EmpresaId'} was not created on entity type 'Usuario' as the properties are already covered by the index {'EmpresaId', 'Rut'}.
2026-01-28 16:19:11.935 -03:00 [DBG] The property 'MovimientoStock.DevolucionId' was created in shadow state because there are no eligible CLR members with a matching name.
2026-01-28 16:19:12.004 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 16:19:12.017 -03:00 [DBG] Creating DbConnection.
2026-01-28 16:19:12.036 -03:00 [DBG] Created DbConnection. (18ms).
2026-01-28 16:19:12.039 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:19:12.224 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:19:12.228 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:19:12.232 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2026-01-28 16:19:12.233 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2026-01-28 16:19:12.238 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-28 16:19:12.260 -03:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-28 16:19:12.281 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:19:12.288 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 23ms reading results.
2026-01-28 16:19:12.290 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:19:12.293 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (2ms).
2026-01-28 16:19:12.404 -03:00 [DBG] Migrating using database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:19:12.407 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:19:12.409 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:19:12.549 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:19:12.549 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:19:12.551 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (1ms).
2026-01-28 16:19:12.552 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:19:12.553 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:19:12.579 -03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-01-28 16:19:12.580 -03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-01-28 16:19:12.581 -03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (2ms).
2026-01-28 16:19:12.582 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2026-01-28 16:19:12.587 -03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2026-01-28 16:19:12.591 -03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2026-01-28 16:19:12.593 -03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2026-01-28 16:19:12.594 -03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2026-01-28 16:19:12.595 -03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-01-28 16:19:12.596 -03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-01-28 16:19:12.597 -03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1ms).
2026-01-28 16:19:12.597 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2026-01-28 16:19:12.599 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2026-01-28 16:19:12.600 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:19:12.600 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:19:12.601 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:19:12.601 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-28 16:19:12.603 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-28 16:19:12.604 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:19:12.605 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-01-28 16:19:12.609 -03:00 [INF] No migrations were applied. The database is already up to date.
2026-01-28 16:19:12.610 -03:00 [DBG] Committing transaction.
2026-01-28 16:19:12.613 -03:00 [DBG] Committed transaction.
2026-01-28 16:19:12.614 -03:00 [DBG] Disposing transaction.
2026-01-28 16:19:12.615 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:19:12.615 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:19:12.617 -03:00 [INF] Database migrations applied successfully
2026-01-28 16:19:12.618 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 16:19:12.620 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:19:12.621 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:19:12.643 -03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-01-28 16:19:12.672 -03:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2026-01-28 16:19:12.684 -03:00 [INF] Project Gon API iniciada en ambiente: Development
2026-01-28 16:19:12.686 -03:00 [DBG] Hosting starting
2026-01-28 16:19:12.694 -03:00 [INF] User profile is available. Using 'C:\Users\Jossan\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-28 16:19:12.699 -03:00 [DBG] Reading data from file 'C:\Users\Jossan\AppData\Local\ASP.NET\DataProtection-Keys\key-7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c.xml'.
2026-01-28 16:19:12.704 -03:00 [DBG] Found key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c}.
2026-01-28 16:19:12.709 -03:00 [DBG] Considering key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} with expiration date 2026-04-28 18:20:11Z as default key.
2026-01-28 16:19:12.711 -03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2026-01-28 16:19:12.712 -03:00 [DBG] Decrypting secret element using Windows DPAPI.
2026-01-28 16:19:12.713 -03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2026-01-28 16:19:12.715 -03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2026-01-28 16:19:12.716 -03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2026-01-28 16:19:12.717 -03:00 [DBG] Using key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} as the default key.
2026-01-28 16:19:12.718 -03:00 [DBG] Key ring with default key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} was loaded during application startup.
2026-01-28 16:19:12.720 -03:00 [DBG] Middleware loaded
2026-01-28 16:19:12.721 -03:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16515 B).
2026-01-28 16:19:12.722 -03:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2026-01-28 16:19:12.765 -03:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2026-01-28 16:19:12.766 -03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-01-28 16:19:12.768 -03:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2026-01-28 16:19:12.802 -03:00 [ERR] Hosting failed to start
System.IO.IOException: Failed to bind to address http://127.0.0.1:5070: address already in use.
 ---> Microsoft.AspNetCore.Connections.AddressInUseException: Solo se permite un uso de cada dirección de socket (protocolo/dirección de red/puerto)
 ---> System.Net.Sockets.SocketException (10048): Solo se permite un uso de cada dirección de socket (protocolo/dirección de red/puerto)
   at System.Net.Sockets.Socket.UpdateStatusAfterSocketErrorAndThrowException(SocketError error, Boolean disconnectOnFailure, String callerName)
   at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Bind(EndPoint localEP)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportOptions.CreateDefaultBoundListenSocket(EndPoint endpoint)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportFactory.BindAsync(EndPoint endpoint, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Infrastructure.TransportManager.BindAsync(EndPoint endPoint, ConnectionDelegate connectionDelegate, EndpointConfig endpointConfig, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.<>c__DisplayClass28_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.BindAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__14_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
2026-01-28 16:19:12.817 -03:00 [FTL] Aplicación terminó inesperadamente
System.IO.IOException: Failed to bind to address http://127.0.0.1:5070: address already in use.
 ---> Microsoft.AspNetCore.Connections.AddressInUseException: Solo se permite un uso de cada dirección de socket (protocolo/dirección de red/puerto)
 ---> System.Net.Sockets.SocketException (10048): Solo se permite un uso de cada dirección de socket (protocolo/dirección de red/puerto)
   at System.Net.Sockets.Socket.UpdateStatusAfterSocketErrorAndThrowException(SocketError error, Boolean disconnectOnFailure, String callerName)
   at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Bind(EndPoint localEP)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportOptions.CreateDefaultBoundListenSocket(EndPoint endpoint)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportFactory.BindAsync(EndPoint endpoint, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Infrastructure.TransportManager.BindAsync(EndPoint endPoint, ConnectionDelegate connectionDelegate, EndpointConfig endpointConfig, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.<>c__DisplayClass28_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.BindAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__14_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
   at Microsoft.Extensions.Hosting.Internal.Host.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.Run(IHost host)
   at Program.<Main>$(String[] args) in C:\Proyectos\Project_Gon\Project_Gon.Api\Program.cs:line 289
2026-01-28 16:21:12.859 -03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-01-28 16:21:13.205 -03:00 [DBG] The index {'ProductoId'} was not created on entity type 'Stock' as the properties are already covered by the index {'ProductoId', 'SucursalId'}.
2026-01-28 16:21:13.207 -03:00 [DBG] The index {'EmpresaId'} was not created on entity type 'Usuario' as the properties are already covered by the index {'EmpresaId', 'Email'}.
2026-01-28 16:21:13.208 -03:00 [DBG] The index {'EmpresaId'} was not created on entity type 'Usuario' as the properties are already covered by the index {'EmpresaId', 'Rut'}.
2026-01-28 16:21:13.281 -03:00 [DBG] The property 'MovimientoStock.DevolucionId' was created in shadow state because there are no eligible CLR members with a matching name.
2026-01-28 16:21:13.342 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 16:21:13.353 -03:00 [DBG] Creating DbConnection.
2026-01-28 16:21:13.369 -03:00 [DBG] Created DbConnection. (15ms).
2026-01-28 16:21:13.372 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:21:13.445 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:21:13.449 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:21:13.452 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2026-01-28 16:21:13.453 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2026-01-28 16:21:13.457 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-28 16:21:13.479 -03:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-28 16:21:13.497 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:21:13.503 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 20ms reading results.
2026-01-28 16:21:13.504 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:21:13.507 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (2ms).
2026-01-28 16:21:13.607 -03:00 [DBG] Migrating using database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:21:13.609 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:21:13.611 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:21:13.759 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:21:13.760 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:21:13.762 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (2ms).
2026-01-28 16:21:13.763 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:21:13.764 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:21:13.791 -03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-01-28 16:21:13.791 -03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-01-28 16:21:13.792 -03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1ms).
2026-01-28 16:21:13.793 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2026-01-28 16:21:13.799 -03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2026-01-28 16:21:13.802 -03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2026-01-28 16:21:13.804 -03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2026-01-28 16:21:13.805 -03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2026-01-28 16:21:13.806 -03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-01-28 16:21:13.807 -03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-01-28 16:21:13.807 -03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1ms).
2026-01-28 16:21:13.808 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2026-01-28 16:21:13.809 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2026-01-28 16:21:13.810 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:21:13.811 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:21:13.812 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:21:13.812 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-28 16:21:13.813 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-28 16:21:13.814 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:21:13.815 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-01-28 16:21:13.820 -03:00 [INF] No migrations were applied. The database is already up to date.
2026-01-28 16:21:13.821 -03:00 [DBG] Committing transaction.
2026-01-28 16:21:13.824 -03:00 [DBG] Committed transaction.
2026-01-28 16:21:13.825 -03:00 [DBG] Disposing transaction.
2026-01-28 16:21:13.826 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:21:13.826 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:21:13.827 -03:00 [INF] Database migrations applied successfully
2026-01-28 16:21:13.829 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 16:21:13.830 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:21:13.831 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:21:13.852 -03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-01-28 16:21:13.881 -03:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2026-01-28 16:21:13.895 -03:00 [INF] Project Gon API iniciada en ambiente: Development
2026-01-28 16:21:13.897 -03:00 [DBG] Hosting starting
2026-01-28 16:21:13.906 -03:00 [INF] User profile is available. Using 'C:\Users\Jossan\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-28 16:21:13.911 -03:00 [DBG] Reading data from file 'C:\Users\Jossan\AppData\Local\ASP.NET\DataProtection-Keys\key-7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c.xml'.
2026-01-28 16:21:13.916 -03:00 [DBG] Found key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c}.
2026-01-28 16:21:13.921 -03:00 [DBG] Considering key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} with expiration date 2026-04-28 18:20:11Z as default key.
2026-01-28 16:21:13.923 -03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2026-01-28 16:21:13.924 -03:00 [DBG] Decrypting secret element using Windows DPAPI.
2026-01-28 16:21:13.925 -03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2026-01-28 16:21:13.928 -03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2026-01-28 16:21:13.929 -03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2026-01-28 16:21:13.930 -03:00 [DBG] Using key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} as the default key.
2026-01-28 16:21:13.930 -03:00 [DBG] Key ring with default key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} was loaded during application startup.
2026-01-28 16:21:13.933 -03:00 [DBG] Middleware loaded
2026-01-28 16:21:13.934 -03:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16515 B).
2026-01-28 16:21:13.935 -03:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2026-01-28 16:21:13.978 -03:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2026-01-28 16:21:13.979 -03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-01-28 16:21:13.981 -03:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2026-01-28 16:21:14.008 -03:00 [INF] Now listening on: https://localhost:7058
2026-01-28 16:21:14.008 -03:00 [INF] Now listening on: http://localhost:5070
2026-01-28 16:21:14.009 -03:00 [DBG] Loaded hosting startup assembly Project_Gon.Api
2026-01-28 16:21:14.009 -03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-01-28 16:21:14.010 -03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-01-28 16:21:14.010 -03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-01-28 16:21:14.013 -03:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2026-01-28 16:21:14.016 -03:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2026-01-28 16:21:14.111 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-28 16:21:14.111 -03:00 [INF] Hosting environment: Development
2026-01-28 16:21:14.112 -03:00 [INF] Content root path: C:\Proyectos\Project_Gon\Project_Gon.Api
2026-01-28 16:21:14.113 -03:00 [DBG] Hosting started
2026-01-28 16:21:15.061 -03:00 [DBG] Connection id "0HNIUK9JR3N8G" accepted.
2026-01-28 16:21:15.065 -03:00 [DBG] Connection id "0HNIUK9JR3N8G" started.
2026-01-28 16:21:15.083 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5070/api/sucursales - application/json 172
2026-01-28 16:21:15.102 -03:00 [DBG] 1 candidate(s) found for the request path '/api/sucursales'
2026-01-28 16:21:15.104 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.SucursalesController.Create (Project_Gon.Api)' with route pattern 'api/Sucursales' is valid for the request path '/api/sucursales'
2026-01-28 16:21:15.106 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.SucursalesController.Create (Project_Gon.Api)'
2026-01-28 16:21:15.111 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 16:21:15.113 -03:00 [DBG] Https port '7058' loaded from configuration.
2026-01-28 16:21:15.115 -03:00 [DBG] Redirecting to 'https://localhost:7058/api/sucursales'.
2026-01-28 16:21:15.117 -03:00 [DBG] Connection id "0HNIUK9JR3N8G" completed keep alive response.
2026-01-28 16:21:15.119 -03:00 [DBG] Connection id "0HNIUK9JR3N8H" accepted.
2026-01-28 16:21:15.119 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5070/api/sucursales - 307 0 null 36.6059ms
2026-01-28 16:21:15.119 -03:00 [DBG] Connection id "0HNIUK9JR3N8H" started.
2026-01-28 16:21:15.125 -03:00 [DBG] Connection id "0HNIUK9JR3N8G", Request id "0HNIUK9JR3N8G:00000001": started reading request body.
2026-01-28 16:21:15.126 -03:00 [DBG] Connection id "0HNIUK9JR3N8G", Request id "0HNIUK9JR3N8G:00000001": done reading request body.
2026-01-28 16:21:15.150 -03:00 [DBG] Connection 0HNIUK9JR3N8H established using the following protocol: "Tls12"
2026-01-28 16:21:15.159 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/sucursales - application/json 172
2026-01-28 16:21:15.161 -03:00 [DBG] 1 candidate(s) found for the request path '/api/sucursales'
2026-01-28 16:21:15.162 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.SucursalesController.Create (Project_Gon.Api)' with route pattern 'api/Sucursales' is valid for the request path '/api/sucursales'
2026-01-28 16:21:15.163 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.SucursalesController.Create (Project_Gon.Api)'
2026-01-28 16:21:15.164 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 16:21:15.176 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 16:21:15.178 -03:00 [INF] Executing endpoint 'Project_Gon.Api.Controllers.SucursalesController.Create (Project_Gon.Api)'
2026-01-28 16:21:15.187 -03:00 [INF] Route matched with {action = "Create", controller = "Sucursales"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(Project_Gon.Core.DTOs.Sucursal.CreateSucursalDto) on controller Project_Gon.Api.Controllers.SucursalesController (Project_Gon.Api).
2026-01-28 16:21:15.189 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-01-28 16:21:15.190 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-01-28 16:21:15.191 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-01-28 16:21:15.192 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-01-28 16:21:15.193 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-01-28 16:21:15.195 -03:00 [DBG] Executing controller factory for controller Project_Gon.Api.Controllers.SucursalesController (Project_Gon.Api)
2026-01-28 16:21:15.257 -03:00 [DBG] Executed controller factory for controller Project_Gon.Api.Controllers.SucursalesController (Project_Gon.Api)
2026-01-28 16:21:15.261 -03:00 [DBG] Attempting to bind parameter 'createDto' of type 'Project_Gon.Core.DTOs.Sucursal.CreateSucursalDto' ...
2026-01-28 16:21:15.263 -03:00 [DBG] Attempting to bind parameter 'createDto' of type 'Project_Gon.Core.DTOs.Sucursal.CreateSucursalDto' using the name '' in request data ...
2026-01-28 16:21:15.264 -03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2026-01-28 16:21:15.269 -03:00 [DBG] Connection id "0HNIUK9JR3N8H", Request id "0HNIUK9JR3N8H:00000001": started reading request body.
2026-01-28 16:21:15.270 -03:00 [DBG] Connection id "0HNIUK9JR3N8H", Request id "0HNIUK9JR3N8H:00000001": done reading request body.
2026-01-28 16:21:15.274 -03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Project_Gon.Core.DTOs.Sucursal.CreateSucursalDto'
2026-01-28 16:21:15.275 -03:00 [DBG] Done attempting to bind parameter 'createDto' of type 'Project_Gon.Core.DTOs.Sucursal.CreateSucursalDto'.
2026-01-28 16:21:15.275 -03:00 [DBG] Done attempting to bind parameter 'createDto' of type 'Project_Gon.Core.DTOs.Sucursal.CreateSucursalDto'.
2026-01-28 16:21:15.276 -03:00 [DBG] Attempting to validate the bound parameter 'createDto' of type 'Project_Gon.Core.DTOs.Sucursal.CreateSucursalDto' ...
2026-01-28 16:21:15.286 -03:00 [DBG] Done attempting to validate the bound parameter 'createDto' of type 'Project_Gon.Core.DTOs.Sucursal.CreateSucursalDto'.
2026-01-28 16:21:15.302 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 16:21:15.338 -03:00 [DBG] Compiling query expression: 
'DbSet<Empresa>()
    .FirstOrDefault(e => EF.Property<int>(e, "Id") == __p_0)'
2026-01-28 16:21:15.456 -03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Empresa>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Empresa>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Empresa.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Empresa.Activo (bool) Required, 1], [Property: Empresa.Ciudad (string), 2], [Property: Empresa.CreatedAt (DateTime) Required, 3], [Property: Empresa.Direccion (string), 4], [Property: Empresa.Nombre (string) Required MaxLength(255), 5], [Property: Empresa.Region (string), 6], [Property: Empresa.Rut (string), 7], [Property: Empresa.UpdatedAt (DateTime?), 8] }
            SELECT TOP(1) e.Id, e.Activo, e.Ciudad, e.CreatedAt, e.Direccion, e.Nombre, e.Region, e.Rut, e.UpdatedAt
            FROM Empresas AS e
            WHERE e.Id == @__p_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Empresa.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Empresa.Activo (bool) Required, 1], [Property: Empresa.Ciudad (string), 2], [Property: Empresa.CreatedAt (DateTime) Required, 3], [Property: Empresa.Direccion (string), 4], [Property: Empresa.Nombre (string) Required MaxLength(255), 5], [Property: Empresa.Region (string), 6], [Property: Empresa.Rut (string), 7], [Property: Empresa.UpdatedAt (DateTime?), 8] }
            SELECT TOP(1) e.Id, e.Activo, e.Ciudad, e.CreatedAt, e.Direccion, e.Nombre, e.Region, e.Rut, e.UpdatedAt
            FROM Empresas AS e
            WHERE e.Id == @__p_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Empresa entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Empresa instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Empresa);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Empresa.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Empresa").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (Empresa)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Empresa | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Empresa")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Empresa | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Empresa")]: 
                            {
                                return 
                                {
                                    Empresa instance;
                                    instance = new Empresa();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Activo>k__BackingField = dataReader.GetBoolean(1);
                                    instance.<Ciudad>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(3);
                                    instance.<Direccion>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<Nombre>k__BackingField = dataReader.GetString(5);
                                    instance.<Region>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                    instance.<Rut>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(8) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(8);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Empresa | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Empresa")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Empresa)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: Project_Gon.Infrastructure.Data.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2026-01-28 16:21:15.480 -03:00 [DBG] Creating DbConnection.
2026-01-28 16:21:15.480 -03:00 [DBG] Created DbConnection. (0ms).
2026-01-28 16:21:15.482 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:21:15.483 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:21:15.484 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:21:15.484 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:21:15.486 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2026-01-28 16:21:15.488 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 16:21:15.498 -03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 16:21:15.503 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:21:15.504 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 3ms reading results.
2026-01-28 16:21:15.506 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:21:15.506 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:21:15.509 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-01-28 16:21:15.511 -03:00 [DBG] No information found on request to perform content negotiation.
2026-01-28 16:21:15.511 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-01-28 16:21:15.512 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-01-28 16:21:15.513 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2026-01-28 16:21:15.514 -03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2026-01-28 16:21:15.517 -03:00 [INF] Executed action Project_Gon.Api.Controllers.SucursalesController.Create (Project_Gon.Api) in 321.111ms
2026-01-28 16:21:15.518 -03:00 [INF] Executed endpoint 'Project_Gon.Api.Controllers.SucursalesController.Create (Project_Gon.Api)'
2026-01-28 16:21:15.520 -03:00 [INF] HTTP POST /api/sucursales responded 400 in 354.5112 ms
2026-01-28 16:21:15.523 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 16:21:15.525 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:21:15.526 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (1ms).
2026-01-28 16:21:15.527 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/sucursales - 400 null text/plain; charset=utf-8 367.8447ms
2026-01-28 16:21:20.692 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5070/api/sucursales - application/json 172
2026-01-28 16:21:20.694 -03:00 [DBG] 1 candidate(s) found for the request path '/api/sucursales'
2026-01-28 16:21:20.695 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.SucursalesController.Create (Project_Gon.Api)' with route pattern 'api/Sucursales' is valid for the request path '/api/sucursales'
2026-01-28 16:21:20.696 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.SucursalesController.Create (Project_Gon.Api)'
2026-01-28 16:21:20.697 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 16:21:20.697 -03:00 [DBG] Redirecting to 'https://localhost:7058/api/sucursales'.
2026-01-28 16:21:20.698 -03:00 [DBG] Connection id "0HNIUK9JR3N8G" completed keep alive response.
2026-01-28 16:21:20.699 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5070/api/sucursales - 307 0 null 6.1538ms
2026-01-28 16:21:20.700 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/sucursales - application/json 172
2026-01-28 16:21:20.700 -03:00 [DBG] Connection id "0HNIUK9JR3N8G", Request id "0HNIUK9JR3N8G:00000002": started reading request body.
2026-01-28 16:21:20.702 -03:00 [DBG] 1 candidate(s) found for the request path '/api/sucursales'
2026-01-28 16:21:20.702 -03:00 [DBG] Connection id "0HNIUK9JR3N8G", Request id "0HNIUK9JR3N8G:00000002": done reading request body.
2026-01-28 16:21:20.703 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.SucursalesController.Create (Project_Gon.Api)' with route pattern 'api/Sucursales' is valid for the request path '/api/sucursales'
2026-01-28 16:21:20.705 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.SucursalesController.Create (Project_Gon.Api)'
2026-01-28 16:21:20.705 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 16:21:20.707 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 16:21:20.707 -03:00 [INF] Executing endpoint 'Project_Gon.Api.Controllers.SucursalesController.Create (Project_Gon.Api)'
2026-01-28 16:21:20.708 -03:00 [INF] Route matched with {action = "Create", controller = "Sucursales"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(Project_Gon.Core.DTOs.Sucursal.CreateSucursalDto) on controller Project_Gon.Api.Controllers.SucursalesController (Project_Gon.Api).
2026-01-28 16:21:20.709 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-01-28 16:21:20.710 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-01-28 16:21:20.710 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-01-28 16:21:20.711 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-01-28 16:21:20.712 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-01-28 16:21:20.713 -03:00 [DBG] Executing controller factory for controller Project_Gon.Api.Controllers.SucursalesController (Project_Gon.Api)
2026-01-28 16:21:20.716 -03:00 [DBG] Executed controller factory for controller Project_Gon.Api.Controllers.SucursalesController (Project_Gon.Api)
2026-01-28 16:21:20.717 -03:00 [DBG] Attempting to bind parameter 'createDto' of type 'Project_Gon.Core.DTOs.Sucursal.CreateSucursalDto' ...
2026-01-28 16:21:20.718 -03:00 [DBG] Attempting to bind parameter 'createDto' of type 'Project_Gon.Core.DTOs.Sucursal.CreateSucursalDto' using the name '' in request data ...
2026-01-28 16:21:20.719 -03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2026-01-28 16:21:20.720 -03:00 [DBG] Connection id "0HNIUK9JR3N8H", Request id "0HNIUK9JR3N8H:00000003": started reading request body.
2026-01-28 16:21:20.721 -03:00 [DBG] Connection id "0HNIUK9JR3N8H", Request id "0HNIUK9JR3N8H:00000003": done reading request body.
2026-01-28 16:21:20.721 -03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Project_Gon.Core.DTOs.Sucursal.CreateSucursalDto'
2026-01-28 16:21:20.722 -03:00 [DBG] Done attempting to bind parameter 'createDto' of type 'Project_Gon.Core.DTOs.Sucursal.CreateSucursalDto'.
2026-01-28 16:21:20.722 -03:00 [DBG] Done attempting to bind parameter 'createDto' of type 'Project_Gon.Core.DTOs.Sucursal.CreateSucursalDto'.
2026-01-28 16:21:20.723 -03:00 [DBG] Attempting to validate the bound parameter 'createDto' of type 'Project_Gon.Core.DTOs.Sucursal.CreateSucursalDto' ...
2026-01-28 16:21:20.725 -03:00 [DBG] Done attempting to validate the bound parameter 'createDto' of type 'Project_Gon.Core.DTOs.Sucursal.CreateSucursalDto'.
2026-01-28 16:21:20.755 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 16:21:20.759 -03:00 [DBG] Creating DbConnection.
2026-01-28 16:21:20.760 -03:00 [DBG] Created DbConnection. (0ms).
2026-01-28 16:21:20.760 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:21:20.761 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:21:20.762 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:21:20.762 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:21:20.763 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:21:20.764 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 16:21:20.766 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 16:21:20.795 -03:00 [DBG] Context 'AppDbContext' started tracking 'Empresa' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:21:20.820 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:21:20.821 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 53ms reading results.
2026-01-28 16:21:20.822 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:21:20.823 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:21:20.843 -03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Sucursal.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:21:20.867 -03:00 [DBG] The navigation 'Sucursal.Empresa' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:21:20.876 -03:00 [DBG] Context 'AppDbContext' started tracking 'Sucursal' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:21:20.879 -03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2026-01-28 16:21:20.881 -03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2026-01-28 16:21:20.898 -03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2026-01-28 16:21:20.931 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:21:20.932 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:21:20.934 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:21:20.934 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:21:20.935 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:21:20.936 -03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = Int32), @p5='?', @p6='?', @p7='?', @p8='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Sucursales" ("Activo", "Ciudad", "CreatedAt", "Direccion", "EmpresaId", "Nombre", "Region", "Telefono", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
2026-01-28 16:21:20.941 -03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = Int32), @p5='?', @p6='?', @p7='?', @p8='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Sucursales" ("Activo", "Ciudad", "CreatedAt", "Direccion", "EmpresaId", "Nombre", "Region", "Telefono", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
2026-01-28 16:21:20.948 -03:00 [DBG] The foreign key property 'Sucursal.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-01-28 16:21:20.952 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:21:20.953 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 10ms reading results.
2026-01-28 16:21:20.954 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:21:20.954 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:21:20.961 -03:00 [DBG] An entity of type 'Sucursal' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:21:20.963 -03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2026-01-28 16:21:20.966 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-01-28 16:21:20.968 -03:00 [DBG] No information found on request to perform content negotiation.
2026-01-28 16:21:20.968 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-01-28 16:21:20.969 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-01-28 16:21:20.969 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-01-28 16:21:20.970 -03:00 [INF] Executing CreatedAtActionResult, writing value of type 'Project_Gon.Core.DTOs.Sucursal.SucursalDto'.
2026-01-28 16:21:20.981 -03:00 [DBG] Found the endpoints ["Project_Gon.Api.Controllers.SucursalesController.GetById (Project_Gon.Api)"] for address (id=[2],action=[GetById],controller=[Sucursales])
2026-01-28 16:21:20.983 -03:00 [DBG] Successfully processed template api/Sucursales/{id} for Project_Gon.Api.Controllers.SucursalesController.GetById (Project_Gon.Api) resulting in /api/Sucursales/2 and 
2026-01-28 16:21:20.984 -03:00 [DBG] Link generation succeeded for endpoints ["Project_Gon.Api.Controllers.SucursalesController.GetById (Project_Gon.Api)"] with result /api/Sucursales/2
2026-01-28 16:21:20.990 -03:00 [INF] Executed action Project_Gon.Api.Controllers.SucursalesController.Create (Project_Gon.Api) in 276.8522ms
2026-01-28 16:21:20.991 -03:00 [INF] Executed endpoint 'Project_Gon.Api.Controllers.SucursalesController.Create (Project_Gon.Api)'
2026-01-28 16:21:20.991 -03:00 [INF] HTTP POST /api/sucursales responded 201 in 285.4925 ms
2026-01-28 16:21:20.992 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 16:21:20.993 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:21:20.994 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:21:20.995 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/sucursales - 201 null application/json; charset=utf-8 295.1225ms
2026-01-28 16:21:53.865 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5070/api/auth/register - application/json 180
2026-01-28 16:21:53.866 -03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/register'
2026-01-28 16:21:53.867 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)' with route pattern 'api/Auth/register' is valid for the request path '/api/auth/register'
2026-01-28 16:21:53.868 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)'
2026-01-28 16:21:53.868 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 16:21:53.869 -03:00 [DBG] Redirecting to 'https://localhost:7058/api/auth/register'.
2026-01-28 16:21:53.869 -03:00 [DBG] Connection id "0HNIUK9JR3N8G" completed keep alive response.
2026-01-28 16:21:53.870 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5070/api/auth/register - 307 0 null 5.3788ms
2026-01-28 16:21:53.871 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/auth/register - application/json 180
2026-01-28 16:21:53.872 -03:00 [DBG] Connection id "0HNIUK9JR3N8G", Request id "0HNIUK9JR3N8G:00000003": started reading request body.
2026-01-28 16:21:53.873 -03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/register'
2026-01-28 16:21:53.873 -03:00 [DBG] Connection id "0HNIUK9JR3N8G", Request id "0HNIUK9JR3N8G:00000003": done reading request body.
2026-01-28 16:21:53.874 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)' with route pattern 'api/Auth/register' is valid for the request path '/api/auth/register'
2026-01-28 16:21:53.875 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)'
2026-01-28 16:21:53.876 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 16:21:53.877 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 16:21:53.878 -03:00 [INF] Executing endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)'
2026-01-28 16:21:53.881 -03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(Project_Gon.Core.DTOs.Auth.RegisterDto) on controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api).
2026-01-28 16:21:53.882 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-01-28 16:21:53.883 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-01-28 16:21:53.884 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-01-28 16:21:53.885 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-01-28 16:21:53.885 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-01-28 16:21:53.886 -03:00 [DBG] Executing controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-01-28 16:21:53.888 -03:00 [DBG] Executed controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-01-28 16:21:53.889 -03:00 [DBG] Attempting to bind parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto' ...
2026-01-28 16:21:53.889 -03:00 [DBG] Attempting to bind parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto' using the name '' in request data ...
2026-01-28 16:21:53.890 -03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2026-01-28 16:21:53.895 -03:00 [DBG] Connection id "0HNIUK9JR3N8H", Request id "0HNIUK9JR3N8H:00000005": started reading request body.
2026-01-28 16:21:53.895 -03:00 [DBG] Connection id "0HNIUK9JR3N8H", Request id "0HNIUK9JR3N8H:00000005": done reading request body.
2026-01-28 16:21:53.898 -03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Project_Gon.Core.DTOs.Auth.RegisterDto'
2026-01-28 16:21:53.898 -03:00 [DBG] Done attempting to bind parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto'.
2026-01-28 16:21:53.899 -03:00 [DBG] Done attempting to bind parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto'.
2026-01-28 16:21:53.899 -03:00 [DBG] Attempting to validate the bound parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto' ...
2026-01-28 16:21:53.903 -03:00 [DBG] Done attempting to validate the bound parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto'.
2026-01-28 16:21:53.906 -03:00 [DBG] [CLEAN_RUT] Original: 12345678-9 -> Limpio: 12345678-9
2026-01-28 16:21:53.907 -03:00 [INF] [REGISTER] RUT limpio guardado: 12345678-9
2026-01-28 16:21:53.907 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 16:21:53.909 -03:00 [DBG] Creating DbConnection.
2026-01-28 16:21:53.909 -03:00 [DBG] Created DbConnection. (0ms).
2026-01-28 16:21:53.910 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:21:53.911 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:21:53.911 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:21:53.912 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:21:53.912 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:21:53.913 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 16:21:53.914 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 16:21:53.915 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:21:53.916 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-01-28 16:21:53.917 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:21:53.918 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:21:53.918 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-01-28 16:21:53.920 -03:00 [DBG] No information found on request to perform content negotiation.
2026-01-28 16:21:53.920 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-01-28 16:21:53.920 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-01-28 16:21:53.921 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2026-01-28 16:21:53.922 -03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2026-01-28 16:21:53.922 -03:00 [INF] Executed action Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api) in 36.3238ms
2026-01-28 16:21:53.923 -03:00 [INF] Executed endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)'
2026-01-28 16:21:53.923 -03:00 [INF] HTTP POST /api/auth/register responded 400 in 47.0319 ms
2026-01-28 16:21:53.924 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 16:21:53.925 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:21:53.925 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:21:53.926 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/auth/register - 400 null text/plain; charset=utf-8 55.4597ms
2026-01-28 16:21:59.697 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5070/api/auth/register - application/json 180
2026-01-28 16:21:59.701 -03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/register'
2026-01-28 16:21:59.705 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)' with route pattern 'api/Auth/register' is valid for the request path '/api/auth/register'
2026-01-28 16:21:59.707 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)'
2026-01-28 16:21:59.708 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 16:21:59.709 -03:00 [DBG] Redirecting to 'https://localhost:7058/api/auth/register'.
2026-01-28 16:21:59.710 -03:00 [DBG] Connection id "0HNIUK9JR3N8G" completed keep alive response.
2026-01-28 16:21:59.712 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/auth/register - application/json 180
2026-01-28 16:21:59.713 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5070/api/auth/register - 307 0 null 15.1892ms
2026-01-28 16:21:59.714 -03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/register'
2026-01-28 16:21:59.716 -03:00 [DBG] Connection id "0HNIUK9JR3N8G", Request id "0HNIUK9JR3N8G:00000004": started reading request body.
2026-01-28 16:21:59.716 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)' with route pattern 'api/Auth/register' is valid for the request path '/api/auth/register'
2026-01-28 16:21:59.717 -03:00 [DBG] Connection id "0HNIUK9JR3N8G", Request id "0HNIUK9JR3N8G:00000004": done reading request body.
2026-01-28 16:21:59.718 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)'
2026-01-28 16:21:59.719 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 16:21:59.720 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 16:21:59.720 -03:00 [INF] Executing endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)'
2026-01-28 16:21:59.721 -03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(Project_Gon.Core.DTOs.Auth.RegisterDto) on controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api).
2026-01-28 16:21:59.722 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-01-28 16:21:59.723 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-01-28 16:21:59.723 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-01-28 16:21:59.724 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-01-28 16:21:59.725 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-01-28 16:21:59.726 -03:00 [DBG] Executing controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-01-28 16:21:59.727 -03:00 [DBG] Executed controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-01-28 16:21:59.728 -03:00 [DBG] Attempting to bind parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto' ...
2026-01-28 16:21:59.728 -03:00 [DBG] Attempting to bind parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto' using the name '' in request data ...
2026-01-28 16:21:59.729 -03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2026-01-28 16:21:59.730 -03:00 [DBG] Connection id "0HNIUK9JR3N8H", Request id "0HNIUK9JR3N8H:00000007": started reading request body.
2026-01-28 16:21:59.731 -03:00 [DBG] Connection id "0HNIUK9JR3N8H", Request id "0HNIUK9JR3N8H:00000007": done reading request body.
2026-01-28 16:21:59.732 -03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Project_Gon.Core.DTOs.Auth.RegisterDto'
2026-01-28 16:21:59.732 -03:00 [DBG] Done attempting to bind parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto'.
2026-01-28 16:21:59.733 -03:00 [DBG] Done attempting to bind parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto'.
2026-01-28 16:21:59.734 -03:00 [DBG] Attempting to validate the bound parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto' ...
2026-01-28 16:21:59.735 -03:00 [DBG] Done attempting to validate the bound parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto'.
2026-01-28 16:21:59.736 -03:00 [DBG] [CLEAN_RUT] Original: 12345678-9 -> Limpio: 12345678-9
2026-01-28 16:21:59.736 -03:00 [INF] [REGISTER] RUT limpio guardado: 12345678-9
2026-01-28 16:21:59.737 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 16:21:59.739 -03:00 [DBG] Creating DbConnection.
2026-01-28 16:21:59.739 -03:00 [DBG] Created DbConnection. (0ms).
2026-01-28 16:21:59.739 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:21:59.740 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:21:59.741 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:21:59.741 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:21:59.742 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:21:59.742 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 16:21:59.744 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 16:21:59.746 -03:00 [DBG] Context 'AppDbContext' started tracking 'Empresa' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:21:59.746 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:21:59.747 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-01-28 16:21:59.748 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:21:59.748 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:21:59.750 -03:00 [DBG] Compiling query expression: 
'DbSet<Sucursal>()
    .FirstOrDefault(e => EF.Property<int>(e, "Id") == __p_0)'
2026-01-28 16:21:59.755 -03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Sucursal>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Sucursal>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Sucursal.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Sucursal.Activo (bool) Required, 1], [Property: Sucursal.Ciudad (string), 2], [Property: Sucursal.CreatedAt (DateTime) Required, 3], [Property: Sucursal.Direccion (string), 4], [Property: Sucursal.EmpresaId (int) Required FK Index, 5], [Property: Sucursal.Nombre (string) Required MaxLength(255), 6], [Property: Sucursal.Region (string), 7], [Property: Sucursal.Telefono (string), 8], [Property: Sucursal.UpdatedAt (DateTime?), 9] }
            SELECT TOP(1) s.Id, s.Activo, s.Ciudad, s.CreatedAt, s.Direccion, s.EmpresaId, s.Nombre, s.Region, s.Telefono, s.UpdatedAt
            FROM Sucursales AS s
            WHERE s.Id == @__p_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Sucursal.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Sucursal.Activo (bool) Required, 1], [Property: Sucursal.Ciudad (string), 2], [Property: Sucursal.CreatedAt (DateTime) Required, 3], [Property: Sucursal.Direccion (string), 4], [Property: Sucursal.EmpresaId (int) Required FK Index, 5], [Property: Sucursal.Nombre (string) Required MaxLength(255), 6], [Property: Sucursal.Region (string), 7], [Property: Sucursal.Telefono (string), 8], [Property: Sucursal.UpdatedAt (DateTime?), 9] }
            SELECT TOP(1) s.Id, s.Activo, s.Ciudad, s.CreatedAt, s.Direccion, s.EmpresaId, s.Nombre, s.Region, s.Telefono, s.UpdatedAt
            FROM Sucursales AS s
            WHERE s.Id == @__p_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Sucursal entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Sucursal instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Sucursal);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Sucursal.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Sucursal").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (Sucursal)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Sucursal | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Sucursal")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Sucursal | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Sucursal")]: 
                            {
                                return 
                                {
                                    Sucursal instance;
                                    instance = new Sucursal();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Activo>k__BackingField = dataReader.GetBoolean(1);
                                    instance.<Ciudad>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(3);
                                    instance.<Direccion>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<EmpresaId>k__BackingField = dataReader.GetInt32(5);
                                    instance.<Nombre>k__BackingField = dataReader.GetString(6);
                                    instance.<Region>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<Telefono>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(9) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(9);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Sucursal | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Sucursal")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Sucursal)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: Project_Gon.Infrastructure.Data.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2026-01-28 16:21:59.762 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:21:59.763 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:21:59.763 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:21:59.764 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:21:59.764 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:21:59.765 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Activo", s."Ciudad", s."CreatedAt", s."Direccion", s."EmpresaId", s."Nombre", s."Region", s."Telefono", s."UpdatedAt"
FROM "Sucursales" AS s
WHERE s."Id" = @__p_0
LIMIT 1
2026-01-28 16:21:59.767 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Activo", s."Ciudad", s."CreatedAt", s."Direccion", s."EmpresaId", s."Nombre", s."Region", s."Telefono", s."UpdatedAt"
FROM "Sucursales" AS s
WHERE s."Id" = @__p_0
LIMIT 1
2026-01-28 16:21:59.769 -03:00 [DBG] Context 'AppDbContext' started tracking 'Sucursal' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:21:59.770 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:21:59.771 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 2ms reading results.
2026-01-28 16:21:59.772 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:21:59.772 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:21:59.776 -03:00 [DBG] Compiling query expression: 
'DbSet<Usuario>()
    .Where(u => u.Rut == __rutLimpio_0 && u.EmpresaId == __8__locals1_registerDto_EmpresaId_1)
    .AsNoTracking()
    .FirstOrDefault()'
2026-01-28 16:21:59.784 -03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Usuario>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Usuario>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Usuario.Activo (bool) Required, 1], [Property: Usuario.Apellido (string) Required, 2], [Property: Usuario.CreatedAt (DateTime) Required, 3], [Property: Usuario.Email (string) Index MaxLength(255), 4], [Property: Usuario.EmpresaId (int) Required FK Index, 5], [Property: Usuario.Nombre (string) Required, 6], [Property: Usuario.PasswordHash (string) Required, 7], [Property: Usuario.Rol (RolUsuario) Required, 8], [Property: Usuario.Rut (string) Index MaxLength(12), 9], [Property: Usuario.SucursalId (int?) FK Index, 10], [Property: Usuario.UltimoAcceso (DateTime?), 11], [Property: Usuario.UpdatedAt (DateTime?), 12] }
            SELECT TOP(1) u.Id, u.Activo, u.Apellido, u.CreatedAt, u.Email, u.EmpresaId, u.Nombre, u.PasswordHash, u.Rol, u.Rut, u.SucursalId, u.UltimoAcceso, u.UpdatedAt
            FROM Usuarios AS u
            WHERE (u.Rut == @__rutLimpio_0) && (u.EmpresaId == @__8__locals1_registerDto_EmpresaId_1)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Usuario.Activo (bool) Required, 1], [Property: Usuario.Apellido (string) Required, 2], [Property: Usuario.CreatedAt (DateTime) Required, 3], [Property: Usuario.Email (string) Index MaxLength(255), 4], [Property: Usuario.EmpresaId (int) Required FK Index, 5], [Property: Usuario.Nombre (string) Required, 6], [Property: Usuario.PasswordHash (string) Required, 7], [Property: Usuario.Rol (RolUsuario) Required, 8], [Property: Usuario.Rut (string) Index MaxLength(12), 9], [Property: Usuario.SucursalId (int?) FK Index, 10], [Property: Usuario.UltimoAcceso (DateTime?), 11], [Property: Usuario.UpdatedAt (DateTime?), 12] }
            SELECT TOP(1) u.Id, u.Activo, u.Apellido, u.CreatedAt, u.Email, u.EmpresaId, u.Nombre, u.PasswordHash, u.Rol, u.Rut, u.SucursalId, u.UltimoAcceso, u.UpdatedAt
            FROM Usuarios AS u
            WHERE (u.Rut == @__rutLimpio_0) && (u.EmpresaId == @__8__locals1_registerDto_EmpresaId_1), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Usuario entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Usuario instance1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Usuario);
                (object)dataReader.GetInt32(0) != null ? 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")]: 
                            {
                                return 
                                {
                                    Usuario instance;
                                    instance = new Usuario();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Activo>k__BackingField = dataReader.GetBoolean(1);
                                    instance.<Apellido>k__BackingField = dataReader.GetString(2);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(3);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<EmpresaId>k__BackingField = dataReader.GetInt32(5);
                                    instance.<Nombre>k__BackingField = dataReader.GetString(6);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(7);
                                    instance.<Rol>k__BackingField = Invoke(((EnumToNumberConverter<RolUsuario, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Usuario.Rol (RolUsuario) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario").FindProperty("Rol")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(8));
                                    instance.<Rut>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<SucursalId>k__BackingField = dataReader.IsDBNull(10) ? default(int?) : (int?)dataReader.GetInt32(10);
                                    instance.<UltimoAcceso>k__BackingField = dataReader.IsDBNull(11) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(11);
                                    instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(12) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(12);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Usuario)
                    }
                    ;
                    return instance1;
                } : 
                {
                    object[] keyValues1;
                    keyValues1 = new object[]{ (object)dataReader.GetInt32(0) };
                    return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                        entityType: [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")], 
                        properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario").FindPrimaryKey().Properties], 
                        keyValues: keyValues1);
                };
                return instance1;
            };
            return entity;
        }, 
        contextType: Project_Gon.Infrastructure.Data.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2026-01-28 16:21:59.796 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:21:59.796 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:21:59.797 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:21:59.797 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:21:59.798 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:21:59.799 -03:00 [DBG] Executing DbCommand [Parameters=[@__rutLimpio_0='?', @__8__locals1_registerDto_EmpresaId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Rut" = @__rutLimpio_0 AND u."EmpresaId" = @__8__locals1_registerDto_EmpresaId_1
LIMIT 1
2026-01-28 16:21:59.802 -03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__rutLimpio_0='?', @__8__locals1_registerDto_EmpresaId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Rut" = @__rutLimpio_0 AND u."EmpresaId" = @__8__locals1_registerDto_EmpresaId_1
LIMIT 1
2026-01-28 16:21:59.804 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:21:59.805 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-01-28 16:21:59.806 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:21:59.806 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:21:59.807 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-01-28 16:21:59.808 -03:00 [DBG] No information found on request to perform content negotiation.
2026-01-28 16:21:59.809 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-01-28 16:21:59.809 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-01-28 16:21:59.810 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2026-01-28 16:21:59.810 -03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2026-01-28 16:21:59.811 -03:00 [INF] Executed action Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api) in 85.1168ms
2026-01-28 16:21:59.812 -03:00 [INF] Executed endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)'
2026-01-28 16:21:59.812 -03:00 [INF] HTTP POST /api/auth/register responded 400 in 92.4794 ms
2026-01-28 16:21:59.813 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 16:21:59.814 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:21:59.814 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:21:59.815 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/auth/register - 400 null text/plain; charset=utf-8 103.5306ms
2026-01-28 16:22:25.024 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5070/api/auth/login - application/json 59
2026-01-28 16:22:25.025 -03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2026-01-28 16:22:25.026 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)' with route pattern 'api/Auth/login' is valid for the request path '/api/auth/login'
2026-01-28 16:22:25.027 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 16:22:25.028 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 16:22:25.028 -03:00 [DBG] Redirecting to 'https://localhost:7058/api/auth/login'.
2026-01-28 16:22:25.029 -03:00 [DBG] Connection id "0HNIUK9JR3N8G" completed keep alive response.
2026-01-28 16:22:25.029 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5070/api/auth/login - 307 0 null 5.1992ms
2026-01-28 16:22:25.030 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/auth/login - application/json 59
2026-01-28 16:22:25.031 -03:00 [DBG] Connection id "0HNIUK9JR3N8G", Request id "0HNIUK9JR3N8G:00000005": started reading request body.
2026-01-28 16:22:25.032 -03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2026-01-28 16:22:25.033 -03:00 [DBG] Connection id "0HNIUK9JR3N8G", Request id "0HNIUK9JR3N8G:00000005": done reading request body.
2026-01-28 16:22:25.033 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)' with route pattern 'api/Auth/login' is valid for the request path '/api/auth/login'
2026-01-28 16:22:25.035 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 16:22:25.035 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 16:22:25.036 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 16:22:25.036 -03:00 [INF] Executing endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 16:22:25.039 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Project_Gon.Core.DTOs.Auth.LoginDto) on controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api).
2026-01-28 16:22:25.040 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-01-28 16:22:25.040 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-01-28 16:22:25.041 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-01-28 16:22:25.042 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-01-28 16:22:25.043 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-01-28 16:22:25.044 -03:00 [DBG] Executing controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-01-28 16:22:25.045 -03:00 [DBG] Executed controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-01-28 16:22:25.045 -03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' ...
2026-01-28 16:22:25.046 -03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' using the name '' in request data ...
2026-01-28 16:22:25.047 -03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2026-01-28 16:22:25.048 -03:00 [DBG] Connection id "0HNIUK9JR3N8H", Request id "0HNIUK9JR3N8H:00000009": started reading request body.
2026-01-28 16:22:25.049 -03:00 [DBG] Connection id "0HNIUK9JR3N8H", Request id "0HNIUK9JR3N8H:00000009": done reading request body.
2026-01-28 16:22:25.049 -03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Project_Gon.Core.DTOs.Auth.LoginDto'
2026-01-28 16:22:25.050 -03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 16:22:25.051 -03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 16:22:25.051 -03:00 [DBG] Attempting to validate the bound parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' ...
2026-01-28 16:22:25.052 -03:00 [DBG] Done attempting to validate the bound parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 16:22:25.054 -03:00 [INF] [LOGIN] Intento de login con: 12345678-9
2026-01-28 16:22:25.055 -03:00 [DBG] [CLEAN_RUT] Original: 12345678-9 -> Limpio: 12345678-9
2026-01-28 16:22:25.056 -03:00 [INF] [FIND] Buscando por RUT limpio: 12345678-9
2026-01-28 16:22:25.056 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 16:22:25.058 -03:00 [DBG] Compiling query expression: 
'DbSet<Usuario>()
    .Where(u => u.Rut == __rutLimpio_0 && u.Activo)
    .AsNoTracking()
    .FirstOrDefault()'
2026-01-28 16:22:25.061 -03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Usuario>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Usuario>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Usuario.Activo (bool) Required, 1], [Property: Usuario.Apellido (string) Required, 2], [Property: Usuario.CreatedAt (DateTime) Required, 3], [Property: Usuario.Email (string) Index MaxLength(255), 4], [Property: Usuario.EmpresaId (int) Required FK Index, 5], [Property: Usuario.Nombre (string) Required, 6], [Property: Usuario.PasswordHash (string) Required, 7], [Property: Usuario.Rol (RolUsuario) Required, 8], [Property: Usuario.Rut (string) Index MaxLength(12), 9], [Property: Usuario.SucursalId (int?) FK Index, 10], [Property: Usuario.UltimoAcceso (DateTime?), 11], [Property: Usuario.UpdatedAt (DateTime?), 12] }
            SELECT TOP(1) u.Id, u.Activo, u.Apellido, u.CreatedAt, u.Email, u.EmpresaId, u.Nombre, u.PasswordHash, u.Rol, u.Rut, u.SucursalId, u.UltimoAcceso, u.UpdatedAt
            FROM Usuarios AS u
            WHERE (u.Rut == @__rutLimpio_0) && u.Activo) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Usuario.Activo (bool) Required, 1], [Property: Usuario.Apellido (string) Required, 2], [Property: Usuario.CreatedAt (DateTime) Required, 3], [Property: Usuario.Email (string) Index MaxLength(255), 4], [Property: Usuario.EmpresaId (int) Required FK Index, 5], [Property: Usuario.Nombre (string) Required, 6], [Property: Usuario.PasswordHash (string) Required, 7], [Property: Usuario.Rol (RolUsuario) Required, 8], [Property: Usuario.Rut (string) Index MaxLength(12), 9], [Property: Usuario.SucursalId (int?) FK Index, 10], [Property: Usuario.UltimoAcceso (DateTime?), 11], [Property: Usuario.UpdatedAt (DateTime?), 12] }
            SELECT TOP(1) u.Id, u.Activo, u.Apellido, u.CreatedAt, u.Email, u.EmpresaId, u.Nombre, u.PasswordHash, u.Rol, u.Rut, u.SucursalId, u.UltimoAcceso, u.UpdatedAt
            FROM Usuarios AS u
            WHERE (u.Rut == @__rutLimpio_0) && u.Activo, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Usuario entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Usuario instance1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Usuario);
                (object)dataReader.GetInt32(0) != null ? 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")]: 
                            {
                                return 
                                {
                                    Usuario instance;
                                    instance = new Usuario();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Activo>k__BackingField = dataReader.GetBoolean(1);
                                    instance.<Apellido>k__BackingField = dataReader.GetString(2);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(3);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<EmpresaId>k__BackingField = dataReader.GetInt32(5);
                                    instance.<Nombre>k__BackingField = dataReader.GetString(6);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(7);
                                    instance.<Rol>k__BackingField = Invoke(((EnumToNumberConverter<RolUsuario, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Usuario.Rol (RolUsuario) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario").FindProperty("Rol")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(8));
                                    instance.<Rut>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<SucursalId>k__BackingField = dataReader.IsDBNull(10) ? default(int?) : (int?)dataReader.GetInt32(10);
                                    instance.<UltimoAcceso>k__BackingField = dataReader.IsDBNull(11) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(11);
                                    instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(12) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(12);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Usuario)
                    }
                    ;
                    return instance1;
                } : 
                {
                    object[] keyValues1;
                    keyValues1 = new object[]{ (object)dataReader.GetInt32(0) };
                    return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                        entityType: [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")], 
                        properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario").FindPrimaryKey().Properties], 
                        keyValues: keyValues1);
                };
                return instance1;
            };
            return entity;
        }, 
        contextType: Project_Gon.Infrastructure.Data.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2026-01-28 16:22:25.069 -03:00 [DBG] Creating DbConnection.
2026-01-28 16:22:25.069 -03:00 [DBG] Created DbConnection. (0ms).
2026-01-28 16:22:25.070 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:22:25.070 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:22:25.071 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:22:25.072 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:22:25.072 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:22:25.073 -03:00 [DBG] Executing DbCommand [Parameters=[@__rutLimpio_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Rut" = @__rutLimpio_0 AND u."Activo"
LIMIT 1
2026-01-28 16:22:25.074 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__rutLimpio_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Rut" = @__rutLimpio_0 AND u."Activo"
LIMIT 1
2026-01-28 16:22:25.075 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:22:25.076 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-01-28 16:22:25.077 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:22:25.077 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:22:25.078 -03:00 [INF] [FIND] Usuario encontrado - ID: 2, RUT: 12345678-9
2026-01-28 16:22:25.079 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:22:25.079 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:22:25.080 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:22:25.081 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:22:25.081 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:22:25.082 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 16:22:25.083 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 16:22:25.085 -03:00 [DBG] Context 'AppDbContext' started tracking 'Empresa' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:22:25.086 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:22:25.086 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-01-28 16:22:25.087 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:22:25.088 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:22:25.088 -03:00 [INF] [LOGIN] Usuario encontrado: true
2026-01-28 16:22:25.089 -03:00 [INF] [LOGIN] Usuario ID: 2, RUT: 12345678-9, Email: null, Activo: true
2026-01-28 16:22:25.090 -03:00 [INF] [LOGIN] Verificando contraseña para usuario ID: 2
2026-01-28 16:22:25.540 -03:00 [INF] [LOGIN] Password válido: false
2026-01-28 16:22:25.541 -03:00 [WRN] [LOGIN] Login rechazado - Contraseña incorrecta para usuario ID: 2
2026-01-28 16:22:25.542 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-01-28 16:22:25.543 -03:00 [DBG] No information found on request to perform content negotiation.
2026-01-28 16:22:25.543 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-01-28 16:22:25.544 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-01-28 16:22:25.544 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2026-01-28 16:22:25.545 -03:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'System.String'.
2026-01-28 16:22:25.546 -03:00 [INF] Executed action Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api) in 501.9279ms
2026-01-28 16:22:25.546 -03:00 [INF] Executed endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 16:22:25.547 -03:00 [INF] HTTP POST /api/auth/login responded 401 in 511.1191 ms
2026-01-28 16:22:25.547 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 16:22:25.548 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:22:25.549 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (1ms).
2026-01-28 16:22:25.550 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/auth/login - 401 null text/plain; charset=utf-8 520.5081ms
2026-01-28 16:22:50.060 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5070/api/auth/login - application/json 70
2026-01-28 16:22:50.061 -03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2026-01-28 16:22:50.062 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)' with route pattern 'api/Auth/login' is valid for the request path '/api/auth/login'
2026-01-28 16:22:50.064 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 16:22:50.064 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 16:22:50.065 -03:00 [DBG] Redirecting to 'https://localhost:7058/api/auth/login'.
2026-01-28 16:22:50.066 -03:00 [DBG] Connection id "0HNIUK9JR3N8G" completed keep alive response.
2026-01-28 16:22:50.066 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5070/api/auth/login - 307 0 null 6.6499ms
2026-01-28 16:22:50.067 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/auth/login - application/json 70
2026-01-28 16:22:50.068 -03:00 [DBG] Connection id "0HNIUK9JR3N8G", Request id "0HNIUK9JR3N8G:00000006": started reading request body.
2026-01-28 16:22:50.069 -03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2026-01-28 16:22:50.070 -03:00 [DBG] Connection id "0HNIUK9JR3N8G", Request id "0HNIUK9JR3N8G:00000006": done reading request body.
2026-01-28 16:22:50.071 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)' with route pattern 'api/Auth/login' is valid for the request path '/api/auth/login'
2026-01-28 16:22:50.074 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 16:22:50.075 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 16:22:50.075 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 16:22:50.076 -03:00 [INF] Executing endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 16:22:50.076 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Project_Gon.Core.DTOs.Auth.LoginDto) on controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api).
2026-01-28 16:22:50.078 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-01-28 16:22:50.079 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-01-28 16:22:50.080 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-01-28 16:22:50.081 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-01-28 16:22:50.082 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-01-28 16:22:50.086 -03:00 [DBG] Executing controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-01-28 16:22:50.087 -03:00 [DBG] Executed controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-01-28 16:22:50.088 -03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' ...
2026-01-28 16:22:50.089 -03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' using the name '' in request data ...
2026-01-28 16:22:50.090 -03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2026-01-28 16:22:50.091 -03:00 [DBG] Connection id "0HNIUK9JR3N8H", Request id "0HNIUK9JR3N8H:0000000B": started reading request body.
2026-01-28 16:22:50.092 -03:00 [DBG] Connection id "0HNIUK9JR3N8H", Request id "0HNIUK9JR3N8H:0000000B": done reading request body.
2026-01-28 16:22:50.092 -03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Project_Gon.Core.DTOs.Auth.LoginDto'
2026-01-28 16:22:50.093 -03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 16:22:50.094 -03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 16:22:50.094 -03:00 [DBG] Attempting to validate the bound parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' ...
2026-01-28 16:22:50.095 -03:00 [DBG] Done attempting to validate the bound parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 16:22:50.096 -03:00 [INF] [LOGIN] Intento de login con: vendedor@empresa.com
2026-01-28 16:22:50.097 -03:00 [INF] [FIND] Buscando por EMAIL: vendedor@empresa.com
2026-01-28 16:22:50.098 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 16:22:50.099 -03:00 [DBG] Compiling query expression: 
'DbSet<Usuario>()
    .Where(u => u.Email == __emailOrRut_0 && u.Activo)
    .AsNoTracking()
    .FirstOrDefault()'
2026-01-28 16:22:50.105 -03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Usuario>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Usuario>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Usuario.Activo (bool) Required, 1], [Property: Usuario.Apellido (string) Required, 2], [Property: Usuario.CreatedAt (DateTime) Required, 3], [Property: Usuario.Email (string) Index MaxLength(255), 4], [Property: Usuario.EmpresaId (int) Required FK Index, 5], [Property: Usuario.Nombre (string) Required, 6], [Property: Usuario.PasswordHash (string) Required, 7], [Property: Usuario.Rol (RolUsuario) Required, 8], [Property: Usuario.Rut (string) Index MaxLength(12), 9], [Property: Usuario.SucursalId (int?) FK Index, 10], [Property: Usuario.UltimoAcceso (DateTime?), 11], [Property: Usuario.UpdatedAt (DateTime?), 12] }
            SELECT TOP(1) u.Id, u.Activo, u.Apellido, u.CreatedAt, u.Email, u.EmpresaId, u.Nombre, u.PasswordHash, u.Rol, u.Rut, u.SucursalId, u.UltimoAcceso, u.UpdatedAt
            FROM Usuarios AS u
            WHERE (u.Email == @__emailOrRut_0) && u.Activo) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Usuario.Activo (bool) Required, 1], [Property: Usuario.Apellido (string) Required, 2], [Property: Usuario.CreatedAt (DateTime) Required, 3], [Property: Usuario.Email (string) Index MaxLength(255), 4], [Property: Usuario.EmpresaId (int) Required FK Index, 5], [Property: Usuario.Nombre (string) Required, 6], [Property: Usuario.PasswordHash (string) Required, 7], [Property: Usuario.Rol (RolUsuario) Required, 8], [Property: Usuario.Rut (string) Index MaxLength(12), 9], [Property: Usuario.SucursalId (int?) FK Index, 10], [Property: Usuario.UltimoAcceso (DateTime?), 11], [Property: Usuario.UpdatedAt (DateTime?), 12] }
            SELECT TOP(1) u.Id, u.Activo, u.Apellido, u.CreatedAt, u.Email, u.EmpresaId, u.Nombre, u.PasswordHash, u.Rol, u.Rut, u.SucursalId, u.UltimoAcceso, u.UpdatedAt
            FROM Usuarios AS u
            WHERE (u.Email == @__emailOrRut_0) && u.Activo, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Usuario entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Usuario instance1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Usuario);
                (object)dataReader.GetInt32(0) != null ? 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")]: 
                            {
                                return 
                                {
                                    Usuario instance;
                                    instance = new Usuario();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Activo>k__BackingField = dataReader.GetBoolean(1);
                                    instance.<Apellido>k__BackingField = dataReader.GetString(2);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(3);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<EmpresaId>k__BackingField = dataReader.GetInt32(5);
                                    instance.<Nombre>k__BackingField = dataReader.GetString(6);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(7);
                                    instance.<Rol>k__BackingField = Invoke(((EnumToNumberConverter<RolUsuario, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Usuario.Rol (RolUsuario) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario").FindProperty("Rol")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(8));
                                    instance.<Rut>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<SucursalId>k__BackingField = dataReader.IsDBNull(10) ? default(int?) : (int?)dataReader.GetInt32(10);
                                    instance.<UltimoAcceso>k__BackingField = dataReader.IsDBNull(11) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(11);
                                    instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(12) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(12);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Usuario)
                    }
                    ;
                    return instance1;
                } : 
                {
                    object[] keyValues1;
                    keyValues1 = new object[]{ (object)dataReader.GetInt32(0) };
                    return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                        entityType: [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")], 
                        properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario").FindPrimaryKey().Properties], 
                        keyValues: keyValues1);
                };
                return instance1;
            };
            return entity;
        }, 
        contextType: Project_Gon.Infrastructure.Data.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2026-01-28 16:22:50.119 -03:00 [DBG] Creating DbConnection.
2026-01-28 16:22:50.119 -03:00 [DBG] Created DbConnection. (0ms).
2026-01-28 16:22:50.120 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:22:50.121 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:22:50.121 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:22:50.122 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:22:50.123 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:22:50.124 -03:00 [DBG] Executing DbCommand [Parameters=[@__emailOrRut_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Email" = @__emailOrRut_0 AND u."Activo"
LIMIT 1
2026-01-28 16:22:50.126 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__emailOrRut_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Email" = @__emailOrRut_0 AND u."Activo"
LIMIT 1
2026-01-28 16:22:50.127 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:22:50.128 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-01-28 16:22:50.129 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:22:50.130 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:22:50.133 -03:00 [INF] [FIND] Usuario encontrado - ID: 3, RUT: 12345678-9
2026-01-28 16:22:50.134 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:22:50.134 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:22:50.135 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:22:50.136 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:22:50.141 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2026-01-28 16:22:50.142 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 16:22:50.144 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 16:22:50.146 -03:00 [DBG] Context 'AppDbContext' started tracking 'Empresa' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:22:50.149 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:22:50.149 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 3ms reading results.
2026-01-28 16:22:50.150 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:22:50.151 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:22:50.152 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:22:50.153 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:22:50.154 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:22:50.154 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:22:50.155 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:22:50.156 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Activo", s."Ciudad", s."CreatedAt", s."Direccion", s."EmpresaId", s."Nombre", s."Region", s."Telefono", s."UpdatedAt"
FROM "Sucursales" AS s
WHERE s."Id" = @__p_0
LIMIT 1
2026-01-28 16:22:50.158 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Activo", s."Ciudad", s."CreatedAt", s."Direccion", s."EmpresaId", s."Nombre", s."Region", s."Telefono", s."UpdatedAt"
FROM "Sucursales" AS s
WHERE s."Id" = @__p_0
LIMIT 1
2026-01-28 16:22:50.160 -03:00 [DBG] Context 'AppDbContext' started tracking 'Sucursal' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:22:50.161 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:22:50.162 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-01-28 16:22:50.165 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:22:50.166 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:22:50.167 -03:00 [INF] [LOGIN] Usuario encontrado: true
2026-01-28 16:22:50.167 -03:00 [INF] [LOGIN] Usuario ID: 3, RUT: 12345678-9, Email: vendedor@empresa.com, Activo: true
2026-01-28 16:22:50.168 -03:00 [INF] [LOGIN] Verificando contraseña para usuario ID: 3
2026-01-28 16:22:50.381 -03:00 [INF] [LOGIN] Password válido: true
2026-01-28 16:22:50.410 -03:00 [DBG] Context 'AppDbContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:22:50.411 -03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2026-01-28 16:22:50.412 -03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2026-01-28 16:22:50.413 -03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2026-01-28 16:22:50.422 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:22:50.423 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:22:50.424 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:22:50.424 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:22:50.426 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2026-01-28 16:22:50.426 -03:00 [DBG] Executing DbCommand [Parameters=[@p12='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = Int32), @p5='?', @p6='?', @p7='?' (DbType = Int32), @p8='?', @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Usuarios" SET "Activo" = @p0, "Apellido" = @p1, "CreatedAt" = @p2, "Email" = @p3, "EmpresaId" = @p4, "Nombre" = @p5, "PasswordHash" = @p6, "Rol" = @p7, "Rut" = @p8, "SucursalId" = @p9, "UltimoAcceso" = @p10, "UpdatedAt" = @p11
WHERE "Id" = @p12;
2026-01-28 16:22:50.464 -03:00 [INF] Executed DbCommand (38ms) [Parameters=[@p12='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = Int32), @p5='?', @p6='?', @p7='?' (DbType = Int32), @p8='?', @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Usuarios" SET "Activo" = @p0, "Apellido" = @p1, "CreatedAt" = @p2, "Email" = @p3, "EmpresaId" = @p4, "Nombre" = @p5, "PasswordHash" = @p6, "Rol" = @p7, "Rut" = @p8, "SucursalId" = @p9, "UltimoAcceso" = @p10, "UpdatedAt" = @p11
WHERE "Id" = @p12;
2026-01-28 16:22:50.467 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:22:50.468 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-01-28 16:22:50.469 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:22:50.469 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:22:50.471 -03:00 [DBG] An entity of type 'Usuario' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:22:50.472 -03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2026-01-28 16:22:50.473 -03:00 [INF] [LOGIN] Login exitoso para usuario ID: 3
2026-01-28 16:22:50.487 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-01-28 16:22:50.489 -03:00 [DBG] No information found on request to perform content negotiation.
2026-01-28 16:22:50.490 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-01-28 16:22:50.490 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-01-28 16:22:50.491 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-01-28 16:22:50.492 -03:00 [INF] Executing OkObjectResult, writing value of type 'Project_Gon.Core.DTOs.Auth.LoginResponseDto'.
2026-01-28 16:22:50.496 -03:00 [INF] Executed action Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api) in 409.8068ms
2026-01-28 16:22:50.496 -03:00 [INF] Executed endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 16:22:50.497 -03:00 [INF] HTTP POST /api/auth/login responded 200 in 422.0239 ms
2026-01-28 16:22:50.498 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 16:22:50.499 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:22:50.500 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:22:50.501 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/auth/login - 200 null application/json; charset=utf-8 434.1548ms
2026-01-28 16:24:26.591 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5070/api/auth/login - application/json 60
2026-01-28 16:24:26.593 -03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2026-01-28 16:24:26.594 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)' with route pattern 'api/Auth/login' is valid for the request path '/api/auth/login'
2026-01-28 16:24:26.596 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 16:24:26.597 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 16:24:26.598 -03:00 [DBG] Redirecting to 'https://localhost:7058/api/auth/login'.
2026-01-28 16:24:26.599 -03:00 [DBG] Connection id "0HNIUK9JR3N8G" completed keep alive response.
2026-01-28 16:24:26.600 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/auth/login - application/json 60
2026-01-28 16:24:26.601 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5070/api/auth/login - 307 0 null 9.1009ms
2026-01-28 16:24:26.602 -03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2026-01-28 16:24:26.603 -03:00 [DBG] Connection id "0HNIUK9JR3N8G", Request id "0HNIUK9JR3N8G:00000007": started reading request body.
2026-01-28 16:24:26.604 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)' with route pattern 'api/Auth/login' is valid for the request path '/api/auth/login'
2026-01-28 16:24:26.605 -03:00 [DBG] Connection id "0HNIUK9JR3N8G", Request id "0HNIUK9JR3N8G:00000007": done reading request body.
2026-01-28 16:24:26.606 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 16:24:26.608 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 16:24:26.610 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 16:24:26.611 -03:00 [INF] Executing endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 16:24:26.612 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Project_Gon.Core.DTOs.Auth.LoginDto) on controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api).
2026-01-28 16:24:26.613 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-01-28 16:24:26.614 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-01-28 16:24:26.615 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-01-28 16:24:26.616 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-01-28 16:24:26.617 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-01-28 16:24:26.618 -03:00 [DBG] Executing controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-01-28 16:24:26.619 -03:00 [DBG] Executed controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-01-28 16:24:26.620 -03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' ...
2026-01-28 16:24:26.621 -03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' using the name '' in request data ...
2026-01-28 16:24:26.622 -03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2026-01-28 16:24:26.623 -03:00 [DBG] Connection id "0HNIUK9JR3N8H", Request id "0HNIUK9JR3N8H:0000000D": started reading request body.
2026-01-28 16:24:26.623 -03:00 [DBG] Connection id "0HNIUK9JR3N8H", Request id "0HNIUK9JR3N8H:0000000D": done reading request body.
2026-01-28 16:24:26.626 -03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Project_Gon.Core.DTOs.Auth.LoginDto'
2026-01-28 16:24:26.627 -03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 16:24:26.628 -03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 16:24:26.628 -03:00 [DBG] Attempting to validate the bound parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' ...
2026-01-28 16:24:26.629 -03:00 [DBG] Done attempting to validate the bound parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 16:24:26.630 -03:00 [INF] [LOGIN] Intento de login con: 12345678-9
2026-01-28 16:24:26.630 -03:00 [DBG] [CLEAN_RUT] Original: 12345678-9 -> Limpio: 12345678-9
2026-01-28 16:24:26.631 -03:00 [INF] [FIND] Buscando por RUT limpio: 12345678-9
2026-01-28 16:24:26.632 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 16:24:26.633 -03:00 [DBG] Creating DbConnection.
2026-01-28 16:24:26.634 -03:00 [DBG] Created DbConnection. (0ms).
2026-01-28 16:24:26.634 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:24:26.635 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:24:26.636 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:24:26.637 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:24:26.637 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:24:26.638 -03:00 [DBG] Executing DbCommand [Parameters=[@__rutLimpio_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Rut" = @__rutLimpio_0 AND u."Activo"
LIMIT 1
2026-01-28 16:24:26.642 -03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__rutLimpio_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Rut" = @__rutLimpio_0 AND u."Activo"
LIMIT 1
2026-01-28 16:24:26.644 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:24:26.645 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-01-28 16:24:26.646 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:24:26.646 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:24:26.647 -03:00 [INF] [FIND] Usuario encontrado - ID: 2, RUT: 12345678-9
2026-01-28 16:24:26.648 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:24:26.649 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:24:26.649 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:24:26.650 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:24:26.651 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:24:26.651 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 16:24:26.653 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 16:24:26.655 -03:00 [DBG] Context 'AppDbContext' started tracking 'Empresa' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:24:26.658 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:24:26.659 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 4ms reading results.
2026-01-28 16:24:26.660 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:24:26.661 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:24:26.662 -03:00 [INF] [LOGIN] Usuario encontrado: true
2026-01-28 16:24:26.662 -03:00 [INF] [LOGIN] Usuario ID: 2, RUT: 12345678-9, Email: null, Activo: true
2026-01-28 16:24:26.663 -03:00 [INF] [LOGIN] Verificando contraseña para usuario ID: 2
2026-01-28 16:24:26.871 -03:00 [INF] [LOGIN] Password válido: false
2026-01-28 16:24:26.872 -03:00 [WRN] [LOGIN] Login rechazado - Contraseña incorrecta para usuario ID: 2
2026-01-28 16:24:26.873 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-01-28 16:24:26.875 -03:00 [DBG] No information found on request to perform content negotiation.
2026-01-28 16:24:26.875 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-01-28 16:24:26.876 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-01-28 16:24:26.877 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2026-01-28 16:24:26.878 -03:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'System.String'.
2026-01-28 16:24:26.878 -03:00 [INF] Executed action Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api) in 260.2249ms
2026-01-28 16:24:26.879 -03:00 [INF] Executed endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 16:24:26.880 -03:00 [INF] HTTP POST /api/auth/login responded 401 in 269.6325 ms
2026-01-28 16:24:26.881 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 16:24:26.882 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:24:26.882 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:24:26.883 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/auth/login - 401 null text/plain; charset=utf-8 283.4341ms
2026-01-28 16:26:37.566 -03:00 [DBG] Connection id "0HNIUK9JR3N8G" disconnecting.
2026-01-28 16:26:37.569 -03:00 [DBG] Connection id "0HNIUK9JR3N8G" stopped.
2026-01-28 16:26:37.570 -03:00 [DBG] Connection id "0HNIUK9JR3N8G" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-01-28 16:26:39.582 -03:00 [DBG] Connection id "0HNIUK9JR3N8H" is closing.
2026-01-28 16:26:39.582 -03:00 [DBG] Connection id "0HNIUK9JR3N8H" is closed. The last processed stream ID was 13.
2026-01-28 16:26:39.585 -03:00 [DBG] The connection queue processing loop for 0HNIUK9JR3N8H completed.
2026-01-28 16:26:39.586 -03:00 [DBG] Connection id "0HNIUK9JR3N8H" stopped.
2026-01-28 16:26:39.587 -03:00 [DBG] Connection id "0HNIUK9JR3N8H" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-01-28 16:28:43.320 -03:00 [DBG] Connection id "0HNIUK9JR3N8I" accepted.
2026-01-28 16:28:43.322 -03:00 [DBG] Connection id "0HNIUK9JR3N8I" started.
2026-01-28 16:28:43.322 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5070/api/auth/login - application/json 60
2026-01-28 16:28:43.324 -03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2026-01-28 16:28:43.325 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)' with route pattern 'api/Auth/login' is valid for the request path '/api/auth/login'
2026-01-28 16:28:43.327 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 16:28:43.327 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 16:28:43.328 -03:00 [DBG] Redirecting to 'https://localhost:7058/api/auth/login'.
2026-01-28 16:28:43.329 -03:00 [DBG] Connection id "0HNIUK9JR3N8I" completed keep alive response.
2026-01-28 16:28:43.330 -03:00 [DBG] Connection id "0HNIUK9JR3N8J" accepted.
2026-01-28 16:28:43.330 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5070/api/auth/login - 307 0 null 7.4393ms
2026-01-28 16:28:43.331 -03:00 [DBG] Connection id "0HNIUK9JR3N8J" started.
2026-01-28 16:28:43.332 -03:00 [DBG] Connection id "0HNIUK9JR3N8I", Request id "0HNIUK9JR3N8I:00000001": started reading request body.
2026-01-28 16:28:43.334 -03:00 [DBG] Connection id "0HNIUK9JR3N8I", Request id "0HNIUK9JR3N8I:00000001": done reading request body.
2026-01-28 16:28:43.340 -03:00 [DBG] Connection 0HNIUK9JR3N8J established using the following protocol: "Tls12"
2026-01-28 16:28:43.342 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/auth/login - application/json 60
2026-01-28 16:28:43.343 -03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2026-01-28 16:28:43.346 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)' with route pattern 'api/Auth/login' is valid for the request path '/api/auth/login'
2026-01-28 16:28:43.347 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 16:28:43.348 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 16:28:43.349 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 16:28:43.349 -03:00 [INF] Executing endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 16:28:43.350 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Project_Gon.Core.DTOs.Auth.LoginDto) on controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api).
2026-01-28 16:28:43.352 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-01-28 16:28:43.353 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-01-28 16:28:43.354 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-01-28 16:28:43.355 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-01-28 16:28:43.356 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-01-28 16:28:43.357 -03:00 [DBG] Executing controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-01-28 16:28:43.359 -03:00 [DBG] Executed controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-01-28 16:28:43.361 -03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' ...
2026-01-28 16:28:43.362 -03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' using the name '' in request data ...
2026-01-28 16:28:43.363 -03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2026-01-28 16:28:43.364 -03:00 [DBG] Connection id "0HNIUK9JR3N8J", Request id "0HNIUK9JR3N8J:00000001": started reading request body.
2026-01-28 16:28:43.365 -03:00 [DBG] Connection id "0HNIUK9JR3N8J", Request id "0HNIUK9JR3N8J:00000001": done reading request body.
2026-01-28 16:28:43.366 -03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Project_Gon.Core.DTOs.Auth.LoginDto'
2026-01-28 16:28:43.367 -03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 16:28:43.367 -03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 16:28:43.368 -03:00 [DBG] Attempting to validate the bound parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' ...
2026-01-28 16:28:43.369 -03:00 [DBG] Done attempting to validate the bound parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 16:28:43.370 -03:00 [INF] [LOGIN] Intento de login con: 12345678-9
2026-01-28 16:28:43.370 -03:00 [DBG] [CLEAN_RUT] Original: 12345678-9 -> Limpio: 12345678-9
2026-01-28 16:28:43.371 -03:00 [INF] [FIND] Buscando por RUT limpio: 12345678-9
2026-01-28 16:28:43.372 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 16:28:43.374 -03:00 [DBG] Creating DbConnection.
2026-01-28 16:28:43.374 -03:00 [DBG] Created DbConnection. (0ms).
2026-01-28 16:28:43.377 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:28:43.520 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:28:43.521 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:28:43.522 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:28:43.523 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:28:43.524 -03:00 [DBG] Executing DbCommand [Parameters=[@__rutLimpio_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Rut" = @__rutLimpio_0 AND u."Activo"
LIMIT 1
2026-01-28 16:28:43.528 -03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__rutLimpio_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Rut" = @__rutLimpio_0 AND u."Activo"
LIMIT 1
2026-01-28 16:28:43.531 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:28:43.532 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-01-28 16:28:43.533 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:28:43.534 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:28:43.535 -03:00 [INF] [FIND] Usuario encontrado - ID: 3, RUT: 12345678-9
2026-01-28 16:28:43.536 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:28:43.536 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:28:43.537 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:28:43.537 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:28:43.538 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:28:43.539 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 16:28:43.542 -03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 16:28:43.544 -03:00 [DBG] Context 'AppDbContext' started tracking 'Empresa' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:28:43.547 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:28:43.548 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 4ms reading results.
2026-01-28 16:28:43.549 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:28:43.550 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:28:43.551 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:28:43.552 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:28:43.552 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:28:43.553 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:28:43.554 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:28:43.554 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Activo", s."Ciudad", s."CreatedAt", s."Direccion", s."EmpresaId", s."Nombre", s."Region", s."Telefono", s."UpdatedAt"
FROM "Sucursales" AS s
WHERE s."Id" = @__p_0
LIMIT 1
2026-01-28 16:28:43.557 -03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Activo", s."Ciudad", s."CreatedAt", s."Direccion", s."EmpresaId", s."Nombre", s."Region", s."Telefono", s."UpdatedAt"
FROM "Sucursales" AS s
WHERE s."Id" = @__p_0
LIMIT 1
2026-01-28 16:28:43.559 -03:00 [DBG] Context 'AppDbContext' started tracking 'Sucursal' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:28:43.562 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:28:43.563 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 3ms reading results.
2026-01-28 16:28:43.564 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:28:43.565 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:28:43.566 -03:00 [INF] [LOGIN] Usuario encontrado: true
2026-01-28 16:28:43.566 -03:00 [INF] [LOGIN] Usuario ID: 3, RUT: 12345678-9, Email: vendedor@empresa.com, Activo: true
2026-01-28 16:28:43.567 -03:00 [INF] [LOGIN] Verificando contraseña para usuario ID: 3
2026-01-28 16:28:43.781 -03:00 [INF] [LOGIN] Password válido: true
2026-01-28 16:28:43.782 -03:00 [DBG] Context 'AppDbContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:28:43.783 -03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2026-01-28 16:28:43.784 -03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2026-01-28 16:28:43.785 -03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2026-01-28 16:28:43.785 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:28:43.786 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:28:43.787 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:28:43.787 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:28:43.788 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:28:43.789 -03:00 [DBG] Executing DbCommand [Parameters=[@p12='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = Int32), @p5='?', @p6='?', @p7='?' (DbType = Int32), @p8='?', @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Usuarios" SET "Activo" = @p0, "Apellido" = @p1, "CreatedAt" = @p2, "Email" = @p3, "EmpresaId" = @p4, "Nombre" = @p5, "PasswordHash" = @p6, "Rol" = @p7, "Rut" = @p8, "SucursalId" = @p9, "UltimoAcceso" = @p10, "UpdatedAt" = @p11
WHERE "Id" = @p12;
2026-01-28 16:28:43.792 -03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p12='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = Int32), @p5='?', @p6='?', @p7='?' (DbType = Int32), @p8='?', @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Usuarios" SET "Activo" = @p0, "Apellido" = @p1, "CreatedAt" = @p2, "Email" = @p3, "EmpresaId" = @p4, "Nombre" = @p5, "PasswordHash" = @p6, "Rol" = @p7, "Rut" = @p8, "SucursalId" = @p9, "UltimoAcceso" = @p10, "UpdatedAt" = @p11
WHERE "Id" = @p12;
2026-01-28 16:28:43.796 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:28:43.797 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-01-28 16:28:43.798 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:28:43.799 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:28:43.800 -03:00 [DBG] An entity of type 'Usuario' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:28:43.801 -03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2026-01-28 16:28:43.802 -03:00 [INF] [LOGIN] Login exitoso para usuario ID: 3
2026-01-28 16:28:43.802 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-01-28 16:28:43.804 -03:00 [DBG] No information found on request to perform content negotiation.
2026-01-28 16:28:43.804 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-01-28 16:28:43.805 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-01-28 16:28:43.806 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-01-28 16:28:43.807 -03:00 [INF] Executing OkObjectResult, writing value of type 'Project_Gon.Core.DTOs.Auth.LoginResponseDto'.
2026-01-28 16:28:43.808 -03:00 [INF] Executed action Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api) in 450.2672ms
2026-01-28 16:28:43.809 -03:00 [INF] Executed endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 16:28:43.811 -03:00 [INF] HTTP POST /api/auth/login responded 200 in 462.8578 ms
2026-01-28 16:28:43.813 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 16:28:43.813 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:28:43.814 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:28:43.815 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/auth/login - 200 null application/json; charset=utf-8 473.5466ms
2026-01-28 16:28:45.667 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5070/api/auth/login - application/json 60
2026-01-28 16:28:45.669 -03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2026-01-28 16:28:45.670 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)' with route pattern 'api/Auth/login' is valid for the request path '/api/auth/login'
2026-01-28 16:28:45.672 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 16:28:45.673 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 16:28:45.674 -03:00 [DBG] Redirecting to 'https://localhost:7058/api/auth/login'.
2026-01-28 16:28:45.675 -03:00 [DBG] Connection id "0HNIUK9JR3N8I" completed keep alive response.
2026-01-28 16:28:45.676 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/auth/login - application/json 60
2026-01-28 16:28:45.677 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5070/api/auth/login - 307 0 null 9.8448ms
2026-01-28 16:28:45.678 -03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2026-01-28 16:28:45.680 -03:00 [DBG] Connection id "0HNIUK9JR3N8I", Request id "0HNIUK9JR3N8I:00000002": started reading request body.
2026-01-28 16:28:45.682 -03:00 [DBG] Connection id "0HNIUK9JR3N8I", Request id "0HNIUK9JR3N8I:00000002": done reading request body.
2026-01-28 16:28:45.681 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)' with route pattern 'api/Auth/login' is valid for the request path '/api/auth/login'
2026-01-28 16:28:45.684 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 16:28:45.685 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 16:28:45.685 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 16:28:45.686 -03:00 [INF] Executing endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 16:28:45.687 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Project_Gon.Core.DTOs.Auth.LoginDto) on controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api).
2026-01-28 16:28:45.688 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-01-28 16:28:45.689 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-01-28 16:28:45.692 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-01-28 16:28:45.694 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-01-28 16:28:45.695 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-01-28 16:28:45.696 -03:00 [DBG] Executing controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-01-28 16:28:45.697 -03:00 [DBG] Executed controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-01-28 16:28:45.698 -03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' ...
2026-01-28 16:28:45.699 -03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' using the name '' in request data ...
2026-01-28 16:28:45.700 -03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2026-01-28 16:28:45.702 -03:00 [DBG] Connection id "0HNIUK9JR3N8J", Request id "0HNIUK9JR3N8J:00000003": started reading request body.
2026-01-28 16:28:45.702 -03:00 [DBG] Connection id "0HNIUK9JR3N8J", Request id "0HNIUK9JR3N8J:00000003": done reading request body.
2026-01-28 16:28:45.703 -03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Project_Gon.Core.DTOs.Auth.LoginDto'
2026-01-28 16:28:45.704 -03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 16:28:45.708 -03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 16:28:45.709 -03:00 [DBG] Attempting to validate the bound parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' ...
2026-01-28 16:28:45.710 -03:00 [DBG] Done attempting to validate the bound parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 16:28:45.711 -03:00 [INF] [LOGIN] Intento de login con: 12345678-9
2026-01-28 16:28:45.712 -03:00 [DBG] [CLEAN_RUT] Original: 12345678-9 -> Limpio: 12345678-9
2026-01-28 16:28:45.712 -03:00 [INF] [FIND] Buscando por RUT limpio: 12345678-9
2026-01-28 16:28:45.713 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 16:28:45.715 -03:00 [DBG] Creating DbConnection.
2026-01-28 16:28:45.715 -03:00 [DBG] Created DbConnection. (0ms).
2026-01-28 16:28:45.716 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:28:45.717 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:28:45.717 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:28:45.718 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:28:45.719 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:28:45.720 -03:00 [DBG] Executing DbCommand [Parameters=[@__rutLimpio_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Rut" = @__rutLimpio_0 AND u."Activo"
LIMIT 1
2026-01-28 16:28:45.723 -03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__rutLimpio_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Rut" = @__rutLimpio_0 AND u."Activo"
LIMIT 1
2026-01-28 16:28:45.725 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:28:45.726 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-01-28 16:28:45.727 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:28:45.728 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:28:45.728 -03:00 [INF] [FIND] Usuario encontrado - ID: 3, RUT: 12345678-9
2026-01-28 16:28:45.729 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:28:45.730 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:28:45.731 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:28:45.731 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:28:45.732 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:28:45.733 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 16:28:45.735 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 16:28:45.739 -03:00 [DBG] Context 'AppDbContext' started tracking 'Empresa' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:28:45.740 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:28:45.740 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-01-28 16:28:45.741 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:28:45.742 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:28:45.744 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:28:45.744 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:28:45.745 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:28:45.746 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:28:45.746 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:28:45.747 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Activo", s."Ciudad", s."CreatedAt", s."Direccion", s."EmpresaId", s."Nombre", s."Region", s."Telefono", s."UpdatedAt"
FROM "Sucursales" AS s
WHERE s."Id" = @__p_0
LIMIT 1
2026-01-28 16:28:45.749 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Activo", s."Ciudad", s."CreatedAt", s."Direccion", s."EmpresaId", s."Nombre", s."Region", s."Telefono", s."UpdatedAt"
FROM "Sucursales" AS s
WHERE s."Id" = @__p_0
LIMIT 1
2026-01-28 16:28:45.751 -03:00 [DBG] Context 'AppDbContext' started tracking 'Sucursal' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:28:45.752 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:28:45.754 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 3ms reading results.
2026-01-28 16:28:45.756 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:28:45.756 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:28:45.757 -03:00 [INF] [LOGIN] Usuario encontrado: true
2026-01-28 16:28:45.758 -03:00 [INF] [LOGIN] Usuario ID: 3, RUT: 12345678-9, Email: vendedor@empresa.com, Activo: true
2026-01-28 16:28:45.759 -03:00 [INF] [LOGIN] Verificando contraseña para usuario ID: 3
2026-01-28 16:28:45.974 -03:00 [INF] [LOGIN] Password válido: true
2026-01-28 16:28:45.975 -03:00 [DBG] Context 'AppDbContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:28:45.976 -03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2026-01-28 16:28:45.977 -03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2026-01-28 16:28:45.978 -03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2026-01-28 16:28:45.979 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:28:45.979 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:28:45.980 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:28:45.981 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:28:45.981 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:28:45.982 -03:00 [DBG] Executing DbCommand [Parameters=[@p12='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = Int32), @p5='?', @p6='?', @p7='?' (DbType = Int32), @p8='?', @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Usuarios" SET "Activo" = @p0, "Apellido" = @p1, "CreatedAt" = @p2, "Email" = @p3, "EmpresaId" = @p4, "Nombre" = @p5, "PasswordHash" = @p6, "Rol" = @p7, "Rut" = @p8, "SucursalId" = @p9, "UltimoAcceso" = @p10, "UpdatedAt" = @p11
WHERE "Id" = @p12;
2026-01-28 16:28:46.020 -03:00 [INF] Executed DbCommand (38ms) [Parameters=[@p12='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = Int32), @p5='?', @p6='?', @p7='?' (DbType = Int32), @p8='?', @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Usuarios" SET "Activo" = @p0, "Apellido" = @p1, "CreatedAt" = @p2, "Email" = @p3, "EmpresaId" = @p4, "Nombre" = @p5, "PasswordHash" = @p6, "Rol" = @p7, "Rut" = @p8, "SucursalId" = @p9, "UltimoAcceso" = @p10, "UpdatedAt" = @p11
WHERE "Id" = @p12;
2026-01-28 16:28:46.022 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:28:46.023 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-01-28 16:28:46.024 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:28:46.025 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:28:46.026 -03:00 [DBG] An entity of type 'Usuario' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:28:46.027 -03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2026-01-28 16:28:46.028 -03:00 [INF] [LOGIN] Login exitoso para usuario ID: 3
2026-01-28 16:28:46.029 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-01-28 16:28:46.031 -03:00 [DBG] No information found on request to perform content negotiation.
2026-01-28 16:28:46.031 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-01-28 16:28:46.032 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-01-28 16:28:46.032 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-01-28 16:28:46.033 -03:00 [INF] Executing OkObjectResult, writing value of type 'Project_Gon.Core.DTOs.Auth.LoginResponseDto'.
2026-01-28 16:28:46.034 -03:00 [INF] Executed action Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api) in 337.9266ms
2026-01-28 16:28:46.035 -03:00 [INF] Executed endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 16:28:46.036 -03:00 [INF] HTTP POST /api/auth/login responded 200 in 350.4695 ms
2026-01-28 16:28:46.037 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 16:28:46.037 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:28:46.042 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (4ms).
2026-01-28 16:28:46.043 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/auth/login - 200 null application/json; charset=utf-8 367.0494ms
2026-01-28 16:30:56.691 -03:00 [DBG] Connection id "0HNIUK9JR3N8I" disconnecting.
2026-01-28 16:30:56.692 -03:00 [DBG] Connection id "0HNIUK9JR3N8I" stopped.
2026-01-28 16:30:56.693 -03:00 [DBG] Connection id "0HNIUK9JR3N8I" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-01-28 16:30:57.694 -03:00 [DBG] Connection id "0HNIUK9JR3N8J" is closing.
2026-01-28 16:30:57.695 -03:00 [DBG] Connection id "0HNIUK9JR3N8J" is closed. The last processed stream ID was 3.
2026-01-28 16:30:57.710 -03:00 [DBG] The connection queue processing loop for 0HNIUK9JR3N8J completed.
2026-01-28 16:30:57.711 -03:00 [DBG] Connection id "0HNIUK9JR3N8J" stopped.
2026-01-28 16:30:57.712 -03:00 [DBG] Connection id "0HNIUK9JR3N8J" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-01-28 16:34:16.912 -03:00 [DBG] Connection id "0HNIUK9JR3N8K" accepted.
2026-01-28 16:34:16.914 -03:00 [DBG] Connection id "0HNIUK9JR3N8K" started.
2026-01-28 16:34:16.914 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5070/api/sucursales - application/json 169
2026-01-28 16:34:16.916 -03:00 [DBG] 1 candidate(s) found for the request path '/api/sucursales'
2026-01-28 16:34:16.917 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.SucursalesController.Create (Project_Gon.Api)' with route pattern 'api/Sucursales' is valid for the request path '/api/sucursales'
2026-01-28 16:34:16.918 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.SucursalesController.Create (Project_Gon.Api)'
2026-01-28 16:34:16.919 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 16:34:16.919 -03:00 [DBG] Redirecting to 'https://localhost:7058/api/sucursales'.
2026-01-28 16:34:16.920 -03:00 [DBG] Connection id "0HNIUK9JR3N8K" completed keep alive response.
2026-01-28 16:34:16.921 -03:00 [DBG] Connection id "0HNIUK9JR3N8L" accepted.
2026-01-28 16:34:16.921 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5070/api/sucursales - 307 0 null 6.8262ms
2026-01-28 16:34:16.922 -03:00 [DBG] Connection id "0HNIUK9JR3N8L" started.
2026-01-28 16:34:16.924 -03:00 [DBG] Connection id "0HNIUK9JR3N8K", Request id "0HNIUK9JR3N8K:00000001": started reading request body.
2026-01-28 16:34:16.926 -03:00 [DBG] Connection id "0HNIUK9JR3N8K", Request id "0HNIUK9JR3N8K:00000001": done reading request body.
2026-01-28 16:34:16.932 -03:00 [DBG] Connection 0HNIUK9JR3N8L established using the following protocol: "Tls12"
2026-01-28 16:34:16.933 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/sucursales - application/json 169
2026-01-28 16:34:16.936 -03:00 [DBG] 1 candidate(s) found for the request path '/api/sucursales'
2026-01-28 16:34:16.937 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.SucursalesController.Create (Project_Gon.Api)' with route pattern 'api/Sucursales' is valid for the request path '/api/sucursales'
2026-01-28 16:34:16.939 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.SucursalesController.Create (Project_Gon.Api)'
2026-01-28 16:34:16.939 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 16:34:16.940 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 16:34:16.941 -03:00 [INF] Executing endpoint 'Project_Gon.Api.Controllers.SucursalesController.Create (Project_Gon.Api)'
2026-01-28 16:34:16.942 -03:00 [INF] Route matched with {action = "Create", controller = "Sucursales"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(Project_Gon.Core.DTOs.Sucursal.CreateSucursalDto) on controller Project_Gon.Api.Controllers.SucursalesController (Project_Gon.Api).
2026-01-28 16:34:16.943 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-01-28 16:34:16.944 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-01-28 16:34:16.945 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-01-28 16:34:16.947 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-01-28 16:34:16.948 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-01-28 16:34:16.951 -03:00 [DBG] Executing controller factory for controller Project_Gon.Api.Controllers.SucursalesController (Project_Gon.Api)
2026-01-28 16:34:16.952 -03:00 [DBG] Executed controller factory for controller Project_Gon.Api.Controllers.SucursalesController (Project_Gon.Api)
2026-01-28 16:34:16.953 -03:00 [DBG] Attempting to bind parameter 'createDto' of type 'Project_Gon.Core.DTOs.Sucursal.CreateSucursalDto' ...
2026-01-28 16:34:16.954 -03:00 [DBG] Attempting to bind parameter 'createDto' of type 'Project_Gon.Core.DTOs.Sucursal.CreateSucursalDto' using the name '' in request data ...
2026-01-28 16:34:16.955 -03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2026-01-28 16:34:16.956 -03:00 [DBG] Connection id "0HNIUK9JR3N8L", Request id "0HNIUK9JR3N8L:00000001": started reading request body.
2026-01-28 16:34:16.957 -03:00 [DBG] Connection id "0HNIUK9JR3N8L", Request id "0HNIUK9JR3N8L:00000001": done reading request body.
2026-01-28 16:34:16.958 -03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Project_Gon.Core.DTOs.Sucursal.CreateSucursalDto'
2026-01-28 16:34:16.958 -03:00 [DBG] Done attempting to bind parameter 'createDto' of type 'Project_Gon.Core.DTOs.Sucursal.CreateSucursalDto'.
2026-01-28 16:34:16.959 -03:00 [DBG] Done attempting to bind parameter 'createDto' of type 'Project_Gon.Core.DTOs.Sucursal.CreateSucursalDto'.
2026-01-28 16:34:16.960 -03:00 [DBG] Attempting to validate the bound parameter 'createDto' of type 'Project_Gon.Core.DTOs.Sucursal.CreateSucursalDto' ...
2026-01-28 16:34:16.961 -03:00 [DBG] Done attempting to validate the bound parameter 'createDto' of type 'Project_Gon.Core.DTOs.Sucursal.CreateSucursalDto'.
2026-01-28 16:34:16.962 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 16:34:16.964 -03:00 [DBG] Creating DbConnection.
2026-01-28 16:34:16.964 -03:00 [DBG] Created DbConnection. (0ms).
2026-01-28 16:34:16.967 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:34:16.994 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:34:16.995 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:34:16.996 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:34:16.997 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:34:16.997 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 16:34:17.000 -03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 16:34:17.002 -03:00 [DBG] Context 'AppDbContext' started tracking 'Empresa' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:34:17.003 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:34:17.004 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-01-28 16:34:17.005 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:34:17.006 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:34:17.007 -03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Sucursal.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:34:17.008 -03:00 [DBG] The navigation 'Sucursal.Empresa' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:34:17.009 -03:00 [DBG] Context 'AppDbContext' started tracking 'Sucursal' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:34:17.010 -03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2026-01-28 16:34:17.011 -03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2026-01-28 16:34:17.013 -03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2026-01-28 16:34:17.014 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:34:17.015 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:34:17.016 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:34:17.016 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:34:17.017 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:34:17.018 -03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = Int32), @p5='?', @p6='?', @p7='?', @p8='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Sucursales" ("Activo", "Ciudad", "CreatedAt", "Direccion", "EmpresaId", "Nombre", "Region", "Telefono", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
2026-01-28 16:34:17.022 -03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = Int32), @p5='?', @p6='?', @p7='?', @p8='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Sucursales" ("Activo", "Ciudad", "CreatedAt", "Direccion", "EmpresaId", "Nombre", "Region", "Telefono", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
2026-01-28 16:34:17.024 -03:00 [DBG] The foreign key property 'Sucursal.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-01-28 16:34:17.025 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:34:17.025 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-01-28 16:34:17.027 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:34:17.029 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (2ms).
2026-01-28 16:34:17.030 -03:00 [DBG] An entity of type 'Sucursal' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:34:17.031 -03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2026-01-28 16:34:17.032 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-01-28 16:34:17.034 -03:00 [DBG] No information found on request to perform content negotiation.
2026-01-28 16:34:17.034 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-01-28 16:34:17.035 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-01-28 16:34:17.036 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-01-28 16:34:17.037 -03:00 [INF] Executing CreatedAtActionResult, writing value of type 'Project_Gon.Core.DTOs.Sucursal.SucursalDto'.
2026-01-28 16:34:17.038 -03:00 [DBG] Found the endpoints ["Project_Gon.Api.Controllers.SucursalesController.GetById (Project_Gon.Api)"] for address (id=[3],action=[GetById],controller=[Sucursales])
2026-01-28 16:34:17.039 -03:00 [DBG] Successfully processed template api/Sucursales/{id} for Project_Gon.Api.Controllers.SucursalesController.GetById (Project_Gon.Api) resulting in /api/Sucursales/3 and 
2026-01-28 16:34:17.040 -03:00 [DBG] Link generation succeeded for endpoints ["Project_Gon.Api.Controllers.SucursalesController.GetById (Project_Gon.Api)"] with result /api/Sucursales/3
2026-01-28 16:34:17.041 -03:00 [INF] Executed action Project_Gon.Api.Controllers.SucursalesController.Create (Project_Gon.Api) in 90.2878ms
2026-01-28 16:34:17.042 -03:00 [INF] Executed endpoint 'Project_Gon.Api.Controllers.SucursalesController.Create (Project_Gon.Api)'
2026-01-28 16:34:17.042 -03:00 [INF] HTTP POST /api/sucursales responded 201 in 102.2904 ms
2026-01-28 16:34:17.045 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 16:34:17.046 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:34:17.047 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:34:17.048 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/sucursales - 201 null application/json; charset=utf-8 115.4001ms
2026-01-28 16:34:55.797 -03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5070/api/sucursales/3 - application/json 169
2026-01-28 16:34:55.799 -03:00 [DBG] 1 candidate(s) found for the request path '/api/sucursales/3'
2026-01-28 16:34:55.800 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.SucursalesController.GetById (Project_Gon.Api)' with route pattern 'api/Sucursales/{id}' is valid for the request path '/api/sucursales/3'
2026-01-28 16:34:55.801 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.SucursalesController.GetById (Project_Gon.Api)'
2026-01-28 16:34:55.802 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 16:34:55.803 -03:00 [DBG] Redirecting to 'https://localhost:7058/api/sucursales/3'.
2026-01-28 16:34:55.803 -03:00 [DBG] Connection id "0HNIUK9JR3N8K" completed keep alive response.
2026-01-28 16:34:55.804 -03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5070/api/sucursales/3 - 307 0 null 6.6756ms
2026-01-28 16:34:55.804 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/api/sucursales/3 - application/json 169
2026-01-28 16:34:55.805 -03:00 [DBG] Connection id "0HNIUK9JR3N8K", Request id "0HNIUK9JR3N8K:00000002": started reading request body.
2026-01-28 16:34:55.807 -03:00 [DBG] 1 candidate(s) found for the request path '/api/sucursales/3'
2026-01-28 16:34:55.807 -03:00 [DBG] Connection id "0HNIUK9JR3N8K", Request id "0HNIUK9JR3N8K:00000002": done reading request body.
2026-01-28 16:34:55.808 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.SucursalesController.GetById (Project_Gon.Api)' with route pattern 'api/Sucursales/{id}' is valid for the request path '/api/sucursales/3'
2026-01-28 16:34:55.812 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.SucursalesController.GetById (Project_Gon.Api)'
2026-01-28 16:34:55.813 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 16:34:55.813 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 16:34:55.814 -03:00 [INF] Executing endpoint 'Project_Gon.Api.Controllers.SucursalesController.GetById (Project_Gon.Api)'
2026-01-28 16:34:55.817 -03:00 [INF] Route matched with {action = "GetById", controller = "Sucursales"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetById(Int32) on controller Project_Gon.Api.Controllers.SucursalesController (Project_Gon.Api).
2026-01-28 16:34:55.819 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-01-28 16:34:55.820 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-01-28 16:34:55.821 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-01-28 16:34:55.822 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-01-28 16:34:55.823 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-01-28 16:34:55.824 -03:00 [DBG] Executing controller factory for controller Project_Gon.Api.Controllers.SucursalesController (Project_Gon.Api)
2026-01-28 16:34:55.827 -03:00 [DBG] Executed controller factory for controller Project_Gon.Api.Controllers.SucursalesController (Project_Gon.Api)
2026-01-28 16:34:55.828 -03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2026-01-28 16:34:55.829 -03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2026-01-28 16:34:55.830 -03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2026-01-28 16:34:55.830 -03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2026-01-28 16:34:55.831 -03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2026-01-28 16:34:55.832 -03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2026-01-28 16:34:55.833 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 16:34:55.835 -03:00 [DBG] Creating DbConnection.
2026-01-28 16:34:55.835 -03:00 [DBG] Created DbConnection. (0ms).
2026-01-28 16:34:55.836 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:34:55.837 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:34:55.837 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:34:55.838 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:34:55.839 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:34:55.839 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Activo", s."Ciudad", s."CreatedAt", s."Direccion", s."EmpresaId", s."Nombre", s."Region", s."Telefono", s."UpdatedAt"
FROM "Sucursales" AS s
WHERE s."Id" = @__p_0
LIMIT 1
2026-01-28 16:34:55.844 -03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Activo", s."Ciudad", s."CreatedAt", s."Direccion", s."EmpresaId", s."Nombre", s."Region", s."Telefono", s."UpdatedAt"
FROM "Sucursales" AS s
WHERE s."Id" = @__p_0
LIMIT 1
2026-01-28 16:34:55.846 -03:00 [DBG] Context 'AppDbContext' started tracking 'Sucursal' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:34:55.847 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:34:55.848 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-01-28 16:34:55.849 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:34:55.849 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:34:55.851 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:34:55.851 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:34:55.852 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:34:55.853 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:34:55.853 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:34:55.854 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 16:34:55.856 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 16:34:55.861 -03:00 [DBG] The navigation 'Sucursal.Empresa' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:34:55.862 -03:00 [DBG] Context 'AppDbContext' started tracking 'Empresa' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:34:55.863 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:34:55.864 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 4ms reading results.
2026-01-28 16:34:55.865 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:34:55.866 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:34:55.867 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-01-28 16:34:55.868 -03:00 [DBG] No information found on request to perform content negotiation.
2026-01-28 16:34:55.869 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-01-28 16:34:55.870 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-01-28 16:34:55.870 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-01-28 16:34:55.871 -03:00 [INF] Executing OkObjectResult, writing value of type 'Project_Gon.Core.DTOs.Sucursal.SucursalDto'.
2026-01-28 16:34:55.874 -03:00 [INF] Executed action Project_Gon.Api.Controllers.SucursalesController.GetById (Project_Gon.Api) in 50.1949ms
2026-01-28 16:34:55.875 -03:00 [INF] Executed endpoint 'Project_Gon.Api.Controllers.SucursalesController.GetById (Project_Gon.Api)'
2026-01-28 16:34:55.875 -03:00 [INF] HTTP GET /api/sucursales/3 responded 200 in 62.0765 ms
2026-01-28 16:34:55.876 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 16:34:55.877 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:34:55.878 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:34:55.879 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/api/sucursales/3 - 200 null application/json; charset=utf-8 75.3249ms
2026-01-28 16:34:55.881 -03:00 [DBG] Connection id "0HNIUK9JR3N8L", Request id "0HNIUK9JR3N8L:00000003": started reading request body.
2026-01-28 16:34:55.882 -03:00 [DBG] Connection id "0HNIUK9JR3N8L", Request id "0HNIUK9JR3N8L:00000003": done reading request body.
2026-01-28 16:35:25.764 -03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5070/api/sucursales/empresas/2 - application/json 169
2026-01-28 16:35:25.766 -03:00 [DBG] No candidates found for the request path '/api/sucursales/empresas/2'
2026-01-28 16:35:25.767 -03:00 [DBG] Request did not match any endpoints
2026-01-28 16:35:25.768 -03:00 [DBG] The request path  does not match the path filter
2026-01-28 16:35:25.769 -03:00 [DBG] Redirecting to 'https://localhost:7058/api/sucursales/empresas/2'.
2026-01-28 16:35:25.770 -03:00 [DBG] Connection id "0HNIUK9JR3N8K" completed keep alive response.
2026-01-28 16:35:25.770 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/api/sucursales/empresas/2 - application/json 169
2026-01-28 16:35:25.770 -03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5070/api/sucursales/empresas/2 - 307 0 null 6.1924ms
2026-01-28 16:35:25.772 -03:00 [DBG] No candidates found for the request path '/api/sucursales/empresas/2'
2026-01-28 16:35:25.773 -03:00 [DBG] Connection id "0HNIUK9JR3N8K", Request id "0HNIUK9JR3N8K:00000003": started reading request body.
2026-01-28 16:35:25.774 -03:00 [DBG] Request did not match any endpoints
2026-01-28 16:35:25.775 -03:00 [DBG] Connection id "0HNIUK9JR3N8K", Request id "0HNIUK9JR3N8K:00000003": done reading request body.
2026-01-28 16:35:25.775 -03:00 [DBG] The request path  does not match the path filter
2026-01-28 16:35:25.777 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 16:35:25.778 -03:00 [INF] HTTP GET /api/sucursales/empresas/2 responded 404 in 0.7516 ms
2026-01-28 16:35:25.778 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/api/sucursales/empresas/2 - 404 0 null 8.0293ms
2026-01-28 16:35:25.783 -03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7058/api/sucursales/empresas/2, Response status code: 404
2026-01-28 16:35:25.784 -03:00 [DBG] Connection id "0HNIUK9JR3N8L", Request id "0HNIUK9JR3N8L:00000005": started reading request body.
2026-01-28 16:35:25.785 -03:00 [DBG] Connection id "0HNIUK9JR3N8L", Request id "0HNIUK9JR3N8L:00000005": done reading request body.
2026-01-28 16:35:33.523 -03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5070/api/sucursales/empresa/2 - application/json 169
2026-01-28 16:35:33.525 -03:00 [DBG] 1 candidate(s) found for the request path '/api/sucursales/empresa/2'
2026-01-28 16:35:33.526 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.SucursalesController.GetByEmpresa (Project_Gon.Api)' with route pattern 'api/Sucursales/empresa/{empresaId}' is valid for the request path '/api/sucursales/empresa/2'
2026-01-28 16:35:33.527 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.SucursalesController.GetByEmpresa (Project_Gon.Api)'
2026-01-28 16:35:33.528 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 16:35:33.529 -03:00 [DBG] Redirecting to 'https://localhost:7058/api/sucursales/empresa/2'.
2026-01-28 16:35:33.529 -03:00 [DBG] Connection id "0HNIUK9JR3N8K" completed keep alive response.
2026-01-28 16:35:33.530 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/api/sucursales/empresa/2 - application/json 169
2026-01-28 16:35:33.530 -03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5070/api/sucursales/empresa/2 - 307 0 null 6.865ms
2026-01-28 16:35:33.531 -03:00 [DBG] 1 candidate(s) found for the request path '/api/sucursales/empresa/2'
2026-01-28 16:35:33.533 -03:00 [DBG] Connection id "0HNIUK9JR3N8K", Request id "0HNIUK9JR3N8K:00000004": started reading request body.
2026-01-28 16:35:33.533 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.SucursalesController.GetByEmpresa (Project_Gon.Api)' with route pattern 'api/Sucursales/empresa/{empresaId}' is valid for the request path '/api/sucursales/empresa/2'
2026-01-28 16:35:33.534 -03:00 [DBG] Connection id "0HNIUK9JR3N8K", Request id "0HNIUK9JR3N8K:00000004": done reading request body.
2026-01-28 16:35:33.535 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.SucursalesController.GetByEmpresa (Project_Gon.Api)'
2026-01-28 16:35:33.537 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 16:35:33.538 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 16:35:33.538 -03:00 [INF] Executing endpoint 'Project_Gon.Api.Controllers.SucursalesController.GetByEmpresa (Project_Gon.Api)'
2026-01-28 16:35:33.541 -03:00 [INF] Route matched with {action = "GetByEmpresa", controller = "Sucursales"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetByEmpresa(Int32) on controller Project_Gon.Api.Controllers.SucursalesController (Project_Gon.Api).
2026-01-28 16:35:33.544 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-01-28 16:35:33.545 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-01-28 16:35:33.546 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-01-28 16:35:33.547 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-01-28 16:35:33.548 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-01-28 16:35:33.549 -03:00 [DBG] Executing controller factory for controller Project_Gon.Api.Controllers.SucursalesController (Project_Gon.Api)
2026-01-28 16:35:33.551 -03:00 [DBG] Executed controller factory for controller Project_Gon.Api.Controllers.SucursalesController (Project_Gon.Api)
2026-01-28 16:35:33.551 -03:00 [DBG] Attempting to bind parameter 'empresaId' of type 'System.Int32' ...
2026-01-28 16:35:33.552 -03:00 [DBG] Attempting to bind parameter 'empresaId' of type 'System.Int32' using the name 'empresaId' in request data ...
2026-01-28 16:35:33.553 -03:00 [DBG] Done attempting to bind parameter 'empresaId' of type 'System.Int32'.
2026-01-28 16:35:33.554 -03:00 [DBG] Done attempting to bind parameter 'empresaId' of type 'System.Int32'.
2026-01-28 16:35:33.555 -03:00 [DBG] Attempting to validate the bound parameter 'empresaId' of type 'System.Int32' ...
2026-01-28 16:35:33.555 -03:00 [DBG] Done attempting to validate the bound parameter 'empresaId' of type 'System.Int32'.
2026-01-28 16:35:33.557 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 16:35:33.560 -03:00 [DBG] Creating DbConnection.
2026-01-28 16:35:33.560 -03:00 [DBG] Created DbConnection. (0ms).
2026-01-28 16:35:33.561 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:35:33.561 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:35:33.562 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:35:33.563 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:35:33.564 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:35:33.564 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 16:35:33.566 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 16:35:33.568 -03:00 [DBG] Context 'AppDbContext' started tracking 'Empresa' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:35:33.569 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:35:33.570 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-01-28 16:35:33.571 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:35:33.574 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (2ms).
2026-01-28 16:35:33.577 -03:00 [DBG] Compiling query expression: 
'DbSet<Sucursal>()
    .AsNoTracking()'
2026-01-28 16:35:33.580 -03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<Sucursal>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Sucursal.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Sucursal.Activo (bool) Required, 1], [Property: Sucursal.Ciudad (string), 2], [Property: Sucursal.CreatedAt (DateTime) Required, 3], [Property: Sucursal.Direccion (string), 4], [Property: Sucursal.EmpresaId (int) Required FK Index, 5], [Property: Sucursal.Nombre (string) Required MaxLength(255), 6], [Property: Sucursal.Region (string), 7], [Property: Sucursal.Telefono (string), 8], [Property: Sucursal.UpdatedAt (DateTime?), 9] }
        SELECT s.Id, s.Activo, s.Ciudad, s.CreatedAt, s.Direccion, s.EmpresaId, s.Nombre, s.Region, s.Telefono, s.UpdatedAt
        FROM Sucursales AS s) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Sucursal.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Sucursal.Activo (bool) Required, 1], [Property: Sucursal.Ciudad (string), 2], [Property: Sucursal.CreatedAt (DateTime) Required, 3], [Property: Sucursal.Direccion (string), 4], [Property: Sucursal.EmpresaId (int) Required FK Index, 5], [Property: Sucursal.Nombre (string) Required MaxLength(255), 6], [Property: Sucursal.Region (string), 7], [Property: Sucursal.Telefono (string), 8], [Property: Sucursal.UpdatedAt (DateTime?), 9] }
        SELECT s.Id, s.Activo, s.Ciudad, s.CreatedAt, s.Direccion, s.EmpresaId, s.Nombre, s.Region, s.Telefono, s.UpdatedAt
        FROM Sucursales AS s, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Sucursal entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            Sucursal instance1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(Sucursal);
            (object)dataReader.GetInt32(0) != null ? 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: Sucursal | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Sucursal")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: Sucursal | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Sucursal")]: 
                        {
                            return 
                            {
                                Sucursal instance;
                                instance = new Sucursal();
                                instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                instance.<Activo>k__BackingField = dataReader.GetBoolean(1);
                                instance.<Ciudad>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(3);
                                instance.<Direccion>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                instance.<EmpresaId>k__BackingField = dataReader.GetInt32(5);
                                instance.<Nombre>k__BackingField = dataReader.GetString(6);
                                instance.<Region>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                instance.<Telefono>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(9) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(9);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: NoTracking, 
                                    structuralType: [LIFTABLE Constant: EntityType: Sucursal | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Sucursal")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(Sucursal)
                }
                ;
                return instance1;
            } : 
            {
                object[] keyValues1;
                keyValues1 = new object[]{ (object)dataReader.GetInt32(0) };
                return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                    entityType: [LIFTABLE Constant: EntityType: Sucursal | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Sucursal")], 
                    properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: Sucursal.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Sucursal").FindPrimaryKey().Properties], 
                    keyValues: keyValues1);
            };
            return instance1;
        };
        return entity;
    }, 
    contextType: Project_Gon.Infrastructure.Data.AppDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2026-01-28 16:35:33.591 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:35:33.592 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:35:33.592 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:35:33.593 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:35:33.594 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:35:33.595 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Activo", s."Ciudad", s."CreatedAt", s."Direccion", s."EmpresaId", s."Nombre", s."Region", s."Telefono", s."UpdatedAt"
FROM "Sucursales" AS s
2026-01-28 16:35:33.596 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Activo", s."Ciudad", s."CreatedAt", s."Direccion", s."EmpresaId", s."Nombre", s."Region", s."Telefono", s."UpdatedAt"
FROM "Sucursales" AS s
2026-01-28 16:35:33.598 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:35:33.599 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-01-28 16:35:33.600 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:35:33.601 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:35:33.607 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-01-28 16:35:33.609 -03:00 [DBG] No information found on request to perform content negotiation.
2026-01-28 16:35:33.610 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-01-28 16:35:33.610 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-01-28 16:35:33.611 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-01-28 16:35:33.612 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Project_Gon.Core.DTOs.Sucursal.SucursalDto, Project_Gon.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-28 16:35:33.613 -03:00 [INF] Executed action Project_Gon.Api.Controllers.SucursalesController.GetByEmpresa (Project_Gon.Api) in 64.0763ms
2026-01-28 16:35:33.614 -03:00 [INF] Executed endpoint 'Project_Gon.Api.Controllers.SucursalesController.GetByEmpresa (Project_Gon.Api)'
2026-01-28 16:35:33.615 -03:00 [INF] HTTP GET /api/sucursales/empresa/2 responded 200 in 77.1605 ms
2026-01-28 16:35:33.616 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 16:35:33.617 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:35:33.618 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:35:33.621 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/api/sucursales/empresa/2 - 200 null application/json; charset=utf-8 91.1666ms
2026-01-28 16:35:33.623 -03:00 [DBG] Connection id "0HNIUK9JR3N8L", Request id "0HNIUK9JR3N8L:00000007": started reading request body.
2026-01-28 16:35:33.624 -03:00 [DBG] Connection id "0HNIUK9JR3N8L", Request id "0HNIUK9JR3N8L:00000007": done reading request body.
2026-01-28 16:35:52.096 -03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5070/api/sucursales/activas - application/json 169
2026-01-28 16:35:52.097 -03:00 [DBG] 2 candidate(s) found for the request path '/api/sucursales/activas'
2026-01-28 16:35:52.098 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.SucursalesController.GetActivas (Project_Gon.Api)' with route pattern 'api/Sucursales/activas' is valid for the request path '/api/sucursales/activas'
2026-01-28 16:35:52.099 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.SucursalesController.GetById (Project_Gon.Api)' with route pattern 'api/Sucursales/{id}' is valid for the request path '/api/sucursales/activas'
2026-01-28 16:35:52.100 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.SucursalesController.GetActivas (Project_Gon.Api)'
2026-01-28 16:35:52.101 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 16:35:52.101 -03:00 [DBG] Redirecting to 'https://localhost:7058/api/sucursales/activas'.
2026-01-28 16:35:52.102 -03:00 [DBG] Connection id "0HNIUK9JR3N8K" completed keep alive response.
2026-01-28 16:35:52.102 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/api/sucursales/activas - application/json 169
2026-01-28 16:35:52.103 -03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5070/api/sucursales/activas - 307 0 null 6.9041ms
2026-01-28 16:35:52.104 -03:00 [DBG] 2 candidate(s) found for the request path '/api/sucursales/activas'
2026-01-28 16:35:52.105 -03:00 [DBG] Connection id "0HNIUK9JR3N8K", Request id "0HNIUK9JR3N8K:00000005": started reading request body.
2026-01-28 16:35:52.106 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.SucursalesController.GetActivas (Project_Gon.Api)' with route pattern 'api/Sucursales/activas' is valid for the request path '/api/sucursales/activas'
2026-01-28 16:35:52.107 -03:00 [DBG] Connection id "0HNIUK9JR3N8K", Request id "0HNIUK9JR3N8K:00000005": done reading request body.
2026-01-28 16:35:52.108 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.SucursalesController.GetById (Project_Gon.Api)' with route pattern 'api/Sucursales/{id}' is valid for the request path '/api/sucursales/activas'
2026-01-28 16:35:52.110 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.SucursalesController.GetActivas (Project_Gon.Api)'
2026-01-28 16:35:52.112 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 16:35:52.113 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 16:35:52.114 -03:00 [INF] Executing endpoint 'Project_Gon.Api.Controllers.SucursalesController.GetActivas (Project_Gon.Api)'
2026-01-28 16:35:52.116 -03:00 [INF] Route matched with {action = "GetActivas", controller = "Sucursales"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetActivas() on controller Project_Gon.Api.Controllers.SucursalesController (Project_Gon.Api).
2026-01-28 16:35:52.118 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-01-28 16:35:52.118 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-01-28 16:35:52.119 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-01-28 16:35:52.121 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-01-28 16:35:52.121 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-01-28 16:35:52.123 -03:00 [DBG] Executing controller factory for controller Project_Gon.Api.Controllers.SucursalesController (Project_Gon.Api)
2026-01-28 16:35:52.124 -03:00 [DBG] Executed controller factory for controller Project_Gon.Api.Controllers.SucursalesController (Project_Gon.Api)
2026-01-28 16:35:52.125 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 16:35:52.128 -03:00 [DBG] Creating DbConnection.
2026-01-28 16:35:52.129 -03:00 [DBG] Created DbConnection. (0ms).
2026-01-28 16:35:52.129 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:35:52.130 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:35:52.131 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:35:52.131 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:35:52.132 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:35:52.133 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Activo", s."Ciudad", s."CreatedAt", s."Direccion", s."EmpresaId", s."Nombre", s."Region", s."Telefono", s."UpdatedAt"
FROM "Sucursales" AS s
2026-01-28 16:35:52.135 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Activo", s."Ciudad", s."CreatedAt", s."Direccion", s."EmpresaId", s."Nombre", s."Region", s."Telefono", s."UpdatedAt"
FROM "Sucursales" AS s
2026-01-28 16:35:52.136 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:35:52.137 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-01-28 16:35:52.138 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:35:52.139 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:35:52.140 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:35:52.141 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:35:52.144 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:35:52.144 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:35:52.145 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:35:52.146 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 16:35:52.148 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 16:35:52.149 -03:00 [DBG] Context 'AppDbContext' started tracking 'Empresa' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:35:52.150 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:35:52.151 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-01-28 16:35:52.152 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:35:52.153 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:35:52.154 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:35:52.155 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:35:52.155 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:35:52.156 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:35:52.157 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:35:52.160 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 16:35:52.162 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 16:35:52.164 -03:00 [DBG] Context 'AppDbContext' started tracking 'Empresa' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:35:52.165 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:35:52.165 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-01-28 16:35:52.166 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:35:52.167 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:35:52.168 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-01-28 16:35:52.170 -03:00 [DBG] No information found on request to perform content negotiation.
2026-01-28 16:35:52.170 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-01-28 16:35:52.171 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-01-28 16:35:52.172 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-01-28 16:35:52.173 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Project_Gon.Core.DTOs.Sucursal.SucursalDto, Project_Gon.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-28 16:35:52.176 -03:00 [INF] Executed action Project_Gon.Api.Controllers.SucursalesController.GetActivas (Project_Gon.Api) in 53.2092ms
2026-01-28 16:35:52.177 -03:00 [INF] Executed endpoint 'Project_Gon.Api.Controllers.SucursalesController.GetActivas (Project_Gon.Api)'
2026-01-28 16:35:52.177 -03:00 [INF] HTTP GET /api/sucursales/activas responded 200 in 64.4042 ms
2026-01-28 16:35:52.178 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 16:35:52.179 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:35:52.180 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:35:52.181 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/api/sucursales/activas - 200 null application/json; charset=utf-8 78.4796ms
2026-01-28 16:35:52.183 -03:00 [DBG] Connection id "0HNIUK9JR3N8L", Request id "0HNIUK9JR3N8L:00000009": started reading request body.
2026-01-28 16:35:52.184 -03:00 [DBG] Connection id "0HNIUK9JR3N8L", Request id "0HNIUK9JR3N8L:00000009": done reading request body.
2026-01-28 16:36:15.163 -03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5070/api/sucursales/1 - application/json 169
2026-01-28 16:36:15.166 -03:00 [DBG] 1 candidate(s) found for the request path '/api/sucursales/1'
2026-01-28 16:36:15.180 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.SucursalesController.GetById (Project_Gon.Api)' with route pattern 'api/Sucursales/{id}' is valid for the request path '/api/sucursales/1'
2026-01-28 16:36:15.182 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.SucursalesController.GetById (Project_Gon.Api)'
2026-01-28 16:36:15.184 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 16:36:15.185 -03:00 [DBG] Redirecting to 'https://localhost:7058/api/sucursales/1'.
2026-01-28 16:36:15.186 -03:00 [DBG] Connection id "0HNIUK9JR3N8K" completed keep alive response.
2026-01-28 16:36:15.187 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/api/sucursales/1 - application/json 169
2026-01-28 16:36:15.187 -03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5070/api/sucursales/1 - 307 0 null 23.3118ms
2026-01-28 16:36:15.188 -03:00 [DBG] 1 candidate(s) found for the request path '/api/sucursales/1'
2026-01-28 16:36:15.190 -03:00 [DBG] Connection id "0HNIUK9JR3N8K", Request id "0HNIUK9JR3N8K:00000006": started reading request body.
2026-01-28 16:36:15.191 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.SucursalesController.GetById (Project_Gon.Api)' with route pattern 'api/Sucursales/{id}' is valid for the request path '/api/sucursales/1'
2026-01-28 16:36:15.191 -03:00 [DBG] Connection id "0HNIUK9JR3N8K", Request id "0HNIUK9JR3N8K:00000006": done reading request body.
2026-01-28 16:36:15.192 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.SucursalesController.GetById (Project_Gon.Api)'
2026-01-28 16:36:15.194 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 16:36:15.195 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 16:36:15.195 -03:00 [INF] Executing endpoint 'Project_Gon.Api.Controllers.SucursalesController.GetById (Project_Gon.Api)'
2026-01-28 16:36:15.196 -03:00 [INF] Route matched with {action = "GetById", controller = "Sucursales"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetById(Int32) on controller Project_Gon.Api.Controllers.SucursalesController (Project_Gon.Api).
2026-01-28 16:36:15.197 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-01-28 16:36:15.198 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-01-28 16:36:15.201 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-01-28 16:36:15.203 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-01-28 16:36:15.204 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-01-28 16:36:15.205 -03:00 [DBG] Executing controller factory for controller Project_Gon.Api.Controllers.SucursalesController (Project_Gon.Api)
2026-01-28 16:36:15.206 -03:00 [DBG] Executed controller factory for controller Project_Gon.Api.Controllers.SucursalesController (Project_Gon.Api)
2026-01-28 16:36:15.207 -03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2026-01-28 16:36:15.208 -03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2026-01-28 16:36:15.209 -03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2026-01-28 16:36:15.209 -03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2026-01-28 16:36:15.210 -03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2026-01-28 16:36:15.211 -03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2026-01-28 16:36:15.212 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 16:36:15.214 -03:00 [DBG] Creating DbConnection.
2026-01-28 16:36:15.218 -03:00 [DBG] Created DbConnection. (3ms).
2026-01-28 16:36:15.219 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:36:15.220 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:36:15.221 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:36:15.222 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:36:15.222 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:36:15.223 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Activo", s."Ciudad", s."CreatedAt", s."Direccion", s."EmpresaId", s."Nombre", s."Region", s."Telefono", s."UpdatedAt"
FROM "Sucursales" AS s
WHERE s."Id" = @__p_0
LIMIT 1
2026-01-28 16:36:15.225 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Activo", s."Ciudad", s."CreatedAt", s."Direccion", s."EmpresaId", s."Nombre", s."Region", s."Telefono", s."UpdatedAt"
FROM "Sucursales" AS s
WHERE s."Id" = @__p_0
LIMIT 1
2026-01-28 16:36:15.227 -03:00 [DBG] Context 'AppDbContext' started tracking 'Sucursal' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:36:15.228 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:36:15.229 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-01-28 16:36:15.230 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:36:15.232 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (2ms).
2026-01-28 16:36:15.234 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:36:15.234 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:36:15.235 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:36:15.236 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:36:15.237 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:36:15.237 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 16:36:15.239 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 16:36:15.241 -03:00 [DBG] The navigation 'Sucursal.Empresa' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:36:15.242 -03:00 [DBG] Context 'AppDbContext' started tracking 'Empresa' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:36:15.243 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:36:15.243 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 2ms reading results.
2026-01-28 16:36:15.245 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:36:15.245 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:36:15.246 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-01-28 16:36:15.250 -03:00 [DBG] No information found on request to perform content negotiation.
2026-01-28 16:36:15.250 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-01-28 16:36:15.251 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-01-28 16:36:15.252 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-01-28 16:36:15.253 -03:00 [INF] Executing OkObjectResult, writing value of type 'Project_Gon.Core.DTOs.Sucursal.SucursalDto'.
2026-01-28 16:36:15.254 -03:00 [INF] Executed action Project_Gon.Api.Controllers.SucursalesController.GetById (Project_Gon.Api) in 48.8883ms
2026-01-28 16:36:15.254 -03:00 [INF] Executed endpoint 'Project_Gon.Api.Controllers.SucursalesController.GetById (Project_Gon.Api)'
2026-01-28 16:36:15.255 -03:00 [INF] HTTP GET /api/sucursales/1 responded 200 in 60.5418 ms
2026-01-28 16:36:15.256 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 16:36:15.257 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:36:15.258 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (1ms).
2026-01-28 16:36:15.259 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/api/sucursales/1 - 200 null application/json; charset=utf-8 72.6292ms
2026-01-28 16:36:15.262 -03:00 [DBG] Connection id "0HNIUK9JR3N8L", Request id "0HNIUK9JR3N8L:0000000B": started reading request body.
2026-01-28 16:36:15.265 -03:00 [DBG] Connection id "0HNIUK9JR3N8L", Request id "0HNIUK9JR3N8L:0000000B": done reading request body.
2026-01-28 16:36:30.229 -03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5070/api/sucursales/1 - application/json 170
2026-01-28 16:36:30.231 -03:00 [DBG] 1 candidate(s) found for the request path '/api/sucursales/1'
2026-01-28 16:36:30.232 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.SucursalesController.Update (Project_Gon.Api)' with route pattern 'api/Sucursales/{id}' is valid for the request path '/api/sucursales/1'
2026-01-28 16:36:30.233 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.SucursalesController.Update (Project_Gon.Api)'
2026-01-28 16:36:30.233 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 16:36:30.234 -03:00 [DBG] Redirecting to 'https://localhost:7058/api/sucursales/1'.
2026-01-28 16:36:30.235 -03:00 [DBG] Connection id "0HNIUK9JR3N8K" completed keep alive response.
2026-01-28 16:36:30.235 -03:00 [INF] Request starting HTTP/2 PUT https://localhost:7058/api/sucursales/1 - application/json 170
2026-01-28 16:36:30.235 -03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5070/api/sucursales/1 - 307 0 null 5.9635ms
2026-01-28 16:36:30.237 -03:00 [DBG] 1 candidate(s) found for the request path '/api/sucursales/1'
2026-01-28 16:36:30.238 -03:00 [DBG] Connection id "0HNIUK9JR3N8K", Request id "0HNIUK9JR3N8K:00000007": started reading request body.
2026-01-28 16:36:30.239 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.SucursalesController.Update (Project_Gon.Api)' with route pattern 'api/Sucursales/{id}' is valid for the request path '/api/sucursales/1'
2026-01-28 16:36:30.240 -03:00 [DBG] Connection id "0HNIUK9JR3N8K", Request id "0HNIUK9JR3N8K:00000007": done reading request body.
2026-01-28 16:36:30.241 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.SucursalesController.Update (Project_Gon.Api)'
2026-01-28 16:36:30.242 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 16:36:30.243 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 16:36:30.246 -03:00 [INF] Executing endpoint 'Project_Gon.Api.Controllers.SucursalesController.Update (Project_Gon.Api)'
2026-01-28 16:36:30.249 -03:00 [INF] Route matched with {action = "Update", controller = "Sucursales"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Update(Int32, Project_Gon.Core.DTOs.Sucursal.UpdateSucursalDto) on controller Project_Gon.Api.Controllers.SucursalesController (Project_Gon.Api).
2026-01-28 16:36:30.251 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-01-28 16:36:30.252 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-01-28 16:36:30.253 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-01-28 16:36:30.254 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-01-28 16:36:30.255 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-01-28 16:36:30.256 -03:00 [DBG] Executing controller factory for controller Project_Gon.Api.Controllers.SucursalesController (Project_Gon.Api)
2026-01-28 16:36:30.258 -03:00 [DBG] Executed controller factory for controller Project_Gon.Api.Controllers.SucursalesController (Project_Gon.Api)
2026-01-28 16:36:30.258 -03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2026-01-28 16:36:30.261 -03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2026-01-28 16:36:30.262 -03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2026-01-28 16:36:30.263 -03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2026-01-28 16:36:30.264 -03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2026-01-28 16:36:30.265 -03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2026-01-28 16:36:30.265 -03:00 [DBG] Attempting to bind parameter 'updateDto' of type 'Project_Gon.Core.DTOs.Sucursal.UpdateSucursalDto' ...
2026-01-28 16:36:30.266 -03:00 [DBG] Attempting to bind parameter 'updateDto' of type 'Project_Gon.Core.DTOs.Sucursal.UpdateSucursalDto' using the name '' in request data ...
2026-01-28 16:36:30.267 -03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2026-01-28 16:36:30.269 -03:00 [DBG] Connection id "0HNIUK9JR3N8L", Request id "0HNIUK9JR3N8L:0000000D": started reading request body.
2026-01-28 16:36:30.269 -03:00 [DBG] Connection id "0HNIUK9JR3N8L", Request id "0HNIUK9JR3N8L:0000000D": done reading request body.
2026-01-28 16:36:30.271 -03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Project_Gon.Core.DTOs.Sucursal.UpdateSucursalDto'
2026-01-28 16:36:30.271 -03:00 [DBG] Done attempting to bind parameter 'updateDto' of type 'Project_Gon.Core.DTOs.Sucursal.UpdateSucursalDto'.
2026-01-28 16:36:30.272 -03:00 [DBG] Done attempting to bind parameter 'updateDto' of type 'Project_Gon.Core.DTOs.Sucursal.UpdateSucursalDto'.
2026-01-28 16:36:30.273 -03:00 [DBG] Attempting to validate the bound parameter 'updateDto' of type 'Project_Gon.Core.DTOs.Sucursal.UpdateSucursalDto' ...
2026-01-28 16:36:30.312 -03:00 [DBG] Done attempting to validate the bound parameter 'updateDto' of type 'Project_Gon.Core.DTOs.Sucursal.UpdateSucursalDto'.
2026-01-28 16:36:30.315 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 16:36:30.316 -03:00 [DBG] Creating DbConnection.
2026-01-28 16:36:30.316 -03:00 [DBG] Created DbConnection. (0ms).
2026-01-28 16:36:30.317 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:36:30.318 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:36:30.319 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:36:30.319 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:36:30.320 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:36:30.321 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Activo", s."Ciudad", s."CreatedAt", s."Direccion", s."EmpresaId", s."Nombre", s."Region", s."Telefono", s."UpdatedAt"
FROM "Sucursales" AS s
WHERE s."Id" = @__p_0
LIMIT 1
2026-01-28 16:36:30.323 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Activo", s."Ciudad", s."CreatedAt", s."Direccion", s."EmpresaId", s."Nombre", s."Region", s."Telefono", s."UpdatedAt"
FROM "Sucursales" AS s
WHERE s."Id" = @__p_0
LIMIT 1
2026-01-28 16:36:30.325 -03:00 [DBG] Context 'AppDbContext' started tracking 'Sucursal' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:36:30.326 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:36:30.327 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-01-28 16:36:30.328 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:36:30.329 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:36:30.331 -03:00 [DBG] An entity of type 'Sucursal' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:36:30.332 -03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2026-01-28 16:36:30.333 -03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2026-01-28 16:36:30.333 -03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2026-01-28 16:36:30.334 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:36:30.335 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:36:30.338 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:36:30.340 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2026-01-28 16:36:30.341 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2026-01-28 16:36:30.342 -03:00 [DBG] Executing DbCommand [Parameters=[@p9='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = Int32), @p5='?', @p6='?', @p7='?', @p8='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Sucursales" SET "Activo" = @p0, "Ciudad" = @p1, "CreatedAt" = @p2, "Direccion" = @p3, "EmpresaId" = @p4, "Nombre" = @p5, "Region" = @p6, "Telefono" = @p7, "UpdatedAt" = @p8
WHERE "Id" = @p9;
2026-01-28 16:36:30.345 -03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = Int32), @p5='?', @p6='?', @p7='?', @p8='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Sucursales" SET "Activo" = @p0, "Ciudad" = @p1, "CreatedAt" = @p2, "Direccion" = @p3, "EmpresaId" = @p4, "Nombre" = @p5, "Region" = @p6, "Telefono" = @p7, "UpdatedAt" = @p8
WHERE "Id" = @p9;
2026-01-28 16:36:30.347 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:36:30.348 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-01-28 16:36:30.349 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:36:30.350 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:36:30.353 -03:00 [DBG] An entity of type 'Sucursal' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:36:30.354 -03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2026-01-28 16:36:30.355 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:36:30.356 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:36:30.357 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:36:30.357 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:36:30.358 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:36:30.359 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 16:36:30.361 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 16:36:30.363 -03:00 [DBG] The navigation 'Sucursal.Empresa' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:36:30.364 -03:00 [DBG] Context 'AppDbContext' started tracking 'Empresa' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:36:30.365 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:36:30.366 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 2ms reading results.
2026-01-28 16:36:30.369 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:36:30.370 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:36:30.371 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-01-28 16:36:30.373 -03:00 [DBG] No information found on request to perform content negotiation.
2026-01-28 16:36:30.374 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-01-28 16:36:30.374 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-01-28 16:36:30.375 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-01-28 16:36:30.376 -03:00 [INF] Executing OkObjectResult, writing value of type 'Project_Gon.Core.DTOs.Sucursal.SucursalDto'.
2026-01-28 16:36:30.377 -03:00 [INF] Executed action Project_Gon.Api.Controllers.SucursalesController.Update (Project_Gon.Api) in 120.9345ms
2026-01-28 16:36:30.378 -03:00 [INF] Executed endpoint 'Project_Gon.Api.Controllers.SucursalesController.Update (Project_Gon.Api)'
2026-01-28 16:36:30.379 -03:00 [INF] HTTP PUT /api/sucursales/1 responded 200 in 135.5601 ms
2026-01-28 16:36:30.380 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 16:36:30.380 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:36:30.381 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:36:30.385 -03:00 [INF] Request finished HTTP/2 PUT https://localhost:7058/api/sucursales/1 - 200 null application/json; charset=utf-8 149.4248ms
2026-01-28 16:36:51.953 -03:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5070/api/sucursales/1 - application/json 170
2026-01-28 16:36:51.955 -03:00 [DBG] 1 candidate(s) found for the request path '/api/sucursales/1'
2026-01-28 16:36:51.956 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.SucursalesController.Delete (Project_Gon.Api)' with route pattern 'api/Sucursales/{id}' is valid for the request path '/api/sucursales/1'
2026-01-28 16:36:51.957 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.SucursalesController.Delete (Project_Gon.Api)'
2026-01-28 16:36:51.957 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 16:36:51.958 -03:00 [DBG] Redirecting to 'https://localhost:7058/api/sucursales/1'.
2026-01-28 16:36:51.959 -03:00 [DBG] Connection id "0HNIUK9JR3N8K" completed keep alive response.
2026-01-28 16:36:51.959 -03:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5070/api/sucursales/1 - 307 0 null 5.8413ms
2026-01-28 16:36:51.959 -03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7058/api/sucursales/1 - application/json 170
2026-01-28 16:36:51.961 -03:00 [DBG] Connection id "0HNIUK9JR3N8K", Request id "0HNIUK9JR3N8K:00000008": started reading request body.
2026-01-28 16:36:51.962 -03:00 [DBG] 1 candidate(s) found for the request path '/api/sucursales/1'
2026-01-28 16:36:51.963 -03:00 [DBG] Connection id "0HNIUK9JR3N8K", Request id "0HNIUK9JR3N8K:00000008": done reading request body.
2026-01-28 16:36:51.965 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.SucursalesController.Delete (Project_Gon.Api)' with route pattern 'api/Sucursales/{id}' is valid for the request path '/api/sucursales/1'
2026-01-28 16:36:51.967 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.SucursalesController.Delete (Project_Gon.Api)'
2026-01-28 16:36:51.967 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 16:36:51.968 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 16:36:51.969 -03:00 [INF] Executing endpoint 'Project_Gon.Api.Controllers.SucursalesController.Delete (Project_Gon.Api)'
2026-01-28 16:36:51.971 -03:00 [INF] Route matched with {action = "Delete", controller = "Sucursales"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(Int32) on controller Project_Gon.Api.Controllers.SucursalesController (Project_Gon.Api).
2026-01-28 16:36:51.973 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-01-28 16:36:51.974 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-01-28 16:36:51.974 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-01-28 16:36:51.976 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-01-28 16:36:51.977 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-01-28 16:36:51.978 -03:00 [DBG] Executing controller factory for controller Project_Gon.Api.Controllers.SucursalesController (Project_Gon.Api)
2026-01-28 16:36:51.981 -03:00 [DBG] Executed controller factory for controller Project_Gon.Api.Controllers.SucursalesController (Project_Gon.Api)
2026-01-28 16:36:51.982 -03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2026-01-28 16:36:51.982 -03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2026-01-28 16:36:51.983 -03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2026-01-28 16:36:51.984 -03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2026-01-28 16:36:51.985 -03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2026-01-28 16:36:51.985 -03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2026-01-28 16:36:51.987 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 16:36:51.989 -03:00 [DBG] Compiling query expression: 
'DbSet<Usuario>()
    .AsNoTracking()'
2026-01-28 16:36:51.991 -03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<Usuario>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Usuario.Activo (bool) Required, 1], [Property: Usuario.Apellido (string) Required, 2], [Property: Usuario.CreatedAt (DateTime) Required, 3], [Property: Usuario.Email (string) Index MaxLength(255), 4], [Property: Usuario.EmpresaId (int) Required FK Index, 5], [Property: Usuario.Nombre (string) Required, 6], [Property: Usuario.PasswordHash (string) Required, 7], [Property: Usuario.Rol (RolUsuario) Required, 8], [Property: Usuario.Rut (string) Index MaxLength(12), 9], [Property: Usuario.SucursalId (int?) FK Index, 10], [Property: Usuario.UltimoAcceso (DateTime?), 11], [Property: Usuario.UpdatedAt (DateTime?), 12] }
        SELECT u.Id, u.Activo, u.Apellido, u.CreatedAt, u.Email, u.EmpresaId, u.Nombre, u.PasswordHash, u.Rol, u.Rut, u.SucursalId, u.UltimoAcceso, u.UpdatedAt
        FROM Usuarios AS u) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Usuario.Activo (bool) Required, 1], [Property: Usuario.Apellido (string) Required, 2], [Property: Usuario.CreatedAt (DateTime) Required, 3], [Property: Usuario.Email (string) Index MaxLength(255), 4], [Property: Usuario.EmpresaId (int) Required FK Index, 5], [Property: Usuario.Nombre (string) Required, 6], [Property: Usuario.PasswordHash (string) Required, 7], [Property: Usuario.Rol (RolUsuario) Required, 8], [Property: Usuario.Rut (string) Index MaxLength(12), 9], [Property: Usuario.SucursalId (int?) FK Index, 10], [Property: Usuario.UltimoAcceso (DateTime?), 11], [Property: Usuario.UpdatedAt (DateTime?), 12] }
        SELECT u.Id, u.Activo, u.Apellido, u.CreatedAt, u.Email, u.EmpresaId, u.Nombre, u.PasswordHash, u.Rol, u.Rut, u.SucursalId, u.UltimoAcceso, u.UpdatedAt
        FROM Usuarios AS u, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Usuario entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            Usuario instance1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(Usuario);
            (object)dataReader.GetInt32(0) != null ? 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")]: 
                        {
                            return 
                            {
                                Usuario instance;
                                instance = new Usuario();
                                instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                instance.<Activo>k__BackingField = dataReader.GetBoolean(1);
                                instance.<Apellido>k__BackingField = dataReader.GetString(2);
                                instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(3);
                                instance.<Email>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                instance.<EmpresaId>k__BackingField = dataReader.GetInt32(5);
                                instance.<Nombre>k__BackingField = dataReader.GetString(6);
                                instance.<PasswordHash>k__BackingField = dataReader.GetString(7);
                                instance.<Rol>k__BackingField = Invoke(((EnumToNumberConverter<RolUsuario, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Usuario.Rol (RolUsuario) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario").FindProperty("Rol")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(8));
                                instance.<Rut>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                instance.<SucursalId>k__BackingField = dataReader.IsDBNull(10) ? default(int?) : (int?)dataReader.GetInt32(10);
                                instance.<UltimoAcceso>k__BackingField = dataReader.IsDBNull(11) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(11);
                                instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(12) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(12);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: NoTracking, 
                                    structuralType: [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(Usuario)
                }
                ;
                return instance1;
            } : 
            {
                object[] keyValues1;
                keyValues1 = new object[]{ (object)dataReader.GetInt32(0) };
                return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                    entityType: [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")], 
                    properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario").FindPrimaryKey().Properties], 
                    keyValues: keyValues1);
            };
            return instance1;
        };
        return entity;
    }, 
    contextType: Project_Gon.Infrastructure.Data.AppDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2026-01-28 16:36:52.004 -03:00 [DBG] Creating DbConnection.
2026-01-28 16:36:52.004 -03:00 [DBG] Created DbConnection. (0ms).
2026-01-28 16:36:52.005 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:36:52.006 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:36:52.006 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:36:52.007 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:36:52.008 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:36:52.008 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
2026-01-28 16:36:52.012 -03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
2026-01-28 16:36:52.014 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:36:52.015 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-01-28 16:36:52.016 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:36:52.017 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:36:52.018 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-01-28 16:36:52.019 -03:00 [DBG] No information found on request to perform content negotiation.
2026-01-28 16:36:52.020 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-01-28 16:36:52.020 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-01-28 16:36:52.021 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2026-01-28 16:36:52.022 -03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2026-01-28 16:36:52.023 -03:00 [INF] Executed action Project_Gon.Api.Controllers.SucursalesController.Delete (Project_Gon.Api) in 45.037ms
2026-01-28 16:36:52.024 -03:00 [INF] Executed endpoint 'Project_Gon.Api.Controllers.SucursalesController.Delete (Project_Gon.Api)'
2026-01-28 16:36:52.024 -03:00 [INF] HTTP DELETE /api/sucursales/1 responded 400 in 56.1726 ms
2026-01-28 16:36:52.025 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 16:36:52.026 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:36:52.027 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:36:52.030 -03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7058/api/sucursales/1 - 400 null text/plain; charset=utf-8 71.0242ms
2026-01-28 16:36:52.032 -03:00 [DBG] Connection id "0HNIUK9JR3N8L", Request id "0HNIUK9JR3N8L:0000000F": started reading request body.
2026-01-28 16:36:52.047 -03:00 [DBG] Connection id "0HNIUK9JR3N8L", Request id "0HNIUK9JR3N8L:0000000F": done reading request body.
2026-01-28 16:38:20.735 -03:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5070/api/sucursales/1 - application/json 170
2026-01-28 16:38:20.737 -03:00 [DBG] 1 candidate(s) found for the request path '/api/sucursales/1'
2026-01-28 16:38:20.738 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.SucursalesController.Delete (Project_Gon.Api)' with route pattern 'api/Sucursales/{id}' is valid for the request path '/api/sucursales/1'
2026-01-28 16:38:20.739 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.SucursalesController.Delete (Project_Gon.Api)'
2026-01-28 16:38:20.740 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 16:38:20.740 -03:00 [DBG] Redirecting to 'https://localhost:7058/api/sucursales/1'.
2026-01-28 16:38:20.741 -03:00 [DBG] Connection id "0HNIUK9JR3N8K" completed keep alive response.
2026-01-28 16:38:20.742 -03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7058/api/sucursales/1 - application/json 170
2026-01-28 16:38:20.742 -03:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5070/api/sucursales/1 - 307 0 null 6.3514ms
2026-01-28 16:38:20.743 -03:00 [DBG] 1 candidate(s) found for the request path '/api/sucursales/1'
2026-01-28 16:38:20.744 -03:00 [DBG] Connection id "0HNIUK9JR3N8K", Request id "0HNIUK9JR3N8K:00000009": started reading request body.
2026-01-28 16:38:20.745 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.SucursalesController.Delete (Project_Gon.Api)' with route pattern 'api/Sucursales/{id}' is valid for the request path '/api/sucursales/1'
2026-01-28 16:38:20.746 -03:00 [DBG] Connection id "0HNIUK9JR3N8K", Request id "0HNIUK9JR3N8K:00000009": done reading request body.
2026-01-28 16:38:20.747 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.SucursalesController.Delete (Project_Gon.Api)'
2026-01-28 16:38:20.748 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 16:38:20.749 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 16:38:20.752 -03:00 [INF] Executing endpoint 'Project_Gon.Api.Controllers.SucursalesController.Delete (Project_Gon.Api)'
2026-01-28 16:38:20.752 -03:00 [INF] Route matched with {action = "Delete", controller = "Sucursales"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(Int32) on controller Project_Gon.Api.Controllers.SucursalesController (Project_Gon.Api).
2026-01-28 16:38:20.754 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-01-28 16:38:20.755 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-01-28 16:38:20.756 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-01-28 16:38:20.757 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-01-28 16:38:20.758 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-01-28 16:38:20.759 -03:00 [DBG] Executing controller factory for controller Project_Gon.Api.Controllers.SucursalesController (Project_Gon.Api)
2026-01-28 16:38:20.760 -03:00 [DBG] Executed controller factory for controller Project_Gon.Api.Controllers.SucursalesController (Project_Gon.Api)
2026-01-28 16:38:20.761 -03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2026-01-28 16:38:20.762 -03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2026-01-28 16:38:20.762 -03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2026-01-28 16:38:20.763 -03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2026-01-28 16:38:20.764 -03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2026-01-28 16:38:20.765 -03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2026-01-28 16:38:20.768 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 16:38:20.769 -03:00 [DBG] Creating DbConnection.
2026-01-28 16:38:20.769 -03:00 [DBG] Created DbConnection. (0ms).
2026-01-28 16:38:20.770 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:38:20.771 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:38:20.771 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:38:20.772 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:38:20.773 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:38:20.774 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
2026-01-28 16:38:20.775 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
2026-01-28 16:38:20.777 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:38:20.778 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-01-28 16:38:20.779 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:38:20.779 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:38:20.780 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-01-28 16:38:20.784 -03:00 [DBG] No information found on request to perform content negotiation.
2026-01-28 16:38:20.785 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-01-28 16:38:20.785 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-01-28 16:38:20.786 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2026-01-28 16:38:20.787 -03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2026-01-28 16:38:20.788 -03:00 [INF] Executed action Project_Gon.Api.Controllers.SucursalesController.Delete (Project_Gon.Api) in 28.9008ms
2026-01-28 16:38:20.789 -03:00 [INF] Executed endpoint 'Project_Gon.Api.Controllers.SucursalesController.Delete (Project_Gon.Api)'
2026-01-28 16:38:20.789 -03:00 [INF] HTTP DELETE /api/sucursales/1 responded 400 in 40.1662 ms
2026-01-28 16:38:20.790 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 16:38:20.791 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:38:20.792 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:38:20.793 -03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7058/api/sucursales/1 - 400 null text/plain; charset=utf-8 50.8026ms
2026-01-28 16:38:20.795 -03:00 [DBG] Connection id "0HNIUK9JR3N8L", Request id "0HNIUK9JR3N8L:00000011": started reading request body.
2026-01-28 16:38:20.796 -03:00 [DBG] Connection id "0HNIUK9JR3N8L", Request id "0HNIUK9JR3N8L:00000011": done reading request body.
2026-01-28 16:38:25.105 -03:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5070/api/sucursales/1 - application/json 170
2026-01-28 16:38:25.107 -03:00 [DBG] 1 candidate(s) found for the request path '/api/sucursales/1'
2026-01-28 16:38:25.107 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.SucursalesController.Delete (Project_Gon.Api)' with route pattern 'api/Sucursales/{id}' is valid for the request path '/api/sucursales/1'
2026-01-28 16:38:25.109 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.SucursalesController.Delete (Project_Gon.Api)'
2026-01-28 16:38:25.109 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 16:38:25.110 -03:00 [DBG] Redirecting to 'https://localhost:7058/api/sucursales/1'.
2026-01-28 16:38:25.111 -03:00 [DBG] Connection id "0HNIUK9JR3N8K" completed keep alive response.
2026-01-28 16:38:25.111 -03:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5070/api/sucursales/1 - 307 0 null 5.8727ms
2026-01-28 16:38:25.111 -03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7058/api/sucursales/1 - application/json 170
2026-01-28 16:38:25.113 -03:00 [DBG] Connection id "0HNIUK9JR3N8K", Request id "0HNIUK9JR3N8K:0000000A": started reading request body.
2026-01-28 16:38:25.114 -03:00 [DBG] 1 candidate(s) found for the request path '/api/sucursales/1'
2026-01-28 16:38:25.115 -03:00 [DBG] Connection id "0HNIUK9JR3N8K", Request id "0HNIUK9JR3N8K:0000000A": done reading request body.
2026-01-28 16:38:25.116 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.SucursalesController.Delete (Project_Gon.Api)' with route pattern 'api/Sucursales/{id}' is valid for the request path '/api/sucursales/1'
2026-01-28 16:38:25.118 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.SucursalesController.Delete (Project_Gon.Api)'
2026-01-28 16:38:25.118 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 16:38:25.119 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 16:38:25.120 -03:00 [INF] Executing endpoint 'Project_Gon.Api.Controllers.SucursalesController.Delete (Project_Gon.Api)'
2026-01-28 16:38:25.120 -03:00 [INF] Route matched with {action = "Delete", controller = "Sucursales"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(Int32) on controller Project_Gon.Api.Controllers.SucursalesController (Project_Gon.Api).
2026-01-28 16:38:25.122 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-01-28 16:38:25.123 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-01-28 16:38:25.123 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-01-28 16:38:25.125 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-01-28 16:38:25.126 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-01-28 16:38:25.130 -03:00 [DBG] Executing controller factory for controller Project_Gon.Api.Controllers.SucursalesController (Project_Gon.Api)
2026-01-28 16:38:25.131 -03:00 [DBG] Executed controller factory for controller Project_Gon.Api.Controllers.SucursalesController (Project_Gon.Api)
2026-01-28 16:38:25.132 -03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2026-01-28 16:38:25.132 -03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2026-01-28 16:38:25.133 -03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2026-01-28 16:38:25.134 -03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2026-01-28 16:38:25.135 -03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2026-01-28 16:38:25.135 -03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2026-01-28 16:38:25.136 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 16:38:25.138 -03:00 [DBG] Creating DbConnection.
2026-01-28 16:38:25.138 -03:00 [DBG] Created DbConnection. (0ms).
2026-01-28 16:38:25.139 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:38:25.139 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:38:25.140 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:38:25.141 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:38:25.141 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:38:25.144 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
2026-01-28 16:38:25.146 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
2026-01-28 16:38:25.147 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:38:25.148 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-01-28 16:38:25.149 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:38:25.150 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:38:25.151 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-01-28 16:38:25.152 -03:00 [DBG] No information found on request to perform content negotiation.
2026-01-28 16:38:25.153 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-01-28 16:38:25.154 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-01-28 16:38:25.154 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2026-01-28 16:38:25.155 -03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2026-01-28 16:38:25.156 -03:00 [INF] Executed action Project_Gon.Api.Controllers.SucursalesController.Delete (Project_Gon.Api) in 26.4949ms
2026-01-28 16:38:25.157 -03:00 [INF] Executed endpoint 'Project_Gon.Api.Controllers.SucursalesController.Delete (Project_Gon.Api)'
2026-01-28 16:38:25.157 -03:00 [INF] HTTP DELETE /api/sucursales/1 responded 400 in 38.5315 ms
2026-01-28 16:38:25.160 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 16:38:25.161 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:38:25.162 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:38:25.163 -03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7058/api/sucursales/1 - 400 null text/plain; charset=utf-8 51.6482ms
2026-01-28 16:38:25.165 -03:00 [DBG] Connection id "0HNIUK9JR3N8L", Request id "0HNIUK9JR3N8L:00000013": started reading request body.
2026-01-28 16:38:25.166 -03:00 [DBG] Connection id "0HNIUK9JR3N8L", Request id "0HNIUK9JR3N8L:00000013": done reading request body.
2026-01-28 16:39:16.310 -03:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5070/api/usuarios/1 - application/json 69
2026-01-28 16:39:16.312 -03:00 [DBG] No candidates found for the request path '/api/usuarios/1'
2026-01-28 16:39:16.312 -03:00 [DBG] Request did not match any endpoints
2026-01-28 16:39:16.313 -03:00 [DBG] DELETE requests are not supported
2026-01-28 16:39:16.314 -03:00 [DBG] Redirecting to 'https://localhost:7058/api/usuarios/1'.
2026-01-28 16:39:16.315 -03:00 [DBG] Connection id "0HNIUK9JR3N8K" completed keep alive response.
2026-01-28 16:39:16.316 -03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7058/api/usuarios/1 - application/json 69
2026-01-28 16:39:16.316 -03:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5070/api/usuarios/1 - 307 0 null 5.8077ms
2026-01-28 16:39:16.317 -03:00 [DBG] No candidates found for the request path '/api/usuarios/1'
2026-01-28 16:39:16.319 -03:00 [DBG] Connection id "0HNIUK9JR3N8K", Request id "0HNIUK9JR3N8K:0000000B": started reading request body.
2026-01-28 16:39:16.320 -03:00 [DBG] Request did not match any endpoints
2026-01-28 16:39:16.321 -03:00 [DBG] Connection id "0HNIUK9JR3N8K", Request id "0HNIUK9JR3N8K:0000000B": done reading request body.
2026-01-28 16:39:16.322 -03:00 [DBG] DELETE requests are not supported
2026-01-28 16:39:16.324 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 16:39:16.324 -03:00 [INF] HTTP DELETE /api/usuarios/1 responded 404 in 0.7043 ms
2026-01-28 16:39:16.325 -03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7058/api/usuarios/1 - 404 0 null 9.5519ms
2026-01-28 16:39:16.327 -03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: DELETE https://localhost:7058/api/usuarios/1, Response status code: 404
2026-01-28 16:39:16.328 -03:00 [DBG] Connection id "0HNIUK9JR3N8L", Request id "0HNIUK9JR3N8L:00000015": started reading request body.
2026-01-28 16:39:16.329 -03:00 [DBG] Connection id "0HNIUK9JR3N8L", Request id "0HNIUK9JR3N8L:00000015": done reading request body.
2026-01-28 16:39:41.583 -03:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5070/api/sucursales/1 - application/json 69
2026-01-28 16:39:41.585 -03:00 [DBG] 1 candidate(s) found for the request path '/api/sucursales/1'
2026-01-28 16:39:41.586 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.SucursalesController.Delete (Project_Gon.Api)' with route pattern 'api/Sucursales/{id}' is valid for the request path '/api/sucursales/1'
2026-01-28 16:39:41.587 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.SucursalesController.Delete (Project_Gon.Api)'
2026-01-28 16:39:41.588 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 16:39:41.588 -03:00 [DBG] Redirecting to 'https://localhost:7058/api/sucursales/1'.
2026-01-28 16:39:41.589 -03:00 [DBG] Connection id "0HNIUK9JR3N8K" completed keep alive response.
2026-01-28 16:39:41.589 -03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7058/api/sucursales/1 - application/json 69
2026-01-28 16:39:41.590 -03:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5070/api/sucursales/1 - 307 0 null 6.2322ms
2026-01-28 16:39:41.591 -03:00 [DBG] 1 candidate(s) found for the request path '/api/sucursales/1'
2026-01-28 16:39:41.592 -03:00 [DBG] Connection id "0HNIUK9JR3N8K", Request id "0HNIUK9JR3N8K:0000000C": started reading request body.
2026-01-28 16:39:41.593 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.SucursalesController.Delete (Project_Gon.Api)' with route pattern 'api/Sucursales/{id}' is valid for the request path '/api/sucursales/1'
2026-01-28 16:39:41.594 -03:00 [DBG] Connection id "0HNIUK9JR3N8K", Request id "0HNIUK9JR3N8K:0000000C": done reading request body.
2026-01-28 16:39:41.595 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.SucursalesController.Delete (Project_Gon.Api)'
2026-01-28 16:39:41.596 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 16:39:41.597 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 16:39:41.598 -03:00 [INF] Executing endpoint 'Project_Gon.Api.Controllers.SucursalesController.Delete (Project_Gon.Api)'
2026-01-28 16:39:41.598 -03:00 [INF] Route matched with {action = "Delete", controller = "Sucursales"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(Int32) on controller Project_Gon.Api.Controllers.SucursalesController (Project_Gon.Api).
2026-01-28 16:39:41.600 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-01-28 16:39:41.601 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-01-28 16:39:41.601 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-01-28 16:39:41.603 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-01-28 16:39:41.604 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-01-28 16:39:41.605 -03:00 [DBG] Executing controller factory for controller Project_Gon.Api.Controllers.SucursalesController (Project_Gon.Api)
2026-01-28 16:39:41.609 -03:00 [DBG] Executed controller factory for controller Project_Gon.Api.Controllers.SucursalesController (Project_Gon.Api)
2026-01-28 16:39:41.610 -03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2026-01-28 16:39:41.610 -03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2026-01-28 16:39:41.611 -03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2026-01-28 16:39:41.612 -03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2026-01-28 16:39:41.613 -03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2026-01-28 16:39:41.614 -03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2026-01-28 16:39:41.614 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 16:39:41.616 -03:00 [DBG] Creating DbConnection.
2026-01-28 16:39:41.616 -03:00 [DBG] Created DbConnection. (0ms).
2026-01-28 16:39:41.617 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:39:41.748 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:39:41.749 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:39:41.750 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:39:41.750 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:39:41.751 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
2026-01-28 16:39:41.755 -03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
2026-01-28 16:39:41.756 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:39:41.757 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-01-28 16:39:41.758 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:39:41.759 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:39:41.760 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-01-28 16:39:41.761 -03:00 [DBG] No information found on request to perform content negotiation.
2026-01-28 16:39:41.764 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-01-28 16:39:41.764 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-01-28 16:39:41.765 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2026-01-28 16:39:41.766 -03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2026-01-28 16:39:41.767 -03:00 [INF] Executed action Project_Gon.Api.Controllers.SucursalesController.Delete (Project_Gon.Api) in 162.1364ms
2026-01-28 16:39:41.768 -03:00 [INF] Executed endpoint 'Project_Gon.Api.Controllers.SucursalesController.Delete (Project_Gon.Api)'
2026-01-28 16:39:41.768 -03:00 [INF] HTTP DELETE /api/sucursales/1 responded 400 in 171.3718 ms
2026-01-28 16:39:41.769 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 16:39:41.770 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:39:41.771 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:39:41.772 -03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7058/api/sucursales/1 - 400 null text/plain; charset=utf-8 182.4843ms
2026-01-28 16:39:41.774 -03:00 [DBG] Connection id "0HNIUK9JR3N8L", Request id "0HNIUK9JR3N8L:00000017": started reading request body.
2026-01-28 16:39:41.775 -03:00 [DBG] Connection id "0HNIUK9JR3N8L", Request id "0HNIUK9JR3N8L:00000017": done reading request body.
2026-01-28 16:40:40.341 -03:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5070/api/sucursales/1 - application/json 69
2026-01-28 16:40:40.343 -03:00 [DBG] 1 candidate(s) found for the request path '/api/sucursales/1'
2026-01-28 16:40:40.343 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.SucursalesController.Delete (Project_Gon.Api)' with route pattern 'api/Sucursales/{id}' is valid for the request path '/api/sucursales/1'
2026-01-28 16:40:40.345 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.SucursalesController.Delete (Project_Gon.Api)'
2026-01-28 16:40:40.346 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 16:40:40.346 -03:00 [DBG] Redirecting to 'https://localhost:7058/api/sucursales/1'.
2026-01-28 16:40:40.347 -03:00 [DBG] Connection id "0HNIUK9JR3N8K" completed keep alive response.
2026-01-28 16:40:40.348 -03:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5070/api/sucursales/1 - 307 0 null 6.3109ms
2026-01-28 16:40:40.348 -03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7058/api/sucursales/1 - application/json 69
2026-01-28 16:40:40.349 -03:00 [DBG] Connection id "0HNIUK9JR3N8K", Request id "0HNIUK9JR3N8K:0000000D": started reading request body.
2026-01-28 16:40:40.350 -03:00 [DBG] 1 candidate(s) found for the request path '/api/sucursales/1'
2026-01-28 16:40:40.351 -03:00 [DBG] Connection id "0HNIUK9JR3N8K", Request id "0HNIUK9JR3N8K:0000000D": done reading request body.
2026-01-28 16:40:40.352 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.SucursalesController.Delete (Project_Gon.Api)' with route pattern 'api/Sucursales/{id}' is valid for the request path '/api/sucursales/1'
2026-01-28 16:40:40.354 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.SucursalesController.Delete (Project_Gon.Api)'
2026-01-28 16:40:40.355 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 16:40:40.355 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 16:40:40.356 -03:00 [INF] Executing endpoint 'Project_Gon.Api.Controllers.SucursalesController.Delete (Project_Gon.Api)'
2026-01-28 16:40:40.357 -03:00 [INF] Route matched with {action = "Delete", controller = "Sucursales"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(Int32) on controller Project_Gon.Api.Controllers.SucursalesController (Project_Gon.Api).
2026-01-28 16:40:40.358 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-01-28 16:40:40.359 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-01-28 16:40:40.363 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-01-28 16:40:40.364 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-01-28 16:40:40.365 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-01-28 16:40:40.366 -03:00 [DBG] Executing controller factory for controller Project_Gon.Api.Controllers.SucursalesController (Project_Gon.Api)
2026-01-28 16:40:40.367 -03:00 [DBG] Executed controller factory for controller Project_Gon.Api.Controllers.SucursalesController (Project_Gon.Api)
2026-01-28 16:40:40.368 -03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2026-01-28 16:40:40.369 -03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2026-01-28 16:40:40.370 -03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2026-01-28 16:40:40.370 -03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2026-01-28 16:40:40.371 -03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2026-01-28 16:40:40.372 -03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2026-01-28 16:40:40.373 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 16:40:40.375 -03:00 [DBG] Creating DbConnection.
2026-01-28 16:40:40.375 -03:00 [DBG] Created DbConnection. (0ms).
2026-01-28 16:40:40.376 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:40:40.378 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:40:40.379 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:40:40.380 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:40:40.381 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:40:40.382 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
2026-01-28 16:40:40.384 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
2026-01-28 16:40:40.385 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:40:40.386 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-01-28 16:40:40.387 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:40:40.388 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:40:40.390 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:40:40.390 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:40:40.391 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:40:40.392 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:40:40.394 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2026-01-28 16:40:40.395 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Activo", s."Ciudad", s."CreatedAt", s."Direccion", s."EmpresaId", s."Nombre", s."Region", s."Telefono", s."UpdatedAt"
FROM "Sucursales" AS s
WHERE s."Id" = @__p_0
LIMIT 1
2026-01-28 16:40:40.398 -03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Activo", s."Ciudad", s."CreatedAt", s."Direccion", s."EmpresaId", s."Nombre", s."Region", s."Telefono", s."UpdatedAt"
FROM "Sucursales" AS s
WHERE s."Id" = @__p_0
LIMIT 1
2026-01-28 16:40:40.400 -03:00 [DBG] Context 'AppDbContext' started tracking 'Sucursal' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:40:40.401 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:40:40.402 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-01-28 16:40:40.403 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:40:40.403 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:40:40.406 -03:00 [DBG] An entity of type 'Sucursal' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:40:40.408 -03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2026-01-28 16:40:40.410 -03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2026-01-28 16:40:40.411 -03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2026-01-28 16:40:40.413 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:40:40.414 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:40:40.415 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:40:40.415 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:40:40.416 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:40:40.417 -03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Sucursales"
WHERE "Id" = @p0;
2026-01-28 16:40:40.425 -03:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Sucursales"
WHERE "Id" = @p0;
2026-01-28 16:40:40.427 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:40:40.427 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-01-28 16:40:40.428 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:40:40.429 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:40:40.432 -03:00 [DBG] An entity of type 'Sucursal' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:40:40.433 -03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2026-01-28 16:40:40.433 -03:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2026-01-28 16:40:40.434 -03:00 [INF] Executed action Project_Gon.Api.Controllers.SucursalesController.Delete (Project_Gon.Api) in 67.9307ms
2026-01-28 16:40:40.435 -03:00 [INF] Executed endpoint 'Project_Gon.Api.Controllers.SucursalesController.Delete (Project_Gon.Api)'
2026-01-28 16:40:40.435 -03:00 [INF] HTTP DELETE /api/sucursales/1 responded 204 in 79.8915 ms
2026-01-28 16:40:40.436 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 16:40:40.437 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:40:40.438 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:40:40.439 -03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7058/api/sucursales/1 - 204 null null 90.842ms
2026-01-28 16:40:40.443 -03:00 [DBG] Connection id "0HNIUK9JR3N8L", Request id "0HNIUK9JR3N8L:00000019": started reading request body.
2026-01-28 16:40:40.444 -03:00 [DBG] Connection id "0HNIUK9JR3N8L", Request id "0HNIUK9JR3N8L:00000019": done reading request body.
2026-01-28 16:42:50.380 -03:00 [DBG] Connection id "0HNIUK9JR3N8K" disconnecting.
2026-01-28 16:42:50.381 -03:00 [DBG] Connection id "0HNIUK9JR3N8K" stopped.
2026-01-28 16:42:50.382 -03:00 [DBG] Connection id "0HNIUK9JR3N8K" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-01-28 16:42:52.392 -03:00 [DBG] Connection id "0HNIUK9JR3N8L" is closing.
2026-01-28 16:42:52.393 -03:00 [DBG] Connection id "0HNIUK9JR3N8L" is closed. The last processed stream ID was 25.
2026-01-28 16:42:52.394 -03:00 [DBG] The connection queue processing loop for 0HNIUK9JR3N8L completed.
2026-01-28 16:42:52.395 -03:00 [DBG] Connection id "0HNIUK9JR3N8L" stopped.
2026-01-28 16:42:52.395 -03:00 [DBG] Connection id "0HNIUK9JR3N8L" sending FIN because: "The Socket transport's send loop completed gracefully."
