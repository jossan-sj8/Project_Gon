2026-02-10 11:11:41.543 -03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-10 11:11:42.213 -03:00 [DBG] The index {'ProductoId'} was not created on entity type 'Stock' as the properties are already covered by the index {'ProductoId', 'SucursalId'}.
2026-02-10 11:11:42.215 -03:00 [DBG] The index {'EmpresaId'} was not created on entity type 'Usuario' as the properties are already covered by the index {'EmpresaId', 'Email'}.
2026-02-10 11:11:42.216 -03:00 [DBG] The index {'EmpresaId'} was not created on entity type 'Usuario' as the properties are already covered by the index {'EmpresaId', 'Rut'}.
2026-02-10 11:11:42.317 -03:00 [DBG] The property 'MovimientoStock.DevolucionId' was created in shadow state because there are no eligible CLR members with a matching name.
2026-02-10 11:11:42.425 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-02-10 11:11:42.451 -03:00 [DBG] Creating DbConnection.
2026-02-10 11:11:42.518 -03:00 [DBG] Created DbConnection. (73ms).
2026-02-10 11:11:42.521 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:11:43.464 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:11:43.468 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 11:11:43.474 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2026-02-10 11:11:43.475 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2026-02-10 11:11:43.480 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-02-10 11:11:43.506 -03:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-02-10 11:11:43.531 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:11:43.537 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 27ms reading results.
2026-02-10 11:11:43.539 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:11:43.542 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (2ms).
2026-02-10 11:11:43.679 -03:00 [DBG] Migrating using database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:11:43.681 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:11:43.684 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:11:43.754 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:11:43.755 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:11:43.757 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (1ms).
2026-02-10 11:11:43.758 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:11:43.758 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:11:43.792 -03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-02-10 11:11:43.793 -03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-02-10 11:11:43.794 -03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1ms).
2026-02-10 11:11:43.795 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2026-02-10 11:11:43.837 -03:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2026-02-10 11:11:43.841 -03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2026-02-10 11:11:43.844 -03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2026-02-10 11:11:43.846 -03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2026-02-10 11:11:43.846 -03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-02-10 11:11:43.847 -03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-02-10 11:11:43.848 -03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1ms).
2026-02-10 11:11:43.848 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2026-02-10 11:11:43.857 -03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2026-02-10 11:11:43.859 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 11:11:43.859 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 11:11:43.861 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 11:11:43.861 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-02-10 11:11:43.863 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-02-10 11:11:43.864 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:11:43.865 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-02-10 11:11:43.871 -03:00 [INF] No migrations were applied. The database is already up to date.
2026-02-10 11:11:43.872 -03:00 [DBG] Committing transaction.
2026-02-10 11:11:43.878 -03:00 [DBG] Committed transaction.
2026-02-10 11:11:43.880 -03:00 [DBG] Disposing transaction.
2026-02-10 11:11:43.880 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:11:43.881 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-02-10 11:11:43.882 -03:00 [INF] Database migrations applied successfully
2026-02-10 11:11:43.884 -03:00 [DBG] 'AppDbContext' disposed.
2026-02-10 11:11:43.886 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:11:43.887 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (1ms).
2026-02-10 11:11:44.061 -03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-10 11:11:44.170 -03:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2026-02-10 11:11:44.222 -03:00 [INF] Project Gon API iniciada en ambiente: Development
2026-02-10 11:11:44.224 -03:00 [DBG] Hosting starting
2026-02-10 11:11:44.256 -03:00 [INF] User profile is available. Using 'C:\Users\Jossan\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-02-10 11:11:44.272 -03:00 [DBG] Reading data from file 'C:\Users\Jossan\AppData\Local\ASP.NET\DataProtection-Keys\key-7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c.xml'.
2026-02-10 11:11:44.334 -03:00 [DBG] Found key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c}.
2026-02-10 11:11:44.350 -03:00 [DBG] Considering key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} with expiration date 2026-04-28 18:20:11Z as default key.
2026-02-10 11:11:44.358 -03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2026-02-10 11:11:44.359 -03:00 [DBG] Decrypting secret element using Windows DPAPI.
2026-02-10 11:11:44.361 -03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2026-02-10 11:11:44.364 -03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2026-02-10 11:11:44.365 -03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2026-02-10 11:11:44.367 -03:00 [DBG] Using key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} as the default key.
2026-02-10 11:11:44.368 -03:00 [DBG] Key ring with default key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} was loaded during application startup.
2026-02-10 11:11:44.375 -03:00 [DBG] Middleware loaded
2026-02-10 11:11:44.380 -03:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16515 B).
2026-02-10 11:11:44.381 -03:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2026-02-10 11:11:44.539 -03:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2026-02-10 11:11:44.540 -03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-10 11:11:44.545 -03:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2026-02-10 11:11:44.654 -03:00 [INF] Now listening on: https://localhost:7058
2026-02-10 11:11:44.654 -03:00 [INF] Now listening on: http://localhost:5070
2026-02-10 11:11:44.655 -03:00 [DBG] Loaded hosting startup assembly Project_Gon.Api
2026-02-10 11:11:44.656 -03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-10 11:11:44.656 -03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-10 11:11:44.657 -03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-10 11:11:44.663 -03:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2026-02-10 11:11:44.668 -03:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2026-02-10 11:11:44.714 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-10 11:11:44.714 -03:00 [INF] Hosting environment: Development
2026-02-10 11:11:44.715 -03:00 [INF] Content root path: C:\Proyectos\Project_Gon\Project_Gon.Api
2026-02-10 11:11:44.722 -03:00 [DBG] Hosting started
2026-02-10 11:11:56.632 -03:00 [DBG] Connection id "0HNJ8LPCM1UJ4" accepted.
2026-02-10 11:11:56.633 -03:00 [DBG] Connection id "0HNJ8LPCM1UJ4" started.
2026-02-10 11:11:56.646 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.Security.Authentication.AuthenticationException: Cannot determine the frame size or a corrupted frame was received.
   at System.Net.Security.SslStream.GetFrameSize(ReadOnlySpan`1 buffer)
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](CancellationToken cancellationToken, Int32 estimatedSize)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2026-02-10 11:11:56.660 -03:00 [DBG] Connection id "0HNJ8LPCM1UJ4" stopped.
2026-02-10 11:11:56.663 -03:00 [DBG] Connection id "0HNJ8LPCM1UJ4" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 11:13:13.475 -03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-10 11:13:13.866 -03:00 [DBG] The index {'ProductoId'} was not created on entity type 'Stock' as the properties are already covered by the index {'ProductoId', 'SucursalId'}.
2026-02-10 11:13:13.868 -03:00 [DBG] The index {'EmpresaId'} was not created on entity type 'Usuario' as the properties are already covered by the index {'EmpresaId', 'Email'}.
2026-02-10 11:13:13.869 -03:00 [DBG] The index {'EmpresaId'} was not created on entity type 'Usuario' as the properties are already covered by the index {'EmpresaId', 'Rut'}.
2026-02-10 11:13:13.944 -03:00 [DBG] The property 'MovimientoStock.DevolucionId' was created in shadow state because there are no eligible CLR members with a matching name.
2026-02-10 11:13:14.006 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-02-10 11:13:14.017 -03:00 [DBG] Creating DbConnection.
2026-02-10 11:13:14.034 -03:00 [DBG] Created DbConnection. (16ms).
2026-02-10 11:13:14.037 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:13:14.110 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:13:14.115 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 11:13:14.119 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2026-02-10 11:13:14.120 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2026-02-10 11:13:14.124 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-02-10 11:13:14.145 -03:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-02-10 11:13:14.165 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:13:14.171 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 21ms reading results.
2026-02-10 11:13:14.172 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:13:14.175 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (2ms).
2026-02-10 11:13:14.288 -03:00 [DBG] Migrating using database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:13:14.290 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:13:14.292 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:13:14.328 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:13:14.329 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:13:14.332 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (2ms).
2026-02-10 11:13:14.333 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:13:14.334 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:13:14.363 -03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-02-10 11:13:14.364 -03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (1ms).
2026-02-10 11:13:14.365 -03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (2ms).
2026-02-10 11:13:14.366 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2026-02-10 11:13:14.372 -03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2026-02-10 11:13:14.375 -03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2026-02-10 11:13:14.378 -03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2026-02-10 11:13:14.382 -03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2026-02-10 11:13:14.383 -03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-02-10 11:13:14.383 -03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-02-10 11:13:14.385 -03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1ms).
2026-02-10 11:13:14.387 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2026-02-10 11:13:14.389 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2026-02-10 11:13:14.390 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 11:13:14.390 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 11:13:14.391 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 11:13:14.392 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-02-10 11:13:14.394 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-02-10 11:13:14.396 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:13:14.397 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-02-10 11:13:14.402 -03:00 [INF] No migrations were applied. The database is already up to date.
2026-02-10 11:13:14.404 -03:00 [DBG] Committing transaction.
2026-02-10 11:13:14.407 -03:00 [DBG] Committed transaction.
2026-02-10 11:13:14.408 -03:00 [DBG] Disposing transaction.
2026-02-10 11:13:14.408 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:13:14.409 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-02-10 11:13:14.410 -03:00 [INF] Database migrations applied successfully
2026-02-10 11:13:14.412 -03:00 [DBG] 'AppDbContext' disposed.
2026-02-10 11:13:14.413 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:13:14.414 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-02-10 11:13:14.438 -03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-10 11:13:14.478 -03:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2026-02-10 11:13:14.490 -03:00 [INF] Project Gon API iniciada en ambiente: Development
2026-02-10 11:13:14.492 -03:00 [DBG] Hosting starting
2026-02-10 11:13:14.501 -03:00 [INF] User profile is available. Using 'C:\Users\Jossan\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-02-10 11:13:14.506 -03:00 [DBG] Reading data from file 'C:\Users\Jossan\AppData\Local\ASP.NET\DataProtection-Keys\key-7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c.xml'.
2026-02-10 11:13:14.512 -03:00 [DBG] Found key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c}.
2026-02-10 11:13:14.518 -03:00 [DBG] Considering key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} with expiration date 2026-04-28 18:20:11Z as default key.
2026-02-10 11:13:14.521 -03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2026-02-10 11:13:14.522 -03:00 [DBG] Decrypting secret element using Windows DPAPI.
2026-02-10 11:13:14.524 -03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2026-02-10 11:13:14.526 -03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2026-02-10 11:13:14.527 -03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2026-02-10 11:13:14.528 -03:00 [DBG] Using key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} as the default key.
2026-02-10 11:13:14.529 -03:00 [DBG] Key ring with default key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} was loaded during application startup.
2026-02-10 11:13:14.535 -03:00 [DBG] Middleware loaded
2026-02-10 11:13:14.541 -03:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16515 B).
2026-02-10 11:13:14.543 -03:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2026-02-10 11:13:14.590 -03:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2026-02-10 11:13:14.591 -03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-10 11:13:14.593 -03:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2026-02-10 11:13:14.621 -03:00 [INF] Now listening on: https://localhost:7058
2026-02-10 11:13:14.621 -03:00 [INF] Now listening on: http://localhost:5070
2026-02-10 11:13:14.622 -03:00 [DBG] Loaded hosting startup assembly Project_Gon.Api
2026-02-10 11:13:14.623 -03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-10 11:13:14.623 -03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-10 11:13:14.624 -03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-10 11:13:14.627 -03:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2026-02-10 11:13:14.632 -03:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2026-02-10 11:13:14.658 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-10 11:13:14.659 -03:00 [INF] Hosting environment: Development
2026-02-10 11:13:14.660 -03:00 [INF] Content root path: C:\Proyectos\Project_Gon\Project_Gon.Api
2026-02-10 11:13:14.661 -03:00 [DBG] Hosting started
2026-02-10 11:13:31.151 -03:00 [DBG] Connection id "0HNJ8LQ8REVO3" accepted.
2026-02-10 11:13:31.152 -03:00 [DBG] Connection id "0HNJ8LQ8REVO3" started.
2026-02-10 11:13:31.185 -03:00 [DBG] Connection 0HNJ8LQ8REVO3 established using the following protocol: "Tls12"
2026-02-10 11:13:31.216 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger - null null
2026-02-10 11:13:31.308 -03:00 [DBG] No candidates found for the request path '/swagger'
2026-02-10 11:13:31.309 -03:00 [DBG] Request did not match any endpoints
2026-02-10 11:13:31.316 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger - 301 0 null 100.8007ms
2026-02-10 11:13:31.320 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/index.html - null null
2026-02-10 11:13:31.324 -03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-10 11:13:31.325 -03:00 [DBG] Request did not match any endpoints
2026-02-10 11:13:31.356 -03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-10 11:13:31.357 -03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-10 11:13:31.365 -03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-10 11:13:31.366 -03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-10 11:13:31.367 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/index.html - 200 null text/html;charset=utf-8 46.2494ms
2026-02-10 11:13:31.385 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/swagger-ui.css - null null
2026-02-10 11:13:31.385 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/swagger-ui-bundle.js - null null
2026-02-10 11:13:31.385 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/swagger-ui-standalone-preset.js - null null
2026-02-10 11:13:31.385 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/_framework/aspnetcore-browser-refresh.js - null null
2026-02-10 11:13:31.385 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/_vs/browserLink - null null
2026-02-10 11:13:31.386 -03:00 [DBG] No candidates found for the request path '/swagger/swagger-ui.css'
2026-02-10 11:13:31.387 -03:00 [DBG] No candidates found for the request path '/swagger/swagger-ui-bundle.js'
2026-02-10 11:13:31.389 -03:00 [DBG] No candidates found for the request path '/swagger/swagger-ui-standalone-preset.js'
2026-02-10 11:13:31.393 -03:00 [DBG] Request did not match any endpoints
2026-02-10 11:13:31.393 -03:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2026-02-10 11:13:31.394 -03:00 [DBG] Request did not match any endpoints
2026-02-10 11:13:31.394 -03:00 [DBG] Request did not match any endpoints
2026-02-10 11:13:31.396 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/_framework/aspnetcore-browser-refresh.js - 200 16515 application/javascript; charset=utf-8 11.1373ms
2026-02-10 11:13:31.404 -03:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2026-02-10 11:13:31.404 -03:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2026-02-10 11:13:31.407 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/swagger-ui.css - 200 152034 text/css 22.3319ms
2026-02-10 11:13:31.408 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/swagger-ui-standalone-preset.js - 200 230280 text/javascript 23.3738ms
2026-02-10 11:13:31.413 -03:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2026-02-10 11:13:31.415 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/swagger-ui-bundle.js - 200 1456926 text/javascript 30.4676ms
2026-02-10 11:13:31.433 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/_vs/browserLink - 200 null text/javascript; charset=UTF-8 47.6031ms
2026-02-10 11:13:31.552 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/v1/swagger.json - null null
2026-02-10 11:13:31.552 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/favicon-32x32.png - null null
2026-02-10 11:13:31.553 -03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-10 11:13:31.555 -03:00 [DBG] No candidates found for the request path '/swagger/favicon-32x32.png'
2026-02-10 11:13:31.556 -03:00 [DBG] Request did not match any endpoints
2026-02-10 11:13:31.556 -03:00 [DBG] Request did not match any endpoints
2026-02-10 11:13:31.558 -03:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2026-02-10 11:13:31.559 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/favicon-32x32.png - 200 628 image/png 6.1873ms
2026-02-10 11:13:31.586 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 33.975ms
2026-02-10 11:14:29.722 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/Auth/login - application/json 68
2026-02-10 11:14:29.726 -03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2026-02-10 11:14:29.727 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2026-02-10 11:14:29.733 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-02-10 11:14:29.735 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 11:14:29.736 -03:00 [DBG] The request has an origin header: 'https://localhost:7058'.
2026-02-10 11:14:29.737 -03:00 [INF] CORS policy execution failed.
2026-02-10 11:14:29.738 -03:00 [INF] Request origin https://localhost:7058 does not have permission to access the resource.
2026-02-10 11:14:29.797 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-02-10 11:14:29.799 -03:00 [INF] Executing endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-02-10 11:14:29.812 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Project_Gon.Core.DTOs.Auth.LoginDto) on controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api).
2026-02-10 11:14:29.815 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 11:14:29.816 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 11:14:29.817 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-10 11:14:29.818 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 11:14:29.820 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 11:14:29.823 -03:00 [DBG] Executing controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-02-10 11:14:29.923 -03:00 [DBG] Executed controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-02-10 11:14:29.927 -03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' ...
2026-02-10 11:14:29.929 -03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' using the name '' in request data ...
2026-02-10 11:14:29.931 -03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2026-02-10 11:14:29.935 -03:00 [DBG] Connection id "0HNJ8LQ8REVO3", Request id "0HNJ8LQ8REVO3:00000013": started reading request body.
2026-02-10 11:14:29.936 -03:00 [DBG] Connection id "0HNJ8LQ8REVO3", Request id "0HNJ8LQ8REVO3:00000013": done reading request body.
2026-02-10 11:14:29.940 -03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Project_Gon.Core.DTOs.Auth.LoginDto'
2026-02-10 11:14:29.941 -03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-02-10 11:14:29.942 -03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-02-10 11:14:29.942 -03:00 [DBG] Attempting to validate the bound parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' ...
2026-02-10 11:14:29.966 -03:00 [DBG] Done attempting to validate the bound parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-02-10 11:14:29.969 -03:00 [INF] [LOGIN] Intento de login con: admin@example.com
2026-02-10 11:14:29.970 -03:00 [INF] [FIND] Buscando por EMAIL: admin@example.com
2026-02-10 11:14:29.985 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-02-10 11:14:30.029 -03:00 [DBG] Compiling query expression: 
'DbSet<Usuario>()
    .Where(u => u.Email == __emailOrRut_0 && u.Activo)
    .AsNoTracking()
    .FirstOrDefault()'
2026-02-10 11:14:30.187 -03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Usuario>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Usuario>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Usuario.Activo (bool) Required, 1], [Property: Usuario.Apellido (string) Required, 2], [Property: Usuario.CreatedAt (DateTime) Required, 3], [Property: Usuario.Email (string) Index MaxLength(255), 4], [Property: Usuario.EmpresaId (int) Required FK Index, 5], [Property: Usuario.Nombre (string) Required, 6], [Property: Usuario.PasswordHash (string) Required, 7], [Property: Usuario.Rol (RolUsuario) Required, 8], [Property: Usuario.Rut (string) Index MaxLength(12), 9], [Property: Usuario.SucursalId (int?) FK Index, 10], [Property: Usuario.UltimoAcceso (DateTime?), 11], [Property: Usuario.UpdatedAt (DateTime?), 12] }
            SELECT TOP(1) u.Id, u.Activo, u.Apellido, u.CreatedAt, u.Email, u.EmpresaId, u.Nombre, u.PasswordHash, u.Rol, u.Rut, u.SucursalId, u.UltimoAcceso, u.UpdatedAt
            FROM Usuarios AS u
            WHERE (u.Email == @__emailOrRut_0) && u.Activo) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Usuario.Activo (bool) Required, 1], [Property: Usuario.Apellido (string) Required, 2], [Property: Usuario.CreatedAt (DateTime) Required, 3], [Property: Usuario.Email (string) Index MaxLength(255), 4], [Property: Usuario.EmpresaId (int) Required FK Index, 5], [Property: Usuario.Nombre (string) Required, 6], [Property: Usuario.PasswordHash (string) Required, 7], [Property: Usuario.Rol (RolUsuario) Required, 8], [Property: Usuario.Rut (string) Index MaxLength(12), 9], [Property: Usuario.SucursalId (int?) FK Index, 10], [Property: Usuario.UltimoAcceso (DateTime?), 11], [Property: Usuario.UpdatedAt (DateTime?), 12] }
            SELECT TOP(1) u.Id, u.Activo, u.Apellido, u.CreatedAt, u.Email, u.EmpresaId, u.Nombre, u.PasswordHash, u.Rol, u.Rut, u.SucursalId, u.UltimoAcceso, u.UpdatedAt
            FROM Usuarios AS u
            WHERE (u.Email == @__emailOrRut_0) && u.Activo, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Usuario entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Usuario instance1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Usuario);
                (object)dataReader.GetInt32(0) != null ? 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")]: 
                            {
                                return 
                                {
                                    Usuario instance;
                                    instance = new Usuario();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Activo>k__BackingField = dataReader.GetBoolean(1);
                                    instance.<Apellido>k__BackingField = dataReader.GetString(2);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(3);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<EmpresaId>k__BackingField = dataReader.GetInt32(5);
                                    instance.<Nombre>k__BackingField = dataReader.GetString(6);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(7);
                                    instance.<Rol>k__BackingField = Invoke(((EnumToNumberConverter<RolUsuario, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Usuario.Rol (RolUsuario) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario").FindProperty("Rol")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(8));
                                    instance.<Rut>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<SucursalId>k__BackingField = dataReader.IsDBNull(10) ? default(int?) : (int?)dataReader.GetInt32(10);
                                    instance.<UltimoAcceso>k__BackingField = dataReader.IsDBNull(11) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(11);
                                    instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(12) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(12);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Usuario)
                    }
                    ;
                    return instance1;
                } : 
                {
                    object[] keyValues1;
                    keyValues1 = new object[]{ (object)dataReader.GetInt32(0) };
                    return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                        entityType: [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")], 
                        properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario").FindPrimaryKey().Properties], 
                        keyValues: keyValues1);
                };
                return instance1;
            };
            return entity;
        }, 
        contextType: Project_Gon.Infrastructure.Data.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2026-02-10 11:14:30.223 -03:00 [DBG] Creating DbConnection.
2026-02-10 11:14:30.224 -03:00 [DBG] Created DbConnection. (1ms).
2026-02-10 11:14:30.225 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:14:30.226 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:14:30.227 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 11:14:30.228 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 11:14:30.231 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2026-02-10 11:14:30.233 -03:00 [DBG] Executing DbCommand [Parameters=[@__emailOrRut_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Email" = @__emailOrRut_0 AND u."Activo"
LIMIT 1
2026-02-10 11:14:30.252 -03:00 [INF] Executed DbCommand (20ms) [Parameters=[@__emailOrRut_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Email" = @__emailOrRut_0 AND u."Activo"
LIMIT 1
2026-02-10 11:14:30.257 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:14:30.258 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 4ms reading results.
2026-02-10 11:14:30.260 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:14:30.261 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-02-10 11:14:30.263 -03:00 [WRN] [FIND] Usuario NO encontrado
2026-02-10 11:14:30.263 -03:00 [INF] [LOGIN] Usuario encontrado: false
2026-02-10 11:14:30.264 -03:00 [WRN] [LOGIN] Login rechazado - Usuario no encontrado o inactivo
2026-02-10 11:14:30.267 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 11:14:30.269 -03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2026-02-10 11:14:30.272 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2026-02-10 11:14:30.273 -03:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'System.String'.
2026-02-10 11:14:30.277 -03:00 [INF] Executed action Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api) in 454.0156ms
2026-02-10 11:14:30.278 -03:00 [INF] Executed endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-02-10 11:14:30.280 -03:00 [INF] HTTP POST /api/Auth/login responded 401 in 504.0374 ms
2026-02-10 11:14:30.282 -03:00 [DBG] 'AppDbContext' disposed.
2026-02-10 11:14:30.284 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:14:30.285 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (1ms).
2026-02-10 11:14:30.286 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/Auth/login - 401 null text/plain; charset=utf-8 564.6174ms
2026-02-10 11:16:13.046 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/Auth/register - application/json 173
2026-02-10 11:16:13.049 -03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/register'
2026-02-10 11:16:13.050 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)' with route pattern 'api/Auth/register' is valid for the request path '/api/Auth/register'
2026-02-10 11:16:13.057 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)'
2026-02-10 11:16:13.059 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 11:16:13.060 -03:00 [DBG] The request has an origin header: 'https://localhost:7058'.
2026-02-10 11:16:13.061 -03:00 [INF] CORS policy execution failed.
2026-02-10 11:16:13.061 -03:00 [INF] Request origin https://localhost:7058 does not have permission to access the resource.
2026-02-10 11:16:13.064 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-02-10 11:16:13.064 -03:00 [INF] Executing endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)'
2026-02-10 11:16:13.094 -03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(Project_Gon.Core.DTOs.Auth.RegisterDto) on controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api).
2026-02-10 11:16:13.096 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 11:16:13.097 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 11:16:13.097 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-10 11:16:13.099 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 11:16:13.100 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 11:16:13.101 -03:00 [DBG] Executing controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-02-10 11:16:13.103 -03:00 [DBG] Executed controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-02-10 11:16:13.104 -03:00 [DBG] Attempting to bind parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto' ...
2026-02-10 11:16:13.105 -03:00 [DBG] Attempting to bind parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto' using the name '' in request data ...
2026-02-10 11:16:13.106 -03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2026-02-10 11:16:13.110 -03:00 [DBG] Connection id "0HNJ8LQ8REVO3", Request id "0HNJ8LQ8REVO3:00000015": started reading request body.
2026-02-10 11:16:13.111 -03:00 [DBG] Connection id "0HNJ8LQ8REVO3", Request id "0HNJ8LQ8REVO3:00000015": done reading request body.
2026-02-10 11:16:13.116 -03:00 [DBG] JSON input formatter threw an exception: The JSON value could not be converted to System.Nullable`1[Project_Gon.Core.Enums.RolUsuario]. Path: $.rol | LineNumber: 6 | BytePositionInLine: 22.
2026-02-10 11:16:13.119 -03:00 [DBG] Done attempting to bind parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto'.
2026-02-10 11:16:13.120 -03:00 [DBG] Done attempting to bind parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto'.
2026-02-10 11:16:13.121 -03:00 [DBG] Attempting to validate the bound parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto' ...
2026-02-10 11:16:13.124 -03:00 [DBG] Done attempting to validate the bound parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto'.
2026-02-10 11:16:13.125 -03:00 [DBG] The request has model state errors, returning an error response.
2026-02-10 11:16:13.126 -03:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2026-02-10 11:16:13.127 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 11:16:13.129 -03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]' and explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'. The content types in the accept header must be a subset of the explicitly set content types.
2026-02-10 11:16:13.131 -03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2026-02-10 11:16:13.132 -03:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2026-02-10 11:16:13.136 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2026-02-10 11:16:13.137 -03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2026-02-10 11:16:13.147 -03:00 [INF] Executed action Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api) in 45.9616ms
2026-02-10 11:16:13.147 -03:00 [INF] Executed endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)'
2026-02-10 11:16:13.149 -03:00 [INF] HTTP POST /api/Auth/register responded 400 in 86.8677 ms
2026-02-10 11:16:13.150 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/Auth/register - 400 null application/problem+json; charset=utf-8 104.0414ms
2026-02-10 11:18:24.900 -03:00 [DBG] Connection id "0HNJ8LQ8REVO3" is closing.
2026-02-10 11:18:24.901 -03:00 [DBG] Connection id "0HNJ8LQ8REVO3" is closed. The last processed stream ID was 21.
2026-02-10 11:18:24.902 -03:00 [DBG] Connection id "0HNJ8LQ8REVO3" received FIN.
2026-02-10 11:18:24.903 -03:00 [DBG] Connection id "0HNJ8LQ8REVO3" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 11:18:24.905 -03:00 [DBG] The connection queue processing loop for 0HNJ8LQ8REVO3 completed.
2026-02-10 11:18:24.907 -03:00 [DBG] Connection id "0HNJ8LQ8REVO3" stopped.
2026-02-10 11:18:41.912 -03:00 [DBG] Connection id "0HNJ8LQ8REVO4" accepted.
2026-02-10 11:18:41.913 -03:00 [DBG] Connection id "0HNJ8LQ8REVO4" started.
2026-02-10 11:18:41.915 -03:00 [DBG] Connection 0HNJ8LQ8REVO4 established using the following protocol: "Tls12"
2026-02-10 11:18:41.916 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/Auth/register - application/json 161
2026-02-10 11:18:41.917 -03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/register'
2026-02-10 11:18:41.918 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)' with route pattern 'api/Auth/register' is valid for the request path '/api/Auth/register'
2026-02-10 11:18:41.919 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)'
2026-02-10 11:18:41.920 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 11:18:41.921 -03:00 [DBG] The request has an origin header: 'https://localhost:7058'.
2026-02-10 11:18:41.922 -03:00 [INF] CORS policy execution failed.
2026-02-10 11:18:41.922 -03:00 [INF] Request origin https://localhost:7058 does not have permission to access the resource.
2026-02-10 11:18:41.924 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-02-10 11:18:41.925 -03:00 [INF] Executing endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)'
2026-02-10 11:18:41.926 -03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(Project_Gon.Core.DTOs.Auth.RegisterDto) on controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api).
2026-02-10 11:18:41.928 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 11:18:41.929 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 11:18:41.929 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-10 11:18:41.931 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 11:18:41.932 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 11:18:41.933 -03:00 [DBG] Executing controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-02-10 11:18:41.935 -03:00 [DBG] Executed controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-02-10 11:18:41.937 -03:00 [DBG] Attempting to bind parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto' ...
2026-02-10 11:18:41.937 -03:00 [DBG] Attempting to bind parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto' using the name '' in request data ...
2026-02-10 11:18:41.938 -03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2026-02-10 11:18:41.939 -03:00 [DBG] Connection id "0HNJ8LQ8REVO4", Request id "0HNJ8LQ8REVO4:00000001": started reading request body.
2026-02-10 11:18:41.942 -03:00 [DBG] Connection id "0HNJ8LQ8REVO4", Request id "0HNJ8LQ8REVO4:00000001": done reading request body.
2026-02-10 11:18:41.944 -03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Project_Gon.Core.DTOs.Auth.RegisterDto'
2026-02-10 11:18:41.944 -03:00 [DBG] Done attempting to bind parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto'.
2026-02-10 11:18:41.945 -03:00 [DBG] Done attempting to bind parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto'.
2026-02-10 11:18:41.946 -03:00 [DBG] Attempting to validate the bound parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto' ...
2026-02-10 11:18:41.980 -03:00 [DBG] Done attempting to validate the bound parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto'.
2026-02-10 11:18:41.983 -03:00 [DBG] [CLEAN_RUT] Original: 12345678-9 -> Limpio: 12345678-9
2026-02-10 11:18:41.984 -03:00 [INF] [REGISTER] RUT limpio guardado: 12345678-9
2026-02-10 11:18:42.014 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-02-10 11:18:42.023 -03:00 [DBG] Compiling query expression: 
'DbSet<Empresa>()
    .FirstOrDefault(e => EF.Property<int>(e, "Id") == __p_0)'
2026-02-10 11:18:42.032 -03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Empresa>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Empresa>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Empresa.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Empresa.Activo (bool) Required, 1], [Property: Empresa.Ciudad (string), 2], [Property: Empresa.CreatedAt (DateTime) Required, 3], [Property: Empresa.Direccion (string), 4], [Property: Empresa.Nombre (string) Required MaxLength(255), 5], [Property: Empresa.Region (string), 6], [Property: Empresa.Rut (string), 7], [Property: Empresa.UpdatedAt (DateTime?), 8] }
            SELECT TOP(1) e.Id, e.Activo, e.Ciudad, e.CreatedAt, e.Direccion, e.Nombre, e.Region, e.Rut, e.UpdatedAt
            FROM Empresas AS e
            WHERE e.Id == @__p_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Empresa.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Empresa.Activo (bool) Required, 1], [Property: Empresa.Ciudad (string), 2], [Property: Empresa.CreatedAt (DateTime) Required, 3], [Property: Empresa.Direccion (string), 4], [Property: Empresa.Nombre (string) Required MaxLength(255), 5], [Property: Empresa.Region (string), 6], [Property: Empresa.Rut (string), 7], [Property: Empresa.UpdatedAt (DateTime?), 8] }
            SELECT TOP(1) e.Id, e.Activo, e.Ciudad, e.CreatedAt, e.Direccion, e.Nombre, e.Region, e.Rut, e.UpdatedAt
            FROM Empresas AS e
            WHERE e.Id == @__p_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Empresa entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Empresa instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Empresa);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Empresa.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Empresa").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (Empresa)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Empresa | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Empresa")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Empresa | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Empresa")]: 
                            {
                                return 
                                {
                                    Empresa instance;
                                    instance = new Empresa();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Activo>k__BackingField = dataReader.GetBoolean(1);
                                    instance.<Ciudad>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(3);
                                    instance.<Direccion>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<Nombre>k__BackingField = dataReader.GetString(5);
                                    instance.<Region>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                    instance.<Rut>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(8) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(8);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Empresa | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Empresa")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Empresa)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: Project_Gon.Infrastructure.Data.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2026-02-10 11:18:42.045 -03:00 [DBG] Creating DbConnection.
2026-02-10 11:18:42.046 -03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 11:18:42.047 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:18:42.075 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:18:42.077 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 11:18:42.077 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 11:18:42.078 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 11:18:42.079 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-02-10 11:18:42.084 -03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-02-10 11:18:42.086 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:18:42.087 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-02-10 11:18:42.088 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:18:42.089 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-02-10 11:18:42.090 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 11:18:42.092 -03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2026-02-10 11:18:42.093 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2026-02-10 11:18:42.094 -03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2026-02-10 11:18:42.094 -03:00 [INF] Executed action Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api) in 161.5116ms
2026-02-10 11:18:42.095 -03:00 [INF] Executed endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)'
2026-02-10 11:18:42.096 -03:00 [INF] HTTP POST /api/Auth/register responded 400 in 172.7399 ms
2026-02-10 11:18:42.100 -03:00 [DBG] 'AppDbContext' disposed.
2026-02-10 11:18:42.100 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:18:42.101 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-02-10 11:18:42.102 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/Auth/register - 400 null text/plain; charset=utf-8 185.8206ms
2026-02-10 11:19:15.879 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/Auth/register - application/json 161
2026-02-10 11:19:15.881 -03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/register'
2026-02-10 11:19:15.882 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)' with route pattern 'api/Auth/register' is valid for the request path '/api/Auth/register'
2026-02-10 11:19:15.883 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)'
2026-02-10 11:19:15.884 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 11:19:15.886 -03:00 [DBG] The request has an origin header: 'https://localhost:7058'.
2026-02-10 11:19:15.887 -03:00 [INF] CORS policy execution failed.
2026-02-10 11:19:15.888 -03:00 [INF] Request origin https://localhost:7058 does not have permission to access the resource.
2026-02-10 11:19:15.889 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-02-10 11:19:15.890 -03:00 [INF] Executing endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)'
2026-02-10 11:19:15.891 -03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(Project_Gon.Core.DTOs.Auth.RegisterDto) on controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api).
2026-02-10 11:19:15.893 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 11:19:15.895 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 11:19:15.896 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-10 11:19:15.898 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 11:19:15.899 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 11:19:15.900 -03:00 [DBG] Executing controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-02-10 11:19:15.901 -03:00 [DBG] Executed controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-02-10 11:19:15.901 -03:00 [DBG] Attempting to bind parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto' ...
2026-02-10 11:19:15.902 -03:00 [DBG] Attempting to bind parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto' using the name '' in request data ...
2026-02-10 11:19:15.903 -03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2026-02-10 11:19:15.904 -03:00 [DBG] Connection id "0HNJ8LQ8REVO4", Request id "0HNJ8LQ8REVO4:00000003": started reading request body.
2026-02-10 11:19:15.905 -03:00 [DBG] Connection id "0HNJ8LQ8REVO4", Request id "0HNJ8LQ8REVO4:00000003": done reading request body.
2026-02-10 11:19:15.906 -03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Project_Gon.Core.DTOs.Auth.RegisterDto'
2026-02-10 11:19:15.906 -03:00 [DBG] Done attempting to bind parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto'.
2026-02-10 11:19:15.907 -03:00 [DBG] Done attempting to bind parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto'.
2026-02-10 11:19:15.908 -03:00 [DBG] Attempting to validate the bound parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto' ...
2026-02-10 11:19:15.914 -03:00 [DBG] Done attempting to validate the bound parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto'.
2026-02-10 11:19:15.915 -03:00 [DBG] [CLEAN_RUT] Original: 12345678-9 -> Limpio: 12345678-9
2026-02-10 11:19:15.916 -03:00 [INF] [REGISTER] RUT limpio guardado: 12345678-9
2026-02-10 11:19:15.917 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-02-10 11:19:15.921 -03:00 [DBG] Creating DbConnection.
2026-02-10 11:19:15.921 -03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 11:19:15.922 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:19:15.923 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:19:15.923 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 11:19:15.925 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2026-02-10 11:19:15.926 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2026-02-10 11:19:15.927 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-02-10 11:19:15.929 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-02-10 11:19:15.961 -03:00 [DBG] Context 'AppDbContext' started tracking 'Empresa' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 11:19:15.981 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:19:15.982 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 51ms reading results.
2026-02-10 11:19:15.983 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:19:15.984 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-02-10 11:19:15.986 -03:00 [DBG] Compiling query expression: 
'DbSet<Usuario>()
    .Where(u => u.Rut == __rutLimpio_0 && u.EmpresaId == __8__locals1_registerDto_EmpresaId_1)
    .AsNoTracking()
    .FirstOrDefault()'
2026-02-10 11:19:15.991 -03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Usuario>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Usuario>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Usuario.Activo (bool) Required, 1], [Property: Usuario.Apellido (string) Required, 2], [Property: Usuario.CreatedAt (DateTime) Required, 3], [Property: Usuario.Email (string) Index MaxLength(255), 4], [Property: Usuario.EmpresaId (int) Required FK Index, 5], [Property: Usuario.Nombre (string) Required, 6], [Property: Usuario.PasswordHash (string) Required, 7], [Property: Usuario.Rol (RolUsuario) Required, 8], [Property: Usuario.Rut (string) Index MaxLength(12), 9], [Property: Usuario.SucursalId (int?) FK Index, 10], [Property: Usuario.UltimoAcceso (DateTime?), 11], [Property: Usuario.UpdatedAt (DateTime?), 12] }
            SELECT TOP(1) u.Id, u.Activo, u.Apellido, u.CreatedAt, u.Email, u.EmpresaId, u.Nombre, u.PasswordHash, u.Rol, u.Rut, u.SucursalId, u.UltimoAcceso, u.UpdatedAt
            FROM Usuarios AS u
            WHERE (u.Rut == @__rutLimpio_0) && (u.EmpresaId == @__8__locals1_registerDto_EmpresaId_1)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Usuario.Activo (bool) Required, 1], [Property: Usuario.Apellido (string) Required, 2], [Property: Usuario.CreatedAt (DateTime) Required, 3], [Property: Usuario.Email (string) Index MaxLength(255), 4], [Property: Usuario.EmpresaId (int) Required FK Index, 5], [Property: Usuario.Nombre (string) Required, 6], [Property: Usuario.PasswordHash (string) Required, 7], [Property: Usuario.Rol (RolUsuario) Required, 8], [Property: Usuario.Rut (string) Index MaxLength(12), 9], [Property: Usuario.SucursalId (int?) FK Index, 10], [Property: Usuario.UltimoAcceso (DateTime?), 11], [Property: Usuario.UpdatedAt (DateTime?), 12] }
            SELECT TOP(1) u.Id, u.Activo, u.Apellido, u.CreatedAt, u.Email, u.EmpresaId, u.Nombre, u.PasswordHash, u.Rol, u.Rut, u.SucursalId, u.UltimoAcceso, u.UpdatedAt
            FROM Usuarios AS u
            WHERE (u.Rut == @__rutLimpio_0) && (u.EmpresaId == @__8__locals1_registerDto_EmpresaId_1), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Usuario entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Usuario instance1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Usuario);
                (object)dataReader.GetInt32(0) != null ? 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")]: 
                            {
                                return 
                                {
                                    Usuario instance;
                                    instance = new Usuario();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Activo>k__BackingField = dataReader.GetBoolean(1);
                                    instance.<Apellido>k__BackingField = dataReader.GetString(2);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(3);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<EmpresaId>k__BackingField = dataReader.GetInt32(5);
                                    instance.<Nombre>k__BackingField = dataReader.GetString(6);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(7);
                                    instance.<Rol>k__BackingField = Invoke(((EnumToNumberConverter<RolUsuario, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Usuario.Rol (RolUsuario) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario").FindProperty("Rol")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(8));
                                    instance.<Rut>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<SucursalId>k__BackingField = dataReader.IsDBNull(10) ? default(int?) : (int?)dataReader.GetInt32(10);
                                    instance.<UltimoAcceso>k__BackingField = dataReader.IsDBNull(11) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(11);
                                    instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(12) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(12);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Usuario)
                    }
                    ;
                    return instance1;
                } : 
                {
                    object[] keyValues1;
                    keyValues1 = new object[]{ (object)dataReader.GetInt32(0) };
                    return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                        entityType: [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")], 
                        properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario").FindPrimaryKey().Properties], 
                        keyValues: keyValues1);
                };
                return instance1;
            };
            return entity;
        }, 
        contextType: Project_Gon.Infrastructure.Data.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2026-02-10 11:19:16.007 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:19:16.008 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:19:16.008 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 11:19:16.009 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 11:19:16.010 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 11:19:16.011 -03:00 [DBG] Executing DbCommand [Parameters=[@__rutLimpio_0='?', @__8__locals1_registerDto_EmpresaId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Rut" = @__rutLimpio_0 AND u."EmpresaId" = @__8__locals1_registerDto_EmpresaId_1
LIMIT 1
2026-02-10 11:19:16.017 -03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__rutLimpio_0='?', @__8__locals1_registerDto_EmpresaId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Rut" = @__rutLimpio_0 AND u."EmpresaId" = @__8__locals1_registerDto_EmpresaId_1
LIMIT 1
2026-02-10 11:19:16.021 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:19:16.021 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-02-10 11:19:16.023 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:19:16.023 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-02-10 11:19:16.025 -03:00 [DBG] Compiling query expression: 
'DbSet<Usuario>()
    .Where(u => u.Email == __8__locals1_registerDto_Email_0 && u.EmpresaId == __8__locals1_registerDto_EmpresaId_1)
    .AsNoTracking()
    .FirstOrDefault()'
2026-02-10 11:19:16.029 -03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Usuario>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Usuario>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Usuario.Activo (bool) Required, 1], [Property: Usuario.Apellido (string) Required, 2], [Property: Usuario.CreatedAt (DateTime) Required, 3], [Property: Usuario.Email (string) Index MaxLength(255), 4], [Property: Usuario.EmpresaId (int) Required FK Index, 5], [Property: Usuario.Nombre (string) Required, 6], [Property: Usuario.PasswordHash (string) Required, 7], [Property: Usuario.Rol (RolUsuario) Required, 8], [Property: Usuario.Rut (string) Index MaxLength(12), 9], [Property: Usuario.SucursalId (int?) FK Index, 10], [Property: Usuario.UltimoAcceso (DateTime?), 11], [Property: Usuario.UpdatedAt (DateTime?), 12] }
            SELECT TOP(1) u.Id, u.Activo, u.Apellido, u.CreatedAt, u.Email, u.EmpresaId, u.Nombre, u.PasswordHash, u.Rol, u.Rut, u.SucursalId, u.UltimoAcceso, u.UpdatedAt
            FROM Usuarios AS u
            WHERE (u.Email == @__8__locals1_registerDto_Email_0) && (u.EmpresaId == @__8__locals1_registerDto_EmpresaId_1)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Usuario.Activo (bool) Required, 1], [Property: Usuario.Apellido (string) Required, 2], [Property: Usuario.CreatedAt (DateTime) Required, 3], [Property: Usuario.Email (string) Index MaxLength(255), 4], [Property: Usuario.EmpresaId (int) Required FK Index, 5], [Property: Usuario.Nombre (string) Required, 6], [Property: Usuario.PasswordHash (string) Required, 7], [Property: Usuario.Rol (RolUsuario) Required, 8], [Property: Usuario.Rut (string) Index MaxLength(12), 9], [Property: Usuario.SucursalId (int?) FK Index, 10], [Property: Usuario.UltimoAcceso (DateTime?), 11], [Property: Usuario.UpdatedAt (DateTime?), 12] }
            SELECT TOP(1) u.Id, u.Activo, u.Apellido, u.CreatedAt, u.Email, u.EmpresaId, u.Nombre, u.PasswordHash, u.Rol, u.Rut, u.SucursalId, u.UltimoAcceso, u.UpdatedAt
            FROM Usuarios AS u
            WHERE (u.Email == @__8__locals1_registerDto_Email_0) && (u.EmpresaId == @__8__locals1_registerDto_EmpresaId_1), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Usuario entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Usuario instance1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Usuario);
                (object)dataReader.GetInt32(0) != null ? 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")]: 
                            {
                                return 
                                {
                                    Usuario instance;
                                    instance = new Usuario();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Activo>k__BackingField = dataReader.GetBoolean(1);
                                    instance.<Apellido>k__BackingField = dataReader.GetString(2);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(3);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<EmpresaId>k__BackingField = dataReader.GetInt32(5);
                                    instance.<Nombre>k__BackingField = dataReader.GetString(6);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(7);
                                    instance.<Rol>k__BackingField = Invoke(((EnumToNumberConverter<RolUsuario, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Usuario.Rol (RolUsuario) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario").FindProperty("Rol")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(8));
                                    instance.<Rut>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<SucursalId>k__BackingField = dataReader.IsDBNull(10) ? default(int?) : (int?)dataReader.GetInt32(10);
                                    instance.<UltimoAcceso>k__BackingField = dataReader.IsDBNull(11) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(11);
                                    instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(12) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(12);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Usuario)
                    }
                    ;
                    return instance1;
                } : 
                {
                    object[] keyValues1;
                    keyValues1 = new object[]{ (object)dataReader.GetInt32(0) };
                    return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                        entityType: [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")], 
                        properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario").FindPrimaryKey().Properties], 
                        keyValues: keyValues1);
                };
                return instance1;
            };
            return entity;
        }, 
        contextType: Project_Gon.Infrastructure.Data.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2026-02-10 11:19:16.044 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:19:16.044 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:19:16.045 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 11:19:16.046 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 11:19:16.046 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 11:19:16.047 -03:00 [DBG] Executing DbCommand [Parameters=[@__8__locals1_registerDto_Email_0='?', @__8__locals1_registerDto_EmpresaId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Email" = @__8__locals1_registerDto_Email_0 AND u."EmpresaId" = @__8__locals1_registerDto_EmpresaId_1
LIMIT 1
2026-02-10 11:19:16.052 -03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__8__locals1_registerDto_Email_0='?', @__8__locals1_registerDto_EmpresaId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Email" = @__8__locals1_registerDto_Email_0 AND u."EmpresaId" = @__8__locals1_registerDto_EmpresaId_1
LIMIT 1
2026-02-10 11:19:16.054 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:19:16.055 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-02-10 11:19:16.056 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:19:16.057 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-02-10 11:19:16.704 -03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Usuario.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 11:19:16.730 -03:00 [DBG] The navigation 'Usuario.Empresa' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 11:19:16.739 -03:00 [DBG] Context 'AppDbContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 11:19:16.743 -03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2026-02-10 11:19:16.745 -03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2026-02-10 11:19:16.760 -03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2026-02-10 11:19:16.791 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:19:16.792 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:19:16.794 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 11:19:16.795 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 11:19:16.796 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2026-02-10 11:19:16.797 -03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = Int32), @p5='?', @p6='?', @p7='?' (DbType = Int32), @p8='?', @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Usuarios" ("Activo", "Apellido", "CreatedAt", "Email", "EmpresaId", "Nombre", "PasswordHash", "Rol", "Rut", "SucursalId", "UltimoAcceso", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11)
RETURNING "Id";
2026-02-10 11:19:16.815 -03:00 [INF] Executed DbCommand (18ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = Int32), @p5='?', @p6='?', @p7='?' (DbType = Int32), @p8='?', @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Usuarios" ("Activo", "Apellido", "CreatedAt", "Email", "EmpresaId", "Nombre", "PasswordHash", "Rol", "Rut", "SucursalId", "UltimoAcceso", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11)
RETURNING "Id";
2026-02-10 11:19:16.823 -03:00 [DBG] The foreign key property 'Usuario.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 11:19:16.828 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:19:16.828 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 11ms reading results.
2026-02-10 11:19:16.830 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:19:16.830 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-02-10 11:19:16.837 -03:00 [DBG] An entity of type 'Usuario' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 11:19:16.839 -03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2026-02-10 11:19:16.840 -03:00 [INF] [REGISTER] Usuario creado - ID: 5, RUT: 12345678-9, Email: admin@example.com
2026-02-10 11:19:16.859 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 11:19:16.861 -03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2026-02-10 11:19:16.862 -03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2026-02-10 11:19:16.864 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 11:19:16.864 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 11:19:16.865 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 11:19:16.866 -03:00 [INF] Executing CreatedAtActionResult, writing value of type 'Project_Gon.Core.DTOs.Auth.LoginResponseDto'.
2026-02-10 11:19:16.879 -03:00 [DBG] Found the endpoints ["Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)"] for address (action=[Login],controller=[Auth])
2026-02-10 11:19:16.882 -03:00 [DBG] Successfully processed template api/Auth/login for Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api) resulting in /api/Auth/login and 
2026-02-10 11:19:16.884 -03:00 [DBG] Link generation succeeded for endpoints ["Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)"] with result /api/Auth/login
2026-02-10 11:19:16.888 -03:00 [INF] Executed action Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api) in 988.6165ms
2026-02-10 11:19:16.889 -03:00 [INF] Executed endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)'
2026-02-10 11:19:16.890 -03:00 [INF] HTTP POST /api/Auth/register responded 201 in 1000.8732 ms
2026-02-10 11:19:16.891 -03:00 [DBG] 'AppDbContext' disposed.
2026-02-10 11:19:16.892 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:19:16.894 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (2ms).
2026-02-10 11:19:16.895 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/Auth/register - 201 null application/json; charset=utf-8 1015.3899ms
2026-02-10 11:21:28.258 -03:00 [DBG] Connection id "0HNJ8LQ8REVO4" is closing.
2026-02-10 11:21:28.259 -03:00 [DBG] Connection id "0HNJ8LQ8REVO4" is closed. The last processed stream ID was 3.
2026-02-10 11:21:28.261 -03:00 [DBG] Connection id "0HNJ8LQ8REVO4" received FIN.
2026-02-10 11:21:28.261 -03:00 [DBG] Connection id "0HNJ8LQ8REVO4" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 11:21:28.273 -03:00 [DBG] The connection queue processing loop for 0HNJ8LQ8REVO4 completed.
2026-02-10 11:21:28.275 -03:00 [DBG] Connection id "0HNJ8LQ8REVO4" stopped.
2026-02-10 11:32:11.453 -03:00 [DBG] Connection id "0HNJ8LQ8REVO5" accepted.
2026-02-10 11:32:11.454 -03:00 [DBG] Connection id "0HNJ8LQ8REVO5" started.
2026-02-10 11:32:11.456 -03:00 [DBG] Connection 0HNJ8LQ8REVO5 established using the following protocol: "Tls12"
2026-02-10 11:32:11.456 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/api/Stocks - null null
2026-02-10 11:32:11.458 -03:00 [DBG] 1 candidate(s) found for the request path '/api/Stocks'
2026-02-10 11:32:11.458 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.StocksController.GetAll (Project_Gon.Api)' with route pattern 'api/Stocks' is valid for the request path '/api/Stocks'
2026-02-10 11:32:11.459 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.StocksController.GetAll (Project_Gon.Api)'
2026-02-10 11:32:11.461 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 11:32:11.513 -03:00 [DBG] Successfully validated the token.
2026-02-10 11:32:11.514 -03:00 [INF] JWT Token validated for user: Unknown, empresa: 2
2026-02-10 11:32:11.515 -03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2026-02-10 11:32:11.518 -03:00 [DBG] Authorization was successful.
2026-02-10 11:32:11.518 -03:00 [INF] Executing endpoint 'Project_Gon.Api.Controllers.StocksController.GetAll (Project_Gon.Api)'
2026-02-10 11:32:11.521 -03:00 [INF] Route matched with {action = "GetAll", controller = "Stocks"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Project_Gon.Core.DTOs.Stock.StockDto]]] GetAll() on controller Project_Gon.Api.Controllers.StocksController (Project_Gon.Api).
2026-02-10 11:32:11.523 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 11:32:11.524 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 11:32:11.524 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-10 11:32:11.526 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 11:32:11.529 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 11:32:11.530 -03:00 [DBG] Executing controller factory for controller Project_Gon.Api.Controllers.StocksController (Project_Gon.Api)
2026-02-10 11:32:11.531 -03:00 [DBG] Executed controller factory for controller Project_Gon.Api.Controllers.StocksController (Project_Gon.Api)
2026-02-10 11:32:11.534 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-02-10 11:32:11.539 -03:00 [DBG] Compiling query expression: 
'DbSet<Stock>()
    .AsNoTracking()
    .Include(s => s.Producto)
    .Include(s => s.Sucursal)
    .Where(s => s.Producto.EmpresaId == __empresaId_0)'
2026-02-10 11:32:11.545 -03:00 [DBG] Including navigation: 'Stock.Producto'.
2026-02-10 11:32:11.546 -03:00 [DBG] Including navigation: 'Stock.Sucursal'.
2026-02-10 11:32:11.577 -03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<Stock>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Stock.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Stock.Cantidad (int) Required, 1], [Property: Stock.CreatedAt (DateTime) Required, 2], [Property: Stock.FechaVencimiento (DateTime?), 3], [Property: Stock.ProductoId (int) Required FK Index, 4], [Property: Stock.StockMinimo (int) Required, 5], [Property: Stock.SucursalId (int) Required FK Index, 6], [Property: Stock.UpdatedAt (DateTime?), 7] }
            1 -> Dictionary<IProperty, int> { [Property: Producto.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: Producto.Activo (bool) Required, 9], [Property: Producto.CategoriaId (int) Required FK Index, 10], [Property: Producto.CreatedAt (DateTime) Required, 11], [Property: Producto.Descripcion (string), 12], [Property: Producto.EmpresaId (int) Required FK Index, 13], [Property: Producto.Nombre (string) Required, 14], [Property: Producto.Precio (decimal) Required, 15], [Property: Producto.Sku (string), 16], [Property: Producto.UpdatedAt (DateTime?), 17] }
            2 -> Dictionary<IProperty, int> { [Property: Sucursal.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 18], [Property: Sucursal.Activo (bool) Required, 19], [Property: Sucursal.Ciudad (string), 20], [Property: Sucursal.CreatedAt (DateTime) Required, 21], [Property: Sucursal.Direccion (string), 22], [Property: Sucursal.EmpresaId (int) Required FK Index, 23], [Property: Sucursal.Nombre (string) Required MaxLength(255), 24], [Property: Sucursal.Region (string), 25], [Property: Sucursal.Telefono (string), 26], [Property: Sucursal.UpdatedAt (DateTime?), 27] }
        SELECT s.Id, s.Cantidad, s.CreatedAt, s.FechaVencimiento, s.ProductoId, s.StockMinimo, s.SucursalId, s.UpdatedAt, p.Id, p.Activo, p.CategoriaId, p.CreatedAt, p.Descripcion, p.EmpresaId, p.Nombre, p.Precio, p.Sku, p.UpdatedAt, s0.Id, s0.Activo, s0.Ciudad, s0.CreatedAt, s0.Direccion, s0.EmpresaId, s0.Nombre, s0.Region, s0.Telefono, s0.UpdatedAt
        FROM Stocks AS s
        INNER JOIN Productos AS p ON s.ProductoId == p.Id
        INNER JOIN Sucursales AS s0 ON s.SucursalId == s0.Id
        WHERE p.EmpresaId == @__empresaId_0) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Stock.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Stock.Cantidad (int) Required, 1], [Property: Stock.CreatedAt (DateTime) Required, 2], [Property: Stock.FechaVencimiento (DateTime?), 3], [Property: Stock.ProductoId (int) Required FK Index, 4], [Property: Stock.StockMinimo (int) Required, 5], [Property: Stock.SucursalId (int) Required FK Index, 6], [Property: Stock.UpdatedAt (DateTime?), 7] }
            1 -> Dictionary<IProperty, int> { [Property: Producto.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: Producto.Activo (bool) Required, 9], [Property: Producto.CategoriaId (int) Required FK Index, 10], [Property: Producto.CreatedAt (DateTime) Required, 11], [Property: Producto.Descripcion (string), 12], [Property: Producto.EmpresaId (int) Required FK Index, 13], [Property: Producto.Nombre (string) Required, 14], [Property: Producto.Precio (decimal) Required, 15], [Property: Producto.Sku (string), 16], [Property: Producto.UpdatedAt (DateTime?), 17] }
            2 -> Dictionary<IProperty, int> { [Property: Sucursal.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 18], [Property: Sucursal.Activo (bool) Required, 19], [Property: Sucursal.Ciudad (string), 20], [Property: Sucursal.CreatedAt (DateTime) Required, 21], [Property: Sucursal.Direccion (string), 22], [Property: Sucursal.EmpresaId (int) Required FK Index, 23], [Property: Sucursal.Nombre (string) Required MaxLength(255), 24], [Property: Sucursal.Region (string), 25], [Property: Sucursal.Telefono (string), 26], [Property: Sucursal.UpdatedAt (DateTime?), 27] }
        SELECT s.Id, s.Cantidad, s.CreatedAt, s.FechaVencimiento, s.ProductoId, s.StockMinimo, s.SucursalId, s.UpdatedAt, p.Id, p.Activo, p.CategoriaId, p.CreatedAt, p.Descripcion, p.EmpresaId, p.Nombre, p.Precio, p.Sku, p.UpdatedAt, s0.Id, s0.Activo, s0.Ciudad, s0.CreatedAt, s0.Direccion, s0.EmpresaId, s0.Nombre, s0.Region, s0.Telefono, s0.UpdatedAt
        FROM Stocks AS s
        INNER JOIN Productos AS p ON s.ProductoId == p.Id
        INNER JOIN Sucursales AS s0 ON s.SucursalId == s0.Id
        WHERE p.EmpresaId == @__empresaId_0, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Stock entity;
        Producto entity;
        Sucursal entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            Stock instance1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(Stock);
            (object)dataReader.GetInt32(0) != null ? 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: Stock | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Stock")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: Stock | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Stock")]: 
                        {
                            return 
                            {
                                Stock instance;
                                instance = new Stock();
                                instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                instance.<Cantidad>k__BackingField = dataReader.GetInt32(1);
                                instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(2);
                                instance.<FechaVencimiento>k__BackingField = dataReader.IsDBNull(3) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(3);
                                instance.<ProductoId>k__BackingField = dataReader.GetInt32(4);
                                instance.<StockMinimo>k__BackingField = dataReader.GetInt32(5);
                                instance.<SucursalId>k__BackingField = dataReader.GetInt32(6);
                                instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(7) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(7);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: NoTracking, 
                                    structuralType: [LIFTABLE Constant: EntityType: Stock | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Stock")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(Stock)
                }
                ;
                return instance1;
            } : 
            {
                object[] keyValues1;
                keyValues1 = new object[]{ (object)dataReader.GetInt32(0) };
                return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                    entityType: [LIFTABLE Constant: EntityType: Stock | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Stock")], 
                    properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: Stock.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Stock").FindPrimaryKey().Properties], 
                    keyValues: keyValues1);
            };
            return instance1;
        };
        entity = 
        {
            MaterializationContext materializationContext2;
            IEntityType entityType2;
            Producto instance2;
            materializationContext2 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance2 = default(Producto);
            (object)dataReader.GetInt32(8) != null ? 
            {
                ISnapshot shadowSnapshot2;
                shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType2 = [LIFTABLE Constant: EntityType: Producto | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Producto")];
                instance2 = switch (entityType2)
                {
                    case [LIFTABLE Constant: EntityType: Producto | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Producto")]: 
                        {
                            return 
                            {
                                Producto instance;
                                instance = new Producto();
                                instance.<Id>k__BackingField = dataReader.GetInt32(8);
                                instance.<Activo>k__BackingField = dataReader.GetBoolean(9);
                                instance.<CategoriaId>k__BackingField = dataReader.GetInt32(10);
                                instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(11);
                                instance.<Descripcion>k__BackingField = dataReader.IsDBNull(12) ? default(string) : dataReader.GetString(12);
                                instance.<EmpresaId>k__BackingField = dataReader.GetInt32(13);
                                instance.<Nombre>k__BackingField = dataReader.GetString(14);
                                instance.<Precio>k__BackingField = dataReader.GetDecimal(15);
                                instance.<Sku>k__BackingField = dataReader.IsDBNull(16) ? default(string) : dataReader.GetString(16);
                                instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(17) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(17);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext2.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: NoTracking, 
                                    structuralType: [LIFTABLE Constant: EntityType: Producto | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Producto")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(Producto)
                }
                ;
                return instance2;
            } : 
            {
                object[] keyValues2;
                keyValues2 = new object[]{ (object)dataReader.GetInt32(8) };
                return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                    entityType: [LIFTABLE Constant: EntityType: Producto | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Producto")], 
                    properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: Producto.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Producto").FindPrimaryKey().Properties], 
                    keyValues: keyValues2);
            };
            return instance2;
        };
        entity = 
        {
            MaterializationContext materializationContext3;
            IEntityType entityType3;
            Sucursal instance3;
            materializationContext3 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance3 = default(Sucursal);
            (object)dataReader.GetInt32(18) != null ? 
            {
                ISnapshot shadowSnapshot3;
                shadowSnapshot3 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType3 = [LIFTABLE Constant: EntityType: Sucursal | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Sucursal")];
                instance3 = switch (entityType3)
                {
                    case [LIFTABLE Constant: EntityType: Sucursal | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Sucursal")]: 
                        {
                            return 
                            {
                                Sucursal instance;
                                instance = new Sucursal();
                                instance.<Id>k__BackingField = dataReader.GetInt32(18);
                                instance.<Activo>k__BackingField = dataReader.GetBoolean(19);
                                instance.<Ciudad>k__BackingField = dataReader.IsDBNull(20) ? default(string) : dataReader.GetString(20);
                                instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(21);
                                instance.<Direccion>k__BackingField = dataReader.IsDBNull(22) ? default(string) : dataReader.GetString(22);
                                instance.<EmpresaId>k__BackingField = dataReader.GetInt32(23);
                                instance.<Nombre>k__BackingField = dataReader.GetString(24);
                                instance.<Region>k__BackingField = dataReader.IsDBNull(25) ? default(string) : dataReader.GetString(25);
                                instance.<Telefono>k__BackingField = dataReader.IsDBNull(26) ? default(string) : dataReader.GetString(26);
                                instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(27) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(27);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext3.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: NoTracking, 
                                    structuralType: [LIFTABLE Constant: EntityType: Sucursal | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Sucursal")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(Sucursal)
                }
                ;
                return instance3;
            } : 
            {
                object[] keyValues3;
                keyValues3 = new object[]{ (object)dataReader.GetInt32(18) };
                return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                    entityType: [LIFTABLE Constant: EntityType: Sucursal | Resolver: namelessParameter{11} => namelessParameter{11}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Sucursal")], 
                    properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: Sucursal.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Sucursal").FindPrimaryKey().Properties], 
                    keyValues: keyValues3);
            };
            return instance3;
        };
        ShaperProcessingExpressionVisitor.IncludeReference<Stock, Stock, Producto>(
            queryContext: queryContext, 
            entity: entity, 
            relatedEntity: entity, 
            navigation: [LIFTABLE Constant: Navigation: Stock.Producto (Producto) ToPrincipal Producto Inverse: Stocks | Resolver: namelessParameter{12} => namelessParameter{12}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Stock").FindNavigation("Producto")], 
            inverseNavigation: [LIFTABLE Constant: Navigation: Producto.Stocks (ICollection<Stock>) Collection ToDependent Stock Inverse: Producto | Resolver: namelessParameter{13} => namelessParameter{13}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Producto").FindNavigation("Stocks")], 
            fixup: (namelessParameter{14}, namelessParameter{15}) => 
            {
                namelessParameter{14}.<Producto>k__BackingField = namelessParameter{15};
                return [LIFTABLE Constant: ClrICollectionAccessor<Producto, ICollection<Stock>, Stock> | Resolver: namelessParameter{16} => namelessParameter{16}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Producto").FindNavigation("Stocks").GetCollectionAccessor()].Add(
                    entity: namelessParameter{15}, 
                    value: namelessParameter{14}, 
                    forMaterialization: True);
            }, 
            trackingQuery: False);
        ShaperProcessingExpressionVisitor.IncludeReference<Stock, Stock, Sucursal>(
            queryContext: queryContext, 
            entity: entity, 
            relatedEntity: entity, 
            navigation: [LIFTABLE Constant: Navigation: Stock.Sucursal (Sucursal) ToPrincipal Sucursal Inverse: Stocks | Resolver: namelessParameter{17} => namelessParameter{17}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Stock").FindNavigation("Sucursal")], 
            inverseNavigation: [LIFTABLE Constant: Navigation: Sucursal.Stocks (ICollection<Stock>) Collection ToDependent Stock Inverse: Sucursal | Resolver: namelessParameter{18} => namelessParameter{18}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Sucursal").FindNavigation("Stocks")], 
            fixup: (namelessParameter{19}, namelessParameter{20}) => 
            {
                namelessParameter{19}.<Sucursal>k__BackingField = namelessParameter{20};
                return [LIFTABLE Constant: ClrICollectionAccessor<Sucursal, ICollection<Stock>, Stock> | Resolver: namelessParameter{21} => namelessParameter{21}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Sucursal").FindNavigation("Stocks").GetCollectionAccessor()].Add(
                    entity: namelessParameter{20}, 
                    value: namelessParameter{19}, 
                    forMaterialization: True);
            }, 
            trackingQuery: False);
        return entity;
    }, 
    contextType: Project_Gon.Infrastructure.Data.AppDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2026-02-10 11:32:11.609 -03:00 [DBG] Creating DbConnection.
2026-02-10 11:32:11.609 -03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 11:32:11.610 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:32:11.635 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:32:11.636 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 11:32:11.637 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 11:32:11.638 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 11:32:11.640 -03:00 [DBG] Executing DbCommand [Parameters=[@__empresaId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Cantidad", s."CreatedAt", s."FechaVencimiento", s."ProductoId", s."StockMinimo", s."SucursalId", s."UpdatedAt", p."Id", p."Activo", p."CategoriaId", p."CreatedAt", p."Descripcion", p."EmpresaId", p."Nombre", p."Precio", p."Sku", p."UpdatedAt", s0."Id", s0."Activo", s0."Ciudad", s0."CreatedAt", s0."Direccion", s0."EmpresaId", s0."Nombre", s0."Region", s0."Telefono", s0."UpdatedAt"
FROM "Stocks" AS s
INNER JOIN "Productos" AS p ON s."ProductoId" = p."Id"
INNER JOIN "Sucursales" AS s0 ON s."SucursalId" = s0."Id"
WHERE p."EmpresaId" = @__empresaId_0
2026-02-10 11:32:11.652 -03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__empresaId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Cantidad", s."CreatedAt", s."FechaVencimiento", s."ProductoId", s."StockMinimo", s."SucursalId", s."UpdatedAt", p."Id", p."Activo", p."CategoriaId", p."CreatedAt", p."Descripcion", p."EmpresaId", p."Nombre", p."Precio", p."Sku", p."UpdatedAt", s0."Id", s0."Activo", s0."Ciudad", s0."CreatedAt", s0."Direccion", s0."EmpresaId", s0."Nombre", s0."Region", s0."Telefono", s0."UpdatedAt"
FROM "Stocks" AS s
INNER JOIN "Productos" AS p ON s."ProductoId" = p."Id"
INNER JOIN "Sucursales" AS s0 ON s."SucursalId" = s0."Id"
WHERE p."EmpresaId" = @__empresaId_0
2026-02-10 11:32:11.655 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:32:11.656 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-02-10 11:32:11.657 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:32:11.658 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-02-10 11:32:11.667 -03:00 [INF] Retrieved 0 stocks for user 5 with role null
2026-02-10 11:32:11.668 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 11:32:11.669 -03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2026-02-10 11:32:11.670 -03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2026-02-10 11:32:11.671 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 11:32:11.672 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 11:32:11.672 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 11:32:11.673 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Project_Gon.Core.DTOs.Stock.StockDto, Project_Gon.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-10 11:32:11.677 -03:00 [INF] Executed action Project_Gon.Api.Controllers.StocksController.GetAll (Project_Gon.Api) in 147.19ms
2026-02-10 11:32:11.678 -03:00 [INF] Executed endpoint 'Project_Gon.Api.Controllers.StocksController.GetAll (Project_Gon.Api)'
2026-02-10 11:32:11.679 -03:00 [INF] HTTP GET /api/Stocks responded 200 in 217.1161 ms
2026-02-10 11:32:11.680 -03:00 [DBG] 'AppDbContext' disposed.
2026-02-10 11:32:11.682 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:32:11.683 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-02-10 11:32:11.684 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/api/Stocks - 200 null application/json; charset=utf-8 227.1677ms
2026-02-10 11:33:40.499 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/Stocks - application/json 126
2026-02-10 11:33:40.501 -03:00 [DBG] 1 candidate(s) found for the request path '/api/Stocks'
2026-02-10 11:33:40.501 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.StocksController.Create (Project_Gon.Api)' with route pattern 'api/Stocks' is valid for the request path '/api/Stocks'
2026-02-10 11:33:40.502 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.StocksController.Create (Project_Gon.Api)'
2026-02-10 11:33:40.503 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 11:33:40.504 -03:00 [DBG] The request has an origin header: 'https://localhost:7058'.
2026-02-10 11:33:40.504 -03:00 [INF] CORS policy execution failed.
2026-02-10 11:33:40.505 -03:00 [INF] Request origin https://localhost:7058 does not have permission to access the resource.
2026-02-10 11:33:40.507 -03:00 [DBG] Successfully validated the token.
2026-02-10 11:33:40.507 -03:00 [INF] JWT Token validated for user: Unknown, empresa: 2
2026-02-10 11:33:40.509 -03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2026-02-10 11:33:40.512 -03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (AdminGlobal|AdminEmpresa)
2026-02-10 11:33:40.562 -03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2026-02-10 11:33:40.563 -03:00 [INF] HTTP POST /api/Stocks responded 403 in 56.7392 ms
2026-02-10 11:33:40.564 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/Stocks - 403 0 null 65.0004ms
2026-02-10 11:33:40.565 -03:00 [DBG] Connection id "0HNJ8LQ8REVO5", Request id "0HNJ8LQ8REVO5:00000003": started reading request body.
2026-02-10 11:33:40.566 -03:00 [DBG] Connection id "0HNJ8LQ8REVO5", Request id "0HNJ8LQ8REVO5:00000003": done reading request body.
2026-02-10 11:35:52.467 -03:00 [DBG] Connection id "0HNJ8LQ8REVO5" is closing.
2026-02-10 11:35:52.468 -03:00 [DBG] Connection id "0HNJ8LQ8REVO5" is closed. The last processed stream ID was 3.
2026-02-10 11:35:52.469 -03:00 [DBG] Connection id "0HNJ8LQ8REVO5" received FIN.
2026-02-10 11:35:52.470 -03:00 [DBG] Connection id "0HNJ8LQ8REVO5" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 11:35:52.483 -03:00 [DBG] The connection queue processing loop for 0HNJ8LQ8REVO5 completed.
2026-02-10 11:35:52.484 -03:00 [DBG] Connection id "0HNJ8LQ8REVO5" stopped.
2026-02-10 11:39:41.345 -03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-10 11:39:41.690 -03:00 [DBG] The index {'ProductoId'} was not created on entity type 'Stock' as the properties are already covered by the index {'ProductoId', 'SucursalId'}.
2026-02-10 11:39:41.693 -03:00 [DBG] The index {'EmpresaId'} was not created on entity type 'Usuario' as the properties are already covered by the index {'EmpresaId', 'Email'}.
2026-02-10 11:39:41.694 -03:00 [DBG] The index {'EmpresaId'} was not created on entity type 'Usuario' as the properties are already covered by the index {'EmpresaId', 'Rut'}.
2026-02-10 11:39:41.770 -03:00 [DBG] The property 'MovimientoStock.DevolucionId' was created in shadow state because there are no eligible CLR members with a matching name.
2026-02-10 11:39:41.833 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-02-10 11:39:41.844 -03:00 [DBG] Creating DbConnection.
2026-02-10 11:39:41.861 -03:00 [DBG] Created DbConnection. (15ms).
2026-02-10 11:39:41.864 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:39:41.938 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:39:41.941 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 11:39:41.945 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2026-02-10 11:39:41.946 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2026-02-10 11:39:41.950 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-02-10 11:39:41.971 -03:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-02-10 11:39:41.990 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:39:41.996 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 21ms reading results.
2026-02-10 11:39:41.998 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:39:42.001 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (2ms).
2026-02-10 11:39:42.108 -03:00 [DBG] Migrating using database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:39:42.111 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:39:42.113 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:39:42.146 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:39:42.147 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:39:42.149 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (2ms).
2026-02-10 11:39:42.150 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:39:42.151 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:39:42.181 -03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-02-10 11:39:42.182 -03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-02-10 11:39:42.183 -03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1ms).
2026-02-10 11:39:42.184 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2026-02-10 11:39:42.189 -03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2026-02-10 11:39:42.193 -03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2026-02-10 11:39:42.195 -03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2026-02-10 11:39:42.196 -03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2026-02-10 11:39:42.197 -03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-02-10 11:39:42.198 -03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-02-10 11:39:42.199 -03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1ms).
2026-02-10 11:39:42.200 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2026-02-10 11:39:42.201 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2026-02-10 11:39:42.204 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 11:39:42.204 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 11:39:42.205 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 11:39:42.206 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-02-10 11:39:42.208 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-02-10 11:39:42.209 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:39:42.210 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-02-10 11:39:42.215 -03:00 [INF] No migrations were applied. The database is already up to date.
2026-02-10 11:39:42.216 -03:00 [DBG] Committing transaction.
2026-02-10 11:39:42.219 -03:00 [DBG] Committed transaction.
2026-02-10 11:39:42.221 -03:00 [DBG] Disposing transaction.
2026-02-10 11:39:42.221 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:39:42.222 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-02-10 11:39:42.223 -03:00 [INF] Database migrations applied successfully
2026-02-10 11:39:42.224 -03:00 [DBG] 'AppDbContext' disposed.
2026-02-10 11:39:42.226 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 11:39:42.228 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (1ms).
2026-02-10 11:39:42.251 -03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-10 11:39:42.288 -03:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2026-02-10 11:39:42.301 -03:00 [INF] Project Gon API iniciada en ambiente: Development
2026-02-10 11:39:42.303 -03:00 [DBG] Hosting starting
2026-02-10 11:39:42.311 -03:00 [INF] User profile is available. Using 'C:\Users\Jossan\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-02-10 11:39:42.317 -03:00 [DBG] Reading data from file 'C:\Users\Jossan\AppData\Local\ASP.NET\DataProtection-Keys\key-7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c.xml'.
2026-02-10 11:39:42.322 -03:00 [DBG] Found key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c}.
2026-02-10 11:39:42.329 -03:00 [DBG] Considering key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} with expiration date 2026-04-28 18:20:11Z as default key.
2026-02-10 11:39:42.333 -03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2026-02-10 11:39:42.334 -03:00 [DBG] Decrypting secret element using Windows DPAPI.
2026-02-10 11:39:42.335 -03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2026-02-10 11:39:42.338 -03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2026-02-10 11:39:42.339 -03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2026-02-10 11:39:42.340 -03:00 [DBG] Using key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} as the default key.
2026-02-10 11:39:42.341 -03:00 [DBG] Key ring with default key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} was loaded during application startup.
2026-02-10 11:39:42.343 -03:00 [DBG] Middleware loaded
2026-02-10 11:39:42.345 -03:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16515 B).
2026-02-10 11:39:42.346 -03:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2026-02-10 11:39:42.395 -03:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2026-02-10 11:39:42.396 -03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-10 11:39:42.398 -03:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2026-02-10 11:39:42.424 -03:00 [INF] Now listening on: https://localhost:7058
2026-02-10 11:39:42.425 -03:00 [INF] Now listening on: http://localhost:5070
2026-02-10 11:39:42.427 -03:00 [DBG] Loaded hosting startup assembly Project_Gon.Api
2026-02-10 11:39:42.427 -03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-10 11:39:42.428 -03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-10 11:39:42.428 -03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-10 11:39:42.432 -03:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2026-02-10 11:39:42.435 -03:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2026-02-10 11:39:42.461 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-10 11:39:42.462 -03:00 [INF] Hosting environment: Development
2026-02-10 11:39:42.462 -03:00 [INF] Content root path: C:\Proyectos\Project_Gon\Project_Gon.Api
2026-02-10 11:39:42.464 -03:00 [DBG] Hosting started
2026-02-10 11:39:42.522 -03:00 [DBG] Connection id "0HNJ8M8T57GKJ" accepted.
2026-02-10 11:39:42.523 -03:00 [DBG] Connection id "0HNJ8M8T57GKJ" started.
2026-02-10 11:39:42.546 -03:00 [DBG] Connection 0HNJ8M8T57GKJ established using the following protocol: "Tls12"
2026-02-10 11:39:42.568 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/index.html - null null
2026-02-10 11:39:42.581 -03:00 [DBG] Connection id "0HNJ8M8T57GKK" accepted.
2026-02-10 11:39:42.583 -03:00 [DBG] Connection id "0HNJ8M8T57GKK" started.
2026-02-10 11:39:42.584 -03:00 [DBG] Connection 0HNJ8M8T57GKK established using the following protocol: "Tls12"
2026-02-10 11:39:42.616 -03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-10 11:39:42.617 -03:00 [DBG] Request did not match any endpoints
2026-02-10 11:39:42.642 -03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-10 11:39:42.644 -03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-10 11:39:42.652 -03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-10 11:39:42.652 -03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-10 11:39:42.654 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/index.html - 200 null text/html;charset=utf-8 86.5987ms
2026-02-10 11:39:42.676 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/_framework/aspnetcore-browser-refresh.js - null null
2026-02-10 11:39:42.676 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/_vs/browserLink - null null
2026-02-10 11:39:42.679 -03:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2026-02-10 11:39:42.680 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/_framework/aspnetcore-browser-refresh.js - 200 16515 application/javascript; charset=utf-8 3.8334ms
2026-02-10 11:39:42.694 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/_vs/browserLink - 200 null text/javascript; charset=UTF-8 17.4809ms
2026-02-10 11:39:42.799 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/v1/swagger.json - null null
2026-02-10 11:39:42.802 -03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-10 11:39:42.803 -03:00 [DBG] Request did not match any endpoints
2026-02-10 11:39:42.834 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 34.8283ms
2026-02-10 11:39:48.358 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/index.html - null null
2026-02-10 11:39:48.362 -03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-10 11:39:48.363 -03:00 [DBG] Request did not match any endpoints
2026-02-10 11:39:48.365 -03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-10 11:39:48.366 -03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-10 11:39:48.369 -03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-10 11:39:48.369 -03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-10 11:39:48.370 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/index.html - 200 null text/html;charset=utf-8 11.9791ms
2026-02-10 11:39:48.390 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/_framework/aspnetcore-browser-refresh.js - null null
2026-02-10 11:39:48.390 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/_vs/browserLink - null null
2026-02-10 11:39:48.392 -03:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2026-02-10 11:39:48.395 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/_framework/aspnetcore-browser-refresh.js - 200 16515 application/javascript; charset=utf-8 5.322ms
2026-02-10 11:39:48.401 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/_vs/browserLink - 200 null text/javascript; charset=UTF-8 10.7374ms
2026-02-10 11:39:48.418 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/v1/swagger.json - null null
2026-02-10 11:39:48.419 -03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-10 11:39:48.422 -03:00 [DBG] Request did not match any endpoints
2026-02-10 11:39:48.448 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 29.6604ms
2026-02-10 11:41:46.308 -03:00 [DBG] Connection id "0HNJ8M8T57GKK" received FIN.
2026-02-10 11:41:46.308 -03:00 [DBG] Connection id "0HNJ8M8T57GKJ" received FIN.
2026-02-10 11:41:46.309 -03:00 [DBG] Connection id "0HNJ8M8T57GKK" is closed. The last processed stream ID was 0.
2026-02-10 11:41:46.309 -03:00 [DBG] Connection id "0HNJ8M8T57GKJ" is closed. The last processed stream ID was 15.
2026-02-10 11:41:46.310 -03:00 [DBG] The connection queue processing loop for 0HNJ8M8T57GKK completed.
2026-02-10 11:41:46.310 -03:00 [DBG] The connection queue processing loop for 0HNJ8M8T57GKJ completed.
2026-02-10 11:41:46.310 -03:00 [DBG] Connection id "0HNJ8M8T57GKK" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 11:41:46.311 -03:00 [DBG] Connection id "0HNJ8M8T57GKJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 11:41:46.318 -03:00 [DBG] Connection id "0HNJ8M8T57GKK" stopped.
2026-02-10 11:41:46.318 -03:00 [DBG] Connection id "0HNJ8M8T57GKJ" stopped.
2026-02-10 11:44:22.428 -03:00 [DBG] Connection id "0HNJ8M8T57GKL" accepted.
2026-02-10 11:44:22.429 -03:00 [DBG] Connection id "0HNJ8M8T57GKL" started.
2026-02-10 11:44:22.432 -03:00 [DBG] Connection 0HNJ8M8T57GKL established using the following protocol: "Tls12"
2026-02-10 11:44:22.435 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/Stocks - application/json 126
2026-02-10 11:44:22.441 -03:00 [DBG] 1 candidate(s) found for the request path '/api/Stocks'
2026-02-10 11:44:22.442 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.StocksController.Create (Project_Gon.Api)' with route pattern 'api/Stocks' is valid for the request path '/api/Stocks'
2026-02-10 11:44:22.443 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.StocksController.Create (Project_Gon.Api)'
2026-02-10 11:44:22.445 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 11:44:22.446 -03:00 [DBG] The request has an origin header: 'https://localhost:7058'.
2026-02-10 11:44:22.447 -03:00 [INF] CORS policy execution failed.
2026-02-10 11:44:22.448 -03:00 [INF] Request origin https://localhost:7058 does not have permission to access the resource.
2026-02-10 11:44:22.492 -03:00 [DBG] Successfully validated the token.
2026-02-10 11:44:22.493 -03:00 [INF] JWT Token validated for user: Unknown, empresa: 2
2026-02-10 11:44:22.494 -03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2026-02-10 11:44:22.498 -03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (AdminGlobal|AdminEmpresa)
2026-02-10 11:44:22.500 -03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2026-02-10 11:44:22.502 -03:00 [INF] HTTP POST /api/Stocks responded 403 in 51.0801 ms
2026-02-10 11:44:22.503 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/Stocks - 403 0 null 68.6446ms
2026-02-10 11:44:22.505 -03:00 [DBG] Connection id "0HNJ8M8T57GKL", Request id "0HNJ8M8T57GKL:00000001": started reading request body.
2026-02-10 11:44:22.506 -03:00 [DBG] Connection id "0HNJ8M8T57GKL", Request id "0HNJ8M8T57GKL:00000001": done reading request body.
2026-02-10 11:46:34.535 -03:00 [DBG] Connection id "0HNJ8M8T57GKL" is closing.
2026-02-10 11:46:34.536 -03:00 [DBG] Connection id "0HNJ8M8T57GKL" is closed. The last processed stream ID was 1.
2026-02-10 11:46:34.538 -03:00 [DBG] Connection id "0HNJ8M8T57GKL" received FIN.
2026-02-10 11:46:34.538 -03:00 [DBG] The connection queue processing loop for 0HNJ8M8T57GKL completed.
2026-02-10 11:46:34.538 -03:00 [DBG] Connection id "0HNJ8M8T57GKL" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 11:46:34.550 -03:00 [DBG] Connection id "0HNJ8M8T57GKL" stopped.
2026-02-10 12:04:17.808 -03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-10 12:04:18.147 -03:00 [DBG] The index {'ProductoId'} was not created on entity type 'Stock' as the properties are already covered by the index {'ProductoId', 'SucursalId'}.
2026-02-10 12:04:18.149 -03:00 [DBG] The index {'EmpresaId'} was not created on entity type 'Usuario' as the properties are already covered by the index {'EmpresaId', 'Email'}.
2026-02-10 12:04:18.150 -03:00 [DBG] The index {'EmpresaId'} was not created on entity type 'Usuario' as the properties are already covered by the index {'EmpresaId', 'Rut'}.
2026-02-10 12:04:18.223 -03:00 [DBG] The property 'MovimientoStock.DevolucionId' was created in shadow state because there are no eligible CLR members with a matching name.
2026-02-10 12:04:18.284 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-02-10 12:04:18.295 -03:00 [DBG] Creating DbConnection.
2026-02-10 12:04:18.311 -03:00 [DBG] Created DbConnection. (15ms).
2026-02-10 12:04:18.314 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:04:18.383 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:04:18.387 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:04:18.390 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2026-02-10 12:04:18.391 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2026-02-10 12:04:18.395 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-02-10 12:04:18.415 -03:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-02-10 12:04:18.434 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:04:18.439 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 20ms reading results.
2026-02-10 12:04:18.440 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:04:18.443 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (2ms).
2026-02-10 12:04:18.546 -03:00 [DBG] Migrating using database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:04:18.548 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:04:18.550 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:04:18.699 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:04:18.700 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:04:18.702 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (1ms).
2026-02-10 12:04:18.703 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:04:18.703 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:04:18.731 -03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-02-10 12:04:18.732 -03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-02-10 12:04:18.732 -03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1ms).
2026-02-10 12:04:18.734 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2026-02-10 12:04:18.739 -03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2026-02-10 12:04:18.742 -03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2026-02-10 12:04:18.744 -03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2026-02-10 12:04:18.746 -03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2026-02-10 12:04:18.747 -03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-02-10 12:04:18.748 -03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-02-10 12:04:18.749 -03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1ms).
2026-02-10 12:04:18.749 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2026-02-10 12:04:18.751 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2026-02-10 12:04:18.752 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:04:18.753 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:04:18.754 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:04:18.754 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-02-10 12:04:18.756 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-02-10 12:04:18.758 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:04:18.760 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 2ms reading results.
2026-02-10 12:04:18.766 -03:00 [INF] No migrations were applied. The database is already up to date.
2026-02-10 12:04:18.767 -03:00 [DBG] Committing transaction.
2026-02-10 12:04:18.770 -03:00 [DBG] Committed transaction.
2026-02-10 12:04:18.771 -03:00 [DBG] Disposing transaction.
2026-02-10 12:04:18.771 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:04:18.772 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-02-10 12:04:18.773 -03:00 [INF] Database migrations applied successfully
2026-02-10 12:04:18.775 -03:00 [DBG] 'AppDbContext' disposed.
2026-02-10 12:04:18.777 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:04:18.778 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (1ms).
2026-02-10 12:04:18.799 -03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-10 12:04:18.838 -03:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2026-02-10 12:04:18.852 -03:00 [INF] Project Gon API iniciada en ambiente: Development
2026-02-10 12:04:18.854 -03:00 [DBG] Hosting starting
2026-02-10 12:04:18.862 -03:00 [INF] User profile is available. Using 'C:\Users\Jossan\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-02-10 12:04:18.868 -03:00 [DBG] Reading data from file 'C:\Users\Jossan\AppData\Local\ASP.NET\DataProtection-Keys\key-7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c.xml'.
2026-02-10 12:04:18.873 -03:00 [DBG] Found key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c}.
2026-02-10 12:04:18.879 -03:00 [DBG] Considering key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} with expiration date 2026-04-28 18:20:11Z as default key.
2026-02-10 12:04:18.881 -03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2026-02-10 12:04:18.883 -03:00 [DBG] Decrypting secret element using Windows DPAPI.
2026-02-10 12:04:18.884 -03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2026-02-10 12:04:18.887 -03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2026-02-10 12:04:18.888 -03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2026-02-10 12:04:18.889 -03:00 [DBG] Using key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} as the default key.
2026-02-10 12:04:18.889 -03:00 [DBG] Key ring with default key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} was loaded during application startup.
2026-02-10 12:04:18.892 -03:00 [DBG] Middleware loaded
2026-02-10 12:04:18.893 -03:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16515 B).
2026-02-10 12:04:18.894 -03:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2026-02-10 12:04:18.940 -03:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2026-02-10 12:04:18.941 -03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-10 12:04:18.943 -03:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2026-02-10 12:04:18.970 -03:00 [INF] Now listening on: https://localhost:7058
2026-02-10 12:04:18.971 -03:00 [INF] Now listening on: http://localhost:5070
2026-02-10 12:04:18.971 -03:00 [DBG] Loaded hosting startup assembly Project_Gon.Api
2026-02-10 12:04:18.972 -03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-10 12:04:18.973 -03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-10 12:04:18.973 -03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-10 12:04:18.977 -03:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2026-02-10 12:04:18.980 -03:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2026-02-10 12:04:18.999 -03:00 [DBG] Connection id "0HNJ8MML60H0V" accepted.
2026-02-10 12:04:19.000 -03:00 [DBG] Connection id "0HNJ8MML60H0V" started.
2026-02-10 12:04:19.005 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-10 12:04:19.005 -03:00 [INF] Hosting environment: Development
2026-02-10 12:04:19.006 -03:00 [INF] Content root path: C:\Proyectos\Project_Gon\Project_Gon.Api
2026-02-10 12:04:19.008 -03:00 [DBG] Hosting started
2026-02-10 12:04:19.025 -03:00 [DBG] Connection 0HNJ8MML60H0V established using the following protocol: "Tls12"
2026-02-10 12:04:19.047 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/index.html - null null
2026-02-10 12:04:19.097 -03:00 [DBG] Connection id "0HNJ8MML60H10" accepted.
2026-02-10 12:04:19.097 -03:00 [DBG] Connection id "0HNJ8MML60H10" started.
2026-02-10 12:04:19.099 -03:00 [DBG] Connection 0HNJ8MML60H10 established using the following protocol: "Tls12"
2026-02-10 12:04:19.136 -03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-10 12:04:19.137 -03:00 [DBG] Request did not match any endpoints
2026-02-10 12:04:19.164 -03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-10 12:04:19.165 -03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-10 12:04:19.173 -03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-10 12:04:19.173 -03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-10 12:04:19.175 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/index.html - 200 null text/html;charset=utf-8 129.1705ms
2026-02-10 12:04:19.195 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/_framework/aspnetcore-browser-refresh.js - null null
2026-02-10 12:04:19.195 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/_vs/browserLink - null null
2026-02-10 12:04:19.199 -03:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2026-02-10 12:04:19.199 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/_framework/aspnetcore-browser-refresh.js - 200 16515 application/javascript; charset=utf-8 4.1505ms
2026-02-10 12:04:19.214 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/_vs/browserLink - 200 null text/javascript; charset=UTF-8 18.2666ms
2026-02-10 12:04:19.265 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/v1/swagger.json - null null
2026-02-10 12:04:19.267 -03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-10 12:04:19.268 -03:00 [DBG] Request did not match any endpoints
2026-02-10 12:04:19.296 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 31.1206ms
2026-02-10 12:05:21.610 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/index.html - null null
2026-02-10 12:05:21.615 -03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-10 12:05:21.615 -03:00 [DBG] Request did not match any endpoints
2026-02-10 12:05:21.616 -03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-10 12:05:21.617 -03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-10 12:05:21.618 -03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-10 12:05:21.619 -03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-10 12:05:21.619 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/index.html - 200 null text/html;charset=utf-8 8.9566ms
2026-02-10 12:05:21.621 -03:00 [DBG] Connection id "0HNJ8MML60H10" received FIN.
2026-02-10 12:05:21.622 -03:00 [DBG] Connection id "0HNJ8MML60H10" is closed. The last processed stream ID was 0.
2026-02-10 12:05:21.623 -03:00 [DBG] The connection queue processing loop for 0HNJ8MML60H10 completed.
2026-02-10 12:05:21.624 -03:00 [DBG] Connection id "0HNJ8MML60H10" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 12:05:21.630 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/_vs/browserLink - null null
2026-02-10 12:05:21.630 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/_framework/aspnetcore-browser-refresh.js - null null
2026-02-10 12:05:21.633 -03:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2026-02-10 12:05:21.634 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/_framework/aspnetcore-browser-refresh.js - 200 16515 application/javascript; charset=utf-8 3.5074ms
2026-02-10 12:05:21.635 -03:00 [DBG] Connection id "0HNJ8MML60H10" stopped.
2026-02-10 12:05:21.637 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.0841ms
2026-02-10 12:05:21.692 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/v1/swagger.json - null null
2026-02-10 12:05:21.695 -03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-10 12:05:21.695 -03:00 [DBG] Request did not match any endpoints
2026-02-10 12:05:21.725 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 32.6885ms
2026-02-10 12:07:19.976 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/Stocks - application/json 126
2026-02-10 12:07:19.979 -03:00 [DBG] 1 candidate(s) found for the request path '/api/Stocks'
2026-02-10 12:07:19.982 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.StocksController.Create (Project_Gon.Api)' with route pattern 'api/Stocks' is valid for the request path '/api/Stocks'
2026-02-10 12:07:19.984 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.StocksController.Create (Project_Gon.Api)'
2026-02-10 12:07:19.986 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:07:19.988 -03:00 [DBG] The request has an origin header: 'https://localhost:7058'.
2026-02-10 12:07:19.989 -03:00 [INF] CORS policy execution failed.
2026-02-10 12:07:19.989 -03:00 [INF] Request origin https://localhost:7058 does not have permission to access the resource.
2026-02-10 12:07:20.036 -03:00 [DBG] Successfully validated the token.
2026-02-10 12:07:20.037 -03:00 [INF] JWT Token validated for user: Unknown, empresa: 2
2026-02-10 12:07:20.038 -03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2026-02-10 12:07:20.041 -03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (AdminGlobal|Administrador)
2026-02-10 12:07:20.042 -03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2026-02-10 12:07:20.044 -03:00 [INF] HTTP POST /api/Stocks responded 403 in 51.6754 ms
2026-02-10 12:07:20.045 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/Stocks - 403 0 null 69.8928ms
2026-02-10 12:07:20.047 -03:00 [DBG] Connection id "0HNJ8MML60H0V", Request id "0HNJ8MML60H0V:00000011": started reading request body.
2026-02-10 12:07:20.048 -03:00 [DBG] Connection id "0HNJ8MML60H0V", Request id "0HNJ8MML60H0V:00000011": done reading request body.
2026-02-10 12:09:31.249 -03:00 [DBG] Connection id "0HNJ8MML60H0V" is closing.
2026-02-10 12:09:31.250 -03:00 [DBG] Connection id "0HNJ8MML60H0V" is closed. The last processed stream ID was 17.
2026-02-10 12:09:31.252 -03:00 [DBG] Connection id "0HNJ8MML60H0V" received FIN.
2026-02-10 12:09:31.252 -03:00 [DBG] The connection queue processing loop for 0HNJ8MML60H0V completed.
2026-02-10 12:09:31.252 -03:00 [DBG] Connection id "0HNJ8MML60H0V" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 12:09:31.265 -03:00 [DBG] Connection id "0HNJ8MML60H0V" stopped.
2026-02-10 12:18:16.669 -03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-10 12:18:17.010 -03:00 [DBG] The index {'ProductoId'} was not created on entity type 'Stock' as the properties are already covered by the index {'ProductoId', 'SucursalId'}.
2026-02-10 12:18:17.012 -03:00 [DBG] The index {'EmpresaId'} was not created on entity type 'Usuario' as the properties are already covered by the index {'EmpresaId', 'Email'}.
2026-02-10 12:18:17.012 -03:00 [DBG] The index {'EmpresaId'} was not created on entity type 'Usuario' as the properties are already covered by the index {'EmpresaId', 'Rut'}.
2026-02-10 12:18:17.086 -03:00 [DBG] The property 'MovimientoStock.DevolucionId' was created in shadow state because there are no eligible CLR members with a matching name.
2026-02-10 12:18:17.146 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-02-10 12:18:17.157 -03:00 [DBG] Creating DbConnection.
2026-02-10 12:18:17.174 -03:00 [DBG] Created DbConnection. (16ms).
2026-02-10 12:18:17.177 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:18:17.248 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:18:17.252 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:18:17.255 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2026-02-10 12:18:17.256 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2026-02-10 12:18:17.260 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-02-10 12:18:17.281 -03:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-02-10 12:18:17.299 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:18:17.305 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 20ms reading results.
2026-02-10 12:18:17.307 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:18:17.309 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (2ms).
2026-02-10 12:18:17.414 -03:00 [DBG] Migrating using database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:18:17.416 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:18:17.418 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:18:17.451 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:18:17.452 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:18:17.454 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (1ms).
2026-02-10 12:18:17.455 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:18:17.455 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:18:17.486 -03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-02-10 12:18:17.487 -03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-02-10 12:18:17.488 -03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1ms).
2026-02-10 12:18:17.488 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2026-02-10 12:18:17.493 -03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2026-02-10 12:18:17.496 -03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2026-02-10 12:18:17.498 -03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2026-02-10 12:18:17.500 -03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2026-02-10 12:18:17.500 -03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-02-10 12:18:17.501 -03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-02-10 12:18:17.502 -03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1ms).
2026-02-10 12:18:17.502 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2026-02-10 12:18:17.504 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2026-02-10 12:18:17.505 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:18:17.505 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:18:17.506 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:18:17.506 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-02-10 12:18:17.508 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-02-10 12:18:17.509 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:18:17.510 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-02-10 12:18:17.514 -03:00 [INF] No migrations were applied. The database is already up to date.
2026-02-10 12:18:17.515 -03:00 [DBG] Committing transaction.
2026-02-10 12:18:17.554 -03:00 [DBG] Committed transaction.
2026-02-10 12:18:17.555 -03:00 [DBG] Disposing transaction.
2026-02-10 12:18:17.556 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:18:17.556 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-02-10 12:18:17.558 -03:00 [INF] Database migrations applied successfully
2026-02-10 12:18:17.559 -03:00 [DBG] 'AppDbContext' disposed.
2026-02-10 12:18:17.561 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:18:17.562 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (1ms).
2026-02-10 12:18:17.584 -03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-10 12:18:17.620 -03:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2026-02-10 12:18:17.632 -03:00 [INF] Project Gon API iniciada en ambiente: Development
2026-02-10 12:18:17.634 -03:00 [DBG] Hosting starting
2026-02-10 12:18:17.643 -03:00 [INF] User profile is available. Using 'C:\Users\Jossan\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-02-10 12:18:17.648 -03:00 [DBG] Reading data from file 'C:\Users\Jossan\AppData\Local\ASP.NET\DataProtection-Keys\key-7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c.xml'.
2026-02-10 12:18:17.653 -03:00 [DBG] Found key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c}.
2026-02-10 12:18:17.659 -03:00 [DBG] Considering key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} with expiration date 2026-04-28 18:20:11Z as default key.
2026-02-10 12:18:17.661 -03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2026-02-10 12:18:17.661 -03:00 [DBG] Decrypting secret element using Windows DPAPI.
2026-02-10 12:18:17.662 -03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2026-02-10 12:18:17.664 -03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2026-02-10 12:18:17.665 -03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2026-02-10 12:18:17.666 -03:00 [DBG] Using key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} as the default key.
2026-02-10 12:18:17.667 -03:00 [DBG] Key ring with default key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} was loaded during application startup.
2026-02-10 12:18:17.670 -03:00 [DBG] Middleware loaded
2026-02-10 12:18:17.671 -03:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16515 B).
2026-02-10 12:18:17.672 -03:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2026-02-10 12:18:17.715 -03:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2026-02-10 12:18:17.716 -03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-10 12:18:17.718 -03:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2026-02-10 12:18:17.746 -03:00 [INF] Now listening on: https://localhost:7058
2026-02-10 12:18:17.747 -03:00 [INF] Now listening on: http://localhost:5070
2026-02-10 12:18:17.747 -03:00 [DBG] Loaded hosting startup assembly Project_Gon.Api
2026-02-10 12:18:17.748 -03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-10 12:18:17.748 -03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-10 12:18:17.749 -03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-10 12:18:17.751 -03:00 [DBG] Connection id "0HNJ8MUF4VECH" accepted.
2026-02-10 12:18:17.752 -03:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2026-02-10 12:18:17.752 -03:00 [DBG] Connection id "0HNJ8MUF4VECH" started.
2026-02-10 12:18:17.755 -03:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2026-02-10 12:18:17.775 -03:00 [DBG] Connection 0HNJ8MUF4VECH established using the following protocol: "Tls12"
2026-02-10 12:18:17.778 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-10 12:18:17.779 -03:00 [INF] Hosting environment: Development
2026-02-10 12:18:17.780 -03:00 [INF] Content root path: C:\Proyectos\Project_Gon\Project_Gon.Api
2026-02-10 12:18:17.781 -03:00 [DBG] Hosting started
2026-02-10 12:18:17.796 -03:00 [DBG] Connection id "0HNJ8MUF4VECI" accepted.
2026-02-10 12:18:17.796 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/index.html - null null
2026-02-10 12:18:17.797 -03:00 [DBG] Connection id "0HNJ8MUF4VECI" started.
2026-02-10 12:18:17.801 -03:00 [DBG] Connection 0HNJ8MUF4VECI established using the following protocol: "Tls12"
2026-02-10 12:18:17.885 -03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-10 12:18:17.886 -03:00 [DBG] Request did not match any endpoints
2026-02-10 12:18:17.913 -03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-10 12:18:17.914 -03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-10 12:18:17.921 -03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-10 12:18:17.922 -03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-10 12:18:17.923 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/index.html - 200 null text/html;charset=utf-8 128.1024ms
2026-02-10 12:18:17.942 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/_vs/browserLink - null null
2026-02-10 12:18:17.942 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/_framework/aspnetcore-browser-refresh.js - null null
2026-02-10 12:18:17.946 -03:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2026-02-10 12:18:17.947 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/_framework/aspnetcore-browser-refresh.js - 200 16515 application/javascript; charset=utf-8 5.2328ms
2026-02-10 12:18:17.957 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/_vs/browserLink - 200 null text/javascript; charset=UTF-8 15.3547ms
2026-02-10 12:18:18.069 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/v1/swagger.json - null null
2026-02-10 12:18:18.071 -03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-10 12:18:18.072 -03:00 [DBG] Request did not match any endpoints
2026-02-10 12:18:18.096 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 26.8755ms
2026-02-10 12:18:38.428 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/index.html - null null
2026-02-10 12:18:38.434 -03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-10 12:18:38.435 -03:00 [DBG] Request did not match any endpoints
2026-02-10 12:18:38.437 -03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-10 12:18:38.438 -03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-10 12:18:38.439 -03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-10 12:18:38.440 -03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-10 12:18:38.441 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/index.html - 200 null text/html;charset=utf-8 12.7108ms
2026-02-10 12:18:38.459 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/swagger-ui.css - null null
2026-02-10 12:18:38.459 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/swagger-ui-bundle.js - null null
2026-02-10 12:18:38.459 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/swagger-ui-standalone-preset.js - null null
2026-02-10 12:18:38.459 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/_vs/browserLink - null null
2026-02-10 12:18:38.459 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/_framework/aspnetcore-browser-refresh.js - null null
2026-02-10 12:18:38.460 -03:00 [DBG] No candidates found for the request path '/swagger/swagger-ui.css'
2026-02-10 12:18:38.462 -03:00 [DBG] No candidates found for the request path '/swagger/swagger-ui-bundle.js'
2026-02-10 12:18:38.463 -03:00 [DBG] No candidates found for the request path '/swagger/swagger-ui-standalone-preset.js'
2026-02-10 12:18:38.466 -03:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2026-02-10 12:18:38.466 -03:00 [DBG] Request did not match any endpoints
2026-02-10 12:18:38.467 -03:00 [DBG] Request did not match any endpoints
2026-02-10 12:18:38.467 -03:00 [DBG] Request did not match any endpoints
2026-02-10 12:18:38.468 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/_framework/aspnetcore-browser-refresh.js - 200 16515 application/javascript; charset=utf-8 8.3922ms
2026-02-10 12:18:38.470 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/_vs/browserLink - 200 null text/javascript; charset=UTF-8 10.5255ms
2026-02-10 12:18:38.476 -03:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2026-02-10 12:18:38.476 -03:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2026-02-10 12:18:38.478 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/swagger-ui-standalone-preset.js - 200 230280 text/javascript 18.6392ms
2026-02-10 12:18:38.479 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/swagger-ui.css - 200 152034 text/css 20.3377ms
2026-02-10 12:18:38.480 -03:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2026-02-10 12:18:38.485 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/swagger-ui-bundle.js - 200 1456926 text/javascript 25.9345ms
2026-02-10 12:18:38.573 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/v1/swagger.json - null null
2026-02-10 12:18:38.573 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/favicon-32x32.png - null null
2026-02-10 12:18:38.575 -03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-10 12:18:38.577 -03:00 [DBG] No candidates found for the request path '/swagger/favicon-32x32.png'
2026-02-10 12:18:38.577 -03:00 [DBG] Request did not match any endpoints
2026-02-10 12:18:38.578 -03:00 [DBG] Request did not match any endpoints
2026-02-10 12:18:38.579 -03:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2026-02-10 12:18:38.580 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/favicon-32x32.png - 200 628 image/png 6.5621ms
2026-02-10 12:18:38.606 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 33.0857ms
2026-02-10 12:20:16.973 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/Auth/login - application/json 66
2026-02-10 12:20:16.977 -03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2026-02-10 12:20:16.978 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2026-02-10 12:20:16.999 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-02-10 12:20:17.008 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:20:17.010 -03:00 [DBG] The request has an origin header: 'https://localhost:7058'.
2026-02-10 12:20:17.011 -03:00 [INF] CORS policy execution failed.
2026-02-10 12:20:17.011 -03:00 [INF] Request origin https://localhost:7058 does not have permission to access the resource.
2026-02-10 12:20:17.054 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-02-10 12:20:17.055 -03:00 [INF] Executing endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-02-10 12:20:17.065 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Project_Gon.Core.DTOs.Auth.LoginDto) on controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api).
2026-02-10 12:20:17.067 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 12:20:17.067 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 12:20:17.068 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-10 12:20:17.069 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 12:20:17.070 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 12:20:17.072 -03:00 [DBG] Executing controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-02-10 12:20:17.160 -03:00 [DBG] Executed controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-02-10 12:20:17.162 -03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' ...
2026-02-10 12:20:17.164 -03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' using the name '' in request data ...
2026-02-10 12:20:17.166 -03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2026-02-10 12:20:17.170 -03:00 [DBG] Connection id "0HNJ8MUF4VECH", Request id "0HNJ8MUF4VECH:00000019": started reading request body.
2026-02-10 12:20:17.171 -03:00 [DBG] Connection id "0HNJ8MUF4VECH", Request id "0HNJ8MUF4VECH:00000019": done reading request body.
2026-02-10 12:20:17.174 -03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Project_Gon.Core.DTOs.Auth.LoginDto'
2026-02-10 12:20:17.175 -03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-02-10 12:20:17.176 -03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-02-10 12:20:17.177 -03:00 [DBG] Attempting to validate the bound parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' ...
2026-02-10 12:20:17.195 -03:00 [DBG] Done attempting to validate the bound parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-02-10 12:20:17.197 -03:00 [INF] [LOGIN] Intento de login con: admin@example.com
2026-02-10 12:20:17.199 -03:00 [INF] [FIND] Buscando por EMAIL: admin@example.com
2026-02-10 12:20:17.214 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-02-10 12:20:17.248 -03:00 [DBG] Compiling query expression: 
'DbSet<Usuario>()
    .Where(u => u.Email == __emailOrRut_0 && u.Activo)
    .AsNoTracking()
    .FirstOrDefault()'
2026-02-10 12:20:17.377 -03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Usuario>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Usuario>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Usuario.Activo (bool) Required, 1], [Property: Usuario.Apellido (string) Required, 2], [Property: Usuario.CreatedAt (DateTime) Required, 3], [Property: Usuario.Email (string) Index MaxLength(255), 4], [Property: Usuario.EmpresaId (int) Required FK Index, 5], [Property: Usuario.Nombre (string) Required, 6], [Property: Usuario.PasswordHash (string) Required, 7], [Property: Usuario.Rol (RolUsuario) Required, 8], [Property: Usuario.Rut (string) Index MaxLength(12), 9], [Property: Usuario.SucursalId (int?) FK Index, 10], [Property: Usuario.UltimoAcceso (DateTime?), 11], [Property: Usuario.UpdatedAt (DateTime?), 12] }
            SELECT TOP(1) u.Id, u.Activo, u.Apellido, u.CreatedAt, u.Email, u.EmpresaId, u.Nombre, u.PasswordHash, u.Rol, u.Rut, u.SucursalId, u.UltimoAcceso, u.UpdatedAt
            FROM Usuarios AS u
            WHERE (u.Email == @__emailOrRut_0) && u.Activo) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Usuario.Activo (bool) Required, 1], [Property: Usuario.Apellido (string) Required, 2], [Property: Usuario.CreatedAt (DateTime) Required, 3], [Property: Usuario.Email (string) Index MaxLength(255), 4], [Property: Usuario.EmpresaId (int) Required FK Index, 5], [Property: Usuario.Nombre (string) Required, 6], [Property: Usuario.PasswordHash (string) Required, 7], [Property: Usuario.Rol (RolUsuario) Required, 8], [Property: Usuario.Rut (string) Index MaxLength(12), 9], [Property: Usuario.SucursalId (int?) FK Index, 10], [Property: Usuario.UltimoAcceso (DateTime?), 11], [Property: Usuario.UpdatedAt (DateTime?), 12] }
            SELECT TOP(1) u.Id, u.Activo, u.Apellido, u.CreatedAt, u.Email, u.EmpresaId, u.Nombre, u.PasswordHash, u.Rol, u.Rut, u.SucursalId, u.UltimoAcceso, u.UpdatedAt
            FROM Usuarios AS u
            WHERE (u.Email == @__emailOrRut_0) && u.Activo, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Usuario entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Usuario instance1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Usuario);
                (object)dataReader.GetInt32(0) != null ? 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")]: 
                            {
                                return 
                                {
                                    Usuario instance;
                                    instance = new Usuario();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Activo>k__BackingField = dataReader.GetBoolean(1);
                                    instance.<Apellido>k__BackingField = dataReader.GetString(2);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(3);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<EmpresaId>k__BackingField = dataReader.GetInt32(5);
                                    instance.<Nombre>k__BackingField = dataReader.GetString(6);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(7);
                                    instance.<Rol>k__BackingField = Invoke(((EnumToNumberConverter<RolUsuario, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Usuario.Rol (RolUsuario) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario").FindProperty("Rol")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(8));
                                    instance.<Rut>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<SucursalId>k__BackingField = dataReader.IsDBNull(10) ? default(int?) : (int?)dataReader.GetInt32(10);
                                    instance.<UltimoAcceso>k__BackingField = dataReader.IsDBNull(11) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(11);
                                    instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(12) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(12);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Usuario)
                    }
                    ;
                    return instance1;
                } : 
                {
                    object[] keyValues1;
                    keyValues1 = new object[]{ (object)dataReader.GetInt32(0) };
                    return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                        entityType: [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")], 
                        properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario").FindPrimaryKey().Properties], 
                        keyValues: keyValues1);
                };
                return instance1;
            };
            return entity;
        }, 
        contextType: Project_Gon.Infrastructure.Data.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2026-02-10 12:20:17.408 -03:00 [DBG] Creating DbConnection.
2026-02-10 12:20:17.409 -03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 12:20:17.410 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:20:17.411 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:20:17.412 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:20:17.412 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:20:17.415 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2026-02-10 12:20:17.417 -03:00 [DBG] Executing DbCommand [Parameters=[@__emailOrRut_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Email" = @__emailOrRut_0 AND u."Activo"
LIMIT 1
2026-02-10 12:20:17.427 -03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__emailOrRut_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Email" = @__emailOrRut_0 AND u."Activo"
LIMIT 1
2026-02-10 12:20:17.436 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:20:17.437 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 8ms reading results.
2026-02-10 12:20:17.439 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:20:17.440 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-02-10 12:20:17.441 -03:00 [INF] [FIND] Usuario encontrado - ID: 5, RUT: 12345678-9
2026-02-10 12:20:17.447 -03:00 [DBG] Compiling query expression: 
'DbSet<Empresa>()
    .FirstOrDefault(e => EF.Property<int>(e, "Id") == __p_0)'
2026-02-10 12:20:17.456 -03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Empresa>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Empresa>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Empresa.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Empresa.Activo (bool) Required, 1], [Property: Empresa.Ciudad (string), 2], [Property: Empresa.CreatedAt (DateTime) Required, 3], [Property: Empresa.Direccion (string), 4], [Property: Empresa.Nombre (string) Required MaxLength(255), 5], [Property: Empresa.Region (string), 6], [Property: Empresa.Rut (string), 7], [Property: Empresa.UpdatedAt (DateTime?), 8] }
            SELECT TOP(1) e.Id, e.Activo, e.Ciudad, e.CreatedAt, e.Direccion, e.Nombre, e.Region, e.Rut, e.UpdatedAt
            FROM Empresas AS e
            WHERE e.Id == @__p_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Empresa.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Empresa.Activo (bool) Required, 1], [Property: Empresa.Ciudad (string), 2], [Property: Empresa.CreatedAt (DateTime) Required, 3], [Property: Empresa.Direccion (string), 4], [Property: Empresa.Nombre (string) Required MaxLength(255), 5], [Property: Empresa.Region (string), 6], [Property: Empresa.Rut (string), 7], [Property: Empresa.UpdatedAt (DateTime?), 8] }
            SELECT TOP(1) e.Id, e.Activo, e.Ciudad, e.CreatedAt, e.Direccion, e.Nombre, e.Region, e.Rut, e.UpdatedAt
            FROM Empresas AS e
            WHERE e.Id == @__p_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Empresa entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Empresa instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Empresa);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Empresa.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Empresa").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (Empresa)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Empresa | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Empresa")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Empresa | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Empresa")]: 
                            {
                                return 
                                {
                                    Empresa instance;
                                    instance = new Empresa();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Activo>k__BackingField = dataReader.GetBoolean(1);
                                    instance.<Ciudad>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(3);
                                    instance.<Direccion>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<Nombre>k__BackingField = dataReader.GetString(5);
                                    instance.<Region>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                    instance.<Rut>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(8) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(8);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Empresa | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Empresa")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Empresa)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: Project_Gon.Infrastructure.Data.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2026-02-10 12:20:17.464 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:20:17.464 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:20:17.465 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:20:17.465 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:20:17.466 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:20:17.467 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-02-10 12:20:17.470 -03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-02-10 12:20:17.492 -03:00 [DBG] Context 'AppDbContext' started tracking 'Empresa' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:20:17.511 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:20:17.512 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 40ms reading results.
2026-02-10 12:20:17.513 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:20:17.513 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-02-10 12:20:17.514 -03:00 [INF] [LOGIN] Usuario encontrado: true
2026-02-10 12:20:17.515 -03:00 [INF] [LOGIN] Usuario ID: 5, RUT: 12345678-9, Email: admin@example.com, Activo: true
2026-02-10 12:20:17.516 -03:00 [INF] [LOGIN] Verificando contrasea para usuario ID: 5
2026-02-10 12:20:18.207 -03:00 [INF] [LOGIN] Password vlido: false
2026-02-10 12:20:18.208 -03:00 [WRN] [LOGIN] Login rechazado - Contrasea incorrecta para usuario ID: 5
2026-02-10 12:20:18.211 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 12:20:18.213 -03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2026-02-10 12:20:18.214 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2026-02-10 12:20:18.215 -03:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'System.String'.
2026-02-10 12:20:18.218 -03:00 [INF] Executed action Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api) in 1145.0963ms
2026-02-10 12:20:18.219 -03:00 [INF] Executed endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-02-10 12:20:18.221 -03:00 [INF] HTTP POST /api/Auth/login responded 401 in 1206.9422 ms
2026-02-10 12:20:18.223 -03:00 [DBG] 'AppDbContext' disposed.
2026-02-10 12:20:18.224 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:20:18.225 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (1ms).
2026-02-10 12:20:18.226 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/Auth/login - 401 null text/plain; charset=utf-8 1252.7038ms
2026-02-10 12:20:29.653 -03:00 [DBG] Connection id "0HNJ8MUF4VECI" is closing.
2026-02-10 12:20:29.654 -03:00 [DBG] Connection id "0HNJ8MUF4VECI" is closed. The last processed stream ID was 0.
2026-02-10 12:20:29.656 -03:00 [DBG] The connection queue processing loop for 0HNJ8MUF4VECI completed.
2026-02-10 12:20:29.658 -03:00 [DBG] Connection id "0HNJ8MUF4VECI" stopped.
2026-02-10 12:20:29.658 -03:00 [DBG] Connection id "0HNJ8MUF4VECI" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-02-10 12:20:35.757 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/Auth/login - application/json 58
2026-02-10 12:20:35.759 -03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2026-02-10 12:20:35.759 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2026-02-10 12:20:35.760 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-02-10 12:20:35.762 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:20:35.763 -03:00 [DBG] The request has an origin header: 'https://localhost:7058'.
2026-02-10 12:20:35.764 -03:00 [INF] CORS policy execution failed.
2026-02-10 12:20:35.765 -03:00 [INF] Request origin https://localhost:7058 does not have permission to access the resource.
2026-02-10 12:20:35.767 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-02-10 12:20:35.768 -03:00 [INF] Executing endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-02-10 12:20:35.769 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Project_Gon.Core.DTOs.Auth.LoginDto) on controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api).
2026-02-10 12:20:35.771 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 12:20:35.772 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 12:20:35.773 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-10 12:20:35.774 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 12:20:35.775 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 12:20:35.776 -03:00 [DBG] Executing controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-02-10 12:20:35.779 -03:00 [DBG] Executed controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-02-10 12:20:35.780 -03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' ...
2026-02-10 12:20:35.781 -03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' using the name '' in request data ...
2026-02-10 12:20:35.782 -03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2026-02-10 12:20:35.783 -03:00 [DBG] Connection id "0HNJ8MUF4VECH", Request id "0HNJ8MUF4VECH:0000001B": started reading request body.
2026-02-10 12:20:35.784 -03:00 [DBG] Connection id "0HNJ8MUF4VECH", Request id "0HNJ8MUF4VECH:0000001B": done reading request body.
2026-02-10 12:20:35.785 -03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Project_Gon.Core.DTOs.Auth.LoginDto'
2026-02-10 12:20:35.786 -03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-02-10 12:20:35.787 -03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-02-10 12:20:35.787 -03:00 [DBG] Attempting to validate the bound parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' ...
2026-02-10 12:20:35.789 -03:00 [DBG] Done attempting to validate the bound parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-02-10 12:20:35.790 -03:00 [INF] [LOGIN] Intento de login con: 123456789
2026-02-10 12:20:35.790 -03:00 [DBG] [CLEAN_RUT] Original: 123456789 -> Limpio: 123456789
2026-02-10 12:20:35.791 -03:00 [INF] [FIND] Buscando por RUT limpio: 123456789
2026-02-10 12:20:35.822 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-02-10 12:20:35.824 -03:00 [DBG] Compiling query expression: 
'DbSet<Usuario>()
    .Where(u => u.Rut == __rutLimpio_0 && u.Activo)
    .AsNoTracking()
    .FirstOrDefault()'
2026-02-10 12:20:35.829 -03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Usuario>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Usuario>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Usuario.Activo (bool) Required, 1], [Property: Usuario.Apellido (string) Required, 2], [Property: Usuario.CreatedAt (DateTime) Required, 3], [Property: Usuario.Email (string) Index MaxLength(255), 4], [Property: Usuario.EmpresaId (int) Required FK Index, 5], [Property: Usuario.Nombre (string) Required, 6], [Property: Usuario.PasswordHash (string) Required, 7], [Property: Usuario.Rol (RolUsuario) Required, 8], [Property: Usuario.Rut (string) Index MaxLength(12), 9], [Property: Usuario.SucursalId (int?) FK Index, 10], [Property: Usuario.UltimoAcceso (DateTime?), 11], [Property: Usuario.UpdatedAt (DateTime?), 12] }
            SELECT TOP(1) u.Id, u.Activo, u.Apellido, u.CreatedAt, u.Email, u.EmpresaId, u.Nombre, u.PasswordHash, u.Rol, u.Rut, u.SucursalId, u.UltimoAcceso, u.UpdatedAt
            FROM Usuarios AS u
            WHERE (u.Rut == @__rutLimpio_0) && u.Activo) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Usuario.Activo (bool) Required, 1], [Property: Usuario.Apellido (string) Required, 2], [Property: Usuario.CreatedAt (DateTime) Required, 3], [Property: Usuario.Email (string) Index MaxLength(255), 4], [Property: Usuario.EmpresaId (int) Required FK Index, 5], [Property: Usuario.Nombre (string) Required, 6], [Property: Usuario.PasswordHash (string) Required, 7], [Property: Usuario.Rol (RolUsuario) Required, 8], [Property: Usuario.Rut (string) Index MaxLength(12), 9], [Property: Usuario.SucursalId (int?) FK Index, 10], [Property: Usuario.UltimoAcceso (DateTime?), 11], [Property: Usuario.UpdatedAt (DateTime?), 12] }
            SELECT TOP(1) u.Id, u.Activo, u.Apellido, u.CreatedAt, u.Email, u.EmpresaId, u.Nombre, u.PasswordHash, u.Rol, u.Rut, u.SucursalId, u.UltimoAcceso, u.UpdatedAt
            FROM Usuarios AS u
            WHERE (u.Rut == @__rutLimpio_0) && u.Activo, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Usuario entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Usuario instance1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Usuario);
                (object)dataReader.GetInt32(0) != null ? 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")]: 
                            {
                                return 
                                {
                                    Usuario instance;
                                    instance = new Usuario();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Activo>k__BackingField = dataReader.GetBoolean(1);
                                    instance.<Apellido>k__BackingField = dataReader.GetString(2);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(3);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<EmpresaId>k__BackingField = dataReader.GetInt32(5);
                                    instance.<Nombre>k__BackingField = dataReader.GetString(6);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(7);
                                    instance.<Rol>k__BackingField = Invoke(((EnumToNumberConverter<RolUsuario, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Usuario.Rol (RolUsuario) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario").FindProperty("Rol")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(8));
                                    instance.<Rut>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<SucursalId>k__BackingField = dataReader.IsDBNull(10) ? default(int?) : (int?)dataReader.GetInt32(10);
                                    instance.<UltimoAcceso>k__BackingField = dataReader.IsDBNull(11) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(11);
                                    instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(12) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(12);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Usuario)
                    }
                    ;
                    return instance1;
                } : 
                {
                    object[] keyValues1;
                    keyValues1 = new object[]{ (object)dataReader.GetInt32(0) };
                    return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                        entityType: [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")], 
                        properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario").FindPrimaryKey().Properties], 
                        keyValues: keyValues1);
                };
                return instance1;
            };
            return entity;
        }, 
        contextType: Project_Gon.Infrastructure.Data.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2026-02-10 12:20:35.837 -03:00 [DBG] Creating DbConnection.
2026-02-10 12:20:35.837 -03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 12:20:35.838 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:20:35.838 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:20:35.839 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:20:35.839 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:20:35.840 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:20:35.841 -03:00 [DBG] Executing DbCommand [Parameters=[@__rutLimpio_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Rut" = @__rutLimpio_0 AND u."Activo"
LIMIT 1
2026-02-10 12:20:35.842 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__rutLimpio_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Rut" = @__rutLimpio_0 AND u."Activo"
LIMIT 1
2026-02-10 12:20:35.844 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:20:35.844 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-02-10 12:20:35.845 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:20:35.846 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-02-10 12:20:35.846 -03:00 [WRN] [FIND] Usuario NO encontrado
2026-02-10 12:20:35.847 -03:00 [INF] [LOGIN] Usuario encontrado: false
2026-02-10 12:20:35.847 -03:00 [WRN] [LOGIN] Login rechazado - Usuario no encontrado o inactivo
2026-02-10 12:20:35.848 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 12:20:35.849 -03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2026-02-10 12:20:35.850 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2026-02-10 12:20:35.851 -03:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'System.String'.
2026-02-10 12:20:35.851 -03:00 [INF] Executed action Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api) in 75.1761ms
2026-02-10 12:20:35.852 -03:00 [INF] Executed endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-02-10 12:20:35.852 -03:00 [INF] HTTP POST /api/Auth/login responded 401 in 86.4651 ms
2026-02-10 12:20:35.853 -03:00 [DBG] 'AppDbContext' disposed.
2026-02-10 12:20:35.854 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:20:35.855 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-02-10 12:20:35.855 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/Auth/login - 401 null text/plain; charset=utf-8 98.6689ms
2026-02-10 12:20:45.849 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/Auth/login - application/json 59
2026-02-10 12:20:45.850 -03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2026-02-10 12:20:45.851 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2026-02-10 12:20:45.851 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-02-10 12:20:45.852 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:20:45.853 -03:00 [DBG] The request has an origin header: 'https://localhost:7058'.
2026-02-10 12:20:45.854 -03:00 [INF] CORS policy execution failed.
2026-02-10 12:20:45.854 -03:00 [INF] Request origin https://localhost:7058 does not have permission to access the resource.
2026-02-10 12:20:45.858 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-02-10 12:20:45.859 -03:00 [INF] Executing endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-02-10 12:20:45.860 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Project_Gon.Core.DTOs.Auth.LoginDto) on controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api).
2026-02-10 12:20:45.862 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 12:20:45.863 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 12:20:45.863 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-10 12:20:45.869 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 12:20:45.871 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 12:20:45.872 -03:00 [DBG] Executing controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-02-10 12:20:45.875 -03:00 [DBG] Executed controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-02-10 12:20:45.877 -03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' ...
2026-02-10 12:20:45.879 -03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' using the name '' in request data ...
2026-02-10 12:20:45.880 -03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2026-02-10 12:20:45.880 -03:00 [DBG] Connection id "0HNJ8MUF4VECH", Request id "0HNJ8MUF4VECH:0000001D": started reading request body.
2026-02-10 12:20:45.881 -03:00 [DBG] Connection id "0HNJ8MUF4VECH", Request id "0HNJ8MUF4VECH:0000001D": done reading request body.
2026-02-10 12:20:45.882 -03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Project_Gon.Core.DTOs.Auth.LoginDto'
2026-02-10 12:20:45.882 -03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-02-10 12:20:45.883 -03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-02-10 12:20:45.884 -03:00 [DBG] Attempting to validate the bound parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' ...
2026-02-10 12:20:45.886 -03:00 [DBG] Done attempting to validate the bound parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-02-10 12:20:45.887 -03:00 [INF] [LOGIN] Intento de login con: 12345678-9
2026-02-10 12:20:45.888 -03:00 [DBG] [CLEAN_RUT] Original: 12345678-9 -> Limpio: 12345678-9
2026-02-10 12:20:45.888 -03:00 [INF] [FIND] Buscando por RUT limpio: 12345678-9
2026-02-10 12:20:45.889 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-02-10 12:20:45.892 -03:00 [DBG] Creating DbConnection.
2026-02-10 12:20:45.893 -03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 12:20:45.893 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:20:45.894 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:20:45.894 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:20:45.895 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:20:45.896 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:20:45.896 -03:00 [DBG] Executing DbCommand [Parameters=[@__rutLimpio_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Rut" = @__rutLimpio_0 AND u."Activo"
LIMIT 1
2026-02-10 12:20:45.898 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__rutLimpio_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Rut" = @__rutLimpio_0 AND u."Activo"
LIMIT 1
2026-02-10 12:20:45.901 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:20:45.902 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-02-10 12:20:45.903 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:20:45.904 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-02-10 12:20:45.905 -03:00 [INF] [FIND] Usuario encontrado - ID: 3, RUT: 12345678-9
2026-02-10 12:20:45.906 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:20:45.907 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:20:45.907 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:20:45.908 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:20:45.908 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:20:45.909 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-02-10 12:20:45.911 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-02-10 12:20:45.912 -03:00 [DBG] Context 'AppDbContext' started tracking 'Empresa' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:20:45.913 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:20:45.914 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-02-10 12:20:45.915 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:20:45.915 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-02-10 12:20:45.917 -03:00 [DBG] Compiling query expression: 
'DbSet<Sucursal>()
    .FirstOrDefault(e => EF.Property<int>(e, "Id") == __p_0)'
2026-02-10 12:20:45.921 -03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Sucursal>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Sucursal>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Sucursal.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Sucursal.Activo (bool) Required, 1], [Property: Sucursal.Ciudad (string), 2], [Property: Sucursal.CreatedAt (DateTime) Required, 3], [Property: Sucursal.Direccion (string), 4], [Property: Sucursal.EmpresaId (int) Required FK Index, 5], [Property: Sucursal.Nombre (string) Required MaxLength(255), 6], [Property: Sucursal.Region (string), 7], [Property: Sucursal.Telefono (string), 8], [Property: Sucursal.UpdatedAt (DateTime?), 9] }
            SELECT TOP(1) s.Id, s.Activo, s.Ciudad, s.CreatedAt, s.Direccion, s.EmpresaId, s.Nombre, s.Region, s.Telefono, s.UpdatedAt
            FROM Sucursales AS s
            WHERE s.Id == @__p_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Sucursal.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Sucursal.Activo (bool) Required, 1], [Property: Sucursal.Ciudad (string), 2], [Property: Sucursal.CreatedAt (DateTime) Required, 3], [Property: Sucursal.Direccion (string), 4], [Property: Sucursal.EmpresaId (int) Required FK Index, 5], [Property: Sucursal.Nombre (string) Required MaxLength(255), 6], [Property: Sucursal.Region (string), 7], [Property: Sucursal.Telefono (string), 8], [Property: Sucursal.UpdatedAt (DateTime?), 9] }
            SELECT TOP(1) s.Id, s.Activo, s.Ciudad, s.CreatedAt, s.Direccion, s.EmpresaId, s.Nombre, s.Region, s.Telefono, s.UpdatedAt
            FROM Sucursales AS s
            WHERE s.Id == @__p_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Sucursal entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Sucursal instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Sucursal);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Sucursal.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Sucursal").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (Sucursal)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Sucursal | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Sucursal")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Sucursal | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Sucursal")]: 
                            {
                                return 
                                {
                                    Sucursal instance;
                                    instance = new Sucursal();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Activo>k__BackingField = dataReader.GetBoolean(1);
                                    instance.<Ciudad>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(3);
                                    instance.<Direccion>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<EmpresaId>k__BackingField = dataReader.GetInt32(5);
                                    instance.<Nombre>k__BackingField = dataReader.GetString(6);
                                    instance.<Region>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<Telefono>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(9) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(9);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Sucursal | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Sucursal")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Sucursal)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: Project_Gon.Infrastructure.Data.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2026-02-10 12:20:45.928 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:20:45.929 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:20:45.929 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:20:45.930 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:20:45.930 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:20:45.931 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Activo", s."Ciudad", s."CreatedAt", s."Direccion", s."EmpresaId", s."Nombre", s."Region", s."Telefono", s."UpdatedAt"
FROM "Sucursales" AS s
WHERE s."Id" = @__p_0
LIMIT 1
2026-02-10 12:20:45.969 -03:00 [INF] Executed DbCommand (38ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Activo", s."Ciudad", s."CreatedAt", s."Direccion", s."EmpresaId", s."Nombre", s."Region", s."Telefono", s."UpdatedAt"
FROM "Sucursales" AS s
WHERE s."Id" = @__p_0
LIMIT 1
2026-02-10 12:20:45.986 -03:00 [DBG] Context 'AppDbContext' started tracking 'Sucursal' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:20:45.994 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:20:45.995 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 23ms reading results.
2026-02-10 12:20:45.995 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:20:45.996 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-02-10 12:20:45.997 -03:00 [INF] [LOGIN] Usuario encontrado: true
2026-02-10 12:20:45.997 -03:00 [INF] [LOGIN] Usuario ID: 3, RUT: 12345678-9, Email: vendedor@empresa.com, Activo: true
2026-02-10 12:20:45.998 -03:00 [INF] [LOGIN] Verificando contrasea para usuario ID: 3
2026-02-10 12:20:46.204 -03:00 [INF] [LOGIN] Password vlido: true
2026-02-10 12:20:46.250 -03:00 [DBG] Context 'AppDbContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:20:46.253 -03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2026-02-10 12:20:46.255 -03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2026-02-10 12:20:46.269 -03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2026-02-10 12:20:46.306 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:20:46.307 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:20:46.308 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:20:46.309 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:20:46.310 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2026-02-10 12:20:46.311 -03:00 [DBG] Executing DbCommand [Parameters=[@p12='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = Int32), @p5='?', @p6='?', @p7='?' (DbType = Int32), @p8='?', @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Usuarios" SET "Activo" = @p0, "Apellido" = @p1, "CreatedAt" = @p2, "Email" = @p3, "EmpresaId" = @p4, "Nombre" = @p5, "PasswordHash" = @p6, "Rol" = @p7, "Rut" = @p8, "SucursalId" = @p9, "UltimoAcceso" = @p10, "UpdatedAt" = @p11
WHERE "Id" = @p12;
2026-02-10 12:20:46.372 -03:00 [INF] Executed DbCommand (61ms) [Parameters=[@p12='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = Int32), @p5='?', @p6='?', @p7='?' (DbType = Int32), @p8='?', @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Usuarios" SET "Activo" = @p0, "Apellido" = @p1, "CreatedAt" = @p2, "Email" = @p3, "EmpresaId" = @p4, "Nombre" = @p5, "PasswordHash" = @p6, "Rol" = @p7, "Rut" = @p8, "SucursalId" = @p9, "UltimoAcceso" = @p10, "UpdatedAt" = @p11
WHERE "Id" = @p12;
2026-02-10 12:20:46.376 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:20:46.376 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 2ms reading results.
2026-02-10 12:20:46.377 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:20:46.378 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-02-10 12:20:46.383 -03:00 [DBG] An entity of type 'Usuario' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:20:46.384 -03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2026-02-10 12:20:46.385 -03:00 [INF] [LOGIN] Login exitoso para usuario ID: 3
2026-02-10 12:20:46.403 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 12:20:46.405 -03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2026-02-10 12:20:46.406 -03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2026-02-10 12:20:46.406 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 12:20:46.407 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 12:20:46.407 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 12:20:46.408 -03:00 [INF] Executing OkObjectResult, writing value of type 'Project_Gon.Core.DTOs.Auth.LoginResponseDto'.
2026-02-10 12:20:46.413 -03:00 [INF] Executed action Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api) in 541.0412ms
2026-02-10 12:20:46.414 -03:00 [INF] Executed endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-02-10 12:20:46.415 -03:00 [INF] HTTP POST /api/Auth/login responded 200 in 559.5357 ms
2026-02-10 12:20:46.415 -03:00 [DBG] 'AppDbContext' disposed.
2026-02-10 12:20:46.416 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:20:46.417 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-02-10 12:20:46.417 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/Auth/login - 200 null application/json; charset=utf-8 568.7077ms
2026-02-10 12:22:26.074 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/Stocks - application/json 126
2026-02-10 12:22:26.076 -03:00 [DBG] 1 candidate(s) found for the request path '/api/Stocks'
2026-02-10 12:22:26.076 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.StocksController.Create (Project_Gon.Api)' with route pattern 'api/Stocks' is valid for the request path '/api/Stocks'
2026-02-10 12:22:26.077 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.StocksController.Create (Project_Gon.Api)'
2026-02-10 12:22:26.078 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:22:26.078 -03:00 [DBG] The request has an origin header: 'https://localhost:7058'.
2026-02-10 12:22:26.081 -03:00 [INF] CORS policy execution failed.
2026-02-10 12:22:26.081 -03:00 [INF] Request origin https://localhost:7058 does not have permission to access the resource.
2026-02-10 12:22:26.127 -03:00 [INF] Failed to validate the token.
System.ArgumentException: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
 ---> System.FormatException: IDX10400: Unable to decode: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64url encoded string.
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.ValidateAndGetOutputSize(ReadOnlySpan`1 strSpan, Int32 offset, Int32 length)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(ReadOnlySpan`1 strSpan, Int32 startIndex, Int32 length, Boolean createHeaderClaimSet)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
2026-02-10 12:22:26.135 -03:00 [WRN] JWT Authentication failed: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
2026-02-10 12:22:26.135 -03:00 [INF] Bearer was not authenticated. Failure message: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
2026-02-10 12:22:26.137 -03:00 [DBG] Policy authentication schemes  did not succeed
2026-02-10 12:22:26.140 -03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (AdminGlobal|Administrador)
2026-02-10 12:22:26.143 -03:00 [WRN] JWT Challenge triggered: invalid_token
2026-02-10 12:22:26.144 -03:00 [INF] AuthenticationScheme: Bearer was challenged.
2026-02-10 12:22:26.144 -03:00 [INF] HTTP POST /api/Stocks responded 401 in 61.9621 ms
2026-02-10 12:22:26.145 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/Stocks - 401 0 null 71.2103ms
2026-02-10 12:22:26.147 -03:00 [DBG] Connection id "0HNJ8MUF4VECH", Request id "0HNJ8MUF4VECH:0000001F": started reading request body.
2026-02-10 12:22:26.147 -03:00 [DBG] Connection id "0HNJ8MUF4VECH", Request id "0HNJ8MUF4VECH:0000001F": done reading request body.
2026-02-10 12:23:17.995 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/Stocks - application/json 126
2026-02-10 12:23:17.996 -03:00 [DBG] 1 candidate(s) found for the request path '/api/Stocks'
2026-02-10 12:23:17.997 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.StocksController.Create (Project_Gon.Api)' with route pattern 'api/Stocks' is valid for the request path '/api/Stocks'
2026-02-10 12:23:17.998 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.StocksController.Create (Project_Gon.Api)'
2026-02-10 12:23:17.998 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:23:17.999 -03:00 [DBG] The request has an origin header: 'https://localhost:7058'.
2026-02-10 12:23:18.002 -03:00 [INF] CORS policy execution failed.
2026-02-10 12:23:18.003 -03:00 [INF] Request origin https://localhost:7058 does not have permission to access the resource.
2026-02-10 12:23:18.041 -03:00 [INF] Failed to validate the token.
System.ArgumentException: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
 ---> System.FormatException: IDX10400: Unable to decode: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64url encoded string.
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoder.Decode(ReadOnlySpan`1 strSpan, Span`1 output, Boolean needReplace, Int32 decodedLength)
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoder.Decode(ReadOnlySpan`1 strSpan, Span`1 output)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(ReadOnlySpan`1 strSpan, Int32 startIndex, Int32 length, Boolean createHeaderClaimSet)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
2026-02-10 12:23:18.044 -03:00 [WRN] JWT Authentication failed: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
2026-02-10 12:23:18.045 -03:00 [INF] Bearer was not authenticated. Failure message: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
2026-02-10 12:23:18.046 -03:00 [DBG] Policy authentication schemes  did not succeed
2026-02-10 12:23:18.047 -03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (AdminGlobal|Administrador)
2026-02-10 12:23:18.048 -03:00 [WRN] JWT Challenge triggered: invalid_token
2026-02-10 12:23:18.048 -03:00 [INF] AuthenticationScheme: Bearer was challenged.
2026-02-10 12:23:18.048 -03:00 [INF] HTTP POST /api/Stocks responded 401 in 44.3871 ms
2026-02-10 12:23:18.049 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/Stocks - 401 0 null 54.5ms
2026-02-10 12:23:18.051 -03:00 [DBG] Connection id "0HNJ8MUF4VECH", Request id "0HNJ8MUF4VECH:00000021": started reading request body.
2026-02-10 12:23:18.051 -03:00 [DBG] Connection id "0HNJ8MUF4VECH", Request id "0HNJ8MUF4VECH:00000021": done reading request body.
2026-02-10 12:23:19.086 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/Stocks - application/json 126
2026-02-10 12:23:19.088 -03:00 [DBG] 1 candidate(s) found for the request path '/api/Stocks'
2026-02-10 12:23:19.088 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.StocksController.Create (Project_Gon.Api)' with route pattern 'api/Stocks' is valid for the request path '/api/Stocks'
2026-02-10 12:23:19.089 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.StocksController.Create (Project_Gon.Api)'
2026-02-10 12:23:19.090 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:23:19.090 -03:00 [DBG] The request has an origin header: 'https://localhost:7058'.
2026-02-10 12:23:19.091 -03:00 [INF] CORS policy execution failed.
2026-02-10 12:23:19.091 -03:00 [INF] Request origin https://localhost:7058 does not have permission to access the resource.
2026-02-10 12:23:19.092 -03:00 [INF] Failed to validate the token.
System.ArgumentException: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
 ---> System.FormatException: IDX10400: Unable to decode: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64url encoded string.
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoder.Decode(ReadOnlySpan`1 strSpan, Span`1 output, Boolean needReplace, Int32 decodedLength)
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoder.Decode(ReadOnlySpan`1 strSpan, Span`1 output)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(ReadOnlySpan`1 strSpan, Int32 startIndex, Int32 length, Boolean createHeaderClaimSet)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
2026-02-10 12:23:19.095 -03:00 [WRN] JWT Authentication failed: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
2026-02-10 12:23:19.095 -03:00 [INF] Bearer was not authenticated. Failure message: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
2026-02-10 12:23:19.133 -03:00 [DBG] Policy authentication schemes  did not succeed
2026-02-10 12:23:19.133 -03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (AdminGlobal|Administrador)
2026-02-10 12:23:19.134 -03:00 [WRN] JWT Challenge triggered: invalid_token
2026-02-10 12:23:19.134 -03:00 [INF] AuthenticationScheme: Bearer was challenged.
2026-02-10 12:23:19.135 -03:00 [INF] HTTP POST /api/Stocks responded 401 in 43.1297 ms
2026-02-10 12:23:19.136 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/Stocks - 401 0 null 49.5159ms
2026-02-10 12:23:19.137 -03:00 [DBG] Connection id "0HNJ8MUF4VECH", Request id "0HNJ8MUF4VECH:00000023": started reading request body.
2026-02-10 12:23:19.138 -03:00 [DBG] Connection id "0HNJ8MUF4VECH", Request id "0HNJ8MUF4VECH:00000023": done reading request body.
2026-02-10 12:23:31.790 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/Stocks - application/json 126
2026-02-10 12:23:31.791 -03:00 [DBG] 1 candidate(s) found for the request path '/api/Stocks'
2026-02-10 12:23:31.792 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.StocksController.Create (Project_Gon.Api)' with route pattern 'api/Stocks' is valid for the request path '/api/Stocks'
2026-02-10 12:23:31.793 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.StocksController.Create (Project_Gon.Api)'
2026-02-10 12:23:31.793 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:23:31.794 -03:00 [DBG] The request has an origin header: 'https://localhost:7058'.
2026-02-10 12:23:31.794 -03:00 [INF] CORS policy execution failed.
2026-02-10 12:23:31.796 -03:00 [INF] Request origin https://localhost:7058 does not have permission to access the resource.
2026-02-10 12:23:31.797 -03:00 [INF] Failed to validate the token.
System.ArgumentException: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
 ---> System.FormatException: IDX10400: Unable to decode: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64url encoded string.
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoder.Decode(ReadOnlySpan`1 strSpan, Span`1 output, Boolean needReplace, Int32 decodedLength)
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoder.Decode(ReadOnlySpan`1 strSpan, Span`1 output)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(ReadOnlySpan`1 strSpan, Int32 startIndex, Int32 length, Boolean createHeaderClaimSet)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
2026-02-10 12:23:31.802 -03:00 [WRN] JWT Authentication failed: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
2026-02-10 12:23:31.803 -03:00 [INF] Bearer was not authenticated. Failure message: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
2026-02-10 12:23:31.805 -03:00 [DBG] Policy authentication schemes  did not succeed
2026-02-10 12:23:31.807 -03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (AdminGlobal|Administrador)
2026-02-10 12:23:31.808 -03:00 [WRN] JWT Challenge triggered: invalid_token
2026-02-10 12:23:31.808 -03:00 [INF] AuthenticationScheme: Bearer was challenged.
2026-02-10 12:23:31.809 -03:00 [INF] HTTP POST /api/Stocks responded 401 in 11.6103 ms
2026-02-10 12:23:31.810 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/Stocks - 401 0 null 20.0575ms
2026-02-10 12:23:31.812 -03:00 [DBG] Connection id "0HNJ8MUF4VECH", Request id "0HNJ8MUF4VECH:00000025": started reading request body.
2026-02-10 12:23:31.813 -03:00 [DBG] Connection id "0HNJ8MUF4VECH", Request id "0HNJ8MUF4VECH:00000025": done reading request body.
2026-02-10 12:23:45.525 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/Stocks - application/json 126
2026-02-10 12:23:45.526 -03:00 [DBG] 1 candidate(s) found for the request path '/api/Stocks'
2026-02-10 12:23:45.527 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.StocksController.Create (Project_Gon.Api)' with route pattern 'api/Stocks' is valid for the request path '/api/Stocks'
2026-02-10 12:23:45.527 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.StocksController.Create (Project_Gon.Api)'
2026-02-10 12:23:45.528 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:23:45.528 -03:00 [DBG] The request has an origin header: 'https://localhost:7058'.
2026-02-10 12:23:45.529 -03:00 [INF] CORS policy execution failed.
2026-02-10 12:23:45.529 -03:00 [INF] Request origin https://localhost:7058 does not have permission to access the resource.
2026-02-10 12:23:45.530 -03:00 [INF] Failed to validate the token.
System.ArgumentException: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
 ---> System.FormatException: IDX10400: Unable to decode: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64url encoded string.
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoder.Decode(ReadOnlySpan`1 strSpan, Span`1 output, Boolean needReplace, Int32 decodedLength)
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoder.Decode(ReadOnlySpan`1 strSpan, Span`1 output)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(ReadOnlySpan`1 strSpan, Int32 startIndex, Int32 length, Boolean createHeaderClaimSet)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
2026-02-10 12:23:45.534 -03:00 [WRN] JWT Authentication failed: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
2026-02-10 12:23:45.534 -03:00 [INF] Bearer was not authenticated. Failure message: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
2026-02-10 12:23:45.535 -03:00 [DBG] Policy authentication schemes  did not succeed
2026-02-10 12:23:45.536 -03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (AdminGlobal|Administrador)
2026-02-10 12:23:45.536 -03:00 [WRN] JWT Challenge triggered: invalid_token
2026-02-10 12:23:45.537 -03:00 [INF] AuthenticationScheme: Bearer was challenged.
2026-02-10 12:23:45.537 -03:00 [INF] HTTP POST /api/Stocks responded 401 in 7.4568 ms
2026-02-10 12:23:45.539 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/Stocks - 401 0 null 14.1596ms
2026-02-10 12:23:45.541 -03:00 [DBG] Connection id "0HNJ8MUF4VECH", Request id "0HNJ8MUF4VECH:00000027": started reading request body.
2026-02-10 12:23:45.541 -03:00 [DBG] Connection id "0HNJ8MUF4VECH", Request id "0HNJ8MUF4VECH:00000027": done reading request body.
2026-02-10 12:23:52.441 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/Stocks - application/json 126
2026-02-10 12:23:52.442 -03:00 [DBG] 1 candidate(s) found for the request path '/api/Stocks'
2026-02-10 12:23:52.443 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.StocksController.Create (Project_Gon.Api)' with route pattern 'api/Stocks' is valid for the request path '/api/Stocks'
2026-02-10 12:23:52.444 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.StocksController.Create (Project_Gon.Api)'
2026-02-10 12:23:52.445 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:23:52.445 -03:00 [DBG] The request has an origin header: 'https://localhost:7058'.
2026-02-10 12:23:52.446 -03:00 [INF] CORS policy execution failed.
2026-02-10 12:23:52.446 -03:00 [INF] Request origin https://localhost:7058 does not have permission to access the resource.
2026-02-10 12:23:52.447 -03:00 [INF] Failed to validate the token.
System.ArgumentException: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
 ---> System.FormatException: IDX10400: Unable to decode: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64url encoded string.
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoder.Decode(ReadOnlySpan`1 strSpan, Span`1 output, Boolean needReplace, Int32 decodedLength)
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoder.Decode(ReadOnlySpan`1 strSpan, Span`1 output)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(ReadOnlySpan`1 strSpan, Int32 startIndex, Int32 length, Boolean createHeaderClaimSet)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
2026-02-10 12:23:52.450 -03:00 [WRN] JWT Authentication failed: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
2026-02-10 12:23:52.451 -03:00 [INF] Bearer was not authenticated. Failure message: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
2026-02-10 12:23:52.451 -03:00 [DBG] Policy authentication schemes  did not succeed
2026-02-10 12:23:52.452 -03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (AdminGlobal|Administrador)
2026-02-10 12:23:52.453 -03:00 [WRN] JWT Challenge triggered: invalid_token
2026-02-10 12:23:52.453 -03:00 [INF] AuthenticationScheme: Bearer was challenged.
2026-02-10 12:23:52.454 -03:00 [INF] HTTP POST /api/Stocks responded 401 in 6.9771 ms
2026-02-10 12:23:52.455 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/Stocks - 401 0 null 13.5056ms
2026-02-10 12:23:52.456 -03:00 [DBG] Connection id "0HNJ8MUF4VECH", Request id "0HNJ8MUF4VECH:00000029": started reading request body.
2026-02-10 12:23:52.457 -03:00 [DBG] Connection id "0HNJ8MUF4VECH", Request id "0HNJ8MUF4VECH:00000029": done reading request body.
2026-02-10 12:25:01.209 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/Stocks - application/json 126
2026-02-10 12:25:01.210 -03:00 [DBG] 1 candidate(s) found for the request path '/api/Stocks'
2026-02-10 12:25:01.211 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.StocksController.Create (Project_Gon.Api)' with route pattern 'api/Stocks' is valid for the request path '/api/Stocks'
2026-02-10 12:25:01.212 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.StocksController.Create (Project_Gon.Api)'
2026-02-10 12:25:01.213 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:25:01.213 -03:00 [DBG] The request has an origin header: 'https://localhost:7058'.
2026-02-10 12:25:01.214 -03:00 [INF] CORS policy execution failed.
2026-02-10 12:25:01.214 -03:00 [INF] Request origin https://localhost:7058 does not have permission to access the resource.
2026-02-10 12:25:01.243 -03:00 [DBG] Successfully validated the token.
2026-02-10 12:25:01.244 -03:00 [INF] JWT Token validated for user: Unknown, empresa: 3
2026-02-10 12:25:01.246 -03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2026-02-10 12:25:01.248 -03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (AdminGlobal|Administrador)
2026-02-10 12:25:01.250 -03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2026-02-10 12:25:01.250 -03:00 [INF] HTTP POST /api/Stocks responded 403 in 35.3906 ms
2026-02-10 12:25:01.251 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/Stocks - 403 0 null 42.2581ms
2026-02-10 12:25:01.253 -03:00 [DBG] Connection id "0HNJ8MUF4VECH", Request id "0HNJ8MUF4VECH:0000002B": started reading request body.
2026-02-10 12:25:01.253 -03:00 [DBG] Connection id "0HNJ8MUF4VECH", Request id "0HNJ8MUF4VECH:0000002B": done reading request body.
2026-02-10 12:27:03.197 -03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-10 12:27:03.544 -03:00 [DBG] The index {'ProductoId'} was not created on entity type 'Stock' as the properties are already covered by the index {'ProductoId', 'SucursalId'}.
2026-02-10 12:27:03.547 -03:00 [DBG] The index {'EmpresaId'} was not created on entity type 'Usuario' as the properties are already covered by the index {'EmpresaId', 'Email'}.
2026-02-10 12:27:03.548 -03:00 [DBG] The index {'EmpresaId'} was not created on entity type 'Usuario' as the properties are already covered by the index {'EmpresaId', 'Rut'}.
2026-02-10 12:27:03.624 -03:00 [DBG] The property 'MovimientoStock.DevolucionId' was created in shadow state because there are no eligible CLR members with a matching name.
2026-02-10 12:27:03.687 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-02-10 12:27:03.698 -03:00 [DBG] Creating DbConnection.
2026-02-10 12:27:03.715 -03:00 [DBG] Created DbConnection. (16ms).
2026-02-10 12:27:03.718 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:27:03.789 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:27:03.796 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:27:03.803 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2026-02-10 12:27:03.805 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
2026-02-10 12:27:03.809 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-02-10 12:27:03.829 -03:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-02-10 12:27:03.849 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:27:03.854 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 20ms reading results.
2026-02-10 12:27:03.855 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:27:03.858 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (2ms).
2026-02-10 12:27:03.964 -03:00 [DBG] Migrating using database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:27:03.966 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:27:03.968 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:27:04.005 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:27:04.006 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:27:04.008 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (2ms).
2026-02-10 12:27:04.009 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:27:04.010 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:27:04.041 -03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-02-10 12:27:04.042 -03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-02-10 12:27:04.043 -03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1ms).
2026-02-10 12:27:04.043 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2026-02-10 12:27:04.049 -03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2026-02-10 12:27:04.052 -03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2026-02-10 12:27:04.054 -03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2026-02-10 12:27:04.056 -03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2026-02-10 12:27:04.057 -03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-02-10 12:27:04.057 -03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-02-10 12:27:04.058 -03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1ms).
2026-02-10 12:27:04.058 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2026-02-10 12:27:04.060 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2026-02-10 12:27:04.061 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:27:04.062 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:27:04.063 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:27:04.064 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-02-10 12:27:04.066 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-02-10 12:27:04.067 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:27:04.068 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-02-10 12:27:04.073 -03:00 [INF] No migrations were applied. The database is already up to date.
2026-02-10 12:27:04.074 -03:00 [DBG] Committing transaction.
2026-02-10 12:27:04.112 -03:00 [DBG] Committed transaction.
2026-02-10 12:27:04.114 -03:00 [DBG] Disposing transaction.
2026-02-10 12:27:04.114 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:27:04.115 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-02-10 12:27:04.117 -03:00 [INF] Database migrations applied successfully
2026-02-10 12:27:04.119 -03:00 [DBG] 'AppDbContext' disposed.
2026-02-10 12:27:04.120 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:27:04.121 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (1ms).
2026-02-10 12:27:04.145 -03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-10 12:27:04.189 -03:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2026-02-10 12:27:04.201 -03:00 [INF] Project Gon API iniciada en ambiente: Development
2026-02-10 12:27:04.203 -03:00 [DBG] Hosting starting
2026-02-10 12:27:04.212 -03:00 [INF] User profile is available. Using 'C:\Users\Jossan\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-02-10 12:27:04.217 -03:00 [DBG] Reading data from file 'C:\Users\Jossan\AppData\Local\ASP.NET\DataProtection-Keys\key-7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c.xml'.
2026-02-10 12:27:04.221 -03:00 [DBG] Found key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c}.
2026-02-10 12:27:04.227 -03:00 [DBG] Considering key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} with expiration date 2026-04-28 18:20:11Z as default key.
2026-02-10 12:27:04.229 -03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2026-02-10 12:27:04.230 -03:00 [DBG] Decrypting secret element using Windows DPAPI.
2026-02-10 12:27:04.231 -03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2026-02-10 12:27:04.233 -03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2026-02-10 12:27:04.234 -03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2026-02-10 12:27:04.236 -03:00 [DBG] Using key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} as the default key.
2026-02-10 12:27:04.237 -03:00 [DBG] Key ring with default key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} was loaded during application startup.
2026-02-10 12:27:04.239 -03:00 [DBG] Middleware loaded
2026-02-10 12:27:04.241 -03:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16515 B).
2026-02-10 12:27:04.242 -03:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2026-02-10 12:27:04.289 -03:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2026-02-10 12:27:04.291 -03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-10 12:27:04.293 -03:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2026-02-10 12:27:04.323 -03:00 [INF] Now listening on: https://localhost:7058
2026-02-10 12:27:04.324 -03:00 [INF] Now listening on: http://localhost:5070
2026-02-10 12:27:04.325 -03:00 [DBG] Loaded hosting startup assembly Project_Gon.Api
2026-02-10 12:27:04.325 -03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-10 12:27:04.326 -03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-10 12:27:04.326 -03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-10 12:27:04.329 -03:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2026-02-10 12:27:04.332 -03:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2026-02-10 12:27:04.357 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-10 12:27:04.358 -03:00 [INF] Hosting environment: Development
2026-02-10 12:27:04.359 -03:00 [INF] Content root path: C:\Proyectos\Project_Gon\Project_Gon.Api
2026-02-10 12:27:04.361 -03:00 [DBG] Hosting started
2026-02-10 12:27:05.527 -03:00 [DBG] Connection id "0HNJ8N3CE7QH4" accepted.
2026-02-10 12:27:05.528 -03:00 [DBG] Connection id "0HNJ8N3CE7QH4" started.
2026-02-10 12:27:05.553 -03:00 [DBG] Connection 0HNJ8N3CE7QH4 established using the following protocol: "Tls12"
2026-02-10 12:27:05.579 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/index.html - null null
2026-02-10 12:27:05.627 -03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-10 12:27:05.628 -03:00 [DBG] Request did not match any endpoints
2026-02-10 12:27:05.655 -03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-10 12:27:05.656 -03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-10 12:27:05.664 -03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-10 12:27:05.665 -03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-10 12:27:05.666 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/index.html - 200 null text/html;charset=utf-8 88.2296ms
2026-02-10 12:27:05.685 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/_framework/aspnetcore-browser-refresh.js - null null
2026-02-10 12:27:05.685 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/_vs/browserLink - null null
2026-02-10 12:27:05.688 -03:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2026-02-10 12:27:05.689 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/_framework/aspnetcore-browser-refresh.js - 200 16515 application/javascript; charset=utf-8 3.9756ms
2026-02-10 12:27:05.702 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/_vs/browserLink - 200 null text/javascript; charset=UTF-8 16.9139ms
2026-02-10 12:27:05.833 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/v1/swagger.json - null null
2026-02-10 12:27:05.836 -03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-10 12:27:05.837 -03:00 [DBG] Request did not match any endpoints
2026-02-10 12:27:05.868 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 34.8489ms
2026-02-10 12:27:37.660 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/Auth/login - application/json 59
2026-02-10 12:27:37.665 -03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2026-02-10 12:27:37.666 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2026-02-10 12:27:37.667 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-02-10 12:27:37.669 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:27:37.671 -03:00 [DBG] The request has an origin header: 'https://localhost:7058'.
2026-02-10 12:27:37.671 -03:00 [INF] CORS policy execution failed.
2026-02-10 12:27:37.672 -03:00 [INF] Request origin https://localhost:7058 does not have permission to access the resource.
2026-02-10 12:27:37.701 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-02-10 12:27:37.704 -03:00 [INF] Executing endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-02-10 12:27:37.713 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Project_Gon.Core.DTOs.Auth.LoginDto) on controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api).
2026-02-10 12:27:37.715 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 12:27:37.716 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 12:27:37.717 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-10 12:27:37.718 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 12:27:37.719 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 12:27:37.720 -03:00 [DBG] Executing controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-02-10 12:27:37.806 -03:00 [DBG] Executed controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-02-10 12:27:37.809 -03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' ...
2026-02-10 12:27:37.811 -03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' using the name '' in request data ...
2026-02-10 12:27:37.812 -03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2026-02-10 12:27:37.816 -03:00 [DBG] Connection id "0HNJ8N3CE7QH4", Request id "0HNJ8N3CE7QH4:00000009": started reading request body.
2026-02-10 12:27:37.816 -03:00 [DBG] Connection id "0HNJ8N3CE7QH4", Request id "0HNJ8N3CE7QH4:00000009": done reading request body.
2026-02-10 12:27:37.820 -03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Project_Gon.Core.DTOs.Auth.LoginDto'
2026-02-10 12:27:37.821 -03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-02-10 12:27:37.821 -03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-02-10 12:27:37.822 -03:00 [DBG] Attempting to validate the bound parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' ...
2026-02-10 12:27:37.838 -03:00 [DBG] Done attempting to validate the bound parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-02-10 12:27:37.841 -03:00 [INF] [LOGIN] Intento de login con: 12345678-9
2026-02-10 12:27:37.843 -03:00 [DBG] [CLEAN_RUT] Original: 12345678-9 -> Limpio: 12345678-9
2026-02-10 12:27:37.843 -03:00 [INF] [FIND] Buscando por RUT limpio: 12345678-9
2026-02-10 12:27:37.857 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-02-10 12:27:37.892 -03:00 [DBG] Compiling query expression: 
'DbSet<Usuario>()
    .Where(u => u.Rut == __rutLimpio_0 && u.Activo)
    .AsNoTracking()
    .FirstOrDefault()'
2026-02-10 12:27:38.029 -03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Usuario>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Usuario>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Usuario.Activo (bool) Required, 1], [Property: Usuario.Apellido (string) Required, 2], [Property: Usuario.CreatedAt (DateTime) Required, 3], [Property: Usuario.Email (string) Index MaxLength(255), 4], [Property: Usuario.EmpresaId (int) Required FK Index, 5], [Property: Usuario.Nombre (string) Required, 6], [Property: Usuario.PasswordHash (string) Required, 7], [Property: Usuario.Rol (RolUsuario) Required, 8], [Property: Usuario.Rut (string) Index MaxLength(12), 9], [Property: Usuario.SucursalId (int?) FK Index, 10], [Property: Usuario.UltimoAcceso (DateTime?), 11], [Property: Usuario.UpdatedAt (DateTime?), 12] }
            SELECT TOP(1) u.Id, u.Activo, u.Apellido, u.CreatedAt, u.Email, u.EmpresaId, u.Nombre, u.PasswordHash, u.Rol, u.Rut, u.SucursalId, u.UltimoAcceso, u.UpdatedAt
            FROM Usuarios AS u
            WHERE (u.Rut == @__rutLimpio_0) && u.Activo) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Usuario.Activo (bool) Required, 1], [Property: Usuario.Apellido (string) Required, 2], [Property: Usuario.CreatedAt (DateTime) Required, 3], [Property: Usuario.Email (string) Index MaxLength(255), 4], [Property: Usuario.EmpresaId (int) Required FK Index, 5], [Property: Usuario.Nombre (string) Required, 6], [Property: Usuario.PasswordHash (string) Required, 7], [Property: Usuario.Rol (RolUsuario) Required, 8], [Property: Usuario.Rut (string) Index MaxLength(12), 9], [Property: Usuario.SucursalId (int?) FK Index, 10], [Property: Usuario.UltimoAcceso (DateTime?), 11], [Property: Usuario.UpdatedAt (DateTime?), 12] }
            SELECT TOP(1) u.Id, u.Activo, u.Apellido, u.CreatedAt, u.Email, u.EmpresaId, u.Nombre, u.PasswordHash, u.Rol, u.Rut, u.SucursalId, u.UltimoAcceso, u.UpdatedAt
            FROM Usuarios AS u
            WHERE (u.Rut == @__rutLimpio_0) && u.Activo, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Usuario entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Usuario instance1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Usuario);
                (object)dataReader.GetInt32(0) != null ? 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")]: 
                            {
                                return 
                                {
                                    Usuario instance;
                                    instance = new Usuario();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Activo>k__BackingField = dataReader.GetBoolean(1);
                                    instance.<Apellido>k__BackingField = dataReader.GetString(2);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(3);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<EmpresaId>k__BackingField = dataReader.GetInt32(5);
                                    instance.<Nombre>k__BackingField = dataReader.GetString(6);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(7);
                                    instance.<Rol>k__BackingField = Invoke(((EnumToNumberConverter<RolUsuario, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Usuario.Rol (RolUsuario) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario").FindProperty("Rol")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(8));
                                    instance.<Rut>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<SucursalId>k__BackingField = dataReader.IsDBNull(10) ? default(int?) : (int?)dataReader.GetInt32(10);
                                    instance.<UltimoAcceso>k__BackingField = dataReader.IsDBNull(11) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(11);
                                    instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(12) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(12);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Usuario)
                    }
                    ;
                    return instance1;
                } : 
                {
                    object[] keyValues1;
                    keyValues1 = new object[]{ (object)dataReader.GetInt32(0) };
                    return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                        entityType: [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")], 
                        properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario").FindPrimaryKey().Properties], 
                        keyValues: keyValues1);
                };
                return instance1;
            };
            return entity;
        }, 
        contextType: Project_Gon.Infrastructure.Data.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2026-02-10 12:27:38.058 -03:00 [DBG] Creating DbConnection.
2026-02-10 12:27:38.058 -03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 12:27:38.060 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:27:38.061 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:27:38.061 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:27:38.062 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:27:38.065 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2026-02-10 12:27:38.067 -03:00 [DBG] Executing DbCommand [Parameters=[@__rutLimpio_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Rut" = @__rutLimpio_0 AND u."Activo"
LIMIT 1
2026-02-10 12:27:38.078 -03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__rutLimpio_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Rut" = @__rutLimpio_0 AND u."Activo"
LIMIT 1
2026-02-10 12:27:38.087 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:27:38.088 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 8ms reading results.
2026-02-10 12:27:38.090 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:27:38.091 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-02-10 12:27:38.092 -03:00 [INF] [FIND] Usuario encontrado - ID: 5, RUT: 12345678-9
2026-02-10 12:27:38.100 -03:00 [DBG] Compiling query expression: 
'DbSet<Empresa>()
    .FirstOrDefault(e => EF.Property<int>(e, "Id") == __p_0)'
2026-02-10 12:27:38.109 -03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Empresa>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Empresa>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Empresa.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Empresa.Activo (bool) Required, 1], [Property: Empresa.Ciudad (string), 2], [Property: Empresa.CreatedAt (DateTime) Required, 3], [Property: Empresa.Direccion (string), 4], [Property: Empresa.Nombre (string) Required MaxLength(255), 5], [Property: Empresa.Region (string), 6], [Property: Empresa.Rut (string), 7], [Property: Empresa.UpdatedAt (DateTime?), 8] }
            SELECT TOP(1) e.Id, e.Activo, e.Ciudad, e.CreatedAt, e.Direccion, e.Nombre, e.Region, e.Rut, e.UpdatedAt
            FROM Empresas AS e
            WHERE e.Id == @__p_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Empresa.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Empresa.Activo (bool) Required, 1], [Property: Empresa.Ciudad (string), 2], [Property: Empresa.CreatedAt (DateTime) Required, 3], [Property: Empresa.Direccion (string), 4], [Property: Empresa.Nombre (string) Required MaxLength(255), 5], [Property: Empresa.Region (string), 6], [Property: Empresa.Rut (string), 7], [Property: Empresa.UpdatedAt (DateTime?), 8] }
            SELECT TOP(1) e.Id, e.Activo, e.Ciudad, e.CreatedAt, e.Direccion, e.Nombre, e.Region, e.Rut, e.UpdatedAt
            FROM Empresas AS e
            WHERE e.Id == @__p_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Empresa entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Empresa instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Empresa);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Empresa.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Empresa").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (Empresa)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Empresa | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Empresa")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Empresa | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Empresa")]: 
                            {
                                return 
                                {
                                    Empresa instance;
                                    instance = new Empresa();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Activo>k__BackingField = dataReader.GetBoolean(1);
                                    instance.<Ciudad>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(3);
                                    instance.<Direccion>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<Nombre>k__BackingField = dataReader.GetString(5);
                                    instance.<Region>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                    instance.<Rut>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(8) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(8);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Empresa | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Empresa")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Empresa)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: Project_Gon.Infrastructure.Data.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2026-02-10 12:27:38.117 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:27:38.118 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:27:38.119 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:27:38.119 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:27:38.120 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:27:38.121 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-02-10 12:27:38.124 -03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-02-10 12:27:38.148 -03:00 [DBG] Context 'AppDbContext' started tracking 'Empresa' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:27:38.167 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:27:38.167 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 41ms reading results.
2026-02-10 12:27:38.169 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:27:38.169 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-02-10 12:27:38.170 -03:00 [INF] [LOGIN] Usuario encontrado: true
2026-02-10 12:27:38.171 -03:00 [INF] [LOGIN] Usuario ID: 5, RUT: 12345678-9, Email: admin@example.com, Activo: true
2026-02-10 12:27:38.172 -03:00 [INF] [LOGIN] Verificando contrasea para usuario ID: 5
2026-02-10 12:27:38.869 -03:00 [INF] [LOGIN] Password vlido: false
2026-02-10 12:27:38.870 -03:00 [WRN] [LOGIN] Login rechazado - Contrasea incorrecta para usuario ID: 5
2026-02-10 12:27:38.872 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 12:27:38.875 -03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2026-02-10 12:27:38.876 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2026-02-10 12:27:38.876 -03:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'System.String'.
2026-02-10 12:27:38.879 -03:00 [INF] Executed action Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api) in 1158.0831ms
2026-02-10 12:27:38.880 -03:00 [INF] Executed endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-02-10 12:27:38.882 -03:00 [INF] HTTP POST /api/Auth/login responded 401 in 1208.3092 ms
2026-02-10 12:27:38.884 -03:00 [DBG] 'AppDbContext' disposed.
2026-02-10 12:27:38.886 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:27:38.887 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (1ms).
2026-02-10 12:27:38.888 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/Auth/login - 401 null text/plain; charset=utf-8 1228.3427ms
2026-02-10 12:28:24.979 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/Auth/login - application/json 59
2026-02-10 12:28:24.982 -03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2026-02-10 12:28:24.982 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2026-02-10 12:28:24.983 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-02-10 12:28:24.986 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:28:24.987 -03:00 [DBG] The request has an origin header: 'https://localhost:7058'.
2026-02-10 12:28:24.988 -03:00 [INF] CORS policy execution failed.
2026-02-10 12:28:24.989 -03:00 [INF] Request origin https://localhost:7058 does not have permission to access the resource.
2026-02-10 12:28:24.992 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-02-10 12:28:24.993 -03:00 [INF] Executing endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-02-10 12:28:24.994 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Project_Gon.Core.DTOs.Auth.LoginDto) on controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api).
2026-02-10 12:28:24.999 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 12:28:25.000 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 12:28:25.001 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-10 12:28:25.005 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 12:28:25.006 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 12:28:25.007 -03:00 [DBG] Executing controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-02-10 12:28:25.010 -03:00 [DBG] Executed controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-02-10 12:28:25.011 -03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' ...
2026-02-10 12:28:25.012 -03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' using the name '' in request data ...
2026-02-10 12:28:25.013 -03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2026-02-10 12:28:25.014 -03:00 [DBG] Connection id "0HNJ8N3CE7QH4", Request id "0HNJ8N3CE7QH4:0000000B": started reading request body.
2026-02-10 12:28:25.014 -03:00 [DBG] Connection id "0HNJ8N3CE7QH4", Request id "0HNJ8N3CE7QH4:0000000B": done reading request body.
2026-02-10 12:28:25.015 -03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Project_Gon.Core.DTOs.Auth.LoginDto'
2026-02-10 12:28:25.016 -03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-02-10 12:28:25.016 -03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-02-10 12:28:25.017 -03:00 [DBG] Attempting to validate the bound parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' ...
2026-02-10 12:28:25.020 -03:00 [DBG] Done attempting to validate the bound parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-02-10 12:28:25.021 -03:00 [INF] [LOGIN] Intento de login con: 12345678-9
2026-02-10 12:28:25.021 -03:00 [DBG] [CLEAN_RUT] Original: 12345678-9 -> Limpio: 12345678-9
2026-02-10 12:28:25.022 -03:00 [INF] [FIND] Buscando por RUT limpio: 12345678-9
2026-02-10 12:28:25.052 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-02-10 12:28:25.055 -03:00 [DBG] Creating DbConnection.
2026-02-10 12:28:25.056 -03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 12:28:25.056 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:28:25.057 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:28:25.058 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:28:25.058 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:28:25.059 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:28:25.060 -03:00 [DBG] Executing DbCommand [Parameters=[@__rutLimpio_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Rut" = @__rutLimpio_0 AND u."Activo"
LIMIT 1
2026-02-10 12:28:25.061 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__rutLimpio_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Rut" = @__rutLimpio_0 AND u."Activo"
LIMIT 1
2026-02-10 12:28:25.063 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:28:25.064 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-02-10 12:28:25.065 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:28:25.065 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-02-10 12:28:25.066 -03:00 [INF] [FIND] Usuario encontrado - ID: 5, RUT: 12345678-9
2026-02-10 12:28:25.068 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:28:25.068 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:28:25.069 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:28:25.070 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:28:25.070 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:28:25.071 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-02-10 12:28:25.072 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-02-10 12:28:25.074 -03:00 [DBG] Context 'AppDbContext' started tracking 'Empresa' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:28:25.075 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:28:25.076 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-02-10 12:28:25.077 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:28:25.077 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-02-10 12:28:25.078 -03:00 [INF] [LOGIN] Usuario encontrado: true
2026-02-10 12:28:25.078 -03:00 [INF] [LOGIN] Usuario ID: 5, RUT: 12345678-9, Email: admin@example.com, Activo: true
2026-02-10 12:28:25.079 -03:00 [INF] [LOGIN] Verificando contrasea para usuario ID: 5
2026-02-10 12:28:25.286 -03:00 [INF] [LOGIN] Password vlido: false
2026-02-10 12:28:25.287 -03:00 [WRN] [LOGIN] Login rechazado - Contrasea incorrecta para usuario ID: 5
2026-02-10 12:28:25.288 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 12:28:25.289 -03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2026-02-10 12:28:25.290 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2026-02-10 12:28:25.291 -03:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'System.String'.
2026-02-10 12:28:25.292 -03:00 [INF] Executed action Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api) in 285.0947ms
2026-02-10 12:28:25.292 -03:00 [INF] Executed endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-02-10 12:28:25.293 -03:00 [INF] HTTP POST /api/Auth/login responded 401 in 302.5736 ms
2026-02-10 12:28:25.294 -03:00 [DBG] 'AppDbContext' disposed.
2026-02-10 12:28:25.294 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:28:25.295 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-02-10 12:28:25.296 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/Auth/login - 401 null text/plain; charset=utf-8 316.501ms
2026-02-10 12:28:37.920 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/Auth/login - application/json 66
2026-02-10 12:28:37.921 -03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2026-02-10 12:28:37.922 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2026-02-10 12:28:37.923 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-02-10 12:28:37.924 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:28:37.924 -03:00 [DBG] The request has an origin header: 'https://localhost:7058'.
2026-02-10 12:28:37.925 -03:00 [INF] CORS policy execution failed.
2026-02-10 12:28:37.925 -03:00 [INF] Request origin https://localhost:7058 does not have permission to access the resource.
2026-02-10 12:28:37.933 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-02-10 12:28:37.938 -03:00 [INF] Executing endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-02-10 12:28:37.938 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Project_Gon.Core.DTOs.Auth.LoginDto) on controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api).
2026-02-10 12:28:37.940 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 12:28:37.941 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 12:28:37.942 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-10 12:28:37.943 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 12:28:37.944 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 12:28:37.946 -03:00 [DBG] Executing controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-02-10 12:28:37.949 -03:00 [DBG] Executed controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-02-10 12:28:37.951 -03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' ...
2026-02-10 12:28:37.952 -03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' using the name '' in request data ...
2026-02-10 12:28:37.953 -03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2026-02-10 12:28:37.954 -03:00 [DBG] Connection id "0HNJ8N3CE7QH4", Request id "0HNJ8N3CE7QH4:0000000D": started reading request body.
2026-02-10 12:28:37.955 -03:00 [DBG] Connection id "0HNJ8N3CE7QH4", Request id "0HNJ8N3CE7QH4:0000000D": done reading request body.
2026-02-10 12:28:37.956 -03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Project_Gon.Core.DTOs.Auth.LoginDto'
2026-02-10 12:28:37.956 -03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-02-10 12:28:37.957 -03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-02-10 12:28:37.958 -03:00 [DBG] Attempting to validate the bound parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' ...
2026-02-10 12:28:37.960 -03:00 [DBG] Done attempting to validate the bound parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-02-10 12:28:37.961 -03:00 [INF] [LOGIN] Intento de login con: admin@example.com
2026-02-10 12:28:37.961 -03:00 [INF] [FIND] Buscando por EMAIL: admin@example.com
2026-02-10 12:28:37.962 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-02-10 12:28:37.964 -03:00 [DBG] Compiling query expression: 
'DbSet<Usuario>()
    .Where(u => u.Email == __emailOrRut_0 && u.Activo)
    .AsNoTracking()
    .FirstOrDefault()'
2026-02-10 12:28:37.973 -03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Usuario>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Usuario>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Usuario.Activo (bool) Required, 1], [Property: Usuario.Apellido (string) Required, 2], [Property: Usuario.CreatedAt (DateTime) Required, 3], [Property: Usuario.Email (string) Index MaxLength(255), 4], [Property: Usuario.EmpresaId (int) Required FK Index, 5], [Property: Usuario.Nombre (string) Required, 6], [Property: Usuario.PasswordHash (string) Required, 7], [Property: Usuario.Rol (RolUsuario) Required, 8], [Property: Usuario.Rut (string) Index MaxLength(12), 9], [Property: Usuario.SucursalId (int?) FK Index, 10], [Property: Usuario.UltimoAcceso (DateTime?), 11], [Property: Usuario.UpdatedAt (DateTime?), 12] }
            SELECT TOP(1) u.Id, u.Activo, u.Apellido, u.CreatedAt, u.Email, u.EmpresaId, u.Nombre, u.PasswordHash, u.Rol, u.Rut, u.SucursalId, u.UltimoAcceso, u.UpdatedAt
            FROM Usuarios AS u
            WHERE (u.Email == @__emailOrRut_0) && u.Activo) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Usuario.Activo (bool) Required, 1], [Property: Usuario.Apellido (string) Required, 2], [Property: Usuario.CreatedAt (DateTime) Required, 3], [Property: Usuario.Email (string) Index MaxLength(255), 4], [Property: Usuario.EmpresaId (int) Required FK Index, 5], [Property: Usuario.Nombre (string) Required, 6], [Property: Usuario.PasswordHash (string) Required, 7], [Property: Usuario.Rol (RolUsuario) Required, 8], [Property: Usuario.Rut (string) Index MaxLength(12), 9], [Property: Usuario.SucursalId (int?) FK Index, 10], [Property: Usuario.UltimoAcceso (DateTime?), 11], [Property: Usuario.UpdatedAt (DateTime?), 12] }
            SELECT TOP(1) u.Id, u.Activo, u.Apellido, u.CreatedAt, u.Email, u.EmpresaId, u.Nombre, u.PasswordHash, u.Rol, u.Rut, u.SucursalId, u.UltimoAcceso, u.UpdatedAt
            FROM Usuarios AS u
            WHERE (u.Email == @__emailOrRut_0) && u.Activo, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Usuario entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Usuario instance1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Usuario);
                (object)dataReader.GetInt32(0) != null ? 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")]: 
                            {
                                return 
                                {
                                    Usuario instance;
                                    instance = new Usuario();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Activo>k__BackingField = dataReader.GetBoolean(1);
                                    instance.<Apellido>k__BackingField = dataReader.GetString(2);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(3);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<EmpresaId>k__BackingField = dataReader.GetInt32(5);
                                    instance.<Nombre>k__BackingField = dataReader.GetString(6);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(7);
                                    instance.<Rol>k__BackingField = Invoke(((EnumToNumberConverter<RolUsuario, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Usuario.Rol (RolUsuario) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario").FindProperty("Rol")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(8));
                                    instance.<Rut>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<SucursalId>k__BackingField = dataReader.IsDBNull(10) ? default(int?) : (int?)dataReader.GetInt32(10);
                                    instance.<UltimoAcceso>k__BackingField = dataReader.IsDBNull(11) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(11);
                                    instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(12) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(12);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Usuario)
                    }
                    ;
                    return instance1;
                } : 
                {
                    object[] keyValues1;
                    keyValues1 = new object[]{ (object)dataReader.GetInt32(0) };
                    return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                        entityType: [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")], 
                        properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario").FindPrimaryKey().Properties], 
                        keyValues: keyValues1);
                };
                return instance1;
            };
            return entity;
        }, 
        contextType: Project_Gon.Infrastructure.Data.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2026-02-10 12:28:37.981 -03:00 [DBG] Creating DbConnection.
2026-02-10 12:28:37.981 -03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 12:28:37.982 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:28:37.982 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:28:37.983 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:28:37.983 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:28:37.984 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:28:37.985 -03:00 [DBG] Executing DbCommand [Parameters=[@__emailOrRut_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Email" = @__emailOrRut_0 AND u."Activo"
LIMIT 1
2026-02-10 12:28:37.986 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__emailOrRut_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Email" = @__emailOrRut_0 AND u."Activo"
LIMIT 1
2026-02-10 12:28:37.988 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:28:37.988 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-02-10 12:28:37.989 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:28:37.989 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-02-10 12:28:37.990 -03:00 [INF] [FIND] Usuario encontrado - ID: 5, RUT: 12345678-9
2026-02-10 12:28:37.991 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:28:37.992 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:28:37.992 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:28:37.993 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:28:37.993 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:28:37.994 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-02-10 12:28:37.995 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-02-10 12:28:37.997 -03:00 [DBG] Context 'AppDbContext' started tracking 'Empresa' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:28:37.998 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:28:37.999 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-02-10 12:28:38.000 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:28:38.001 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-02-10 12:28:38.001 -03:00 [INF] [LOGIN] Usuario encontrado: true
2026-02-10 12:28:38.002 -03:00 [INF] [LOGIN] Usuario ID: 5, RUT: 12345678-9, Email: admin@example.com, Activo: true
2026-02-10 12:28:38.004 -03:00 [INF] [LOGIN] Verificando contrasea para usuario ID: 5
2026-02-10 12:28:38.213 -03:00 [INF] [LOGIN] Password vlido: false
2026-02-10 12:28:38.214 -03:00 [WRN] [LOGIN] Login rechazado - Contrasea incorrecta para usuario ID: 5
2026-02-10 12:28:38.214 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 12:28:38.216 -03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2026-02-10 12:28:38.216 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2026-02-10 12:28:38.217 -03:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'System.String'.
2026-02-10 12:28:38.218 -03:00 [INF] Executed action Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api) in 271.8343ms
2026-02-10 12:28:38.218 -03:00 [INF] Executed endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-02-10 12:28:38.219 -03:00 [INF] HTTP POST /api/Auth/login responded 401 in 292.7043 ms
2026-02-10 12:28:38.220 -03:00 [DBG] 'AppDbContext' disposed.
2026-02-10 12:28:38.220 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:28:38.221 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-02-10 12:28:38.222 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/Auth/login - 401 null text/plain; charset=utf-8 301.4117ms
2026-02-10 12:28:52.115 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/Auth/login - application/json 59
2026-02-10 12:28:52.116 -03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2026-02-10 12:28:52.117 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2026-02-10 12:28:52.118 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-02-10 12:28:52.118 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:28:52.119 -03:00 [DBG] The request has an origin header: 'https://localhost:7058'.
2026-02-10 12:28:52.119 -03:00 [INF] CORS policy execution failed.
2026-02-10 12:28:52.120 -03:00 [INF] Request origin https://localhost:7058 does not have permission to access the resource.
2026-02-10 12:28:52.120 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-02-10 12:28:52.121 -03:00 [INF] Executing endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-02-10 12:28:52.121 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Project_Gon.Core.DTOs.Auth.LoginDto) on controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api).
2026-02-10 12:28:52.122 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 12:28:52.123 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 12:28:52.124 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-10 12:28:52.125 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 12:28:52.126 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 12:28:52.127 -03:00 [DBG] Executing controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-02-10 12:28:52.127 -03:00 [DBG] Executed controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-02-10 12:28:52.128 -03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' ...
2026-02-10 12:28:52.128 -03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' using the name '' in request data ...
2026-02-10 12:28:52.129 -03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2026-02-10 12:28:52.130 -03:00 [DBG] Connection id "0HNJ8N3CE7QH4", Request id "0HNJ8N3CE7QH4:0000000F": started reading request body.
2026-02-10 12:28:52.131 -03:00 [DBG] Connection id "0HNJ8N3CE7QH4", Request id "0HNJ8N3CE7QH4:0000000F": done reading request body.
2026-02-10 12:28:52.131 -03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Project_Gon.Core.DTOs.Auth.LoginDto'
2026-02-10 12:28:52.132 -03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-02-10 12:28:52.132 -03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-02-10 12:28:52.133 -03:00 [DBG] Attempting to validate the bound parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' ...
2026-02-10 12:28:52.134 -03:00 [DBG] Done attempting to validate the bound parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-02-10 12:28:52.134 -03:00 [INF] [LOGIN] Intento de login con: 12345678-9
2026-02-10 12:28:52.135 -03:00 [DBG] [CLEAN_RUT] Original: 12345678-9 -> Limpio: 12345678-9
2026-02-10 12:28:52.136 -03:00 [INF] [FIND] Buscando por RUT limpio: 12345678-9
2026-02-10 12:28:52.137 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-02-10 12:28:52.138 -03:00 [DBG] Creating DbConnection.
2026-02-10 12:28:52.138 -03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 12:28:52.139 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:28:52.139 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:28:52.140 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:28:52.140 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:28:52.141 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:28:52.142 -03:00 [DBG] Executing DbCommand [Parameters=[@__rutLimpio_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Rut" = @__rutLimpio_0 AND u."Activo"
LIMIT 1
2026-02-10 12:28:52.143 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__rutLimpio_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Rut" = @__rutLimpio_0 AND u."Activo"
LIMIT 1
2026-02-10 12:28:52.145 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:28:52.145 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-02-10 12:28:52.146 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:28:52.147 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-02-10 12:28:52.147 -03:00 [INF] [FIND] Usuario encontrado - ID: 5, RUT: 12345678-9
2026-02-10 12:28:52.148 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:28:52.149 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:28:52.149 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:28:52.150 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:28:52.150 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:28:52.151 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-02-10 12:28:52.153 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-02-10 12:28:52.154 -03:00 [DBG] Context 'AppDbContext' started tracking 'Empresa' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:28:52.155 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:28:52.155 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-02-10 12:28:52.156 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:28:52.157 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-02-10 12:28:52.157 -03:00 [INF] [LOGIN] Usuario encontrado: true
2026-02-10 12:28:52.158 -03:00 [INF] [LOGIN] Usuario ID: 5, RUT: 12345678-9, Email: admin@example.com, Activo: true
2026-02-10 12:28:52.159 -03:00 [INF] [LOGIN] Verificando contrasea para usuario ID: 5
2026-02-10 12:28:52.365 -03:00 [INF] [LOGIN] Password vlido: false
2026-02-10 12:28:52.366 -03:00 [WRN] [LOGIN] Login rechazado - Contrasea incorrecta para usuario ID: 5
2026-02-10 12:28:52.367 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 12:28:52.368 -03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2026-02-10 12:28:52.369 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2026-02-10 12:28:52.370 -03:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'System.String'.
2026-02-10 12:28:52.370 -03:00 [INF] Executed action Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api) in 243.69ms
2026-02-10 12:28:52.371 -03:00 [INF] Executed endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-02-10 12:28:52.372 -03:00 [INF] HTTP POST /api/Auth/login responded 401 in 251.3565 ms
2026-02-10 12:28:52.372 -03:00 [DBG] 'AppDbContext' disposed.
2026-02-10 12:28:52.373 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:28:52.373 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-02-10 12:28:52.374 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/Auth/login - 401 null text/plain; charset=utf-8 259.6091ms
2026-02-10 12:29:40.635 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/index.html - null null
2026-02-10 12:29:40.640 -03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-10 12:29:40.641 -03:00 [DBG] Request did not match any endpoints
2026-02-10 12:29:40.642 -03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-10 12:29:40.642 -03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-10 12:29:40.644 -03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-10 12:29:40.644 -03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-10 12:29:40.645 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/index.html - 200 null text/html;charset=utf-8 9.3456ms
2026-02-10 12:29:40.661 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/swagger-ui-bundle.js - null null
2026-02-10 12:29:40.661 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/swagger-ui.css - null null
2026-02-10 12:29:40.661 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/swagger-ui-standalone-preset.js - null null
2026-02-10 12:29:40.661 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/_framework/aspnetcore-browser-refresh.js - null null
2026-02-10 12:29:40.661 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/_vs/browserLink - null null
2026-02-10 12:29:40.662 -03:00 [DBG] No candidates found for the request path '/swagger/swagger-ui-bundle.js'
2026-02-10 12:29:40.663 -03:00 [DBG] No candidates found for the request path '/swagger/swagger-ui.css'
2026-02-10 12:29:40.664 -03:00 [DBG] No candidates found for the request path '/swagger/swagger-ui-standalone-preset.js'
2026-02-10 12:29:40.666 -03:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2026-02-10 12:29:40.668 -03:00 [DBG] Request did not match any endpoints
2026-02-10 12:29:40.668 -03:00 [DBG] Request did not match any endpoints
2026-02-10 12:29:40.669 -03:00 [DBG] Request did not match any endpoints
2026-02-10 12:29:40.669 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/_framework/aspnetcore-browser-refresh.js - 200 16515 application/javascript; charset=utf-8 8.3584ms
2026-02-10 12:29:40.672 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/_vs/browserLink - 200 null text/javascript; charset=UTF-8 10.9311ms
2026-02-10 12:29:40.675 -03:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2026-02-10 12:29:40.675 -03:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2026-02-10 12:29:40.676 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/swagger-ui-standalone-preset.js - 200 230280 text/javascript 15.169ms
2026-02-10 12:29:40.677 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/swagger-ui.css - 200 152034 text/css 16.0932ms
2026-02-10 12:29:40.678 -03:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2026-02-10 12:29:40.681 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/swagger-ui-bundle.js - 200 1456926 text/javascript 20.0641ms
2026-02-10 12:29:40.833 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/v1/swagger.json - null null
2026-02-10 12:29:40.833 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/favicon-32x32.png - null null
2026-02-10 12:29:40.834 -03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-10 12:29:40.836 -03:00 [DBG] No candidates found for the request path '/swagger/favicon-32x32.png'
2026-02-10 12:29:40.837 -03:00 [DBG] Request did not match any endpoints
2026-02-10 12:29:40.837 -03:00 [DBG] Request did not match any endpoints
2026-02-10 12:29:40.839 -03:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2026-02-10 12:29:40.840 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/favicon-32x32.png - 200 628 image/png 6.5855ms
2026-02-10 12:29:40.872 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 39.2596ms
2026-02-10 12:30:04.946 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/Auth/login - application/json 57
2026-02-10 12:30:04.947 -03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2026-02-10 12:30:04.948 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2026-02-10 12:30:04.949 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-02-10 12:30:04.951 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:30:04.954 -03:00 [DBG] The request has an origin header: 'https://localhost:7058'.
2026-02-10 12:30:04.957 -03:00 [INF] CORS policy execution failed.
2026-02-10 12:30:04.958 -03:00 [INF] Request origin https://localhost:7058 does not have permission to access the resource.
2026-02-10 12:30:04.960 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-02-10 12:30:04.960 -03:00 [INF] Executing endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-02-10 12:30:04.961 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Project_Gon.Core.DTOs.Auth.LoginDto) on controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api).
2026-02-10 12:30:04.962 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 12:30:04.963 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 12:30:04.969 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-10 12:30:04.972 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 12:30:04.973 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 12:30:04.976 -03:00 [DBG] Executing controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-02-10 12:30:04.977 -03:00 [DBG] Executed controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-02-10 12:30:04.978 -03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' ...
2026-02-10 12:30:04.979 -03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' using the name '' in request data ...
2026-02-10 12:30:04.980 -03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2026-02-10 12:30:04.982 -03:00 [DBG] Connection id "0HNJ8N3CE7QH4", Request id "0HNJ8N3CE7QH4:00000021": started reading request body.
2026-02-10 12:30:04.983 -03:00 [DBG] Connection id "0HNJ8N3CE7QH4", Request id "0HNJ8N3CE7QH4:00000021": done reading request body.
2026-02-10 12:30:05.021 -03:00 [DBG] JSON input formatter threw an exception: Expected depth to be zero at the end of the JSON payload. There is an open JSON object or array that should be closed. Path: $ | LineNumber: 2 | BytePositionInLine: 25.
2026-02-10 12:30:05.022 -03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-02-10 12:30:05.022 -03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-02-10 12:30:05.023 -03:00 [DBG] Attempting to validate the bound parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' ...
2026-02-10 12:30:05.024 -03:00 [DBG] Done attempting to validate the bound parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-02-10 12:30:05.025 -03:00 [DBG] The request has model state errors, returning an error response.
2026-02-10 12:30:05.026 -03:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2026-02-10 12:30:05.027 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 12:30:05.028 -03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]' and explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'. The content types in the accept header must be a subset of the explicitly set content types.
2026-02-10 12:30:05.030 -03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2026-02-10 12:30:05.032 -03:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2026-02-10 12:30:05.033 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2026-02-10 12:30:05.034 -03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2026-02-10 12:30:05.043 -03:00 [INF] Executed action Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api) in 67.509ms
2026-02-10 12:30:05.044 -03:00 [INF] Executed endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-02-10 12:30:05.044 -03:00 [INF] HTTP POST /api/Auth/login responded 400 in 84.9105 ms
2026-02-10 12:30:05.045 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/Auth/login - 400 null application/problem+json; charset=utf-8 99.7097ms
2026-02-10 12:30:58.089 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/Auth/register - application/json 165
2026-02-10 12:30:58.090 -03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/register'
2026-02-10 12:30:58.091 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)' with route pattern 'api/Auth/register' is valid for the request path '/api/Auth/register'
2026-02-10 12:30:58.092 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)'
2026-02-10 12:30:58.096 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-02-10 12:30:58.102 -03:00 [DBG] The request has an origin header: 'https://localhost:7058'.
2026-02-10 12:30:58.107 -03:00 [INF] CORS policy execution failed.
2026-02-10 12:30:58.107 -03:00 [INF] Request origin https://localhost:7058 does not have permission to access the resource.
2026-02-10 12:30:58.110 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-02-10 12:30:58.111 -03:00 [INF] Executing endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)'
2026-02-10 12:30:58.115 -03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(Project_Gon.Core.DTOs.Auth.RegisterDto) on controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api).
2026-02-10 12:30:58.118 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-02-10 12:30:58.120 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-02-10 12:30:58.121 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-02-10 12:30:58.123 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-02-10 12:30:58.124 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-02-10 12:30:58.125 -03:00 [DBG] Executing controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-02-10 12:30:58.126 -03:00 [DBG] Executed controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-02-10 12:30:58.127 -03:00 [DBG] Attempting to bind parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto' ...
2026-02-10 12:30:58.127 -03:00 [DBG] Attempting to bind parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto' using the name '' in request data ...
2026-02-10 12:30:58.129 -03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2026-02-10 12:30:58.139 -03:00 [DBG] Connection id "0HNJ8N3CE7QH4", Request id "0HNJ8N3CE7QH4:00000023": started reading request body.
2026-02-10 12:30:58.140 -03:00 [DBG] Connection id "0HNJ8N3CE7QH4", Request id "0HNJ8N3CE7QH4:00000023": done reading request body.
2026-02-10 12:30:58.143 -03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Project_Gon.Core.DTOs.Auth.RegisterDto'
2026-02-10 12:30:58.143 -03:00 [DBG] Done attempting to bind parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto'.
2026-02-10 12:30:58.144 -03:00 [DBG] Done attempting to bind parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto'.
2026-02-10 12:30:58.145 -03:00 [DBG] Attempting to validate the bound parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto' ...
2026-02-10 12:30:58.162 -03:00 [DBG] Done attempting to validate the bound parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto'.
2026-02-10 12:30:58.166 -03:00 [DBG] [CLEAN_RUT] Original: 11111111-1 -> Limpio: 11111111-1
2026-02-10 12:30:58.166 -03:00 [INF] [REGISTER] RUT limpio guardado: 11111111-1
2026-02-10 12:30:58.167 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-02-10 12:30:58.169 -03:00 [DBG] Creating DbConnection.
2026-02-10 12:30:58.169 -03:00 [DBG] Created DbConnection. (0ms).
2026-02-10 12:30:58.170 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:30:58.171 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:30:58.171 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:30:58.172 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:30:58.173 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:30:58.173 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-02-10 12:30:58.175 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-02-10 12:30:58.177 -03:00 [DBG] Context 'AppDbContext' started tracking 'Empresa' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:30:58.180 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:30:58.181 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 3ms reading results.
2026-02-10 12:30:58.182 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:30:58.183 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-02-10 12:30:58.184 -03:00 [DBG] Compiling query expression: 
'DbSet<Usuario>()
    .Where(u => u.Rut == __rutLimpio_0 && u.EmpresaId == __8__locals1_registerDto_EmpresaId_1)
    .AsNoTracking()
    .FirstOrDefault()'
2026-02-10 12:30:58.188 -03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Usuario>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Usuario>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Usuario.Activo (bool) Required, 1], [Property: Usuario.Apellido (string) Required, 2], [Property: Usuario.CreatedAt (DateTime) Required, 3], [Property: Usuario.Email (string) Index MaxLength(255), 4], [Property: Usuario.EmpresaId (int) Required FK Index, 5], [Property: Usuario.Nombre (string) Required, 6], [Property: Usuario.PasswordHash (string) Required, 7], [Property: Usuario.Rol (RolUsuario) Required, 8], [Property: Usuario.Rut (string) Index MaxLength(12), 9], [Property: Usuario.SucursalId (int?) FK Index, 10], [Property: Usuario.UltimoAcceso (DateTime?), 11], [Property: Usuario.UpdatedAt (DateTime?), 12] }
            SELECT TOP(1) u.Id, u.Activo, u.Apellido, u.CreatedAt, u.Email, u.EmpresaId, u.Nombre, u.PasswordHash, u.Rol, u.Rut, u.SucursalId, u.UltimoAcceso, u.UpdatedAt
            FROM Usuarios AS u
            WHERE (u.Rut == @__rutLimpio_0) && (u.EmpresaId == @__8__locals1_registerDto_EmpresaId_1)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Usuario.Activo (bool) Required, 1], [Property: Usuario.Apellido (string) Required, 2], [Property: Usuario.CreatedAt (DateTime) Required, 3], [Property: Usuario.Email (string) Index MaxLength(255), 4], [Property: Usuario.EmpresaId (int) Required FK Index, 5], [Property: Usuario.Nombre (string) Required, 6], [Property: Usuario.PasswordHash (string) Required, 7], [Property: Usuario.Rol (RolUsuario) Required, 8], [Property: Usuario.Rut (string) Index MaxLength(12), 9], [Property: Usuario.SucursalId (int?) FK Index, 10], [Property: Usuario.UltimoAcceso (DateTime?), 11], [Property: Usuario.UpdatedAt (DateTime?), 12] }
            SELECT TOP(1) u.Id, u.Activo, u.Apellido, u.CreatedAt, u.Email, u.EmpresaId, u.Nombre, u.PasswordHash, u.Rol, u.Rut, u.SucursalId, u.UltimoAcceso, u.UpdatedAt
            FROM Usuarios AS u
            WHERE (u.Rut == @__rutLimpio_0) && (u.EmpresaId == @__8__locals1_registerDto_EmpresaId_1), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Usuario entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Usuario instance1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Usuario);
                (object)dataReader.GetInt32(0) != null ? 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")]: 
                            {
                                return 
                                {
                                    Usuario instance;
                                    instance = new Usuario();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Activo>k__BackingField = dataReader.GetBoolean(1);
                                    instance.<Apellido>k__BackingField = dataReader.GetString(2);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(3);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<EmpresaId>k__BackingField = dataReader.GetInt32(5);
                                    instance.<Nombre>k__BackingField = dataReader.GetString(6);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(7);
                                    instance.<Rol>k__BackingField = Invoke(((EnumToNumberConverter<RolUsuario, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Usuario.Rol (RolUsuario) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario").FindProperty("Rol")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(8));
                                    instance.<Rut>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<SucursalId>k__BackingField = dataReader.IsDBNull(10) ? default(int?) : (int?)dataReader.GetInt32(10);
                                    instance.<UltimoAcceso>k__BackingField = dataReader.IsDBNull(11) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(11);
                                    instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(12) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(12);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Usuario)
                    }
                    ;
                    return instance1;
                } : 
                {
                    object[] keyValues1;
                    keyValues1 = new object[]{ (object)dataReader.GetInt32(0) };
                    return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                        entityType: [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")], 
                        properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario").FindPrimaryKey().Properties], 
                        keyValues: keyValues1);
                };
                return instance1;
            };
            return entity;
        }, 
        contextType: Project_Gon.Infrastructure.Data.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2026-02-10 12:30:58.202 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:30:58.202 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:30:58.203 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:30:58.204 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:30:58.205 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:30:58.206 -03:00 [DBG] Executing DbCommand [Parameters=[@__rutLimpio_0='?', @__8__locals1_registerDto_EmpresaId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Rut" = @__rutLimpio_0 AND u."EmpresaId" = @__8__locals1_registerDto_EmpresaId_1
LIMIT 1
2026-02-10 12:30:58.208 -03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__rutLimpio_0='?', @__8__locals1_registerDto_EmpresaId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Rut" = @__rutLimpio_0 AND u."EmpresaId" = @__8__locals1_registerDto_EmpresaId_1
LIMIT 1
2026-02-10 12:30:58.212 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:30:58.213 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-02-10 12:30:58.214 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:30:58.214 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-02-10 12:30:58.216 -03:00 [DBG] Compiling query expression: 
'DbSet<Usuario>()
    .Where(u => u.Email == __8__locals1_registerDto_Email_0 && u.EmpresaId == __8__locals1_registerDto_EmpresaId_1)
    .AsNoTracking()
    .FirstOrDefault()'
2026-02-10 12:30:58.219 -03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Usuario>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Usuario>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Usuario.Activo (bool) Required, 1], [Property: Usuario.Apellido (string) Required, 2], [Property: Usuario.CreatedAt (DateTime) Required, 3], [Property: Usuario.Email (string) Index MaxLength(255), 4], [Property: Usuario.EmpresaId (int) Required FK Index, 5], [Property: Usuario.Nombre (string) Required, 6], [Property: Usuario.PasswordHash (string) Required, 7], [Property: Usuario.Rol (RolUsuario) Required, 8], [Property: Usuario.Rut (string) Index MaxLength(12), 9], [Property: Usuario.SucursalId (int?) FK Index, 10], [Property: Usuario.UltimoAcceso (DateTime?), 11], [Property: Usuario.UpdatedAt (DateTime?), 12] }
            SELECT TOP(1) u.Id, u.Activo, u.Apellido, u.CreatedAt, u.Email, u.EmpresaId, u.Nombre, u.PasswordHash, u.Rol, u.Rut, u.SucursalId, u.UltimoAcceso, u.UpdatedAt
            FROM Usuarios AS u
            WHERE (u.Email == @__8__locals1_registerDto_Email_0) && (u.EmpresaId == @__8__locals1_registerDto_EmpresaId_1)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Usuario.Activo (bool) Required, 1], [Property: Usuario.Apellido (string) Required, 2], [Property: Usuario.CreatedAt (DateTime) Required, 3], [Property: Usuario.Email (string) Index MaxLength(255), 4], [Property: Usuario.EmpresaId (int) Required FK Index, 5], [Property: Usuario.Nombre (string) Required, 6], [Property: Usuario.PasswordHash (string) Required, 7], [Property: Usuario.Rol (RolUsuario) Required, 8], [Property: Usuario.Rut (string) Index MaxLength(12), 9], [Property: Usuario.SucursalId (int?) FK Index, 10], [Property: Usuario.UltimoAcceso (DateTime?), 11], [Property: Usuario.UpdatedAt (DateTime?), 12] }
            SELECT TOP(1) u.Id, u.Activo, u.Apellido, u.CreatedAt, u.Email, u.EmpresaId, u.Nombre, u.PasswordHash, u.Rol, u.Rut, u.SucursalId, u.UltimoAcceso, u.UpdatedAt
            FROM Usuarios AS u
            WHERE (u.Email == @__8__locals1_registerDto_Email_0) && (u.EmpresaId == @__8__locals1_registerDto_EmpresaId_1), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Usuario entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Usuario instance1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Usuario);
                (object)dataReader.GetInt32(0) != null ? 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")]: 
                            {
                                return 
                                {
                                    Usuario instance;
                                    instance = new Usuario();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Activo>k__BackingField = dataReader.GetBoolean(1);
                                    instance.<Apellido>k__BackingField = dataReader.GetString(2);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(3);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<EmpresaId>k__BackingField = dataReader.GetInt32(5);
                                    instance.<Nombre>k__BackingField = dataReader.GetString(6);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(7);
                                    instance.<Rol>k__BackingField = Invoke(((EnumToNumberConverter<RolUsuario, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Usuario.Rol (RolUsuario) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario").FindProperty("Rol")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(8));
                                    instance.<Rut>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<SucursalId>k__BackingField = dataReader.IsDBNull(10) ? default(int?) : (int?)dataReader.GetInt32(10);
                                    instance.<UltimoAcceso>k__BackingField = dataReader.IsDBNull(11) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(11);
                                    instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(12) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(12);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Usuario)
                    }
                    ;
                    return instance1;
                } : 
                {
                    object[] keyValues1;
                    keyValues1 = new object[]{ (object)dataReader.GetInt32(0) };
                    return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                        entityType: [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")], 
                        properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario").FindPrimaryKey().Properties], 
                        keyValues: keyValues1);
                };
                return instance1;
            };
            return entity;
        }, 
        contextType: Project_Gon.Infrastructure.Data.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2026-02-10 12:30:58.233 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:30:58.234 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:30:58.235 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:30:58.235 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:30:58.236 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:30:58.237 -03:00 [DBG] Executing DbCommand [Parameters=[@__8__locals1_registerDto_Email_0='?', @__8__locals1_registerDto_EmpresaId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Email" = @__8__locals1_registerDto_Email_0 AND u."EmpresaId" = @__8__locals1_registerDto_EmpresaId_1
LIMIT 1
2026-02-10 12:30:58.240 -03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__8__locals1_registerDto_Email_0='?', @__8__locals1_registerDto_EmpresaId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Email" = @__8__locals1_registerDto_Email_0 AND u."EmpresaId" = @__8__locals1_registerDto_EmpresaId_1
LIMIT 1
2026-02-10 12:30:58.244 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:30:58.245 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-02-10 12:30:58.246 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:30:58.246 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-02-10 12:30:58.470 -03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Usuario.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:30:58.496 -03:00 [DBG] The navigation 'Usuario.Empresa' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:30:58.506 -03:00 [DBG] Context 'AppDbContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:30:58.510 -03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2026-02-10 12:30:58.512 -03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2026-02-10 12:30:58.528 -03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2026-02-10 12:30:58.557 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:30:58.558 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:30:58.560 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:30:58.561 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:30:58.562 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2026-02-10 12:30:58.563 -03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = Int32), @p5='?', @p6='?', @p7='?' (DbType = Int32), @p8='?', @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Usuarios" ("Activo", "Apellido", "CreatedAt", "Email", "EmpresaId", "Nombre", "PasswordHash", "Rol", "Rut", "SucursalId", "UltimoAcceso", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11)
RETURNING "Id";
2026-02-10 12:30:58.603 -03:00 [INF] Executed DbCommand (41ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = Int32), @p5='?', @p6='?', @p7='?' (DbType = Int32), @p8='?', @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Usuarios" ("Activo", "Apellido", "CreatedAt", "Email", "EmpresaId", "Nombre", "PasswordHash", "Rol", "Rut", "SucursalId", "UltimoAcceso", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11)
RETURNING "Id";
2026-02-10 12:30:58.611 -03:00 [DBG] The foreign key property 'Usuario.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-02-10 12:30:58.615 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:30:58.615 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 9ms reading results.
2026-02-10 12:30:58.617 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:30:58.618 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-02-10 12:30:58.624 -03:00 [DBG] An entity of type 'Usuario' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-02-10 12:30:58.626 -03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2026-02-10 12:30:58.627 -03:00 [INF] [REGISTER] Usuario creado - ID: 6, RUT: 11111111-1, Email: superadmin@test.com
2026-02-10 12:30:58.648 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-02-10 12:30:58.650 -03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2026-02-10 12:30:58.651 -03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2026-02-10 12:30:58.652 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-02-10 12:30:58.652 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-02-10 12:30:58.654 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-02-10 12:30:58.655 -03:00 [INF] Executing CreatedAtActionResult, writing value of type 'Project_Gon.Core.DTOs.Auth.LoginResponseDto'.
2026-02-10 12:30:58.665 -03:00 [DBG] Found the endpoints ["Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)"] for address (action=[Login],controller=[Auth])
2026-02-10 12:30:58.667 -03:00 [DBG] Successfully processed template api/Auth/login for Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api) resulting in /api/Auth/login and 
2026-02-10 12:30:58.669 -03:00 [DBG] Link generation succeeded for endpoints ["Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)"] with result /api/Auth/login
2026-02-10 12:30:58.674 -03:00 [INF] Executed action Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api) in 549.3708ms
2026-02-10 12:30:58.675 -03:00 [INF] Executed endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)'
2026-02-10 12:30:58.676 -03:00 [INF] HTTP POST /api/Auth/register responded 201 in 566.0990 ms
2026-02-10 12:30:58.677 -03:00 [DBG] 'AppDbContext' disposed.
2026-02-10 12:30:58.678 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:30:58.678 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-02-10 12:30:58.680 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/Auth/register - 201 null application/json; charset=utf-8 590.7738ms
2026-02-10 12:36:08.625 -03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-10 12:36:09.020 -03:00 [DBG] The index {'ProductoId'} was not created on entity type 'Stock' as the properties are already covered by the index {'ProductoId', 'SucursalId'}.
2026-02-10 12:36:09.023 -03:00 [DBG] The index {'EmpresaId'} was not created on entity type 'Usuario' as the properties are already covered by the index {'EmpresaId', 'Email'}.
2026-02-10 12:36:09.023 -03:00 [DBG] The index {'EmpresaId'} was not created on entity type 'Usuario' as the properties are already covered by the index {'EmpresaId', 'Rut'}.
2026-02-10 12:36:09.116 -03:00 [DBG] The property 'MovimientoStock.DevolucionId' was created in shadow state because there are no eligible CLR members with a matching name.
2026-02-10 12:36:09.185 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-02-10 12:36:09.199 -03:00 [DBG] Creating DbConnection.
2026-02-10 12:36:09.217 -03:00 [DBG] Created DbConnection. (18ms).
2026-02-10 12:36:09.220 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:36:09.292 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:36:09.296 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:36:09.300 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2026-02-10 12:36:09.302 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2026-02-10 12:36:09.306 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-02-10 12:36:09.326 -03:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-02-10 12:36:09.349 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:36:09.354 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 24ms reading results.
2026-02-10 12:36:09.356 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:36:09.359 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (2ms).
2026-02-10 12:36:09.468 -03:00 [DBG] Migrating using database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:36:09.470 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:36:09.472 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:36:09.619 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:36:09.620 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:36:09.621 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (1ms).
2026-02-10 12:36:09.622 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:36:09.623 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:36:09.649 -03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-02-10 12:36:09.650 -03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-02-10 12:36:09.651 -03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1ms).
2026-02-10 12:36:09.652 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2026-02-10 12:36:09.657 -03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2026-02-10 12:36:09.660 -03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2026-02-10 12:36:09.662 -03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2026-02-10 12:36:09.663 -03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2026-02-10 12:36:09.664 -03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-02-10 12:36:09.664 -03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-02-10 12:36:09.665 -03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1ms).
2026-02-10 12:36:09.666 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2026-02-10 12:36:09.667 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2026-02-10 12:36:09.668 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:36:09.669 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:36:09.669 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:36:09.670 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-02-10 12:36:09.672 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-02-10 12:36:09.673 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:36:09.674 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-02-10 12:36:09.678 -03:00 [INF] No migrations were applied. The database is already up to date.
2026-02-10 12:36:09.679 -03:00 [DBG] Committing transaction.
2026-02-10 12:36:09.688 -03:00 [DBG] Committed transaction.
2026-02-10 12:36:09.689 -03:00 [DBG] Disposing transaction.
2026-02-10 12:36:09.690 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:36:09.690 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-02-10 12:36:09.691 -03:00 [INF] Database migrations applied successfully
2026-02-10 12:36:09.693 -03:00 [DBG] 'AppDbContext' disposed.
2026-02-10 12:36:09.694 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:36:09.695 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (1ms).
2026-02-10 12:36:09.717 -03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-10 12:36:09.752 -03:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2026-02-10 12:36:09.765 -03:00 [INF] Project Gon API iniciada en ambiente: Development
2026-02-10 12:36:09.767 -03:00 [DBG] Hosting starting
2026-02-10 12:36:09.776 -03:00 [INF] User profile is available. Using 'C:\Users\Jossan\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-02-10 12:36:09.781 -03:00 [DBG] Reading data from file 'C:\Users\Jossan\AppData\Local\ASP.NET\DataProtection-Keys\key-7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c.xml'.
2026-02-10 12:36:09.786 -03:00 [DBG] Found key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c}.
2026-02-10 12:36:09.791 -03:00 [DBG] Considering key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} with expiration date 2026-04-28 18:20:11Z as default key.
2026-02-10 12:36:09.793 -03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2026-02-10 12:36:09.795 -03:00 [DBG] Decrypting secret element using Windows DPAPI.
2026-02-10 12:36:09.796 -03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2026-02-10 12:36:09.799 -03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2026-02-10 12:36:09.800 -03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2026-02-10 12:36:09.801 -03:00 [DBG] Using key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} as the default key.
2026-02-10 12:36:09.802 -03:00 [DBG] Key ring with default key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} was loaded during application startup.
2026-02-10 12:36:09.805 -03:00 [DBG] Middleware loaded
2026-02-10 12:36:09.806 -03:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16515 B).
2026-02-10 12:36:09.807 -03:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2026-02-10 12:36:09.856 -03:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2026-02-10 12:36:09.857 -03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-10 12:36:09.859 -03:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2026-02-10 12:36:09.886 -03:00 [INF] Now listening on: https://localhost:7058
2026-02-10 12:36:09.887 -03:00 [INF] Now listening on: http://localhost:5070
2026-02-10 12:36:09.887 -03:00 [DBG] Loaded hosting startup assembly Project_Gon.Api
2026-02-10 12:36:09.888 -03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-10 12:36:09.888 -03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-10 12:36:09.889 -03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-10 12:36:09.892 -03:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2026-02-10 12:36:09.895 -03:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2026-02-10 12:36:09.919 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-10 12:36:09.920 -03:00 [INF] Hosting environment: Development
2026-02-10 12:36:09.920 -03:00 [INF] Content root path: C:\Proyectos\Project_Gon\Project_Gon.Api
2026-02-10 12:36:09.922 -03:00 [DBG] Hosting started
2026-02-10 12:36:10.974 -03:00 [DBG] Connection id "0HNJ8N8F00QRE" accepted.
2026-02-10 12:36:10.975 -03:00 [DBG] Connection id "0HNJ8N8F00QRE" started.
2026-02-10 12:36:10.997 -03:00 [DBG] Connection 0HNJ8N8F00QRE established using the following protocol: "Tls12"
2026-02-10 12:36:11.018 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/index.html - null null
2026-02-10 12:36:11.080 -03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-10 12:36:11.081 -03:00 [DBG] Request did not match any endpoints
2026-02-10 12:36:11.109 -03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-10 12:36:11.110 -03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-10 12:36:11.116 -03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-10 12:36:11.117 -03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-10 12:36:11.118 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/index.html - 200 null text/html;charset=utf-8 101.2355ms
2026-02-10 12:36:11.138 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/_vs/browserLink - null null
2026-02-10 12:36:11.138 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/_framework/aspnetcore-browser-refresh.js - null null
2026-02-10 12:36:11.143 -03:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2026-02-10 12:36:11.144 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/_framework/aspnetcore-browser-refresh.js - 200 16515 application/javascript; charset=utf-8 6.0477ms
2026-02-10 12:36:11.162 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/_vs/browserLink - 200 null text/javascript; charset=UTF-8 24.0881ms
2026-02-10 12:36:11.285 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/v1/swagger.json - null null
2026-02-10 12:36:11.286 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/favicon-32x32.png - null null
2026-02-10 12:36:11.288 -03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-10 12:36:11.289 -03:00 [DBG] No candidates found for the request path '/swagger/favicon-32x32.png'
2026-02-10 12:36:11.290 -03:00 [DBG] Request did not match any endpoints
2026-02-10 12:36:11.291 -03:00 [DBG] Request did not match any endpoints
2026-02-10 12:36:11.296 -03:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2026-02-10 12:36:11.298 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/favicon-32x32.png - 200 628 image/png 11.6291ms
2026-02-10 12:36:11.323 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 38.0039ms
2026-02-10 12:36:12.244 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/index.html - null null
2026-02-10 12:36:12.248 -03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-02-10 12:36:12.248 -03:00 [DBG] Request did not match any endpoints
2026-02-10 12:36:12.249 -03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-02-10 12:36:12.249 -03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-02-10 12:36:12.251 -03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-02-10 12:36:12.251 -03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-02-10 12:36:12.252 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/index.html - 200 null text/html;charset=utf-8 7.6977ms
2026-02-10 12:36:12.273 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/swagger-ui-standalone-preset.js - null null
2026-02-10 12:36:12.273 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/swagger-ui-bundle.js - null null
2026-02-10 12:36:12.273 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/swagger-ui.css - null null
2026-02-10 12:36:12.273 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/_vs/browserLink - null null
2026-02-10 12:36:12.273 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/_framework/aspnetcore-browser-refresh.js - null null
2026-02-10 12:36:12.274 -03:00 [DBG] No candidates found for the request path '/swagger/swagger-ui-standalone-preset.js'
2026-02-10 12:36:12.275 -03:00 [DBG] No candidates found for the request path '/swagger/swagger-ui-bundle.js'
2026-02-10 12:36:12.276 -03:00 [DBG] No candidates found for the request path '/swagger/swagger-ui.css'
2026-02-10 12:36:12.279 -03:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2026-02-10 12:36:12.280 -03:00 [DBG] Request did not match any endpoints
2026-02-10 12:36:12.281 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.912ms
2026-02-10 12:36:12.281 -03:00 [DBG] Request did not match any endpoints
2026-02-10 12:36:12.281 -03:00 [DBG] Request did not match any endpoints
2026-02-10 12:36:12.282 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/_framework/aspnetcore-browser-refresh.js - 200 16515 application/javascript; charset=utf-8 9.1083ms
2026-02-10 12:36:12.285 -03:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2026-02-10 12:36:12.286 -03:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2026-02-10 12:36:12.289 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/swagger-ui-standalone-preset.js - 200 230280 text/javascript 16.1812ms
2026-02-10 12:36:12.289 -03:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2026-02-10 12:36:12.290 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/swagger-ui.css - 200 152034 text/css 17.2156ms
2026-02-10 12:36:12.293 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/swagger-ui-bundle.js - 200 1456926 text/javascript 20.044ms
2026-02-10 12:36:12.368 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/favicon-32x32.png - null null
2026-02-10 12:36:12.368 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/v1/swagger.json - null null
2026-02-10 12:36:12.370 -03:00 [DBG] No candidates found for the request path '/swagger/favicon-32x32.png'
2026-02-10 12:36:12.371 -03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-02-10 12:36:12.372 -03:00 [DBG] Request did not match any endpoints
2026-02-10 12:36:12.373 -03:00 [DBG] Request did not match any endpoints
2026-02-10 12:36:12.374 -03:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2026-02-10 12:36:12.375 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/favicon-32x32.png - 200 628 image/png 6.7465ms
2026-02-10 12:36:12.394 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 25.5156ms
2026-02-10 12:36:44.518 -03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-02-10 12:36:45.011 -03:00 [DBG] The index {'ProductoId'} was not created on entity type 'Stock' as the properties are already covered by the index {'ProductoId', 'SucursalId'}.
2026-02-10 12:36:45.013 -03:00 [DBG] The index {'EmpresaId'} was not created on entity type 'Usuario' as the properties are already covered by the index {'EmpresaId', 'Email'}.
2026-02-10 12:36:45.013 -03:00 [DBG] The index {'EmpresaId'} was not created on entity type 'Usuario' as the properties are already covered by the index {'EmpresaId', 'Rut'}.
2026-02-10 12:36:45.100 -03:00 [DBG] The property 'MovimientoStock.DevolucionId' was created in shadow state because there are no eligible CLR members with a matching name.
2026-02-10 12:36:45.178 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-02-10 12:36:45.193 -03:00 [DBG] Creating DbConnection.
2026-02-10 12:36:45.269 -03:00 [DBG] Created DbConnection. (75ms).
2026-02-10 12:36:45.272 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:36:45.474 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:36:45.478 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:36:45.482 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2026-02-10 12:36:45.483 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2026-02-10 12:36:45.487 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-02-10 12:36:45.509 -03:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-02-10 12:36:45.540 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:36:45.546 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 32ms reading results.
2026-02-10 12:36:45.548 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:36:45.550 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (2ms).
2026-02-10 12:36:45.672 -03:00 [DBG] Migrating using database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:36:45.674 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:36:45.677 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:36:45.711 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:36:45.712 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:36:45.714 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (2ms).
2026-02-10 12:36:45.715 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:36:45.716 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:36:45.746 -03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-02-10 12:36:45.747 -03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-02-10 12:36:45.748 -03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1ms).
2026-02-10 12:36:45.748 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2026-02-10 12:36:45.754 -03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2026-02-10 12:36:45.757 -03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2026-02-10 12:36:45.760 -03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2026-02-10 12:36:45.761 -03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2026-02-10 12:36:45.762 -03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-02-10 12:36:45.763 -03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-02-10 12:36:45.763 -03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1ms).
2026-02-10 12:36:45.764 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2026-02-10 12:36:45.765 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2026-02-10 12:36:45.766 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-02-10 12:36:45.767 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-02-10 12:36:45.767 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-02-10 12:36:45.768 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-02-10 12:36:45.770 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-02-10 12:36:45.771 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:36:45.772 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-02-10 12:36:45.777 -03:00 [INF] No migrations were applied. The database is already up to date.
2026-02-10 12:36:45.779 -03:00 [DBG] Committing transaction.
2026-02-10 12:36:45.781 -03:00 [DBG] Committed transaction.
2026-02-10 12:36:45.782 -03:00 [DBG] Disposing transaction.
2026-02-10 12:36:45.783 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:36:45.783 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-02-10 12:36:45.785 -03:00 [INF] Database migrations applied successfully
2026-02-10 12:36:45.786 -03:00 [DBG] 'AppDbContext' disposed.
2026-02-10 12:36:45.788 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-02-10 12:36:45.789 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-02-10 12:36:45.832 -03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-02-10 12:36:45.891 -03:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2026-02-10 12:36:45.907 -03:00 [INF] Project Gon API iniciada en ambiente: Development
2026-02-10 12:36:45.909 -03:00 [DBG] Hosting starting
2026-02-10 12:36:45.945 -03:00 [INF] User profile is available. Using 'C:\Users\Jossan\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-02-10 12:36:45.955 -03:00 [DBG] Reading data from file 'C:\Users\Jossan\AppData\Local\ASP.NET\DataProtection-Keys\key-7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c.xml'.
2026-02-10 12:36:45.966 -03:00 [DBG] Found key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c}.
2026-02-10 12:36:45.991 -03:00 [DBG] Considering key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} with expiration date 2026-04-28 18:20:11Z as default key.
2026-02-10 12:36:45.993 -03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2026-02-10 12:36:45.995 -03:00 [DBG] Decrypting secret element using Windows DPAPI.
2026-02-10 12:36:45.997 -03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2026-02-10 12:36:45.999 -03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2026-02-10 12:36:46.001 -03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2026-02-10 12:36:46.003 -03:00 [DBG] Using key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} as the default key.
2026-02-10 12:36:46.004 -03:00 [DBG] Key ring with default key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} was loaded during application startup.
2026-02-10 12:36:46.010 -03:00 [DBG] Middleware loaded
2026-02-10 12:36:46.012 -03:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16515 B).
2026-02-10 12:36:46.013 -03:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2026-02-10 12:36:46.131 -03:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2026-02-10 12:36:46.132 -03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-02-10 12:36:46.162 -03:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2026-02-10 12:36:46.212 -03:00 [INF] Now listening on: https://localhost:7058
2026-02-10 12:36:46.213 -03:00 [INF] Now listening on: http://localhost:5070
2026-02-10 12:36:46.213 -03:00 [DBG] Loaded hosting startup assembly Project_Gon.Api
2026-02-10 12:36:46.214 -03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-02-10 12:36:46.214 -03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-02-10 12:36:46.215 -03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-02-10 12:36:46.219 -03:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2026-02-10 12:36:46.227 -03:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2026-02-10 12:36:46.257 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-02-10 12:36:46.258 -03:00 [INF] Hosting environment: Development
2026-02-10 12:36:46.258 -03:00 [INF] Content root path: C:\Proyectos\Project_Gon\Project_Gon.Api
2026-02-10 12:36:46.260 -03:00 [DBG] Hosting started
