2026-01-28 15:47:25.569 -03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-01-28 15:47:25.974 -03:00 [DBG] The index {'ProductoId'} was not created on entity type 'Stock' as the properties are already covered by the index {'ProductoId', 'SucursalId'}.
2026-01-28 15:47:25.976 -03:00 [DBG] The index {'EmpresaId'} was not created on entity type 'Usuario' as the properties are already covered by the index {'EmpresaId', 'Email'}.
2026-01-28 15:47:25.977 -03:00 [DBG] The index {'EmpresaId'} was not created on entity type 'Usuario' as the properties are already covered by the index {'EmpresaId', 'Rut'}.
2026-01-28 15:47:26.060 -03:00 [DBG] The property 'MovimientoStock.DevolucionId' was created in shadow state because there are no eligible CLR members with a matching name.
2026-01-28 15:47:26.136 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 15:47:26.150 -03:00 [DBG] Creating DbConnection.
2026-01-28 15:47:26.167 -03:00 [DBG] Created DbConnection. (16ms).
2026-01-28 15:47:26.171 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 15:47:26.252 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 15:47:26.256 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 15:47:26.259 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2026-01-28 15:47:26.260 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2026-01-28 15:47:26.264 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-28 15:47:26.287 -03:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-28 15:47:26.308 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 15:47:26.313 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 22ms reading results.
2026-01-28 15:47:26.315 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 15:47:26.318 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (2ms).
2026-01-28 15:47:26.432 -03:00 [DBG] Migrating using database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 15:47:26.434 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 15:47:26.436 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 15:47:26.472 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 15:47:26.472 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 15:47:26.475 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (2ms).
2026-01-28 15:47:26.476 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 15:47:26.477 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 15:47:26.504 -03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-01-28 15:47:26.505 -03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-01-28 15:47:26.506 -03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1ms).
2026-01-28 15:47:26.507 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2026-01-28 15:47:26.512 -03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2026-01-28 15:47:26.515 -03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2026-01-28 15:47:26.517 -03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2026-01-28 15:47:26.519 -03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2026-01-28 15:47:26.519 -03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-01-28 15:47:26.520 -03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-01-28 15:47:26.520 -03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1ms).
2026-01-28 15:47:26.521 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2026-01-28 15:47:26.522 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2026-01-28 15:47:26.524 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 15:47:26.524 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 15:47:26.525 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 15:47:26.525 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-28 15:47:26.527 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-28 15:47:26.528 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 15:47:26.528 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-01-28 15:47:26.533 -03:00 [INF] No migrations were applied. The database is already up to date.
2026-01-28 15:47:26.534 -03:00 [DBG] Committing transaction.
2026-01-28 15:47:26.536 -03:00 [DBG] Committed transaction.
2026-01-28 15:47:26.540 -03:00 [DBG] Disposing transaction.
2026-01-28 15:47:26.540 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 15:47:26.541 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 15:47:26.543 -03:00 [INF] Database migrations applied successfully
2026-01-28 15:47:26.544 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 15:47:26.546 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 15:47:26.547 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 15:47:26.573 -03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-01-28 15:47:26.603 -03:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2026-01-28 15:47:26.619 -03:00 [INF] Project Gon API iniciada en ambiente: Development
2026-01-28 15:47:26.622 -03:00 [DBG] Hosting starting
2026-01-28 15:47:26.631 -03:00 [INF] User profile is available. Using 'C:\Users\Jossan\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-28 15:47:26.636 -03:00 [DBG] Reading data from file 'C:\Users\Jossan\AppData\Local\ASP.NET\DataProtection-Keys\key-7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c.xml'.
2026-01-28 15:47:26.641 -03:00 [DBG] Found key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c}.
2026-01-28 15:47:26.647 -03:00 [DBG] Considering key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} with expiration date 2026-04-28 18:20:11Z as default key.
2026-01-28 15:47:26.650 -03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2026-01-28 15:47:26.651 -03:00 [DBG] Decrypting secret element using Windows DPAPI.
2026-01-28 15:47:26.652 -03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2026-01-28 15:47:26.654 -03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2026-01-28 15:47:26.655 -03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2026-01-28 15:47:26.656 -03:00 [DBG] Using key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} as the default key.
2026-01-28 15:47:26.657 -03:00 [DBG] Key ring with default key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} was loaded during application startup.
2026-01-28 15:47:26.660 -03:00 [DBG] Middleware loaded
2026-01-28 15:47:26.661 -03:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16515 B).
2026-01-28 15:47:26.662 -03:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2026-01-28 15:47:26.707 -03:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2026-01-28 15:47:26.708 -03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-01-28 15:47:26.711 -03:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2026-01-28 15:47:26.738 -03:00 [INF] Now listening on: https://localhost:7058
2026-01-28 15:47:26.739 -03:00 [INF] Now listening on: http://localhost:5070
2026-01-28 15:47:26.740 -03:00 [DBG] Loaded hosting startup assembly Project_Gon.Api
2026-01-28 15:47:26.740 -03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-01-28 15:47:26.741 -03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-01-28 15:47:26.741 -03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-01-28 15:47:26.745 -03:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2026-01-28 15:47:26.748 -03:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2026-01-28 15:47:26.836 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-28 15:47:26.837 -03:00 [INF] Hosting environment: Development
2026-01-28 15:47:26.837 -03:00 [INF] Content root path: C:\Proyectos\Project_Gon\Project_Gon.Api
2026-01-28 15:47:26.839 -03:00 [DBG] Hosting started
2026-01-28 15:48:32.929 -03:00 [DBG] Connection id "0HNIUJNB2ONBG" accepted.
2026-01-28 15:48:32.931 -03:00 [DBG] Connection id "0HNIUJNB2ONBG" started.
2026-01-28 15:48:33.003 -03:00 [DBG] Connection 0HNIUJNB2ONBG established using the following protocol: "Tls12"
2026-01-28 15:48:33.020 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/api/empresas/1 - application/json 119
2026-01-28 15:48:33.036 -03:00 [DBG] 1 candidate(s) found for the request path '/api/empresas/1'
2026-01-28 15:48:33.037 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.EmpresasController.GetById (Project_Gon.Api)' with route pattern 'api/Empresas/{id}' is valid for the request path '/api/empresas/1'
2026-01-28 15:48:33.038 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.EmpresasController.GetById (Project_Gon.Api)'
2026-01-28 15:48:33.043 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 15:48:33.055 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 15:48:33.057 -03:00 [INF] Executing endpoint 'Project_Gon.Api.Controllers.EmpresasController.GetById (Project_Gon.Api)'
2026-01-28 15:48:33.067 -03:00 [INF] Route matched with {action = "GetById", controller = "Empresas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetById(Int32) on controller Project_Gon.Api.Controllers.EmpresasController (Project_Gon.Api).
2026-01-28 15:48:33.068 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-01-28 15:48:33.069 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-01-28 15:48:33.070 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-01-28 15:48:33.071 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-01-28 15:48:33.072 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-01-28 15:48:33.074 -03:00 [DBG] Executing controller factory for controller Project_Gon.Api.Controllers.EmpresasController (Project_Gon.Api)
2026-01-28 15:48:33.136 -03:00 [DBG] Executed controller factory for controller Project_Gon.Api.Controllers.EmpresasController (Project_Gon.Api)
2026-01-28 15:48:33.139 -03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2026-01-28 15:48:33.141 -03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2026-01-28 15:48:33.142 -03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2026-01-28 15:48:33.143 -03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2026-01-28 15:48:33.143 -03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2026-01-28 15:48:33.149 -03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2026-01-28 15:48:33.164 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 15:48:33.200 -03:00 [DBG] Compiling query expression: 
'DbSet<Empresa>()
    .FirstOrDefault(e => EF.Property<int>(e, "Id") == __p_0)'
2026-01-28 15:48:33.323 -03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Empresa>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Empresa>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Empresa.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Empresa.Activo (bool) Required, 1], [Property: Empresa.Ciudad (string), 2], [Property: Empresa.CreatedAt (DateTime) Required, 3], [Property: Empresa.Direccion (string), 4], [Property: Empresa.Nombre (string) Required MaxLength(255), 5], [Property: Empresa.Region (string), 6], [Property: Empresa.Rut (string), 7], [Property: Empresa.UpdatedAt (DateTime?), 8] }
            SELECT TOP(1) e.Id, e.Activo, e.Ciudad, e.CreatedAt, e.Direccion, e.Nombre, e.Region, e.Rut, e.UpdatedAt
            FROM Empresas AS e
            WHERE e.Id == @__p_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Empresa.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Empresa.Activo (bool) Required, 1], [Property: Empresa.Ciudad (string), 2], [Property: Empresa.CreatedAt (DateTime) Required, 3], [Property: Empresa.Direccion (string), 4], [Property: Empresa.Nombre (string) Required MaxLength(255), 5], [Property: Empresa.Region (string), 6], [Property: Empresa.Rut (string), 7], [Property: Empresa.UpdatedAt (DateTime?), 8] }
            SELECT TOP(1) e.Id, e.Activo, e.Ciudad, e.CreatedAt, e.Direccion, e.Nombre, e.Region, e.Rut, e.UpdatedAt
            FROM Empresas AS e
            WHERE e.Id == @__p_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Empresa entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Empresa instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Empresa);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Empresa.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Empresa").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (Empresa)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Empresa | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Empresa")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Empresa | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Empresa")]: 
                            {
                                return 
                                {
                                    Empresa instance;
                                    instance = new Empresa();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Activo>k__BackingField = dataReader.GetBoolean(1);
                                    instance.<Ciudad>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(3);
                                    instance.<Direccion>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<Nombre>k__BackingField = dataReader.GetString(5);
                                    instance.<Region>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                    instance.<Rut>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(8) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(8);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Empresa | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Empresa")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Empresa)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: Project_Gon.Infrastructure.Data.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2026-01-28 15:48:33.347 -03:00 [DBG] Creating DbConnection.
2026-01-28 15:48:33.348 -03:00 [DBG] Created DbConnection. (0ms).
2026-01-28 15:48:33.349 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 15:48:33.350 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 15:48:33.351 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 15:48:33.351 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 15:48:33.354 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2026-01-28 15:48:33.355 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 15:48:33.366 -03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 15:48:33.370 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 15:48:33.371 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 3ms reading results.
2026-01-28 15:48:33.372 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 15:48:33.373 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 15:48:33.376 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-01-28 15:48:33.379 -03:00 [DBG] No information found on request to perform content negotiation.
2026-01-28 15:48:33.379 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-01-28 15:48:33.379 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-01-28 15:48:33.380 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2026-01-28 15:48:33.381 -03:00 [INF] Executing NotFoundObjectResult, writing value of type 'System.String'.
2026-01-28 15:48:33.384 -03:00 [INF] Executed action Project_Gon.Api.Controllers.EmpresasController.GetById (Project_Gon.Api) in 309.6936ms
2026-01-28 15:48:33.388 -03:00 [INF] Executed endpoint 'Project_Gon.Api.Controllers.EmpresasController.GetById (Project_Gon.Api)'
2026-01-28 15:48:33.390 -03:00 [INF] HTTP GET /api/empresas/1 responded 404 in 345.0039 ms
2026-01-28 15:48:33.394 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 15:48:33.396 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 15:48:33.397 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (1ms).
2026-01-28 15:48:33.399 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/api/empresas/1 - 404 null text/plain; charset=utf-8 379.612ms
2026-01-28 15:48:33.401 -03:00 [DBG] Connection id "0HNIUJNB2ONBG", Request id "0HNIUJNB2ONBG:00000001": started reading request body.
2026-01-28 15:48:33.402 -03:00 [DBG] Connection id "0HNIUJNB2ONBG", Request id "0HNIUJNB2ONBG:00000001": done reading request body.
2026-01-28 15:48:38.433 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/api/empresas/2 - application/json 119
2026-01-28 15:48:38.435 -03:00 [DBG] 1 candidate(s) found for the request path '/api/empresas/2'
2026-01-28 15:48:38.435 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.EmpresasController.GetById (Project_Gon.Api)' with route pattern 'api/Empresas/{id}' is valid for the request path '/api/empresas/2'
2026-01-28 15:48:38.436 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.EmpresasController.GetById (Project_Gon.Api)'
2026-01-28 15:48:38.437 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 15:48:38.438 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 15:48:38.439 -03:00 [INF] Executing endpoint 'Project_Gon.Api.Controllers.EmpresasController.GetById (Project_Gon.Api)'
2026-01-28 15:48:38.439 -03:00 [INF] Route matched with {action = "GetById", controller = "Empresas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetById(Int32) on controller Project_Gon.Api.Controllers.EmpresasController (Project_Gon.Api).
2026-01-28 15:48:38.440 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-01-28 15:48:38.441 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-01-28 15:48:38.442 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-01-28 15:48:38.443 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-01-28 15:48:38.444 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-01-28 15:48:38.445 -03:00 [DBG] Executing controller factory for controller Project_Gon.Api.Controllers.EmpresasController (Project_Gon.Api)
2026-01-28 15:48:38.447 -03:00 [DBG] Executed controller factory for controller Project_Gon.Api.Controllers.EmpresasController (Project_Gon.Api)
2026-01-28 15:48:38.448 -03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2026-01-28 15:48:38.449 -03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2026-01-28 15:48:38.450 -03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2026-01-28 15:48:38.450 -03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2026-01-28 15:48:38.451 -03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2026-01-28 15:48:38.452 -03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2026-01-28 15:48:38.482 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 15:48:38.486 -03:00 [DBG] Creating DbConnection.
2026-01-28 15:48:38.487 -03:00 [DBG] Created DbConnection. (0ms).
2026-01-28 15:48:38.488 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 15:48:38.488 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 15:48:38.489 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 15:48:38.489 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 15:48:38.490 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 15:48:38.491 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 15:48:38.493 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 15:48:38.518 -03:00 [DBG] Context 'AppDbContext' started tracking 'Empresa' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 15:48:38.536 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 15:48:38.537 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 42ms reading results.
2026-01-28 15:48:38.538 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 15:48:38.538 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 15:48:38.543 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-01-28 15:48:38.544 -03:00 [DBG] No information found on request to perform content negotiation.
2026-01-28 15:48:38.545 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-01-28 15:48:38.546 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-01-28 15:48:38.546 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-01-28 15:48:38.547 -03:00 [INF] Executing OkObjectResult, writing value of type 'Project_Gon.Core.DTOs.Empresa.EmpresaDto'.
2026-01-28 15:48:38.554 -03:00 [INF] Executed action Project_Gon.Api.Controllers.EmpresasController.GetById (Project_Gon.Api) in 108.7848ms
2026-01-28 15:48:38.554 -03:00 [INF] Executed endpoint 'Project_Gon.Api.Controllers.EmpresasController.GetById (Project_Gon.Api)'
2026-01-28 15:48:38.555 -03:00 [INF] HTTP GET /api/empresas/2 responded 200 in 117.4170 ms
2026-01-28 15:48:38.556 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 15:48:38.556 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 15:48:38.557 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 15:48:38.558 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/api/empresas/2 - 200 null application/json; charset=utf-8 125.3908ms
2026-01-28 15:48:38.560 -03:00 [DBG] Connection id "0HNIUJNB2ONBG", Request id "0HNIUJNB2ONBG:00000003": started reading request body.
2026-01-28 15:48:38.560 -03:00 [DBG] Connection id "0HNIUJNB2ONBG", Request id "0HNIUJNB2ONBG:00000003": done reading request body.
2026-01-28 15:49:40.567 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/auth/register - application/json 145
2026-01-28 15:49:40.569 -03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/register'
2026-01-28 15:49:40.569 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)' with route pattern 'api/Auth/register' is valid for the request path '/api/auth/register'
2026-01-28 15:49:40.570 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)'
2026-01-28 15:49:40.571 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 15:49:40.572 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 15:49:40.573 -03:00 [INF] Executing endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)'
2026-01-28 15:49:40.577 -03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(Project_Gon.Core.DTOs.Auth.RegisterDto) on controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api).
2026-01-28 15:49:40.578 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-01-28 15:49:40.579 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-01-28 15:49:40.579 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-01-28 15:49:40.581 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-01-28 15:49:40.581 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-01-28 15:49:40.582 -03:00 [DBG] Executing controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-01-28 15:49:40.584 -03:00 [DBG] Executed controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-01-28 15:49:40.585 -03:00 [DBG] Attempting to bind parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto' ...
2026-01-28 15:49:40.586 -03:00 [DBG] Attempting to bind parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto' using the name '' in request data ...
2026-01-28 15:49:40.587 -03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2026-01-28 15:49:40.593 -03:00 [DBG] Connection id "0HNIUJNB2ONBG", Request id "0HNIUJNB2ONBG:00000005": started reading request body.
2026-01-28 15:49:40.593 -03:00 [DBG] Connection id "0HNIUJNB2ONBG", Request id "0HNIUJNB2ONBG:00000005": done reading request body.
2026-01-28 15:49:40.597 -03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Project_Gon.Core.DTOs.Auth.RegisterDto'
2026-01-28 15:49:40.598 -03:00 [DBG] Done attempting to bind parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto'.
2026-01-28 15:49:40.598 -03:00 [DBG] Done attempting to bind parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto'.
2026-01-28 15:49:40.599 -03:00 [DBG] Attempting to validate the bound parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto' ...
2026-01-28 15:49:40.674 -03:00 [DBG] Done attempting to validate the bound parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto'.
2026-01-28 15:49:40.675 -03:00 [DBG] The request has model state errors, returning an error response.
2026-01-28 15:49:40.676 -03:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2026-01-28 15:49:40.677 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-01-28 15:49:40.678 -03:00 [DBG] No information found on request to perform content negotiation.
2026-01-28 15:49:40.678 -03:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2026-01-28 15:49:40.680 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2026-01-28 15:49:40.680 -03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2026-01-28 15:49:40.689 -03:00 [INF] Executed action Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api) in 107.3561ms
2026-01-28 15:49:40.690 -03:00 [INF] Executed endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)'
2026-01-28 15:49:40.691 -03:00 [INF] HTTP POST /api/auth/register responded 400 in 119.5345 ms
2026-01-28 15:49:40.692 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/auth/register - 400 null application/problem+json; charset=utf-8 124.577ms
2026-01-28 15:50:11.468 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/empresas/2/sucursales - application/json 145
2026-01-28 15:50:11.470 -03:00 [DBG] No candidates found for the request path '/empresas/2/sucursales'
2026-01-28 15:50:11.471 -03:00 [DBG] Request did not match any endpoints
2026-01-28 15:50:11.471 -03:00 [DBG] POST requests are not supported
2026-01-28 15:50:11.472 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 15:50:11.472 -03:00 [INF] HTTP POST /empresas/2/sucursales responded 404 in 0.5930 ms
2026-01-28 15:50:11.473 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/empresas/2/sucursales - 404 0 null 4.6876ms
2026-01-28 15:50:11.475 -03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST https://localhost:7058/empresas/2/sucursales, Response status code: 404
2026-01-28 15:50:11.476 -03:00 [DBG] Connection id "0HNIUJNB2ONBG", Request id "0HNIUJNB2ONBG:00000007": started reading request body.
2026-01-28 15:50:11.476 -03:00 [DBG] Connection id "0HNIUJNB2ONBG", Request id "0HNIUJNB2ONBG:00000007": done reading request body.
2026-01-28 15:50:50.463 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/empresas/ - application/json 145
2026-01-28 15:50:50.464 -03:00 [DBG] No candidates found for the request path '/empresas/'
2026-01-28 15:50:50.465 -03:00 [DBG] Request did not match any endpoints
2026-01-28 15:50:50.465 -03:00 [DBG] POST requests are not supported
2026-01-28 15:50:50.466 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 15:50:50.466 -03:00 [INF] HTTP POST /empresas/ responded 404 in 0.6193 ms
2026-01-28 15:50:50.467 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/empresas/ - 404 0 null 4.1683ms
2026-01-28 15:50:50.469 -03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST https://localhost:7058/empresas/, Response status code: 404
2026-01-28 15:50:50.470 -03:00 [DBG] Connection id "0HNIUJNB2ONBG", Request id "0HNIUJNB2ONBG:00000009": started reading request body.
2026-01-28 15:50:50.470 -03:00 [DBG] Connection id "0HNIUJNB2ONBG", Request id "0HNIUJNB2ONBG:00000009": done reading request body.
2026-01-28 15:50:51.444 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/empresas/ - application/json 145
2026-01-28 15:50:51.445 -03:00 [DBG] No candidates found for the request path '/empresas/'
2026-01-28 15:50:51.446 -03:00 [DBG] Request did not match any endpoints
2026-01-28 15:50:51.446 -03:00 [DBG] POST requests are not supported
2026-01-28 15:50:51.447 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 15:50:51.447 -03:00 [INF] HTTP POST /empresas/ responded 404 in 0.5621 ms
2026-01-28 15:50:51.448 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/empresas/ - 404 0 null 3.9406ms
2026-01-28 15:50:51.450 -03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST https://localhost:7058/empresas/, Response status code: 404
2026-01-28 15:50:51.451 -03:00 [DBG] Connection id "0HNIUJNB2ONBG", Request id "0HNIUJNB2ONBG:0000000B": started reading request body.
2026-01-28 15:50:51.452 -03:00 [DBG] Connection id "0HNIUJNB2ONBG", Request id "0HNIUJNB2ONBG:0000000B": done reading request body.
2026-01-28 15:51:02.727 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/empresas/ - application/json 145
2026-01-28 15:51:02.729 -03:00 [DBG] No candidates found for the request path '/empresas/'
2026-01-28 15:51:02.730 -03:00 [DBG] Request did not match any endpoints
2026-01-28 15:51:02.730 -03:00 [DBG] POST requests are not supported
2026-01-28 15:51:02.731 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 15:51:02.731 -03:00 [INF] HTTP POST /empresas/ responded 404 in 0.6659 ms
2026-01-28 15:51:02.732 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/empresas/ - 404 0 null 4.7875ms
2026-01-28 15:51:02.734 -03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST https://localhost:7058/empresas/, Response status code: 404
2026-01-28 15:51:02.735 -03:00 [DBG] Connection id "0HNIUJNB2ONBG", Request id "0HNIUJNB2ONBG:0000000D": started reading request body.
2026-01-28 15:51:02.736 -03:00 [DBG] Connection id "0HNIUJNB2ONBG", Request id "0HNIUJNB2ONBG:0000000D": done reading request body.
2026-01-28 15:51:06.794 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/empresas/ - application/json 145
2026-01-28 15:51:06.800 -03:00 [DBG] No candidates found for the request path '/empresas/'
2026-01-28 15:51:06.802 -03:00 [DBG] Request did not match any endpoints
2026-01-28 15:51:06.804 -03:00 [DBG] POST requests are not supported
2026-01-28 15:51:06.805 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 15:51:06.805 -03:00 [INF] HTTP POST /empresas/ responded 404 in 0.8184 ms
2026-01-28 15:51:06.807 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/empresas/ - 404 0 null 13.0944ms
2026-01-28 15:51:06.832 -03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST https://localhost:7058/empresas/, Response status code: 404
2026-01-28 15:51:06.834 -03:00 [DBG] Connection id "0HNIUJNB2ONBG", Request id "0HNIUJNB2ONBG:0000000F": started reading request body.
2026-01-28 15:51:06.835 -03:00 [DBG] Connection id "0HNIUJNB2ONBG", Request id "0HNIUJNB2ONBG:0000000F": done reading request body.
2026-01-28 15:51:08.159 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/empresas/ - application/json 145
2026-01-28 15:51:08.161 -03:00 [DBG] No candidates found for the request path '/empresas/'
2026-01-28 15:51:08.161 -03:00 [DBG] Request did not match any endpoints
2026-01-28 15:51:08.165 -03:00 [DBG] POST requests are not supported
2026-01-28 15:51:08.166 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 15:51:08.167 -03:00 [INF] HTTP POST /empresas/ responded 404 in 0.9097 ms
2026-01-28 15:51:08.168 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/empresas/ - 404 0 null 9.0001ms
2026-01-28 15:51:08.171 -03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST https://localhost:7058/empresas/, Response status code: 404
2026-01-28 15:51:08.173 -03:00 [DBG] Connection id "0HNIUJNB2ONBG", Request id "0HNIUJNB2ONBG:00000011": started reading request body.
2026-01-28 15:51:08.174 -03:00 [DBG] Connection id "0HNIUJNB2ONBG", Request id "0HNIUJNB2ONBG:00000011": done reading request body.
2026-01-28 15:51:35.645 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/empresas/ - application/json 145
2026-01-28 15:51:35.647 -03:00 [DBG] 1 candidate(s) found for the request path '/api/empresas/'
2026-01-28 15:51:35.648 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.EmpresasController.Create (Project_Gon.Api)' with route pattern 'api/Empresas' is valid for the request path '/api/empresas/'
2026-01-28 15:51:35.649 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.EmpresasController.Create (Project_Gon.Api)'
2026-01-28 15:51:35.650 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 15:51:35.658 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 15:51:35.659 -03:00 [INF] Executing endpoint 'Project_Gon.Api.Controllers.EmpresasController.Create (Project_Gon.Api)'
2026-01-28 15:51:35.662 -03:00 [INF] Route matched with {action = "Create", controller = "Empresas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(Project_Gon.Core.DTOs.Empresa.CreateEmpresaDto) on controller Project_Gon.Api.Controllers.EmpresasController (Project_Gon.Api).
2026-01-28 15:51:35.664 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-01-28 15:51:35.664 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-01-28 15:51:35.665 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-01-28 15:51:35.666 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-01-28 15:51:35.667 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-01-28 15:51:35.668 -03:00 [DBG] Executing controller factory for controller Project_Gon.Api.Controllers.EmpresasController (Project_Gon.Api)
2026-01-28 15:51:35.669 -03:00 [DBG] Executed controller factory for controller Project_Gon.Api.Controllers.EmpresasController (Project_Gon.Api)
2026-01-28 15:51:35.670 -03:00 [DBG] Attempting to bind parameter 'createDto' of type 'Project_Gon.Core.DTOs.Empresa.CreateEmpresaDto' ...
2026-01-28 15:51:35.671 -03:00 [DBG] Attempting to bind parameter 'createDto' of type 'Project_Gon.Core.DTOs.Empresa.CreateEmpresaDto' using the name '' in request data ...
2026-01-28 15:51:35.672 -03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2026-01-28 15:51:35.674 -03:00 [DBG] Connection id "0HNIUJNB2ONBG", Request id "0HNIUJNB2ONBG:00000013": started reading request body.
2026-01-28 15:51:35.674 -03:00 [DBG] Connection id "0HNIUJNB2ONBG", Request id "0HNIUJNB2ONBG:00000013": done reading request body.
2026-01-28 15:51:35.676 -03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Project_Gon.Core.DTOs.Empresa.CreateEmpresaDto'
2026-01-28 15:51:35.677 -03:00 [DBG] Done attempting to bind parameter 'createDto' of type 'Project_Gon.Core.DTOs.Empresa.CreateEmpresaDto'.
2026-01-28 15:51:35.678 -03:00 [DBG] Done attempting to bind parameter 'createDto' of type 'Project_Gon.Core.DTOs.Empresa.CreateEmpresaDto'.
2026-01-28 15:51:35.679 -03:00 [DBG] Attempting to validate the bound parameter 'createDto' of type 'Project_Gon.Core.DTOs.Empresa.CreateEmpresaDto' ...
2026-01-28 15:51:35.681 -03:00 [DBG] Done attempting to validate the bound parameter 'createDto' of type 'Project_Gon.Core.DTOs.Empresa.CreateEmpresaDto'.
2026-01-28 15:51:35.685 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 15:51:35.700 -03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Empresa.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 15:51:35.708 -03:00 [DBG] Context 'AppDbContext' started tracking 'Empresa' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 15:51:35.710 -03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2026-01-28 15:51:35.713 -03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2026-01-28 15:51:35.721 -03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2026-01-28 15:51:35.749 -03:00 [DBG] Creating DbConnection.
2026-01-28 15:51:35.749 -03:00 [DBG] Created DbConnection. (0ms).
2026-01-28 15:51:35.750 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 15:51:35.751 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 15:51:35.752 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 15:51:35.752 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 15:51:35.753 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 15:51:35.754 -03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?', @p5='?', @p6='?', @p7='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Empresas" ("Activo", "Ciudad", "CreatedAt", "Direccion", "Nombre", "Region", "Rut", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "Id";
2026-01-28 15:51:35.758 -03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?', @p5='?', @p6='?', @p7='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Empresas" ("Activo", "Ciudad", "CreatedAt", "Direccion", "Nombre", "Region", "Rut", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "Id";
2026-01-28 15:51:35.764 -03:00 [DBG] The foreign key property 'Empresa.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-01-28 15:51:35.767 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 15:51:35.768 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 8ms reading results.
2026-01-28 15:51:35.769 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 15:51:35.769 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 15:51:35.775 -03:00 [DBG] An entity of type 'Empresa' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 15:51:35.777 -03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2026-01-28 15:51:35.779 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-01-28 15:51:35.780 -03:00 [DBG] No information found on request to perform content negotiation.
2026-01-28 15:51:35.780 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-01-28 15:51:35.781 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-01-28 15:51:35.781 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-01-28 15:51:35.782 -03:00 [INF] Executing CreatedAtActionResult, writing value of type 'Project_Gon.Core.DTOs.Empresa.EmpresaDto'.
2026-01-28 15:51:35.791 -03:00 [DBG] Found the endpoints ["Project_Gon.Api.Controllers.EmpresasController.GetById (Project_Gon.Api)"] for address (id=[3],action=[GetById],controller=[Empresas])
2026-01-28 15:51:35.793 -03:00 [DBG] Successfully processed template api/Empresas/{id} for Project_Gon.Api.Controllers.EmpresasController.GetById (Project_Gon.Api) resulting in /api/Empresas/3 and 
2026-01-28 15:51:35.794 -03:00 [DBG] Link generation succeeded for endpoints ["Project_Gon.Api.Controllers.EmpresasController.GetById (Project_Gon.Api)"] with result /api/Empresas/3
2026-01-28 15:51:35.795 -03:00 [INF] Executed action Project_Gon.Api.Controllers.EmpresasController.Create (Project_Gon.Api) in 127.3895ms
2026-01-28 15:51:35.796 -03:00 [INF] Executed endpoint 'Project_Gon.Api.Controllers.EmpresasController.Create (Project_Gon.Api)'
2026-01-28 15:51:35.796 -03:00 [INF] HTTP POST /api/empresas/ responded 201 in 138.7359 ms
2026-01-28 15:51:35.797 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 15:51:35.798 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 15:51:35.798 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 15:51:35.800 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/empresas/ - 201 null application/json; charset=utf-8 154.3339ms
2026-01-28 15:51:59.595 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/empresas/2/sucursales - application/json 145
2026-01-28 15:51:59.602 -03:00 [DBG] No candidates found for the request path '/api/empresas/2/sucursales'
2026-01-28 15:51:59.603 -03:00 [DBG] Request did not match any endpoints
2026-01-28 15:51:59.603 -03:00 [DBG] POST requests are not supported
2026-01-28 15:51:59.604 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 15:51:59.604 -03:00 [INF] HTTP POST /api/empresas/2/sucursales responded 404 in 0.5204 ms
2026-01-28 15:51:59.605 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/empresas/2/sucursales - 404 0 null 9.3959ms
2026-01-28 15:51:59.606 -03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST https://localhost:7058/api/empresas/2/sucursales, Response status code: 404
2026-01-28 15:51:59.607 -03:00 [DBG] Connection id "0HNIUJNB2ONBG", Request id "0HNIUJNB2ONBG:00000015": started reading request body.
2026-01-28 15:51:59.608 -03:00 [DBG] Connection id "0HNIUJNB2ONBG", Request id "0HNIUJNB2ONBG:00000015": done reading request body.
2026-01-28 15:52:11.636 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/empresas/2/sucursales - application/json 154
2026-01-28 15:52:11.637 -03:00 [DBG] No candidates found for the request path '/api/empresas/2/sucursales'
2026-01-28 15:52:11.638 -03:00 [DBG] Request did not match any endpoints
2026-01-28 15:52:11.638 -03:00 [DBG] POST requests are not supported
2026-01-28 15:52:11.639 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 15:52:11.639 -03:00 [INF] HTTP POST /api/empresas/2/sucursales responded 404 in 0.5211 ms
2026-01-28 15:52:11.640 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/empresas/2/sucursales - 404 0 null 4.0011ms
2026-01-28 15:52:11.641 -03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST https://localhost:7058/api/empresas/2/sucursales, Response status code: 404
2026-01-28 15:52:11.642 -03:00 [DBG] Connection id "0HNIUJNB2ONBG", Request id "0HNIUJNB2ONBG:00000017": started reading request body.
2026-01-28 15:52:11.643 -03:00 [DBG] Connection id "0HNIUJNB2ONBG", Request id "0HNIUJNB2ONBG:00000017": done reading request body.
2026-01-28 15:52:19.256 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/empresas/3/sucursales - application/json 154
2026-01-28 15:52:19.258 -03:00 [DBG] No candidates found for the request path '/api/empresas/3/sucursales'
2026-01-28 15:52:19.258 -03:00 [DBG] Request did not match any endpoints
2026-01-28 15:52:19.259 -03:00 [DBG] POST requests are not supported
2026-01-28 15:52:19.259 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 15:52:19.260 -03:00 [INF] HTTP POST /api/empresas/3/sucursales responded 404 in 0.5124 ms
2026-01-28 15:52:19.260 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/empresas/3/sucursales - 404 0 null 4.0364ms
2026-01-28 15:52:19.262 -03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST https://localhost:7058/api/empresas/3/sucursales, Response status code: 404
2026-01-28 15:52:19.263 -03:00 [DBG] Connection id "0HNIUJNB2ONBG", Request id "0HNIUJNB2ONBG:00000019": started reading request body.
2026-01-28 15:52:19.264 -03:00 [DBG] Connection id "0HNIUJNB2ONBG", Request id "0HNIUJNB2ONBG:00000019": done reading request body.
2026-01-28 15:54:31.053 -03:00 [DBG] Connection id "0HNIUJNB2ONBG" is closing.
2026-01-28 15:54:31.054 -03:00 [DBG] Connection id "0HNIUJNB2ONBG" is closed. The last processed stream ID was 25.
2026-01-28 15:54:31.056 -03:00 [DBG] The connection queue processing loop for 0HNIUJNB2ONBG completed.
2026-01-28 15:54:31.058 -03:00 [DBG] Connection id "0HNIUJNB2ONBG" stopped.
2026-01-28 15:54:31.059 -03:00 [DBG] Connection id "0HNIUJNB2ONBG" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-01-28 15:58:37.285 -03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-01-28 15:58:37.693 -03:00 [DBG] The index {'ProductoId'} was not created on entity type 'Stock' as the properties are already covered by the index {'ProductoId', 'SucursalId'}.
2026-01-28 15:58:37.695 -03:00 [DBG] The index {'EmpresaId'} was not created on entity type 'Usuario' as the properties are already covered by the index {'EmpresaId', 'Email'}.
2026-01-28 15:58:37.695 -03:00 [DBG] The index {'EmpresaId'} was not created on entity type 'Usuario' as the properties are already covered by the index {'EmpresaId', 'Rut'}.
2026-01-28 15:58:37.770 -03:00 [DBG] The property 'MovimientoStock.DevolucionId' was created in shadow state because there are no eligible CLR members with a matching name.
2026-01-28 15:58:37.832 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 15:58:37.843 -03:00 [DBG] Creating DbConnection.
2026-01-28 15:58:37.859 -03:00 [DBG] Created DbConnection. (15ms).
2026-01-28 15:58:37.862 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 15:58:37.934 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 15:58:37.937 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 15:58:37.941 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2026-01-28 15:58:37.942 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2026-01-28 15:58:37.946 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-28 15:58:37.967 -03:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-28 15:58:37.986 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 15:58:37.991 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 20ms reading results.
2026-01-28 15:58:37.992 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 15:58:37.995 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (2ms).
2026-01-28 15:58:38.101 -03:00 [DBG] Migrating using database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 15:58:38.103 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 15:58:38.105 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 15:58:38.250 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 15:58:38.251 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 15:58:38.252 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (1ms).
2026-01-28 15:58:38.253 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 15:58:38.254 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 15:58:38.281 -03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-01-28 15:58:38.281 -03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-01-28 15:58:38.282 -03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1ms).
2026-01-28 15:58:38.283 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2026-01-28 15:58:38.288 -03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2026-01-28 15:58:38.292 -03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2026-01-28 15:58:38.294 -03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2026-01-28 15:58:38.295 -03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2026-01-28 15:58:38.296 -03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-01-28 15:58:38.297 -03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-01-28 15:58:38.297 -03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1ms).
2026-01-28 15:58:38.298 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2026-01-28 15:58:38.299 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2026-01-28 15:58:38.300 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 15:58:38.301 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 15:58:38.301 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 15:58:38.302 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-28 15:58:38.303 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-28 15:58:38.305 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 15:58:38.305 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-01-28 15:58:38.310 -03:00 [INF] No migrations were applied. The database is already up to date.
2026-01-28 15:58:38.311 -03:00 [DBG] Committing transaction.
2026-01-28 15:58:38.349 -03:00 [DBG] Committed transaction.
2026-01-28 15:58:38.351 -03:00 [DBG] Disposing transaction.
2026-01-28 15:58:38.351 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 15:58:38.352 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 15:58:38.354 -03:00 [INF] Database migrations applied successfully
2026-01-28 15:58:38.355 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 15:58:38.357 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 15:58:38.358 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (1ms).
2026-01-28 15:58:38.381 -03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-01-28 15:58:38.413 -03:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2026-01-28 15:58:38.427 -03:00 [INF] Project Gon API iniciada en ambiente: Development
2026-01-28 15:58:38.429 -03:00 [DBG] Hosting starting
2026-01-28 15:58:38.437 -03:00 [INF] User profile is available. Using 'C:\Users\Jossan\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-28 15:58:38.442 -03:00 [DBG] Reading data from file 'C:\Users\Jossan\AppData\Local\ASP.NET\DataProtection-Keys\key-7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c.xml'.
2026-01-28 15:58:38.447 -03:00 [DBG] Found key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c}.
2026-01-28 15:58:38.453 -03:00 [DBG] Considering key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} with expiration date 2026-04-28 18:20:11Z as default key.
2026-01-28 15:58:38.455 -03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2026-01-28 15:58:38.456 -03:00 [DBG] Decrypting secret element using Windows DPAPI.
2026-01-28 15:58:38.457 -03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2026-01-28 15:58:38.459 -03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2026-01-28 15:58:38.461 -03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2026-01-28 15:58:38.462 -03:00 [DBG] Using key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} as the default key.
2026-01-28 15:58:38.462 -03:00 [DBG] Key ring with default key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} was loaded during application startup.
2026-01-28 15:58:38.465 -03:00 [DBG] Middleware loaded
2026-01-28 15:58:38.466 -03:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16515 B).
2026-01-28 15:58:38.467 -03:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2026-01-28 15:58:38.512 -03:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2026-01-28 15:58:38.513 -03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-01-28 15:58:38.515 -03:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2026-01-28 15:58:38.543 -03:00 [INF] Now listening on: https://localhost:7058
2026-01-28 15:58:38.544 -03:00 [INF] Now listening on: http://localhost:5070
2026-01-28 15:58:38.544 -03:00 [DBG] Loaded hosting startup assembly Project_Gon.Api
2026-01-28 15:58:38.545 -03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-01-28 15:58:38.545 -03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-01-28 15:58:38.546 -03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-01-28 15:58:38.549 -03:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2026-01-28 15:58:38.551 -03:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2026-01-28 15:58:38.644 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-28 15:58:38.644 -03:00 [INF] Hosting environment: Development
2026-01-28 15:58:38.645 -03:00 [INF] Content root path: C:\Proyectos\Project_Gon\Project_Gon.Api
2026-01-28 15:58:38.646 -03:00 [DBG] Hosting started
2026-01-28 15:58:42.332 -03:00 [DBG] Connection id "0HNIUJT0MFMN6" accepted.
2026-01-28 15:58:42.333 -03:00 [DBG] Connection id "0HNIUJT0MFMN6" started.
2026-01-28 15:58:42.357 -03:00 [DBG] Connection 0HNIUJT0MFMN6 established using the following protocol: "Tls12"
2026-01-28 15:58:42.372 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/empresas/3/sucursales - application/json 154
2026-01-28 15:58:42.387 -03:00 [DBG] No candidates found for the request path '/api/empresas/3/sucursales'
2026-01-28 15:58:42.388 -03:00 [DBG] Request did not match any endpoints
2026-01-28 15:58:42.391 -03:00 [DBG] POST requests are not supported
2026-01-28 15:58:42.403 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 15:58:42.406 -03:00 [INF] HTTP POST /api/empresas/3/sucursales responded 404 in 13.2165 ms
2026-01-28 15:58:42.410 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/empresas/3/sucursales - 404 0 null 38.4335ms
2026-01-28 15:58:42.412 -03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST https://localhost:7058/api/empresas/3/sucursales, Response status code: 404
2026-01-28 15:58:42.415 -03:00 [DBG] Connection id "0HNIUJT0MFMN6", Request id "0HNIUJT0MFMN6:00000001": started reading request body.
2026-01-28 15:58:42.416 -03:00 [DBG] Connection id "0HNIUJT0MFMN6", Request id "0HNIUJT0MFMN6:00000001": done reading request body.
2026-01-28 15:58:43.331 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/empresas/3/sucursales - application/json 154
2026-01-28 15:58:43.333 -03:00 [DBG] No candidates found for the request path '/api/empresas/3/sucursales'
2026-01-28 15:58:43.333 -03:00 [DBG] Request did not match any endpoints
2026-01-28 15:58:43.334 -03:00 [DBG] POST requests are not supported
2026-01-28 15:58:43.335 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 15:58:43.336 -03:00 [INF] HTTP POST /api/empresas/3/sucursales responded 404 in 1.2754 ms
2026-01-28 15:58:43.337 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/empresas/3/sucursales - 404 0 null 5.7594ms
2026-01-28 15:58:43.338 -03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST https://localhost:7058/api/empresas/3/sucursales, Response status code: 404
2026-01-28 15:58:43.339 -03:00 [DBG] Connection id "0HNIUJT0MFMN6", Request id "0HNIUJT0MFMN6:00000003": started reading request body.
2026-01-28 15:58:43.340 -03:00 [DBG] Connection id "0HNIUJT0MFMN6", Request id "0HNIUJT0MFMN6:00000003": done reading request body.
2026-01-28 15:58:44.681 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/empresas/3/sucursales - application/json 154
2026-01-28 15:58:44.682 -03:00 [DBG] No candidates found for the request path '/api/empresas/3/sucursales'
2026-01-28 15:58:44.683 -03:00 [DBG] Request did not match any endpoints
2026-01-28 15:58:44.684 -03:00 [DBG] POST requests are not supported
2026-01-28 15:58:44.686 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 15:58:44.687 -03:00 [INF] HTTP POST /api/empresas/3/sucursales responded 404 in 2.2643 ms
2026-01-28 15:58:44.688 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/empresas/3/sucursales - 404 0 null 7.57ms
2026-01-28 15:58:44.690 -03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST https://localhost:7058/api/empresas/3/sucursales, Response status code: 404
2026-01-28 15:58:44.692 -03:00 [DBG] Connection id "0HNIUJT0MFMN6", Request id "0HNIUJT0MFMN6:00000005": started reading request body.
2026-01-28 15:58:44.692 -03:00 [DBG] Connection id "0HNIUJT0MFMN6", Request id "0HNIUJT0MFMN6:00000005": done reading request body.
2026-01-28 15:58:49.056 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/empresas/3/sucursales - application/json 154
2026-01-28 15:58:49.063 -03:00 [DBG] No candidates found for the request path '/api/empresas/3/sucursales'
2026-01-28 15:58:49.064 -03:00 [DBG] Request did not match any endpoints
2026-01-28 15:58:49.065 -03:00 [DBG] POST requests are not supported
2026-01-28 15:58:49.065 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 15:58:49.066 -03:00 [INF] HTTP POST /api/empresas/3/sucursales responded 404 in 0.6079 ms
2026-01-28 15:58:49.067 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/empresas/3/sucursales - 404 0 null 11.623ms
2026-01-28 15:58:49.071 -03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST https://localhost:7058/api/empresas/3/sucursales, Response status code: 404
2026-01-28 15:58:49.072 -03:00 [DBG] Connection id "0HNIUJT0MFMN6", Request id "0HNIUJT0MFMN6:00000007": started reading request body.
2026-01-28 15:58:49.073 -03:00 [DBG] Connection id "0HNIUJT0MFMN6", Request id "0HNIUJT0MFMN6:00000007": done reading request body.
2026-01-28 15:58:50.046 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/empresas/3/sucursales - application/json 154
2026-01-28 15:58:50.047 -03:00 [DBG] No candidates found for the request path '/api/empresas/3/sucursales'
2026-01-28 15:58:50.048 -03:00 [DBG] Request did not match any endpoints
2026-01-28 15:58:50.048 -03:00 [DBG] POST requests are not supported
2026-01-28 15:58:50.049 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 15:58:50.049 -03:00 [INF] HTTP POST /api/empresas/3/sucursales responded 404 in 0.5750 ms
2026-01-28 15:58:50.050 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/empresas/3/sucursales - 404 0 null 4.1569ms
2026-01-28 15:58:50.052 -03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST https://localhost:7058/api/empresas/3/sucursales, Response status code: 404
2026-01-28 15:58:50.053 -03:00 [DBG] Connection id "0HNIUJT0MFMN6", Request id "0HNIUJT0MFMN6:00000009": started reading request body.
2026-01-28 15:58:50.054 -03:00 [DBG] Connection id "0HNIUJT0MFMN6", Request id "0HNIUJT0MFMN6:00000009": done reading request body.
2026-01-28 16:00:30.779 -03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-01-28 16:00:31.120 -03:00 [DBG] The index {'ProductoId'} was not created on entity type 'Stock' as the properties are already covered by the index {'ProductoId', 'SucursalId'}.
2026-01-28 16:00:31.122 -03:00 [DBG] The index {'EmpresaId'} was not created on entity type 'Usuario' as the properties are already covered by the index {'EmpresaId', 'Email'}.
2026-01-28 16:00:31.123 -03:00 [DBG] The index {'EmpresaId'} was not created on entity type 'Usuario' as the properties are already covered by the index {'EmpresaId', 'Rut'}.
2026-01-28 16:00:31.198 -03:00 [DBG] The property 'MovimientoStock.DevolucionId' was created in shadow state because there are no eligible CLR members with a matching name.
2026-01-28 16:00:31.257 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 16:00:31.268 -03:00 [DBG] Creating DbConnection.
2026-01-28 16:00:31.284 -03:00 [DBG] Created DbConnection. (14ms).
2026-01-28 16:00:31.286 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:00:31.470 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:00:31.474 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:00:31.477 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2026-01-28 16:00:31.478 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2026-01-28 16:00:31.482 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-28 16:00:31.502 -03:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-28 16:00:31.520 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:00:31.525 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 19ms reading results.
2026-01-28 16:00:31.527 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:00:31.529 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (2ms).
2026-01-28 16:00:31.631 -03:00 [DBG] Migrating using database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:00:31.633 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:00:31.636 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:00:31.776 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:00:31.777 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:00:31.779 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (1ms).
2026-01-28 16:00:31.780 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:00:31.781 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:00:31.813 -03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-01-28 16:00:31.814 -03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-01-28 16:00:31.815 -03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1ms).
2026-01-28 16:00:31.816 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2026-01-28 16:00:31.822 -03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2026-01-28 16:00:31.825 -03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2026-01-28 16:00:31.827 -03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2026-01-28 16:00:31.829 -03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2026-01-28 16:00:31.829 -03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-01-28 16:00:31.830 -03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-01-28 16:00:31.831 -03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1ms).
2026-01-28 16:00:31.831 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2026-01-28 16:00:31.832 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2026-01-28 16:00:31.834 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:00:31.834 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:00:31.835 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:00:31.835 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-28 16:00:31.837 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-28 16:00:31.838 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:00:31.839 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-01-28 16:00:31.845 -03:00 [INF] No migrations were applied. The database is already up to date.
2026-01-28 16:00:31.846 -03:00 [DBG] Committing transaction.
2026-01-28 16:00:31.885 -03:00 [DBG] Committed transaction.
2026-01-28 16:00:31.886 -03:00 [DBG] Disposing transaction.
2026-01-28 16:00:31.887 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:00:31.888 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:00:31.889 -03:00 [INF] Database migrations applied successfully
2026-01-28 16:00:31.891 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 16:00:31.893 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:00:31.895 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (1ms).
2026-01-28 16:00:31.921 -03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-01-28 16:00:31.955 -03:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2026-01-28 16:00:31.968 -03:00 [INF] Project Gon API iniciada en ambiente: Development
2026-01-28 16:00:31.970 -03:00 [DBG] Hosting starting
2026-01-28 16:00:31.978 -03:00 [INF] User profile is available. Using 'C:\Users\Jossan\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-28 16:00:31.984 -03:00 [DBG] Reading data from file 'C:\Users\Jossan\AppData\Local\ASP.NET\DataProtection-Keys\key-7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c.xml'.
2026-01-28 16:00:31.989 -03:00 [DBG] Found key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c}.
2026-01-28 16:00:31.995 -03:00 [DBG] Considering key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} with expiration date 2026-04-28 18:20:11Z as default key.
2026-01-28 16:00:31.997 -03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2026-01-28 16:00:31.998 -03:00 [DBG] Decrypting secret element using Windows DPAPI.
2026-01-28 16:00:31.999 -03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2026-01-28 16:00:32.001 -03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2026-01-28 16:00:32.002 -03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2026-01-28 16:00:32.003 -03:00 [DBG] Using key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} as the default key.
2026-01-28 16:00:32.004 -03:00 [DBG] Key ring with default key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} was loaded during application startup.
2026-01-28 16:00:32.006 -03:00 [DBG] Middleware loaded
2026-01-28 16:00:32.008 -03:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16515 B).
2026-01-28 16:00:32.009 -03:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2026-01-28 16:00:32.055 -03:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2026-01-28 16:00:32.056 -03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-01-28 16:00:32.058 -03:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2026-01-28 16:00:32.085 -03:00 [INF] Now listening on: https://localhost:7058
2026-01-28 16:00:32.085 -03:00 [INF] Now listening on: http://localhost:5070
2026-01-28 16:00:32.086 -03:00 [DBG] Loaded hosting startup assembly Project_Gon.Api
2026-01-28 16:00:32.086 -03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-01-28 16:00:32.087 -03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-01-28 16:00:32.087 -03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-01-28 16:00:32.090 -03:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2026-01-28 16:00:32.093 -03:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2026-01-28 16:00:32.192 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-28 16:00:32.192 -03:00 [INF] Hosting environment: Development
2026-01-28 16:00:32.193 -03:00 [INF] Content root path: C:\Proyectos\Project_Gon\Project_Gon.Api
2026-01-28 16:00:32.194 -03:00 [DBG] Hosting started
2026-01-28 16:00:38.710 -03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-01-28 16:01:10.578 -03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-01-28 16:01:10.935 -03:00 [DBG] The index {'ProductoId'} was not created on entity type 'Stock' as the properties are already covered by the index {'ProductoId', 'SucursalId'}.
2026-01-28 16:01:10.937 -03:00 [DBG] The index {'EmpresaId'} was not created on entity type 'Usuario' as the properties are already covered by the index {'EmpresaId', 'Email'}.
2026-01-28 16:01:10.938 -03:00 [DBG] The index {'EmpresaId'} was not created on entity type 'Usuario' as the properties are already covered by the index {'EmpresaId', 'Rut'}.
2026-01-28 16:01:11.010 -03:00 [DBG] The property 'MovimientoStock.DevolucionId' was created in shadow state because there are no eligible CLR members with a matching name.
2026-01-28 16:01:11.074 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 16:01:11.087 -03:00 [DBG] Creating DbConnection.
2026-01-28 16:01:11.106 -03:00 [DBG] Created DbConnection. (18ms).
2026-01-28 16:01:11.109 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:01:11.194 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:01:11.198 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:01:11.201 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2026-01-28 16:01:11.202 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2026-01-28 16:01:11.206 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-28 16:01:11.227 -03:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-28 16:01:11.247 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:01:11.252 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 21ms reading results.
2026-01-28 16:01:11.254 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:01:11.257 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (2ms).
2026-01-28 16:01:11.374 -03:00 [DBG] Migrating using database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:01:11.377 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:01:11.379 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:01:11.415 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:01:11.415 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:01:11.417 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (1ms).
2026-01-28 16:01:11.418 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:01:11.419 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:01:11.446 -03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-01-28 16:01:11.447 -03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-01-28 16:01:11.447 -03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1ms).
2026-01-28 16:01:11.448 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2026-01-28 16:01:11.453 -03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2026-01-28 16:01:11.457 -03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2026-01-28 16:01:11.459 -03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2026-01-28 16:01:11.460 -03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2026-01-28 16:01:11.461 -03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-01-28 16:01:11.461 -03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-01-28 16:01:11.462 -03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1ms).
2026-01-28 16:01:11.463 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2026-01-28 16:01:11.464 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2026-01-28 16:01:11.465 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:01:11.465 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:01:11.466 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:01:11.467 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-28 16:01:11.468 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-28 16:01:11.470 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:01:11.470 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-01-28 16:01:11.475 -03:00 [INF] No migrations were applied. The database is already up to date.
2026-01-28 16:01:11.476 -03:00 [DBG] Committing transaction.
2026-01-28 16:01:11.510 -03:00 [DBG] Committed transaction.
2026-01-28 16:01:11.511 -03:00 [DBG] Disposing transaction.
2026-01-28 16:01:11.512 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:01:11.512 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:01:11.513 -03:00 [INF] Database migrations applied successfully
2026-01-28 16:01:11.515 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 16:01:11.516 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:01:11.517 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:01:11.537 -03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-01-28 16:01:11.566 -03:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2026-01-28 16:01:11.578 -03:00 [INF] Project Gon API iniciada en ambiente: Development
2026-01-28 16:01:11.580 -03:00 [DBG] Hosting starting
2026-01-28 16:01:11.588 -03:00 [INF] User profile is available. Using 'C:\Users\Jossan\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-28 16:01:11.593 -03:00 [DBG] Reading data from file 'C:\Users\Jossan\AppData\Local\ASP.NET\DataProtection-Keys\key-7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c.xml'.
2026-01-28 16:01:11.598 -03:00 [DBG] Found key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c}.
2026-01-28 16:01:11.603 -03:00 [DBG] Considering key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} with expiration date 2026-04-28 18:20:11Z as default key.
2026-01-28 16:01:11.605 -03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2026-01-28 16:01:11.606 -03:00 [DBG] Decrypting secret element using Windows DPAPI.
2026-01-28 16:01:11.607 -03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2026-01-28 16:01:11.609 -03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2026-01-28 16:01:11.610 -03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2026-01-28 16:01:11.611 -03:00 [DBG] Using key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} as the default key.
2026-01-28 16:01:11.612 -03:00 [DBG] Key ring with default key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} was loaded during application startup.
2026-01-28 16:01:11.615 -03:00 [DBG] Middleware loaded
2026-01-28 16:01:11.616 -03:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16515 B).
2026-01-28 16:01:11.617 -03:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2026-01-28 16:01:11.659 -03:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2026-01-28 16:01:11.661 -03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-01-28 16:01:11.663 -03:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2026-01-28 16:01:11.690 -03:00 [INF] Now listening on: https://localhost:7058
2026-01-28 16:01:11.690 -03:00 [INF] Now listening on: http://localhost:5070
2026-01-28 16:01:11.691 -03:00 [DBG] Loaded hosting startup assembly Project_Gon.Api
2026-01-28 16:01:11.692 -03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-01-28 16:01:11.692 -03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-01-28 16:01:11.693 -03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-01-28 16:01:11.696 -03:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2026-01-28 16:01:11.699 -03:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2026-01-28 16:01:11.826 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-28 16:01:11.827 -03:00 [INF] Hosting environment: Development
2026-01-28 16:01:11.828 -03:00 [INF] Content root path: C:\Proyectos\Project_Gon\Project_Gon.Api
2026-01-28 16:01:11.830 -03:00 [DBG] Hosting started
2026-01-28 16:01:13.048 -03:00 [DBG] Connection id "0HNIUJUDJQAIP" accepted.
2026-01-28 16:01:13.049 -03:00 [DBG] Connection id "0HNIUJUDJQAIP" started.
2026-01-28 16:01:13.078 -03:00 [DBG] Connection 0HNIUJUDJQAIP established using the following protocol: "Tls12"
2026-01-28 16:01:13.095 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/empresas/3/sucursales - application/json 154
2026-01-28 16:01:13.110 -03:00 [DBG] No candidates found for the request path '/api/empresas/3/sucursales'
2026-01-28 16:01:13.111 -03:00 [DBG] Request did not match any endpoints
2026-01-28 16:01:13.115 -03:00 [DBG] POST requests are not supported
2026-01-28 16:01:13.127 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 16:01:13.129 -03:00 [INF] HTTP POST /api/empresas/3/sucursales responded 404 in 12.4437 ms
2026-01-28 16:01:13.134 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/empresas/3/sucursales - 404 0 null 39.6712ms
2026-01-28 16:01:13.136 -03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST https://localhost:7058/api/empresas/3/sucursales, Response status code: 404
2026-01-28 16:01:13.138 -03:00 [DBG] Connection id "0HNIUJUDJQAIP", Request id "0HNIUJUDJQAIP:00000001": started reading request body.
2026-01-28 16:01:13.139 -03:00 [DBG] Connection id "0HNIUJUDJQAIP", Request id "0HNIUJUDJQAIP:00000001": done reading request body.
2026-01-28 16:01:14.898 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/empresas/3/sucursales - application/json 154
2026-01-28 16:01:14.907 -03:00 [DBG] No candidates found for the request path '/api/empresas/3/sucursales'
2026-01-28 16:01:14.908 -03:00 [DBG] Request did not match any endpoints
2026-01-28 16:01:14.908 -03:00 [DBG] POST requests are not supported
2026-01-28 16:01:14.910 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 16:01:14.912 -03:00 [INF] HTTP POST /api/empresas/3/sucursales responded 404 in 2.0867 ms
2026-01-28 16:01:14.913 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/empresas/3/sucursales - 404 0 null 15.2729ms
2026-01-28 16:01:14.915 -03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST https://localhost:7058/api/empresas/3/sucursales, Response status code: 404
2026-01-28 16:01:14.916 -03:00 [DBG] Connection id "0HNIUJUDJQAIP", Request id "0HNIUJUDJQAIP:00000003": started reading request body.
2026-01-28 16:01:14.917 -03:00 [DBG] Connection id "0HNIUJUDJQAIP", Request id "0HNIUJUDJQAIP:00000003": done reading request body.
2026-01-28 16:01:16.573 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/empresas/3/sucursales - application/json 154
2026-01-28 16:01:16.574 -03:00 [DBG] No candidates found for the request path '/api/empresas/3/sucursales'
2026-01-28 16:01:16.575 -03:00 [DBG] Request did not match any endpoints
2026-01-28 16:01:16.575 -03:00 [DBG] POST requests are not supported
2026-01-28 16:01:16.577 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 16:01:16.578 -03:00 [INF] HTTP POST /api/empresas/3/sucursales responded 404 in 1.6314 ms
2026-01-28 16:01:16.578 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/empresas/3/sucursales - 404 0 null 5.8626ms
2026-01-28 16:01:16.580 -03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST https://localhost:7058/api/empresas/3/sucursales, Response status code: 404
2026-01-28 16:01:16.581 -03:00 [DBG] Connection id "0HNIUJUDJQAIP", Request id "0HNIUJUDJQAIP:00000005": started reading request body.
2026-01-28 16:01:16.582 -03:00 [DBG] Connection id "0HNIUJUDJQAIP", Request id "0HNIUJUDJQAIP:00000005": done reading request body.
2026-01-28 16:01:17.232 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/empresas/3/sucursales - application/json 154
2026-01-28 16:01:17.244 -03:00 [DBG] No candidates found for the request path '/api/empresas/3/sucursales'
2026-01-28 16:01:17.244 -03:00 [DBG] Request did not match any endpoints
2026-01-28 16:01:17.245 -03:00 [DBG] POST requests are not supported
2026-01-28 16:01:17.246 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 16:01:17.246 -03:00 [INF] HTTP POST /api/empresas/3/sucursales responded 404 in 0.7953 ms
2026-01-28 16:01:17.249 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/empresas/3/sucursales - 404 0 null 16.6632ms
2026-01-28 16:01:17.251 -03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST https://localhost:7058/api/empresas/3/sucursales, Response status code: 404
2026-01-28 16:01:17.278 -03:00 [DBG] Connection id "0HNIUJUDJQAIP", Request id "0HNIUJUDJQAIP:00000007": started reading request body.
2026-01-28 16:01:17.309 -03:00 [DBG] Connection id "0HNIUJUDJQAIP", Request id "0HNIUJUDJQAIP:00000007": done reading request body.
2026-01-28 16:01:20.800 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/empresas/3/sucursales - application/json 154
2026-01-28 16:01:20.801 -03:00 [DBG] No candidates found for the request path '/api/empresas/3/sucursales'
2026-01-28 16:01:20.801 -03:00 [DBG] Request did not match any endpoints
2026-01-28 16:01:20.802 -03:00 [DBG] POST requests are not supported
2026-01-28 16:01:20.802 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 16:01:20.803 -03:00 [INF] HTTP POST /api/empresas/3/sucursales responded 404 in 0.5413 ms
2026-01-28 16:01:20.804 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/empresas/3/sucursales - 404 0 null 4.0298ms
2026-01-28 16:01:20.805 -03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST https://localhost:7058/api/empresas/3/sucursales, Response status code: 404
2026-01-28 16:01:20.806 -03:00 [DBG] Connection id "0HNIUJUDJQAIP", Request id "0HNIUJUDJQAIP:00000009": started reading request body.
2026-01-28 16:01:20.807 -03:00 [DBG] Connection id "0HNIUJUDJQAIP", Request id "0HNIUJUDJQAIP:00000009": done reading request body.
2026-01-28 16:01:21.787 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/empresas/3/sucursales - application/json 154
2026-01-28 16:01:21.789 -03:00 [DBG] No candidates found for the request path '/api/empresas/3/sucursales'
2026-01-28 16:01:21.789 -03:00 [DBG] Request did not match any endpoints
2026-01-28 16:01:21.789 -03:00 [DBG] POST requests are not supported
2026-01-28 16:01:21.790 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 16:01:21.790 -03:00 [INF] HTTP POST /api/empresas/3/sucursales responded 404 in 0.5329 ms
2026-01-28 16:01:21.791 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/empresas/3/sucursales - 404 0 null 4.1102ms
2026-01-28 16:01:21.793 -03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST https://localhost:7058/api/empresas/3/sucursales, Response status code: 404
2026-01-28 16:01:21.794 -03:00 [DBG] Connection id "0HNIUJUDJQAIP", Request id "0HNIUJUDJQAIP:0000000B": started reading request body.
2026-01-28 16:01:21.795 -03:00 [DBG] Connection id "0HNIUJUDJQAIP", Request id "0HNIUJUDJQAIP:0000000B": done reading request body.
2026-01-28 16:01:31.204 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/empresas/3/sucursales - application/json 154
2026-01-28 16:01:31.205 -03:00 [DBG] No candidates found for the request path '/api/empresas/3/sucursales'
2026-01-28 16:01:31.206 -03:00 [DBG] Request did not match any endpoints
2026-01-28 16:01:31.207 -03:00 [DBG] POST requests are not supported
2026-01-28 16:01:31.207 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 16:01:31.208 -03:00 [INF] HTTP POST /api/empresas/3/sucursales responded 404 in 0.6246 ms
2026-01-28 16:01:31.209 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/empresas/3/sucursales - 404 0 null 4.8781ms
2026-01-28 16:01:31.210 -03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST https://localhost:7058/api/empresas/3/sucursales, Response status code: 404
2026-01-28 16:01:31.211 -03:00 [DBG] Connection id "0HNIUJUDJQAIP", Request id "0HNIUJUDJQAIP:0000000D": started reading request body.
2026-01-28 16:01:31.212 -03:00 [DBG] Connection id "0HNIUJUDJQAIP", Request id "0HNIUJUDJQAIP:0000000D": done reading request body.
2026-01-28 16:02:26.033 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/api/empresas/3 - application/json 119
2026-01-28 16:02:26.036 -03:00 [DBG] 1 candidate(s) found for the request path '/api/empresas/3'
2026-01-28 16:02:26.037 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.EmpresasController.GetById (Project_Gon.Api)' with route pattern 'api/Empresas/{id}' is valid for the request path '/api/empresas/3'
2026-01-28 16:02:26.038 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.EmpresasController.GetById (Project_Gon.Api)'
2026-01-28 16:02:26.040 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 16:02:26.040 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 16:02:26.041 -03:00 [INF] Executing endpoint 'Project_Gon.Api.Controllers.EmpresasController.GetById (Project_Gon.Api)'
2026-01-28 16:02:26.050 -03:00 [INF] Route matched with {action = "GetById", controller = "Empresas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetById(Int32) on controller Project_Gon.Api.Controllers.EmpresasController (Project_Gon.Api).
2026-01-28 16:02:26.052 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-01-28 16:02:26.052 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-01-28 16:02:26.053 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-01-28 16:02:26.054 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-01-28 16:02:26.055 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-01-28 16:02:26.057 -03:00 [DBG] Executing controller factory for controller Project_Gon.Api.Controllers.EmpresasController (Project_Gon.Api)
2026-01-28 16:02:26.114 -03:00 [DBG] Executed controller factory for controller Project_Gon.Api.Controllers.EmpresasController (Project_Gon.Api)
2026-01-28 16:02:26.117 -03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2026-01-28 16:02:26.118 -03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2026-01-28 16:02:26.119 -03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2026-01-28 16:02:26.119 -03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2026-01-28 16:02:26.120 -03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2026-01-28 16:02:26.126 -03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2026-01-28 16:02:26.141 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 16:02:26.175 -03:00 [DBG] Compiling query expression: 
'DbSet<Empresa>()
    .FirstOrDefault(e => EF.Property<int>(e, "Id") == __p_0)'
2026-01-28 16:02:26.300 -03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Empresa>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Empresa>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Empresa.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Empresa.Activo (bool) Required, 1], [Property: Empresa.Ciudad (string), 2], [Property: Empresa.CreatedAt (DateTime) Required, 3], [Property: Empresa.Direccion (string), 4], [Property: Empresa.Nombre (string) Required MaxLength(255), 5], [Property: Empresa.Region (string), 6], [Property: Empresa.Rut (string), 7], [Property: Empresa.UpdatedAt (DateTime?), 8] }
            SELECT TOP(1) e.Id, e.Activo, e.Ciudad, e.CreatedAt, e.Direccion, e.Nombre, e.Region, e.Rut, e.UpdatedAt
            FROM Empresas AS e
            WHERE e.Id == @__p_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Empresa.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Empresa.Activo (bool) Required, 1], [Property: Empresa.Ciudad (string), 2], [Property: Empresa.CreatedAt (DateTime) Required, 3], [Property: Empresa.Direccion (string), 4], [Property: Empresa.Nombre (string) Required MaxLength(255), 5], [Property: Empresa.Region (string), 6], [Property: Empresa.Rut (string), 7], [Property: Empresa.UpdatedAt (DateTime?), 8] }
            SELECT TOP(1) e.Id, e.Activo, e.Ciudad, e.CreatedAt, e.Direccion, e.Nombre, e.Region, e.Rut, e.UpdatedAt
            FROM Empresas AS e
            WHERE e.Id == @__p_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Empresa entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Empresa instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Empresa);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Empresa.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Empresa").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (Empresa)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Empresa | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Empresa")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Empresa | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Empresa")]: 
                            {
                                return 
                                {
                                    Empresa instance;
                                    instance = new Empresa();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Activo>k__BackingField = dataReader.GetBoolean(1);
                                    instance.<Ciudad>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(3);
                                    instance.<Direccion>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<Nombre>k__BackingField = dataReader.GetString(5);
                                    instance.<Region>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                    instance.<Rut>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(8) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(8);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Empresa | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Empresa")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Empresa)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: Project_Gon.Infrastructure.Data.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2026-01-28 16:02:26.325 -03:00 [DBG] Creating DbConnection.
2026-01-28 16:02:26.325 -03:00 [DBG] Created DbConnection. (0ms).
2026-01-28 16:02:26.327 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:02:26.328 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:02:26.328 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:02:26.329 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:02:26.331 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2026-01-28 16:02:26.333 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 16:02:26.343 -03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 16:02:26.372 -03:00 [DBG] Context 'AppDbContext' started tracking 'Empresa' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:02:26.391 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:02:26.392 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 47ms reading results.
2026-01-28 16:02:26.394 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:02:26.395 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:02:26.401 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-01-28 16:02:26.403 -03:00 [DBG] No information found on request to perform content negotiation.
2026-01-28 16:02:26.404 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-01-28 16:02:26.404 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-01-28 16:02:26.405 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-01-28 16:02:26.406 -03:00 [INF] Executing OkObjectResult, writing value of type 'Project_Gon.Core.DTOs.Empresa.EmpresaDto'.
2026-01-28 16:02:26.415 -03:00 [INF] Executed action Project_Gon.Api.Controllers.EmpresasController.GetById (Project_Gon.Api) in 357.1408ms
2026-01-28 16:02:26.416 -03:00 [INF] Executed endpoint 'Project_Gon.Api.Controllers.EmpresasController.GetById (Project_Gon.Api)'
2026-01-28 16:02:26.416 -03:00 [INF] HTTP GET /api/empresas/3 responded 200 in 376.3330 ms
2026-01-28 16:02:26.419 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 16:02:26.421 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:02:26.422 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (1ms).
2026-01-28 16:02:26.423 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/api/empresas/3 - 200 null application/json; charset=utf-8 389.7077ms
2026-01-28 16:02:26.424 -03:00 [DBG] Connection id "0HNIUJUDJQAIP", Request id "0HNIUJUDJQAIP:0000000F": started reading request body.
2026-01-28 16:02:26.425 -03:00 [DBG] Connection id "0HNIUJUDJQAIP", Request id "0HNIUJUDJQAIP:0000000F": done reading request body.
2026-01-28 16:02:58.374 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/sucursales - application/json 172
2026-01-28 16:02:58.376 -03:00 [DBG] 1 candidate(s) found for the request path '/api/sucursales'
2026-01-28 16:02:58.377 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.SucursalesController.Create (Project_Gon.Api)' with route pattern 'api/Sucursales' is valid for the request path '/api/sucursales'
2026-01-28 16:02:58.378 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.SucursalesController.Create (Project_Gon.Api)'
2026-01-28 16:02:58.378 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 16:02:58.379 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 16:02:58.379 -03:00 [INF] Executing endpoint 'Project_Gon.Api.Controllers.SucursalesController.Create (Project_Gon.Api)'
2026-01-28 16:02:58.383 -03:00 [INF] Route matched with {action = "Create", controller = "Sucursales"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(Project_Gon.Core.DTOs.Sucursal.CreateSucursalDto) on controller Project_Gon.Api.Controllers.SucursalesController (Project_Gon.Api).
2026-01-28 16:02:58.384 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-01-28 16:02:58.385 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-01-28 16:02:58.386 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-01-28 16:02:58.387 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-01-28 16:02:58.387 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-01-28 16:02:58.388 -03:00 [DBG] Executing controller factory for controller Project_Gon.Api.Controllers.SucursalesController (Project_Gon.Api)
2026-01-28 16:02:58.391 -03:00 [DBG] Executed controller factory for controller Project_Gon.Api.Controllers.SucursalesController (Project_Gon.Api)
2026-01-28 16:02:58.392 -03:00 [DBG] Attempting to bind parameter 'createDto' of type 'Project_Gon.Core.DTOs.Sucursal.CreateSucursalDto' ...
2026-01-28 16:02:58.393 -03:00 [DBG] Attempting to bind parameter 'createDto' of type 'Project_Gon.Core.DTOs.Sucursal.CreateSucursalDto' using the name '' in request data ...
2026-01-28 16:02:58.394 -03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2026-01-28 16:02:58.397 -03:00 [DBG] Connection id "0HNIUJUDJQAIP", Request id "0HNIUJUDJQAIP:00000011": started reading request body.
2026-01-28 16:02:58.397 -03:00 [DBG] Connection id "0HNIUJUDJQAIP", Request id "0HNIUJUDJQAIP:00000011": done reading request body.
2026-01-28 16:02:58.401 -03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Project_Gon.Core.DTOs.Sucursal.CreateSucursalDto'
2026-01-28 16:02:58.402 -03:00 [DBG] Done attempting to bind parameter 'createDto' of type 'Project_Gon.Core.DTOs.Sucursal.CreateSucursalDto'.
2026-01-28 16:02:58.402 -03:00 [DBG] Done attempting to bind parameter 'createDto' of type 'Project_Gon.Core.DTOs.Sucursal.CreateSucursalDto'.
2026-01-28 16:02:58.403 -03:00 [DBG] Attempting to validate the bound parameter 'createDto' of type 'Project_Gon.Core.DTOs.Sucursal.CreateSucursalDto' ...
2026-01-28 16:02:58.407 -03:00 [DBG] Done attempting to validate the bound parameter 'createDto' of type 'Project_Gon.Core.DTOs.Sucursal.CreateSucursalDto'.
2026-01-28 16:02:58.437 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 16:02:58.441 -03:00 [DBG] Creating DbConnection.
2026-01-28 16:02:58.441 -03:00 [DBG] Created DbConnection. (0ms).
2026-01-28 16:02:58.442 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:02:58.443 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:02:58.443 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:02:58.444 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:02:58.445 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:02:58.446 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 16:02:58.448 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 16:02:58.449 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:02:58.450 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-01-28 16:02:58.451 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:02:58.452 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:02:58.453 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-01-28 16:02:58.454 -03:00 [DBG] No information found on request to perform content negotiation.
2026-01-28 16:02:58.455 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-01-28 16:02:58.455 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-01-28 16:02:58.456 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2026-01-28 16:02:58.456 -03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2026-01-28 16:02:58.457 -03:00 [INF] Executed action Project_Gon.Api.Controllers.SucursalesController.Create (Project_Gon.Api) in 69.1301ms
2026-01-28 16:02:58.458 -03:00 [INF] Executed endpoint 'Project_Gon.Api.Controllers.SucursalesController.Create (Project_Gon.Api)'
2026-01-28 16:02:58.459 -03:00 [INF] HTTP POST /api/sucursales responded 400 in 79.7796 ms
2026-01-28 16:02:58.459 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 16:02:58.460 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:02:58.461 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:02:58.462 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/sucursales - 400 null text/plain; charset=utf-8 87.1786ms
2026-01-28 16:03:05.036 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/sucursales - application/json 172
2026-01-28 16:03:05.038 -03:00 [DBG] 1 candidate(s) found for the request path '/api/sucursales'
2026-01-28 16:03:05.038 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.SucursalesController.Create (Project_Gon.Api)' with route pattern 'api/Sucursales' is valid for the request path '/api/sucursales'
2026-01-28 16:03:05.039 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.SucursalesController.Create (Project_Gon.Api)'
2026-01-28 16:03:05.040 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 16:03:05.040 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 16:03:05.041 -03:00 [INF] Executing endpoint 'Project_Gon.Api.Controllers.SucursalesController.Create (Project_Gon.Api)'
2026-01-28 16:03:05.042 -03:00 [INF] Route matched with {action = "Create", controller = "Sucursales"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(Project_Gon.Core.DTOs.Sucursal.CreateSucursalDto) on controller Project_Gon.Api.Controllers.SucursalesController (Project_Gon.Api).
2026-01-28 16:03:05.043 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-01-28 16:03:05.043 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-01-28 16:03:05.044 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-01-28 16:03:05.045 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-01-28 16:03:05.046 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-01-28 16:03:05.047 -03:00 [DBG] Executing controller factory for controller Project_Gon.Api.Controllers.SucursalesController (Project_Gon.Api)
2026-01-28 16:03:05.049 -03:00 [DBG] Executed controller factory for controller Project_Gon.Api.Controllers.SucursalesController (Project_Gon.Api)
2026-01-28 16:03:05.050 -03:00 [DBG] Attempting to bind parameter 'createDto' of type 'Project_Gon.Core.DTOs.Sucursal.CreateSucursalDto' ...
2026-01-28 16:03:05.051 -03:00 [DBG] Attempting to bind parameter 'createDto' of type 'Project_Gon.Core.DTOs.Sucursal.CreateSucursalDto' using the name '' in request data ...
2026-01-28 16:03:05.051 -03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2026-01-28 16:03:05.052 -03:00 [DBG] Connection id "0HNIUJUDJQAIP", Request id "0HNIUJUDJQAIP:00000013": started reading request body.
2026-01-28 16:03:05.053 -03:00 [DBG] Connection id "0HNIUJUDJQAIP", Request id "0HNIUJUDJQAIP:00000013": done reading request body.
2026-01-28 16:03:05.053 -03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Project_Gon.Core.DTOs.Sucursal.CreateSucursalDto'
2026-01-28 16:03:05.054 -03:00 [DBG] Done attempting to bind parameter 'createDto' of type 'Project_Gon.Core.DTOs.Sucursal.CreateSucursalDto'.
2026-01-28 16:03:05.054 -03:00 [DBG] Done attempting to bind parameter 'createDto' of type 'Project_Gon.Core.DTOs.Sucursal.CreateSucursalDto'.
2026-01-28 16:03:05.055 -03:00 [DBG] Attempting to validate the bound parameter 'createDto' of type 'Project_Gon.Core.DTOs.Sucursal.CreateSucursalDto' ...
2026-01-28 16:03:05.056 -03:00 [DBG] Done attempting to validate the bound parameter 'createDto' of type 'Project_Gon.Core.DTOs.Sucursal.CreateSucursalDto'.
2026-01-28 16:03:05.057 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 16:03:05.059 -03:00 [DBG] Creating DbConnection.
2026-01-28 16:03:05.060 -03:00 [DBG] Created DbConnection. (0ms).
2026-01-28 16:03:05.060 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:03:05.061 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:03:05.061 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:03:05.062 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:03:05.062 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:03:05.063 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 16:03:05.065 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 16:03:05.066 -03:00 [DBG] Context 'AppDbContext' started tracking 'Empresa' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:03:05.067 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:03:05.068 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-01-28 16:03:05.068 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:03:05.069 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:03:05.085 -03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Sucursal.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:03:05.107 -03:00 [DBG] The navigation 'Sucursal.Empresa' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:03:05.115 -03:00 [DBG] Context 'AppDbContext' started tracking 'Sucursal' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:03:05.117 -03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2026-01-28 16:03:05.119 -03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2026-01-28 16:03:05.133 -03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2026-01-28 16:03:05.162 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:03:05.163 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:03:05.165 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:03:05.165 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:03:05.166 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:03:05.166 -03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = Int32), @p5='?', @p6='?', @p7='?', @p8='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Sucursales" ("Activo", "Ciudad", "CreatedAt", "Direccion", "EmpresaId", "Nombre", "Region", "Telefono", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
2026-01-28 16:03:05.173 -03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = Int32), @p5='?', @p6='?', @p7='?', @p8='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Sucursales" ("Activo", "Ciudad", "CreatedAt", "Direccion", "EmpresaId", "Nombre", "Region", "Telefono", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
2026-01-28 16:03:05.179 -03:00 [DBG] The foreign key property 'Sucursal.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-01-28 16:03:05.182 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:03:05.183 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 8ms reading results.
2026-01-28 16:03:05.184 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:03:05.185 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:03:05.190 -03:00 [DBG] An entity of type 'Sucursal' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:03:05.193 -03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2026-01-28 16:03:05.195 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-01-28 16:03:05.196 -03:00 [DBG] No information found on request to perform content negotiation.
2026-01-28 16:03:05.197 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-01-28 16:03:05.197 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-01-28 16:03:05.198 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-01-28 16:03:05.199 -03:00 [INF] Executing CreatedAtActionResult, writing value of type 'Project_Gon.Core.DTOs.Sucursal.SucursalDto'.
2026-01-28 16:03:05.208 -03:00 [DBG] Found the endpoints ["Project_Gon.Api.Controllers.SucursalesController.GetById (Project_Gon.Api)"] for address (id=[1],action=[GetById],controller=[Sucursales])
2026-01-28 16:03:05.210 -03:00 [DBG] Successfully processed template api/Sucursales/{id} for Project_Gon.Api.Controllers.SucursalesController.GetById (Project_Gon.Api) resulting in /api/Sucursales/1 and 
2026-01-28 16:03:05.211 -03:00 [DBG] Link generation succeeded for endpoints ["Project_Gon.Api.Controllers.SucursalesController.GetById (Project_Gon.Api)"] with result /api/Sucursales/1
2026-01-28 16:03:05.213 -03:00 [INF] Executed action Project_Gon.Api.Controllers.SucursalesController.Create (Project_Gon.Api) in 166.4674ms
2026-01-28 16:03:05.214 -03:00 [INF] Executed endpoint 'Project_Gon.Api.Controllers.SucursalesController.Create (Project_Gon.Api)'
2026-01-28 16:03:05.214 -03:00 [INF] HTTP POST /api/sucursales responded 201 in 173.9762 ms
2026-01-28 16:03:05.215 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 16:03:05.216 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:03:05.216 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:03:05.217 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/sucursales - 201 null application/json; charset=utf-8 180.8339ms
2026-01-28 16:03:42.473 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/auth/register - application/json 180
2026-01-28 16:03:42.475 -03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/register'
2026-01-28 16:03:42.475 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)' with route pattern 'api/Auth/register' is valid for the request path '/api/auth/register'
2026-01-28 16:03:42.476 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)'
2026-01-28 16:03:42.477 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 16:03:42.477 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 16:03:42.478 -03:00 [INF] Executing endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)'
2026-01-28 16:03:42.481 -03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(Project_Gon.Core.DTOs.Auth.RegisterDto) on controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api).
2026-01-28 16:03:42.482 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-01-28 16:03:42.483 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-01-28 16:03:42.484 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-01-28 16:03:42.485 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-01-28 16:03:42.485 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-01-28 16:03:42.486 -03:00 [DBG] Executing controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-01-28 16:03:42.487 -03:00 [DBG] Executed controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-01-28 16:03:42.488 -03:00 [DBG] Attempting to bind parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto' ...
2026-01-28 16:03:42.488 -03:00 [DBG] Attempting to bind parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto' using the name '' in request data ...
2026-01-28 16:03:42.489 -03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2026-01-28 16:03:42.493 -03:00 [DBG] Connection id "0HNIUJUDJQAIP", Request id "0HNIUJUDJQAIP:00000015": started reading request body.
2026-01-28 16:03:42.494 -03:00 [DBG] Connection id "0HNIUJUDJQAIP", Request id "0HNIUJUDJQAIP:00000015": done reading request body.
2026-01-28 16:03:42.496 -03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Project_Gon.Core.DTOs.Auth.RegisterDto'
2026-01-28 16:03:42.497 -03:00 [DBG] Done attempting to bind parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto'.
2026-01-28 16:03:42.497 -03:00 [DBG] Done attempting to bind parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto'.
2026-01-28 16:03:42.498 -03:00 [DBG] Attempting to validate the bound parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto' ...
2026-01-28 16:03:42.501 -03:00 [DBG] Done attempting to validate the bound parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto'.
2026-01-28 16:03:42.539 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 16:03:42.541 -03:00 [DBG] Creating DbConnection.
2026-01-28 16:03:42.541 -03:00 [DBG] Created DbConnection. (0ms).
2026-01-28 16:03:42.542 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:03:42.542 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:03:42.543 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:03:42.543 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:03:42.544 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:03:42.544 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 16:03:42.546 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 16:03:42.547 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:03:42.548 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-01-28 16:03:42.549 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:03:42.549 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:03:42.550 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-01-28 16:03:42.551 -03:00 [DBG] No information found on request to perform content negotiation.
2026-01-28 16:03:42.551 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-01-28 16:03:42.552 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-01-28 16:03:42.552 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2026-01-28 16:03:42.553 -03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2026-01-28 16:03:42.554 -03:00 [INF] Executed action Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api) in 67.8777ms
2026-01-28 16:03:42.555 -03:00 [INF] Executed endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)'
2026-01-28 16:03:42.555 -03:00 [INF] HTTP POST /api/auth/register responded 400 in 77.7289 ms
2026-01-28 16:03:42.556 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 16:03:42.556 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:03:42.557 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:03:42.558 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/auth/register - 400 null text/plain; charset=utf-8 84.4369ms
2026-01-28 16:03:51.505 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/auth/register - application/json 180
2026-01-28 16:03:51.507 -03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/register'
2026-01-28 16:03:51.508 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)' with route pattern 'api/Auth/register' is valid for the request path '/api/auth/register'
2026-01-28 16:03:51.509 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)'
2026-01-28 16:03:51.510 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 16:03:51.510 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 16:03:51.511 -03:00 [INF] Executing endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)'
2026-01-28 16:03:51.512 -03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(Project_Gon.Core.DTOs.Auth.RegisterDto) on controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api).
2026-01-28 16:03:51.513 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-01-28 16:03:51.513 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-01-28 16:03:51.514 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-01-28 16:03:51.515 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-01-28 16:03:51.516 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-01-28 16:03:51.516 -03:00 [DBG] Executing controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-01-28 16:03:51.517 -03:00 [DBG] Executed controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-01-28 16:03:51.518 -03:00 [DBG] Attempting to bind parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto' ...
2026-01-28 16:03:51.518 -03:00 [DBG] Attempting to bind parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto' using the name '' in request data ...
2026-01-28 16:03:51.519 -03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2026-01-28 16:03:51.520 -03:00 [DBG] Connection id "0HNIUJUDJQAIP", Request id "0HNIUJUDJQAIP:00000017": started reading request body.
2026-01-28 16:03:51.521 -03:00 [DBG] Connection id "0HNIUJUDJQAIP", Request id "0HNIUJUDJQAIP:00000017": done reading request body.
2026-01-28 16:03:51.521 -03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Project_Gon.Core.DTOs.Auth.RegisterDto'
2026-01-28 16:03:51.522 -03:00 [DBG] Done attempting to bind parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto'.
2026-01-28 16:03:51.523 -03:00 [DBG] Done attempting to bind parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto'.
2026-01-28 16:03:51.523 -03:00 [DBG] Attempting to validate the bound parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto' ...
2026-01-28 16:03:51.524 -03:00 [DBG] Done attempting to validate the bound parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto'.
2026-01-28 16:03:51.525 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 16:03:51.527 -03:00 [DBG] Creating DbConnection.
2026-01-28 16:03:51.527 -03:00 [DBG] Created DbConnection. (0ms).
2026-01-28 16:03:51.528 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:03:51.528 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:03:51.529 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:03:51.529 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:03:51.530 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:03:51.530 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 16:03:51.532 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 16:03:51.533 -03:00 [DBG] Context 'AppDbContext' started tracking 'Empresa' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:03:51.534 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:03:51.534 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-01-28 16:03:51.535 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:03:51.536 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:03:51.537 -03:00 [DBG] Compiling query expression: 
'DbSet<Sucursal>()
    .FirstOrDefault(e => EF.Property<int>(e, "Id") == __p_0)'
2026-01-28 16:03:51.542 -03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Sucursal>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Sucursal>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Sucursal.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Sucursal.Activo (bool) Required, 1], [Property: Sucursal.Ciudad (string), 2], [Property: Sucursal.CreatedAt (DateTime) Required, 3], [Property: Sucursal.Direccion (string), 4], [Property: Sucursal.EmpresaId (int) Required FK Index, 5], [Property: Sucursal.Nombre (string) Required MaxLength(255), 6], [Property: Sucursal.Region (string), 7], [Property: Sucursal.Telefono (string), 8], [Property: Sucursal.UpdatedAt (DateTime?), 9] }
            SELECT TOP(1) s.Id, s.Activo, s.Ciudad, s.CreatedAt, s.Direccion, s.EmpresaId, s.Nombre, s.Region, s.Telefono, s.UpdatedAt
            FROM Sucursales AS s
            WHERE s.Id == @__p_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Sucursal.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Sucursal.Activo (bool) Required, 1], [Property: Sucursal.Ciudad (string), 2], [Property: Sucursal.CreatedAt (DateTime) Required, 3], [Property: Sucursal.Direccion (string), 4], [Property: Sucursal.EmpresaId (int) Required FK Index, 5], [Property: Sucursal.Nombre (string) Required MaxLength(255), 6], [Property: Sucursal.Region (string), 7], [Property: Sucursal.Telefono (string), 8], [Property: Sucursal.UpdatedAt (DateTime?), 9] }
            SELECT TOP(1) s.Id, s.Activo, s.Ciudad, s.CreatedAt, s.Direccion, s.EmpresaId, s.Nombre, s.Region, s.Telefono, s.UpdatedAt
            FROM Sucursales AS s
            WHERE s.Id == @__p_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Sucursal entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Sucursal instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Sucursal);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Sucursal.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Sucursal").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (Sucursal)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Sucursal | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Sucursal")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Sucursal | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Sucursal")]: 
                            {
                                return 
                                {
                                    Sucursal instance;
                                    instance = new Sucursal();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Activo>k__BackingField = dataReader.GetBoolean(1);
                                    instance.<Ciudad>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(3);
                                    instance.<Direccion>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<EmpresaId>k__BackingField = dataReader.GetInt32(5);
                                    instance.<Nombre>k__BackingField = dataReader.GetString(6);
                                    instance.<Region>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<Telefono>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(9) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(9);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Sucursal | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Sucursal")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Sucursal)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: Project_Gon.Infrastructure.Data.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2026-01-28 16:03:51.549 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:03:51.550 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:03:51.550 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:03:51.551 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:03:51.552 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:03:51.552 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Activo", s."Ciudad", s."CreatedAt", s."Direccion", s."EmpresaId", s."Nombre", s."Region", s."Telefono", s."UpdatedAt"
FROM "Sucursales" AS s
WHERE s."Id" = @__p_0
LIMIT 1
2026-01-28 16:03:51.554 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Activo", s."Ciudad", s."CreatedAt", s."Direccion", s."EmpresaId", s."Nombre", s."Region", s."Telefono", s."UpdatedAt"
FROM "Sucursales" AS s
WHERE s."Id" = @__p_0
LIMIT 1
2026-01-28 16:03:51.556 -03:00 [DBG] Context 'AppDbContext' started tracking 'Sucursal' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:03:51.557 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:03:51.557 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 2ms reading results.
2026-01-28 16:03:51.558 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:03:51.559 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:03:51.563 -03:00 [DBG] Compiling query expression: 
'DbSet<Usuario>()
    .Where(u => u.Rut == __rutLimpio_0 && u.EmpresaId == __8__locals1_registerDto_EmpresaId_1)
    .AsNoTracking()
    .FirstOrDefault()'
2026-01-28 16:03:51.570 -03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Usuario>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Usuario>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Usuario.Activo (bool) Required, 1], [Property: Usuario.Apellido (string) Required, 2], [Property: Usuario.CreatedAt (DateTime) Required, 3], [Property: Usuario.Email (string) Index MaxLength(255), 4], [Property: Usuario.EmpresaId (int) Required FK Index, 5], [Property: Usuario.Nombre (string) Required, 6], [Property: Usuario.PasswordHash (string) Required, 7], [Property: Usuario.Rol (RolUsuario) Required, 8], [Property: Usuario.Rut (string) Index MaxLength(12), 9], [Property: Usuario.SucursalId (int?) FK Index, 10], [Property: Usuario.UltimoAcceso (DateTime?), 11], [Property: Usuario.UpdatedAt (DateTime?), 12] }
            SELECT TOP(1) u.Id, u.Activo, u.Apellido, u.CreatedAt, u.Email, u.EmpresaId, u.Nombre, u.PasswordHash, u.Rol, u.Rut, u.SucursalId, u.UltimoAcceso, u.UpdatedAt
            FROM Usuarios AS u
            WHERE (u.Rut == @__rutLimpio_0) && (u.EmpresaId == @__8__locals1_registerDto_EmpresaId_1)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Usuario.Activo (bool) Required, 1], [Property: Usuario.Apellido (string) Required, 2], [Property: Usuario.CreatedAt (DateTime) Required, 3], [Property: Usuario.Email (string) Index MaxLength(255), 4], [Property: Usuario.EmpresaId (int) Required FK Index, 5], [Property: Usuario.Nombre (string) Required, 6], [Property: Usuario.PasswordHash (string) Required, 7], [Property: Usuario.Rol (RolUsuario) Required, 8], [Property: Usuario.Rut (string) Index MaxLength(12), 9], [Property: Usuario.SucursalId (int?) FK Index, 10], [Property: Usuario.UltimoAcceso (DateTime?), 11], [Property: Usuario.UpdatedAt (DateTime?), 12] }
            SELECT TOP(1) u.Id, u.Activo, u.Apellido, u.CreatedAt, u.Email, u.EmpresaId, u.Nombre, u.PasswordHash, u.Rol, u.Rut, u.SucursalId, u.UltimoAcceso, u.UpdatedAt
            FROM Usuarios AS u
            WHERE (u.Rut == @__rutLimpio_0) && (u.EmpresaId == @__8__locals1_registerDto_EmpresaId_1), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Usuario entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Usuario instance1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Usuario);
                (object)dataReader.GetInt32(0) != null ? 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")]: 
                            {
                                return 
                                {
                                    Usuario instance;
                                    instance = new Usuario();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Activo>k__BackingField = dataReader.GetBoolean(1);
                                    instance.<Apellido>k__BackingField = dataReader.GetString(2);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(3);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<EmpresaId>k__BackingField = dataReader.GetInt32(5);
                                    instance.<Nombre>k__BackingField = dataReader.GetString(6);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(7);
                                    instance.<Rol>k__BackingField = Invoke(((EnumToNumberConverter<RolUsuario, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Usuario.Rol (RolUsuario) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario").FindProperty("Rol")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(8));
                                    instance.<Rut>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<SucursalId>k__BackingField = dataReader.IsDBNull(10) ? default(int?) : (int?)dataReader.GetInt32(10);
                                    instance.<UltimoAcceso>k__BackingField = dataReader.IsDBNull(11) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(11);
                                    instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(12) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(12);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Usuario)
                    }
                    ;
                    return instance1;
                } : 
                {
                    object[] keyValues1;
                    keyValues1 = new object[]{ (object)dataReader.GetInt32(0) };
                    return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                        entityType: [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")], 
                        properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario").FindPrimaryKey().Properties], 
                        keyValues: keyValues1);
                };
                return instance1;
            };
            return entity;
        }, 
        contextType: Project_Gon.Infrastructure.Data.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2026-01-28 16:03:51.582 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:03:51.582 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:03:51.583 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:03:51.583 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:03:51.584 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:03:51.584 -03:00 [DBG] Executing DbCommand [Parameters=[@__rutLimpio_0='?', @__8__locals1_registerDto_EmpresaId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Rut" = @__rutLimpio_0 AND u."EmpresaId" = @__8__locals1_registerDto_EmpresaId_1
LIMIT 1
2026-01-28 16:03:51.588 -03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__rutLimpio_0='?', @__8__locals1_registerDto_EmpresaId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Rut" = @__rutLimpio_0 AND u."EmpresaId" = @__8__locals1_registerDto_EmpresaId_1
LIMIT 1
2026-01-28 16:03:51.590 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:03:51.590 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-01-28 16:03:51.591 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:03:51.592 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:03:51.593 -03:00 [DBG] Compiling query expression: 
'DbSet<Usuario>()
    .Where(u => u.Email == __8__locals1_registerDto_Email_0 && u.EmpresaId == __8__locals1_registerDto_EmpresaId_1)
    .AsNoTracking()
    .FirstOrDefault()'
2026-01-28 16:03:51.596 -03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Usuario>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Usuario>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Usuario.Activo (bool) Required, 1], [Property: Usuario.Apellido (string) Required, 2], [Property: Usuario.CreatedAt (DateTime) Required, 3], [Property: Usuario.Email (string) Index MaxLength(255), 4], [Property: Usuario.EmpresaId (int) Required FK Index, 5], [Property: Usuario.Nombre (string) Required, 6], [Property: Usuario.PasswordHash (string) Required, 7], [Property: Usuario.Rol (RolUsuario) Required, 8], [Property: Usuario.Rut (string) Index MaxLength(12), 9], [Property: Usuario.SucursalId (int?) FK Index, 10], [Property: Usuario.UltimoAcceso (DateTime?), 11], [Property: Usuario.UpdatedAt (DateTime?), 12] }
            SELECT TOP(1) u.Id, u.Activo, u.Apellido, u.CreatedAt, u.Email, u.EmpresaId, u.Nombre, u.PasswordHash, u.Rol, u.Rut, u.SucursalId, u.UltimoAcceso, u.UpdatedAt
            FROM Usuarios AS u
            WHERE (u.Email == @__8__locals1_registerDto_Email_0) && (u.EmpresaId == @__8__locals1_registerDto_EmpresaId_1)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Usuario.Activo (bool) Required, 1], [Property: Usuario.Apellido (string) Required, 2], [Property: Usuario.CreatedAt (DateTime) Required, 3], [Property: Usuario.Email (string) Index MaxLength(255), 4], [Property: Usuario.EmpresaId (int) Required FK Index, 5], [Property: Usuario.Nombre (string) Required, 6], [Property: Usuario.PasswordHash (string) Required, 7], [Property: Usuario.Rol (RolUsuario) Required, 8], [Property: Usuario.Rut (string) Index MaxLength(12), 9], [Property: Usuario.SucursalId (int?) FK Index, 10], [Property: Usuario.UltimoAcceso (DateTime?), 11], [Property: Usuario.UpdatedAt (DateTime?), 12] }
            SELECT TOP(1) u.Id, u.Activo, u.Apellido, u.CreatedAt, u.Email, u.EmpresaId, u.Nombre, u.PasswordHash, u.Rol, u.Rut, u.SucursalId, u.UltimoAcceso, u.UpdatedAt
            FROM Usuarios AS u
            WHERE (u.Email == @__8__locals1_registerDto_Email_0) && (u.EmpresaId == @__8__locals1_registerDto_EmpresaId_1), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Usuario entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Usuario instance1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Usuario);
                (object)dataReader.GetInt32(0) != null ? 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")]: 
                            {
                                return 
                                {
                                    Usuario instance;
                                    instance = new Usuario();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Activo>k__BackingField = dataReader.GetBoolean(1);
                                    instance.<Apellido>k__BackingField = dataReader.GetString(2);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(3);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<EmpresaId>k__BackingField = dataReader.GetInt32(5);
                                    instance.<Nombre>k__BackingField = dataReader.GetString(6);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(7);
                                    instance.<Rol>k__BackingField = Invoke(((EnumToNumberConverter<RolUsuario, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Usuario.Rol (RolUsuario) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario").FindProperty("Rol")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(8));
                                    instance.<Rut>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<SucursalId>k__BackingField = dataReader.IsDBNull(10) ? default(int?) : (int?)dataReader.GetInt32(10);
                                    instance.<UltimoAcceso>k__BackingField = dataReader.IsDBNull(11) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(11);
                                    instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(12) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(12);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Usuario)
                    }
                    ;
                    return instance1;
                } : 
                {
                    object[] keyValues1;
                    keyValues1 = new object[]{ (object)dataReader.GetInt32(0) };
                    return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                        entityType: [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")], 
                        properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario").FindPrimaryKey().Properties], 
                        keyValues: keyValues1);
                };
                return instance1;
            };
            return entity;
        }, 
        contextType: Project_Gon.Infrastructure.Data.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2026-01-28 16:03:51.603 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:03:51.603 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:03:51.604 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:03:51.605 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:03:51.605 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:03:51.606 -03:00 [DBG] Executing DbCommand [Parameters=[@__8__locals1_registerDto_Email_0='?', @__8__locals1_registerDto_EmpresaId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Email" = @__8__locals1_registerDto_Email_0 AND u."EmpresaId" = @__8__locals1_registerDto_EmpresaId_1
LIMIT 1
2026-01-28 16:03:51.608 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_registerDto_Email_0='?', @__8__locals1_registerDto_EmpresaId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Email" = @__8__locals1_registerDto_Email_0 AND u."EmpresaId" = @__8__locals1_registerDto_EmpresaId_1
LIMIT 1
2026-01-28 16:03:51.609 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:03:51.610 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-01-28 16:03:51.610 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:03:51.611 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:03:52.048 -03:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Usuario.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:03:52.066 -03:00 [DBG] The navigation 'Usuario.Empresa' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:03:52.069 -03:00 [DBG] The navigation 'Usuario.Sucursal' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:03:52.072 -03:00 [DBG] Context 'AppDbContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:03:52.073 -03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2026-01-28 16:03:52.073 -03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2026-01-28 16:03:52.079 -03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2026-01-28 16:03:52.080 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:03:52.081 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:03:52.082 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:03:52.082 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:03:52.084 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:03:52.084 -03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = Int32), @p5='?', @p6='?', @p7='?' (DbType = Int32), @p8='?', @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Usuarios" ("Activo", "Apellido", "CreatedAt", "Email", "EmpresaId", "Nombre", "PasswordHash", "Rol", "Rut", "SucursalId", "UltimoAcceso", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11)
RETURNING "Id";
2026-01-28 16:03:52.122 -03:00 [INF] Executed DbCommand (37ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = Int32), @p5='?', @p6='?', @p7='?' (DbType = Int32), @p8='?', @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Usuarios" ("Activo", "Apellido", "CreatedAt", "Email", "EmpresaId", "Nombre", "PasswordHash", "Rol", "Rut", "SucursalId", "UltimoAcceso", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11)
RETURNING "Id";
2026-01-28 16:03:52.124 -03:00 [DBG] The foreign key property 'Usuario.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2026-01-28 16:03:52.126 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:03:52.126 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 3ms reading results.
2026-01-28 16:03:52.127 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:03:52.128 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:03:52.129 -03:00 [DBG] An entity of type 'Usuario' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:03:52.130 -03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2026-01-28 16:03:52.144 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-01-28 16:03:52.146 -03:00 [DBG] No information found on request to perform content negotiation.
2026-01-28 16:03:52.146 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-01-28 16:03:52.147 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-01-28 16:03:52.147 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-01-28 16:03:52.148 -03:00 [INF] Executing CreatedAtActionResult, writing value of type 'Project_Gon.Core.DTOs.Auth.LoginResponseDto'.
2026-01-28 16:03:52.149 -03:00 [DBG] Found the endpoints ["Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)"] for address (action=[Login],controller=[Auth])
2026-01-28 16:03:52.149 -03:00 [DBG] Successfully processed template api/Auth/login for Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api) resulting in /api/Auth/login and 
2026-01-28 16:03:52.150 -03:00 [DBG] Link generation succeeded for endpoints ["Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)"] with result /api/Auth/login
2026-01-28 16:03:52.153 -03:00 [INF] Executed action Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api) in 636.9627ms
2026-01-28 16:03:52.154 -03:00 [INF] Executed endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)'
2026-01-28 16:03:52.155 -03:00 [INF] HTTP POST /api/auth/register responded 201 in 644.3848 ms
2026-01-28 16:03:52.155 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 16:03:52.156 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:03:52.157 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:03:52.158 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/auth/register - 201 null application/json; charset=utf-8 652.348ms
2026-01-28 16:04:42.613 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/auth/login - application/json 69
2026-01-28 16:04:42.615 -03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2026-01-28 16:04:42.615 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)' with route pattern 'api/Auth/login' is valid for the request path '/api/auth/login'
2026-01-28 16:04:42.616 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 16:04:42.617 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 16:04:42.617 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 16:04:42.618 -03:00 [INF] Executing endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 16:04:42.620 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Project_Gon.Core.DTOs.Auth.LoginDto) on controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api).
2026-01-28 16:04:42.621 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-01-28 16:04:42.622 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-01-28 16:04:42.623 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-01-28 16:04:42.624 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-01-28 16:04:42.625 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-01-28 16:04:42.626 -03:00 [DBG] Executing controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-01-28 16:04:42.627 -03:00 [DBG] Executed controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-01-28 16:04:42.628 -03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' ...
2026-01-28 16:04:42.628 -03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' using the name '' in request data ...
2026-01-28 16:04:42.629 -03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2026-01-28 16:04:42.630 -03:00 [DBG] Connection id "0HNIUJUDJQAIP", Request id "0HNIUJUDJQAIP:00000019": started reading request body.
2026-01-28 16:04:42.631 -03:00 [DBG] Connection id "0HNIUJUDJQAIP", Request id "0HNIUJUDJQAIP:00000019": done reading request body.
2026-01-28 16:04:42.632 -03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Project_Gon.Core.DTOs.Auth.LoginDto'
2026-01-28 16:04:42.632 -03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 16:04:42.633 -03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 16:04:42.634 -03:00 [DBG] Attempting to validate the bound parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' ...
2026-01-28 16:04:42.635 -03:00 [DBG] Done attempting to validate the bound parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 16:04:42.638 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 16:04:42.640 -03:00 [DBG] Compiling query expression: 
'DbSet<Usuario>()
    .Where(u => u.Email == __emailOrRut_0 && u.Activo)
    .AsNoTracking()
    .FirstOrDefault()'
2026-01-28 16:04:42.643 -03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Usuario>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Usuario>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Usuario.Activo (bool) Required, 1], [Property: Usuario.Apellido (string) Required, 2], [Property: Usuario.CreatedAt (DateTime) Required, 3], [Property: Usuario.Email (string) Index MaxLength(255), 4], [Property: Usuario.EmpresaId (int) Required FK Index, 5], [Property: Usuario.Nombre (string) Required, 6], [Property: Usuario.PasswordHash (string) Required, 7], [Property: Usuario.Rol (RolUsuario) Required, 8], [Property: Usuario.Rut (string) Index MaxLength(12), 9], [Property: Usuario.SucursalId (int?) FK Index, 10], [Property: Usuario.UltimoAcceso (DateTime?), 11], [Property: Usuario.UpdatedAt (DateTime?), 12] }
            SELECT TOP(1) u.Id, u.Activo, u.Apellido, u.CreatedAt, u.Email, u.EmpresaId, u.Nombre, u.PasswordHash, u.Rol, u.Rut, u.SucursalId, u.UltimoAcceso, u.UpdatedAt
            FROM Usuarios AS u
            WHERE (u.Email == @__emailOrRut_0) && u.Activo) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Usuario.Activo (bool) Required, 1], [Property: Usuario.Apellido (string) Required, 2], [Property: Usuario.CreatedAt (DateTime) Required, 3], [Property: Usuario.Email (string) Index MaxLength(255), 4], [Property: Usuario.EmpresaId (int) Required FK Index, 5], [Property: Usuario.Nombre (string) Required, 6], [Property: Usuario.PasswordHash (string) Required, 7], [Property: Usuario.Rol (RolUsuario) Required, 8], [Property: Usuario.Rut (string) Index MaxLength(12), 9], [Property: Usuario.SucursalId (int?) FK Index, 10], [Property: Usuario.UltimoAcceso (DateTime?), 11], [Property: Usuario.UpdatedAt (DateTime?), 12] }
            SELECT TOP(1) u.Id, u.Activo, u.Apellido, u.CreatedAt, u.Email, u.EmpresaId, u.Nombre, u.PasswordHash, u.Rol, u.Rut, u.SucursalId, u.UltimoAcceso, u.UpdatedAt
            FROM Usuarios AS u
            WHERE (u.Email == @__emailOrRut_0) && u.Activo, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Usuario entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Usuario instance1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Usuario);
                (object)dataReader.GetInt32(0) != null ? 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")]: 
                            {
                                return 
                                {
                                    Usuario instance;
                                    instance = new Usuario();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Activo>k__BackingField = dataReader.GetBoolean(1);
                                    instance.<Apellido>k__BackingField = dataReader.GetString(2);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(3);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<EmpresaId>k__BackingField = dataReader.GetInt32(5);
                                    instance.<Nombre>k__BackingField = dataReader.GetString(6);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(7);
                                    instance.<Rol>k__BackingField = Invoke(((EnumToNumberConverter<RolUsuario, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Usuario.Rol (RolUsuario) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario").FindProperty("Rol")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(8));
                                    instance.<Rut>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<SucursalId>k__BackingField = dataReader.IsDBNull(10) ? default(int?) : (int?)dataReader.GetInt32(10);
                                    instance.<UltimoAcceso>k__BackingField = dataReader.IsDBNull(11) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(11);
                                    instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(12) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(12);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Usuario)
                    }
                    ;
                    return instance1;
                } : 
                {
                    object[] keyValues1;
                    keyValues1 = new object[]{ (object)dataReader.GetInt32(0) };
                    return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                        entityType: [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")], 
                        properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario").FindPrimaryKey().Properties], 
                        keyValues: keyValues1);
                };
                return instance1;
            };
            return entity;
        }, 
        contextType: Project_Gon.Infrastructure.Data.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2026-01-28 16:04:42.651 -03:00 [DBG] Creating DbConnection.
2026-01-28 16:04:42.651 -03:00 [DBG] Created DbConnection. (0ms).
2026-01-28 16:04:42.652 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:04:42.652 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:04:42.653 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:04:42.654 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:04:42.654 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:04:42.655 -03:00 [DBG] Executing DbCommand [Parameters=[@__emailOrRut_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Email" = @__emailOrRut_0 AND u."Activo"
LIMIT 1
2026-01-28 16:04:42.657 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__emailOrRut_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Email" = @__emailOrRut_0 AND u."Activo"
LIMIT 1
2026-01-28 16:04:42.659 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:04:42.659 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-01-28 16:04:42.660 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:04:42.661 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:04:42.662 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:04:42.662 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:04:42.663 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:04:42.663 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:04:42.664 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:04:42.664 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 16:04:42.666 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 16:04:42.667 -03:00 [DBG] Context 'AppDbContext' started tracking 'Empresa' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:04:42.668 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:04:42.669 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-01-28 16:04:42.670 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:04:42.670 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:04:42.671 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:04:42.672 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:04:42.672 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:04:42.673 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:04:42.674 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:04:42.674 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Activo", s."Ciudad", s."CreatedAt", s."Direccion", s."EmpresaId", s."Nombre", s."Region", s."Telefono", s."UpdatedAt"
FROM "Sucursales" AS s
WHERE s."Id" = @__p_0
LIMIT 1
2026-01-28 16:04:42.676 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Activo", s."Ciudad", s."CreatedAt", s."Direccion", s."EmpresaId", s."Nombre", s."Region", s."Telefono", s."UpdatedAt"
FROM "Sucursales" AS s
WHERE s."Id" = @__p_0
LIMIT 1
2026-01-28 16:04:42.677 -03:00 [DBG] Context 'AppDbContext' started tracking 'Sucursal' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:04:42.678 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:04:42.678 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-01-28 16:04:42.679 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:04:42.680 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:04:42.894 -03:00 [DBG] Context 'AppDbContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:04:42.895 -03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2026-01-28 16:04:42.896 -03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2026-01-28 16:04:42.896 -03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2026-01-28 16:04:42.902 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:04:42.903 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:04:42.903 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:04:42.904 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:04:42.905 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:04:42.905 -03:00 [DBG] Executing DbCommand [Parameters=[@p12='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = Int32), @p5='?', @p6='?', @p7='?' (DbType = Int32), @p8='?', @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Usuarios" SET "Activo" = @p0, "Apellido" = @p1, "CreatedAt" = @p2, "Email" = @p3, "EmpresaId" = @p4, "Nombre" = @p5, "PasswordHash" = @p6, "Rol" = @p7, "Rut" = @p8, "SucursalId" = @p9, "UltimoAcceso" = @p10, "UpdatedAt" = @p11
WHERE "Id" = @p12;
2026-01-28 16:04:42.908 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p12='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = Int32), @p5='?', @p6='?', @p7='?' (DbType = Int32), @p8='?', @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Usuarios" SET "Activo" = @p0, "Apellido" = @p1, "CreatedAt" = @p2, "Email" = @p3, "EmpresaId" = @p4, "Nombre" = @p5, "PasswordHash" = @p6, "Rol" = @p7, "Rut" = @p8, "SucursalId" = @p9, "UltimoAcceso" = @p10, "UpdatedAt" = @p11
WHERE "Id" = @p12;
2026-01-28 16:04:42.910 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:04:42.910 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-01-28 16:04:42.911 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:04:42.912 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:04:42.913 -03:00 [DBG] An entity of type 'Usuario' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:04:42.914 -03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2026-01-28 16:04:42.915 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-01-28 16:04:42.916 -03:00 [DBG] No information found on request to perform content negotiation.
2026-01-28 16:04:42.916 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-01-28 16:04:42.917 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-01-28 16:04:42.918 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-01-28 16:04:42.918 -03:00 [INF] Executing OkObjectResult, writing value of type 'Project_Gon.Core.DTOs.Auth.LoginResponseDto'.
2026-01-28 16:04:42.919 -03:00 [INF] Executed action Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api) in 293.4591ms
2026-01-28 16:04:42.920 -03:00 [INF] Executed endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 16:04:42.920 -03:00 [INF] HTTP POST /api/auth/login responded 200 in 303.3399 ms
2026-01-28 16:04:42.921 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 16:04:42.922 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:04:42.923 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:04:42.924 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/auth/login - 200 null application/json; charset=utf-8 310.531ms
2026-01-28 16:05:54.315 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/auth/login - application/json 59
2026-01-28 16:05:54.316 -03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2026-01-28 16:05:54.317 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)' with route pattern 'api/Auth/login' is valid for the request path '/api/auth/login'
2026-01-28 16:05:54.318 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 16:05:54.318 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 16:05:54.319 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 16:05:54.319 -03:00 [INF] Executing endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 16:05:54.320 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Project_Gon.Core.DTOs.Auth.LoginDto) on controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api).
2026-01-28 16:05:54.321 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-01-28 16:05:54.322 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-01-28 16:05:54.322 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-01-28 16:05:54.323 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-01-28 16:05:54.324 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-01-28 16:05:54.325 -03:00 [DBG] Executing controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-01-28 16:05:54.326 -03:00 [DBG] Executed controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-01-28 16:05:54.326 -03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' ...
2026-01-28 16:05:54.327 -03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' using the name '' in request data ...
2026-01-28 16:05:54.328 -03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2026-01-28 16:05:54.328 -03:00 [DBG] Connection id "0HNIUJUDJQAIP", Request id "0HNIUJUDJQAIP:0000001B": started reading request body.
2026-01-28 16:05:54.329 -03:00 [DBG] Connection id "0HNIUJUDJQAIP", Request id "0HNIUJUDJQAIP:0000001B": done reading request body.
2026-01-28 16:05:54.330 -03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Project_Gon.Core.DTOs.Auth.LoginDto'
2026-01-28 16:05:54.330 -03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 16:05:54.331 -03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 16:05:54.332 -03:00 [DBG] Attempting to validate the bound parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' ...
2026-01-28 16:05:54.332 -03:00 [DBG] Done attempting to validate the bound parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 16:05:54.334 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 16:05:54.335 -03:00 [DBG] Compiling query expression: 
'DbSet<Usuario>()
    .Where(u => u.Rut == __rutLimpio_0 && u.Activo)
    .AsNoTracking()
    .FirstOrDefault()'
2026-01-28 16:05:54.338 -03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Usuario>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Usuario>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Usuario.Activo (bool) Required, 1], [Property: Usuario.Apellido (string) Required, 2], [Property: Usuario.CreatedAt (DateTime) Required, 3], [Property: Usuario.Email (string) Index MaxLength(255), 4], [Property: Usuario.EmpresaId (int) Required FK Index, 5], [Property: Usuario.Nombre (string) Required, 6], [Property: Usuario.PasswordHash (string) Required, 7], [Property: Usuario.Rol (RolUsuario) Required, 8], [Property: Usuario.Rut (string) Index MaxLength(12), 9], [Property: Usuario.SucursalId (int?) FK Index, 10], [Property: Usuario.UltimoAcceso (DateTime?), 11], [Property: Usuario.UpdatedAt (DateTime?), 12] }
            SELECT TOP(1) u.Id, u.Activo, u.Apellido, u.CreatedAt, u.Email, u.EmpresaId, u.Nombre, u.PasswordHash, u.Rol, u.Rut, u.SucursalId, u.UltimoAcceso, u.UpdatedAt
            FROM Usuarios AS u
            WHERE (u.Rut == @__rutLimpio_0) && u.Activo) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Usuario.Activo (bool) Required, 1], [Property: Usuario.Apellido (string) Required, 2], [Property: Usuario.CreatedAt (DateTime) Required, 3], [Property: Usuario.Email (string) Index MaxLength(255), 4], [Property: Usuario.EmpresaId (int) Required FK Index, 5], [Property: Usuario.Nombre (string) Required, 6], [Property: Usuario.PasswordHash (string) Required, 7], [Property: Usuario.Rol (RolUsuario) Required, 8], [Property: Usuario.Rut (string) Index MaxLength(12), 9], [Property: Usuario.SucursalId (int?) FK Index, 10], [Property: Usuario.UltimoAcceso (DateTime?), 11], [Property: Usuario.UpdatedAt (DateTime?), 12] }
            SELECT TOP(1) u.Id, u.Activo, u.Apellido, u.CreatedAt, u.Email, u.EmpresaId, u.Nombre, u.PasswordHash, u.Rol, u.Rut, u.SucursalId, u.UltimoAcceso, u.UpdatedAt
            FROM Usuarios AS u
            WHERE (u.Rut == @__rutLimpio_0) && u.Activo, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Usuario entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Usuario instance1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Usuario);
                (object)dataReader.GetInt32(0) != null ? 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")]: 
                            {
                                return 
                                {
                                    Usuario instance;
                                    instance = new Usuario();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Activo>k__BackingField = dataReader.GetBoolean(1);
                                    instance.<Apellido>k__BackingField = dataReader.GetString(2);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(3);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<EmpresaId>k__BackingField = dataReader.GetInt32(5);
                                    instance.<Nombre>k__BackingField = dataReader.GetString(6);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(7);
                                    instance.<Rol>k__BackingField = Invoke(((EnumToNumberConverter<RolUsuario, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Usuario.Rol (RolUsuario) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario").FindProperty("Rol")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(8));
                                    instance.<Rut>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<SucursalId>k__BackingField = dataReader.IsDBNull(10) ? default(int?) : (int?)dataReader.GetInt32(10);
                                    instance.<UltimoAcceso>k__BackingField = dataReader.IsDBNull(11) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(11);
                                    instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(12) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(12);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Usuario)
                    }
                    ;
                    return instance1;
                } : 
                {
                    object[] keyValues1;
                    keyValues1 = new object[]{ (object)dataReader.GetInt32(0) };
                    return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                        entityType: [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")], 
                        properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario").FindPrimaryKey().Properties], 
                        keyValues: keyValues1);
                };
                return instance1;
            };
            return entity;
        }, 
        contextType: Project_Gon.Infrastructure.Data.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2026-01-28 16:05:54.346 -03:00 [DBG] Creating DbConnection.
2026-01-28 16:05:54.346 -03:00 [DBG] Created DbConnection. (0ms).
2026-01-28 16:05:54.347 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:05:54.347 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:05:54.348 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:05:54.348 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:05:54.349 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:05:54.350 -03:00 [DBG] Executing DbCommand [Parameters=[@__rutLimpio_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Rut" = @__rutLimpio_0 AND u."Activo"
LIMIT 1
2026-01-28 16:05:54.351 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__rutLimpio_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Rut" = @__rutLimpio_0 AND u."Activo"
LIMIT 1
2026-01-28 16:05:54.352 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:05:54.353 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-01-28 16:05:54.354 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:05:54.355 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:05:54.356 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:05:54.356 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:05:54.357 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:05:54.357 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:05:54.358 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:05:54.358 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 16:05:54.360 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 16:05:54.361 -03:00 [DBG] Context 'AppDbContext' started tracking 'Empresa' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:05:54.362 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:05:54.363 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-01-28 16:05:54.363 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:05:54.364 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:05:54.579 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-01-28 16:05:54.580 -03:00 [DBG] No information found on request to perform content negotiation.
2026-01-28 16:05:54.581 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-01-28 16:05:54.581 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-01-28 16:05:54.582 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2026-01-28 16:05:54.582 -03:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'System.String'.
2026-01-28 16:05:54.583 -03:00 [INF] Executed action Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api) in 258.1876ms
2026-01-28 16:05:54.584 -03:00 [INF] Executed endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 16:05:54.584 -03:00 [INF] HTTP POST /api/auth/login responded 401 in 265.3629 ms
2026-01-28 16:05:54.585 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 16:05:54.586 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:05:54.586 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:05:54.587 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/auth/login - 401 null text/plain; charset=utf-8 271.7639ms
2026-01-28 16:06:29.288 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/auth/login - application/json 59
2026-01-28 16:06:29.295 -03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2026-01-28 16:06:29.296 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)' with route pattern 'api/Auth/login' is valid for the request path '/api/auth/login'
2026-01-28 16:06:29.298 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 16:06:29.299 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 16:06:29.299 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 16:06:29.300 -03:00 [INF] Executing endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 16:06:29.300 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Project_Gon.Core.DTOs.Auth.LoginDto) on controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api).
2026-01-28 16:06:29.302 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-01-28 16:06:29.303 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-01-28 16:06:29.303 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-01-28 16:06:29.305 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-01-28 16:06:29.306 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-01-28 16:06:29.307 -03:00 [DBG] Executing controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-01-28 16:06:29.308 -03:00 [DBG] Executed controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-01-28 16:06:29.309 -03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' ...
2026-01-28 16:06:29.309 -03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' using the name '' in request data ...
2026-01-28 16:06:29.310 -03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2026-01-28 16:06:29.311 -03:00 [DBG] Connection id "0HNIUJUDJQAIP", Request id "0HNIUJUDJQAIP:0000001D": started reading request body.
2026-01-28 16:06:29.312 -03:00 [DBG] Connection id "0HNIUJUDJQAIP", Request id "0HNIUJUDJQAIP:0000001D": done reading request body.
2026-01-28 16:06:29.312 -03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Project_Gon.Core.DTOs.Auth.LoginDto'
2026-01-28 16:06:29.313 -03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 16:06:29.314 -03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 16:06:29.314 -03:00 [DBG] Attempting to validate the bound parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' ...
2026-01-28 16:06:29.315 -03:00 [DBG] Done attempting to validate the bound parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 16:06:29.316 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 16:06:29.317 -03:00 [DBG] Creating DbConnection.
2026-01-28 16:06:29.318 -03:00 [DBG] Created DbConnection. (0ms).
2026-01-28 16:06:29.318 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:06:29.357 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:06:29.358 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:06:29.358 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:06:29.359 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:06:29.360 -03:00 [DBG] Executing DbCommand [Parameters=[@__rutLimpio_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Rut" = @__rutLimpio_0 AND u."Activo"
LIMIT 1
2026-01-28 16:06:29.363 -03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__rutLimpio_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Rut" = @__rutLimpio_0 AND u."Activo"
LIMIT 1
2026-01-28 16:06:29.365 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:06:29.365 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-01-28 16:06:29.366 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:06:29.367 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:06:29.367 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:06:29.368 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:06:29.369 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:06:29.369 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:06:29.370 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:06:29.370 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 16:06:29.372 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 16:06:29.374 -03:00 [DBG] Context 'AppDbContext' started tracking 'Empresa' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:06:29.374 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:06:29.375 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-01-28 16:06:29.376 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:06:29.377 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:06:29.589 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-01-28 16:06:29.590 -03:00 [DBG] No information found on request to perform content negotiation.
2026-01-28 16:06:29.591 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-01-28 16:06:29.591 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-01-28 16:06:29.592 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2026-01-28 16:06:29.592 -03:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'System.String'.
2026-01-28 16:06:29.596 -03:00 [INF] Executed action Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api) in 288.9441ms
2026-01-28 16:06:29.597 -03:00 [INF] Executed endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 16:06:29.598 -03:00 [INF] HTTP POST /api/auth/login responded 401 in 298.4643 ms
2026-01-28 16:06:29.598 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 16:06:29.599 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:06:29.600 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:06:29.600 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/auth/login - 401 null text/plain; charset=utf-8 312.7143ms
2026-01-28 16:08:41.171 -03:00 [DBG] Connection id "0HNIUJUDJQAIP" is closing.
2026-01-28 16:08:41.172 -03:00 [DBG] Connection id "0HNIUJUDJQAIP" is closed. The last processed stream ID was 29.
2026-01-28 16:08:41.174 -03:00 [DBG] The connection queue processing loop for 0HNIUJUDJQAIP completed.
2026-01-28 16:08:41.176 -03:00 [DBG] Connection id "0HNIUJUDJQAIP" stopped.
2026-01-28 16:08:41.177 -03:00 [DBG] Connection id "0HNIUJUDJQAIP" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-01-28 16:08:56.087 -03:00 [DBG] Connection id "0HNIUJUDJQAIQ" accepted.
2026-01-28 16:08:56.088 -03:00 [DBG] Connection id "0HNIUJUDJQAIQ" started.
2026-01-28 16:08:56.097 -03:00 [DBG] Connection 0HNIUJUDJQAIQ established using the following protocol: "Tls12"
2026-01-28 16:08:56.098 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/auth/login - application/json 59
2026-01-28 16:08:56.099 -03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2026-01-28 16:08:56.100 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)' with route pattern 'api/Auth/login' is valid for the request path '/api/auth/login'
2026-01-28 16:08:56.101 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 16:08:56.101 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 16:08:56.101 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 16:08:56.102 -03:00 [INF] Executing endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 16:08:56.102 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Project_Gon.Core.DTOs.Auth.LoginDto) on controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api).
2026-01-28 16:08:56.104 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-01-28 16:08:56.105 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-01-28 16:08:56.105 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-01-28 16:08:56.106 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-01-28 16:08:56.107 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-01-28 16:08:56.108 -03:00 [DBG] Executing controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-01-28 16:08:56.109 -03:00 [DBG] Executed controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-01-28 16:08:56.110 -03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' ...
2026-01-28 16:08:56.110 -03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' using the name '' in request data ...
2026-01-28 16:08:56.111 -03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2026-01-28 16:08:56.112 -03:00 [DBG] Connection id "0HNIUJUDJQAIQ", Request id "0HNIUJUDJQAIQ:00000001": started reading request body.
2026-01-28 16:08:56.113 -03:00 [DBG] Connection id "0HNIUJUDJQAIQ", Request id "0HNIUJUDJQAIQ:00000001": done reading request body.
2026-01-28 16:08:56.114 -03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Project_Gon.Core.DTOs.Auth.LoginDto'
2026-01-28 16:08:56.114 -03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 16:08:56.115 -03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 16:08:56.116 -03:00 [DBG] Attempting to validate the bound parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' ...
2026-01-28 16:08:56.117 -03:00 [DBG] Done attempting to validate the bound parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 16:08:56.118 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 16:08:56.119 -03:00 [DBG] Creating DbConnection.
2026-01-28 16:08:56.120 -03:00 [DBG] Created DbConnection. (0ms).
2026-01-28 16:08:56.120 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:08:56.121 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:08:56.121 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:08:56.122 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:08:56.123 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:08:56.123 -03:00 [DBG] Executing DbCommand [Parameters=[@__rutLimpio_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Rut" = @__rutLimpio_0 AND u."Activo"
LIMIT 1
2026-01-28 16:08:56.125 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__rutLimpio_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Rut" = @__rutLimpio_0 AND u."Activo"
LIMIT 1
2026-01-28 16:08:56.126 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:08:56.127 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-01-28 16:08:56.128 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:08:56.128 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:08:56.129 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:08:56.130 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:08:56.131 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:08:56.131 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:08:56.132 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:08:56.132 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 16:08:56.134 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 16:08:56.135 -03:00 [DBG] Context 'AppDbContext' started tracking 'Empresa' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:08:56.136 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:08:56.137 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-01-28 16:08:56.138 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:08:56.138 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:08:56.358 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-01-28 16:08:56.359 -03:00 [DBG] No information found on request to perform content negotiation.
2026-01-28 16:08:56.360 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-01-28 16:08:56.360 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-01-28 16:08:56.361 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2026-01-28 16:08:56.362 -03:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'System.String'.
2026-01-28 16:08:56.363 -03:00 [INF] Executed action Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api) in 254.4055ms
2026-01-28 16:08:56.363 -03:00 [INF] Executed endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 16:08:56.364 -03:00 [INF] HTTP POST /api/auth/login responded 401 in 262.4018 ms
2026-01-28 16:08:56.365 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 16:08:56.365 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:08:56.366 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:08:56.368 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/auth/login - 401 null text/plain; charset=utf-8 269.5705ms
2026-01-28 16:11:08.342 -03:00 [DBG] Connection id "0HNIUJUDJQAIQ" is closing.
2026-01-28 16:11:08.343 -03:00 [DBG] Connection id "0HNIUJUDJQAIQ" is closed. The last processed stream ID was 1.
2026-01-28 16:11:08.358 -03:00 [DBG] The connection queue processing loop for 0HNIUJUDJQAIQ completed.
2026-01-28 16:11:08.359 -03:00 [DBG] Connection id "0HNIUJUDJQAIQ" stopped.
2026-01-28 16:11:08.360 -03:00 [DBG] Connection id "0HNIUJUDJQAIQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-01-28 16:11:21.200 -03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-01-28 16:11:21.543 -03:00 [DBG] The index {'ProductoId'} was not created on entity type 'Stock' as the properties are already covered by the index {'ProductoId', 'SucursalId'}.
2026-01-28 16:11:21.544 -03:00 [DBG] The index {'EmpresaId'} was not created on entity type 'Usuario' as the properties are already covered by the index {'EmpresaId', 'Email'}.
2026-01-28 16:11:21.545 -03:00 [DBG] The index {'EmpresaId'} was not created on entity type 'Usuario' as the properties are already covered by the index {'EmpresaId', 'Rut'}.
2026-01-28 16:11:21.618 -03:00 [DBG] The property 'MovimientoStock.DevolucionId' was created in shadow state because there are no eligible CLR members with a matching name.
2026-01-28 16:11:21.681 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 16:11:21.692 -03:00 [DBG] Creating DbConnection.
2026-01-28 16:11:21.709 -03:00 [DBG] Created DbConnection. (15ms).
2026-01-28 16:11:21.712 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:11:21.783 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:11:21.786 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:11:21.789 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2026-01-28 16:11:21.791 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2026-01-28 16:11:21.795 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-28 16:11:21.815 -03:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-28 16:11:21.833 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:11:21.838 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 19ms reading results.
2026-01-28 16:11:21.839 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:11:21.842 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (2ms).
2026-01-28 16:11:21.945 -03:00 [DBG] Migrating using database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:11:21.947 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:11:21.950 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:11:22.091 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:11:22.092 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:11:22.094 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (1ms).
2026-01-28 16:11:22.095 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:11:22.095 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:11:22.121 -03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-01-28 16:11:22.122 -03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-01-28 16:11:22.122 -03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1ms).
2026-01-28 16:11:22.123 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2026-01-28 16:11:22.128 -03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2026-01-28 16:11:22.131 -03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2026-01-28 16:11:22.133 -03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2026-01-28 16:11:22.135 -03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2026-01-28 16:11:22.135 -03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-01-28 16:11:22.136 -03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-01-28 16:11:22.136 -03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1ms).
2026-01-28 16:11:22.137 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2026-01-28 16:11:22.138 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2026-01-28 16:11:22.139 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:11:22.140 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:11:22.140 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:11:22.141 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-28 16:11:22.142 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-28 16:11:22.145 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:11:22.146 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-01-28 16:11:22.152 -03:00 [INF] No migrations were applied. The database is already up to date.
2026-01-28 16:11:22.153 -03:00 [DBG] Committing transaction.
2026-01-28 16:11:22.191 -03:00 [DBG] Committed transaction.
2026-01-28 16:11:22.192 -03:00 [DBG] Disposing transaction.
2026-01-28 16:11:22.192 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:11:22.193 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:11:22.194 -03:00 [INF] Database migrations applied successfully
2026-01-28 16:11:22.196 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 16:11:22.197 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:11:22.198 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:11:22.218 -03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-01-28 16:11:22.246 -03:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2026-01-28 16:11:22.257 -03:00 [INF] Project Gon API iniciada en ambiente: Development
2026-01-28 16:11:22.259 -03:00 [DBG] Hosting starting
2026-01-28 16:11:22.267 -03:00 [INF] User profile is available. Using 'C:\Users\Jossan\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-28 16:11:22.272 -03:00 [DBG] Reading data from file 'C:\Users\Jossan\AppData\Local\ASP.NET\DataProtection-Keys\key-7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c.xml'.
2026-01-28 16:11:22.277 -03:00 [DBG] Found key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c}.
2026-01-28 16:11:22.282 -03:00 [DBG] Considering key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} with expiration date 2026-04-28 18:20:11Z as default key.
2026-01-28 16:11:22.284 -03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2026-01-28 16:11:22.285 -03:00 [DBG] Decrypting secret element using Windows DPAPI.
2026-01-28 16:11:22.286 -03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2026-01-28 16:11:22.288 -03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2026-01-28 16:11:22.289 -03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2026-01-28 16:11:22.290 -03:00 [DBG] Using key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} as the default key.
2026-01-28 16:11:22.291 -03:00 [DBG] Key ring with default key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} was loaded during application startup.
2026-01-28 16:11:22.293 -03:00 [DBG] Middleware loaded
2026-01-28 16:11:22.294 -03:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16515 B).
2026-01-28 16:11:22.295 -03:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2026-01-28 16:11:22.338 -03:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2026-01-28 16:11:22.339 -03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-01-28 16:11:22.341 -03:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2026-01-28 16:11:22.366 -03:00 [INF] Now listening on: https://localhost:7058
2026-01-28 16:11:22.367 -03:00 [INF] Now listening on: http://localhost:5070
2026-01-28 16:11:22.367 -03:00 [DBG] Loaded hosting startup assembly Project_Gon.Api
2026-01-28 16:11:22.368 -03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-01-28 16:11:22.368 -03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-01-28 16:11:22.369 -03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-01-28 16:11:22.372 -03:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2026-01-28 16:11:22.374 -03:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2026-01-28 16:11:22.471 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-28 16:11:22.472 -03:00 [INF] Hosting environment: Development
2026-01-28 16:11:22.473 -03:00 [INF] Content root path: C:\Proyectos\Project_Gon\Project_Gon.Api
2026-01-28 16:11:22.474 -03:00 [DBG] Hosting started
2026-01-28 16:11:27.891 -03:00 [DBG] Connection id "0HNIUK44RDLJG" accepted.
2026-01-28 16:11:27.892 -03:00 [DBG] Connection id "0HNIUK44RDLJG" started.
2026-01-28 16:11:27.917 -03:00 [DBG] Connection 0HNIUK44RDLJG established using the following protocol: "Tls12"
2026-01-28 16:11:27.933 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/auth/login - application/json 59
2026-01-28 16:11:27.949 -03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2026-01-28 16:11:27.950 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)' with route pattern 'api/Auth/login' is valid for the request path '/api/auth/login'
2026-01-28 16:11:27.951 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 16:11:27.954 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 16:11:27.967 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 16:11:27.969 -03:00 [INF] Executing endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 16:11:27.977 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Project_Gon.Core.DTOs.Auth.LoginDto) on controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api).
2026-01-28 16:11:27.979 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-01-28 16:11:27.980 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-01-28 16:11:27.981 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-01-28 16:11:27.982 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-01-28 16:11:27.983 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-01-28 16:11:27.984 -03:00 [DBG] Executing controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-01-28 16:11:28.045 -03:00 [DBG] Executed controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-01-28 16:11:28.047 -03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' ...
2026-01-28 16:11:28.049 -03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' using the name '' in request data ...
2026-01-28 16:11:28.050 -03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2026-01-28 16:11:28.054 -03:00 [DBG] Connection id "0HNIUK44RDLJG", Request id "0HNIUK44RDLJG:00000001": started reading request body.
2026-01-28 16:11:28.054 -03:00 [DBG] Connection id "0HNIUK44RDLJG", Request id "0HNIUK44RDLJG:00000001": done reading request body.
2026-01-28 16:11:28.058 -03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Project_Gon.Core.DTOs.Auth.LoginDto'
2026-01-28 16:11:28.058 -03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 16:11:28.059 -03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 16:11:28.060 -03:00 [DBG] Attempting to validate the bound parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' ...
2026-01-28 16:11:28.068 -03:00 [DBG] Done attempting to validate the bound parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 16:11:28.070 -03:00 [INF] [LOGIN] Intento de login con: 12345678-9
2026-01-28 16:11:28.072 -03:00 [DBG] [CLEAN_RUT] Original: 12345678-9 -> Limpio: 12345678-9
2026-01-28 16:11:28.072 -03:00 [INF] [FIND] Buscando por RUT limpio: 12345678-9
2026-01-28 16:11:28.086 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 16:11:28.118 -03:00 [DBG] Compiling query expression: 
'DbSet<Usuario>()
    .Where(u => u.Rut == __rutLimpio_0 && u.Activo)
    .AsNoTracking()
    .FirstOrDefault()'
2026-01-28 16:11:28.240 -03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Usuario>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Usuario>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Usuario.Activo (bool) Required, 1], [Property: Usuario.Apellido (string) Required, 2], [Property: Usuario.CreatedAt (DateTime) Required, 3], [Property: Usuario.Email (string) Index MaxLength(255), 4], [Property: Usuario.EmpresaId (int) Required FK Index, 5], [Property: Usuario.Nombre (string) Required, 6], [Property: Usuario.PasswordHash (string) Required, 7], [Property: Usuario.Rol (RolUsuario) Required, 8], [Property: Usuario.Rut (string) Index MaxLength(12), 9], [Property: Usuario.SucursalId (int?) FK Index, 10], [Property: Usuario.UltimoAcceso (DateTime?), 11], [Property: Usuario.UpdatedAt (DateTime?), 12] }
            SELECT TOP(1) u.Id, u.Activo, u.Apellido, u.CreatedAt, u.Email, u.EmpresaId, u.Nombre, u.PasswordHash, u.Rol, u.Rut, u.SucursalId, u.UltimoAcceso, u.UpdatedAt
            FROM Usuarios AS u
            WHERE (u.Rut == @__rutLimpio_0) && u.Activo) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Usuario.Activo (bool) Required, 1], [Property: Usuario.Apellido (string) Required, 2], [Property: Usuario.CreatedAt (DateTime) Required, 3], [Property: Usuario.Email (string) Index MaxLength(255), 4], [Property: Usuario.EmpresaId (int) Required FK Index, 5], [Property: Usuario.Nombre (string) Required, 6], [Property: Usuario.PasswordHash (string) Required, 7], [Property: Usuario.Rol (RolUsuario) Required, 8], [Property: Usuario.Rut (string) Index MaxLength(12), 9], [Property: Usuario.SucursalId (int?) FK Index, 10], [Property: Usuario.UltimoAcceso (DateTime?), 11], [Property: Usuario.UpdatedAt (DateTime?), 12] }
            SELECT TOP(1) u.Id, u.Activo, u.Apellido, u.CreatedAt, u.Email, u.EmpresaId, u.Nombre, u.PasswordHash, u.Rol, u.Rut, u.SucursalId, u.UltimoAcceso, u.UpdatedAt
            FROM Usuarios AS u
            WHERE (u.Rut == @__rutLimpio_0) && u.Activo, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Usuario entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Usuario instance1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Usuario);
                (object)dataReader.GetInt32(0) != null ? 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")]: 
                            {
                                return 
                                {
                                    Usuario instance;
                                    instance = new Usuario();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Activo>k__BackingField = dataReader.GetBoolean(1);
                                    instance.<Apellido>k__BackingField = dataReader.GetString(2);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(3);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<EmpresaId>k__BackingField = dataReader.GetInt32(5);
                                    instance.<Nombre>k__BackingField = dataReader.GetString(6);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(7);
                                    instance.<Rol>k__BackingField = Invoke(((EnumToNumberConverter<RolUsuario, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Usuario.Rol (RolUsuario) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario").FindProperty("Rol")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(8));
                                    instance.<Rut>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<SucursalId>k__BackingField = dataReader.IsDBNull(10) ? default(int?) : (int?)dataReader.GetInt32(10);
                                    instance.<UltimoAcceso>k__BackingField = dataReader.IsDBNull(11) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(11);
                                    instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(12) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(12);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Usuario)
                    }
                    ;
                    return instance1;
                } : 
                {
                    object[] keyValues1;
                    keyValues1 = new object[]{ (object)dataReader.GetInt32(0) };
                    return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                        entityType: [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")], 
                        properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario").FindPrimaryKey().Properties], 
                        keyValues: keyValues1);
                };
                return instance1;
            };
            return entity;
        }, 
        contextType: Project_Gon.Infrastructure.Data.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2026-01-28 16:11:28.274 -03:00 [DBG] Creating DbConnection.
2026-01-28 16:11:28.275 -03:00 [DBG] Created DbConnection. (0ms).
2026-01-28 16:11:28.276 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:11:28.278 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:11:28.278 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:11:28.279 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:11:28.281 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2026-01-28 16:11:28.283 -03:00 [DBG] Executing DbCommand [Parameters=[@__rutLimpio_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Rut" = @__rutLimpio_0 AND u."Activo"
LIMIT 1
2026-01-28 16:11:28.292 -03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__rutLimpio_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Rut" = @__rutLimpio_0 AND u."Activo"
LIMIT 1
2026-01-28 16:11:28.301 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:11:28.302 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 8ms reading results.
2026-01-28 16:11:28.304 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:11:28.305 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:11:28.306 -03:00 [INF] [FIND] Usuario encontrado - ID: 2, RUT: 12345678-9
2026-01-28 16:11:28.312 -03:00 [DBG] Compiling query expression: 
'DbSet<Empresa>()
    .FirstOrDefault(e => EF.Property<int>(e, "Id") == __p_0)'
2026-01-28 16:11:28.320 -03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Empresa>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Empresa>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Empresa.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Empresa.Activo (bool) Required, 1], [Property: Empresa.Ciudad (string), 2], [Property: Empresa.CreatedAt (DateTime) Required, 3], [Property: Empresa.Direccion (string), 4], [Property: Empresa.Nombre (string) Required MaxLength(255), 5], [Property: Empresa.Region (string), 6], [Property: Empresa.Rut (string), 7], [Property: Empresa.UpdatedAt (DateTime?), 8] }
            SELECT TOP(1) e.Id, e.Activo, e.Ciudad, e.CreatedAt, e.Direccion, e.Nombre, e.Region, e.Rut, e.UpdatedAt
            FROM Empresas AS e
            WHERE e.Id == @__p_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Empresa.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Empresa.Activo (bool) Required, 1], [Property: Empresa.Ciudad (string), 2], [Property: Empresa.CreatedAt (DateTime) Required, 3], [Property: Empresa.Direccion (string), 4], [Property: Empresa.Nombre (string) Required MaxLength(255), 5], [Property: Empresa.Region (string), 6], [Property: Empresa.Rut (string), 7], [Property: Empresa.UpdatedAt (DateTime?), 8] }
            SELECT TOP(1) e.Id, e.Activo, e.Ciudad, e.CreatedAt, e.Direccion, e.Nombre, e.Region, e.Rut, e.UpdatedAt
            FROM Empresas AS e
            WHERE e.Id == @__p_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Empresa entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Empresa instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Empresa);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Empresa.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Empresa").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (Empresa)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Empresa | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Empresa")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Empresa | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Empresa")]: 
                            {
                                return 
                                {
                                    Empresa instance;
                                    instance = new Empresa();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Activo>k__BackingField = dataReader.GetBoolean(1);
                                    instance.<Ciudad>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(3);
                                    instance.<Direccion>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<Nombre>k__BackingField = dataReader.GetString(5);
                                    instance.<Region>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                    instance.<Rut>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(8) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(8);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Empresa | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Empresa")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Empresa)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: Project_Gon.Infrastructure.Data.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2026-01-28 16:11:28.328 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:11:28.329 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:11:28.329 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:11:28.330 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:11:28.330 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:11:28.331 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 16:11:28.334 -03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 16:11:28.360 -03:00 [DBG] Context 'AppDbContext' started tracking 'Empresa' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:11:28.379 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:11:28.380 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 44ms reading results.
2026-01-28 16:11:28.381 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:11:28.381 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:11:28.382 -03:00 [INF] [LOGIN] Usuario encontrado: true
2026-01-28 16:11:28.383 -03:00 [INF] [LOGIN] Usuario ID: 2, RUT: 12345678-9, Email: null, Activo: true
2026-01-28 16:11:28.383 -03:00 [INF] [LOGIN] Verificando contrasea para usuario ID: 2
2026-01-28 16:11:29.057 -03:00 [INF] [LOGIN] Password vlido: false
2026-01-28 16:11:29.058 -03:00 [WRN] [LOGIN] Login rechazado - Contrasea incorrecta para usuario ID: 2
2026-01-28 16:11:29.061 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-01-28 16:11:29.063 -03:00 [DBG] No information found on request to perform content negotiation.
2026-01-28 16:11:29.063 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-01-28 16:11:29.064 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-01-28 16:11:29.065 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2026-01-28 16:11:29.066 -03:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'System.String'.
2026-01-28 16:11:29.069 -03:00 [INF] Executed action Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api) in 1083.3897ms
2026-01-28 16:11:29.072 -03:00 [INF] Executed endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 16:11:29.074 -03:00 [INF] HTTP POST /api/auth/login responded 401 in 1116.7096 ms
2026-01-28 16:11:29.077 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 16:11:29.079 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:11:29.080 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (1ms).
2026-01-28 16:11:29.082 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/auth/login - 401 null text/plain; charset=utf-8 1150.2585ms
2026-01-28 16:11:35.794 -03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-01-28 16:11:36.142 -03:00 [DBG] The index {'ProductoId'} was not created on entity type 'Stock' as the properties are already covered by the index {'ProductoId', 'SucursalId'}.
2026-01-28 16:11:36.144 -03:00 [DBG] The index {'EmpresaId'} was not created on entity type 'Usuario' as the properties are already covered by the index {'EmpresaId', 'Email'}.
2026-01-28 16:11:36.145 -03:00 [DBG] The index {'EmpresaId'} was not created on entity type 'Usuario' as the properties are already covered by the index {'EmpresaId', 'Rut'}.
2026-01-28 16:11:36.218 -03:00 [DBG] The property 'MovimientoStock.DevolucionId' was created in shadow state because there are no eligible CLR members with a matching name.
2026-01-28 16:11:36.277 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 16:11:36.293 -03:00 [DBG] Creating DbConnection.
2026-01-28 16:11:36.309 -03:00 [DBG] Created DbConnection. (16ms).
2026-01-28 16:11:36.312 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:11:36.382 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:11:36.386 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:11:36.389 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2026-01-28 16:11:36.390 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2026-01-28 16:11:36.394 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-28 16:11:36.414 -03:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-28 16:11:36.433 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:11:36.438 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 20ms reading results.
2026-01-28 16:11:36.440 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:11:36.442 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (2ms).
2026-01-28 16:11:36.546 -03:00 [DBG] Migrating using database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:11:36.549 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:11:36.551 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:11:36.686 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:11:36.687 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:11:36.689 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (1ms).
2026-01-28 16:11:36.690 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:11:36.690 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:11:36.716 -03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-01-28 16:11:36.716 -03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-01-28 16:11:36.717 -03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1ms).
2026-01-28 16:11:36.718 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2026-01-28 16:11:36.723 -03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2026-01-28 16:11:36.726 -03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2026-01-28 16:11:36.728 -03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2026-01-28 16:11:36.729 -03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2026-01-28 16:11:36.730 -03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-01-28 16:11:36.730 -03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-01-28 16:11:36.731 -03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1ms).
2026-01-28 16:11:36.732 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2026-01-28 16:11:36.733 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2026-01-28 16:11:36.734 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:11:36.734 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:11:36.735 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:11:36.735 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-28 16:11:36.737 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-28 16:11:36.738 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:11:36.738 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-01-28 16:11:36.743 -03:00 [INF] No migrations were applied. The database is already up to date.
2026-01-28 16:11:36.745 -03:00 [DBG] Committing transaction.
2026-01-28 16:11:36.782 -03:00 [DBG] Committed transaction.
2026-01-28 16:11:36.783 -03:00 [DBG] Disposing transaction.
2026-01-28 16:11:36.783 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:11:36.784 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:11:36.785 -03:00 [INF] Database migrations applied successfully
2026-01-28 16:11:36.787 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 16:11:36.788 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:11:36.789 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:11:36.808 -03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-01-28 16:11:36.835 -03:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2026-01-28 16:11:36.847 -03:00 [INF] Project Gon API iniciada en ambiente: Development
2026-01-28 16:11:36.849 -03:00 [DBG] Hosting starting
2026-01-28 16:11:36.856 -03:00 [INF] User profile is available. Using 'C:\Users\Jossan\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-28 16:11:36.861 -03:00 [DBG] Reading data from file 'C:\Users\Jossan\AppData\Local\ASP.NET\DataProtection-Keys\key-7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c.xml'.
2026-01-28 16:11:36.866 -03:00 [DBG] Found key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c}.
2026-01-28 16:11:36.871 -03:00 [DBG] Considering key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} with expiration date 2026-04-28 18:20:11Z as default key.
2026-01-28 16:11:36.873 -03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2026-01-28 16:11:36.874 -03:00 [DBG] Decrypting secret element using Windows DPAPI.
2026-01-28 16:11:36.875 -03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2026-01-28 16:11:36.877 -03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2026-01-28 16:11:36.878 -03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2026-01-28 16:11:36.879 -03:00 [DBG] Using key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} as the default key.
2026-01-28 16:11:36.880 -03:00 [DBG] Key ring with default key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} was loaded during application startup.
2026-01-28 16:11:36.882 -03:00 [DBG] Middleware loaded
2026-01-28 16:11:36.883 -03:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16515 B).
2026-01-28 16:11:36.884 -03:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2026-01-28 16:11:36.924 -03:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2026-01-28 16:11:36.925 -03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-01-28 16:11:36.927 -03:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2026-01-28 16:11:36.951 -03:00 [INF] Now listening on: https://localhost:7058
2026-01-28 16:11:36.952 -03:00 [INF] Now listening on: http://localhost:5070
2026-01-28 16:11:36.953 -03:00 [DBG] Loaded hosting startup assembly Project_Gon.Api
2026-01-28 16:11:36.953 -03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-01-28 16:11:36.954 -03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-01-28 16:11:36.954 -03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-01-28 16:11:36.957 -03:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2026-01-28 16:11:36.959 -03:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2026-01-28 16:11:37.050 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-28 16:11:37.051 -03:00 [INF] Hosting environment: Development
2026-01-28 16:11:37.051 -03:00 [INF] Content root path: C:\Proyectos\Project_Gon\Project_Gon.Api
2026-01-28 16:11:37.053 -03:00 [DBG] Hosting started
2026-01-28 16:11:50.860 -03:00 [DBG] Connection id "0HNIUK4BMF546" accepted.
2026-01-28 16:11:50.861 -03:00 [DBG] Connection id "0HNIUK4BMF546" started.
2026-01-28 16:11:50.892 -03:00 [DBG] Connection 0HNIUK4BMF546 established using the following protocol: "Tls12"
2026-01-28 16:11:50.911 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/auth/login - application/json 59
2026-01-28 16:11:50.928 -03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2026-01-28 16:11:50.929 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)' with route pattern 'api/Auth/login' is valid for the request path '/api/auth/login'
2026-01-28 16:11:50.931 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 16:11:50.935 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 16:11:50.947 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 16:11:50.949 -03:00 [INF] Executing endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 16:11:50.957 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Project_Gon.Core.DTOs.Auth.LoginDto) on controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api).
2026-01-28 16:11:50.959 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-01-28 16:11:50.960 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-01-28 16:11:50.961 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-01-28 16:11:50.962 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-01-28 16:11:50.963 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-01-28 16:11:50.964 -03:00 [DBG] Executing controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-01-28 16:11:51.021 -03:00 [DBG] Executed controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-01-28 16:11:51.024 -03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' ...
2026-01-28 16:11:51.025 -03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' using the name '' in request data ...
2026-01-28 16:11:51.026 -03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2026-01-28 16:11:51.030 -03:00 [DBG] Connection id "0HNIUK4BMF546", Request id "0HNIUK4BMF546:00000001": started reading request body.
2026-01-28 16:11:51.030 -03:00 [DBG] Connection id "0HNIUK4BMF546", Request id "0HNIUK4BMF546:00000001": done reading request body.
2026-01-28 16:11:51.034 -03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Project_Gon.Core.DTOs.Auth.LoginDto'
2026-01-28 16:11:51.034 -03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 16:11:51.035 -03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 16:11:51.036 -03:00 [DBG] Attempting to validate the bound parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' ...
2026-01-28 16:11:51.043 -03:00 [DBG] Done attempting to validate the bound parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 16:11:51.045 -03:00 [INF] [LOGIN] Intento de login con: 12345678-9
2026-01-28 16:11:51.046 -03:00 [DBG] [CLEAN_RUT] Original: 12345678-9 -> Limpio: 12345678-9
2026-01-28 16:11:51.047 -03:00 [INF] [FIND] Buscando por RUT limpio: 12345678-9
2026-01-28 16:11:51.060 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 16:11:51.091 -03:00 [DBG] Compiling query expression: 
'DbSet<Usuario>()
    .Where(u => u.Rut == __rutLimpio_0 && u.Activo)
    .AsNoTracking()
    .FirstOrDefault()'
2026-01-28 16:11:51.215 -03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Usuario>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Usuario>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Usuario.Activo (bool) Required, 1], [Property: Usuario.Apellido (string) Required, 2], [Property: Usuario.CreatedAt (DateTime) Required, 3], [Property: Usuario.Email (string) Index MaxLength(255), 4], [Property: Usuario.EmpresaId (int) Required FK Index, 5], [Property: Usuario.Nombre (string) Required, 6], [Property: Usuario.PasswordHash (string) Required, 7], [Property: Usuario.Rol (RolUsuario) Required, 8], [Property: Usuario.Rut (string) Index MaxLength(12), 9], [Property: Usuario.SucursalId (int?) FK Index, 10], [Property: Usuario.UltimoAcceso (DateTime?), 11], [Property: Usuario.UpdatedAt (DateTime?), 12] }
            SELECT TOP(1) u.Id, u.Activo, u.Apellido, u.CreatedAt, u.Email, u.EmpresaId, u.Nombre, u.PasswordHash, u.Rol, u.Rut, u.SucursalId, u.UltimoAcceso, u.UpdatedAt
            FROM Usuarios AS u
            WHERE (u.Rut == @__rutLimpio_0) && u.Activo) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Usuario.Activo (bool) Required, 1], [Property: Usuario.Apellido (string) Required, 2], [Property: Usuario.CreatedAt (DateTime) Required, 3], [Property: Usuario.Email (string) Index MaxLength(255), 4], [Property: Usuario.EmpresaId (int) Required FK Index, 5], [Property: Usuario.Nombre (string) Required, 6], [Property: Usuario.PasswordHash (string) Required, 7], [Property: Usuario.Rol (RolUsuario) Required, 8], [Property: Usuario.Rut (string) Index MaxLength(12), 9], [Property: Usuario.SucursalId (int?) FK Index, 10], [Property: Usuario.UltimoAcceso (DateTime?), 11], [Property: Usuario.UpdatedAt (DateTime?), 12] }
            SELECT TOP(1) u.Id, u.Activo, u.Apellido, u.CreatedAt, u.Email, u.EmpresaId, u.Nombre, u.PasswordHash, u.Rol, u.Rut, u.SucursalId, u.UltimoAcceso, u.UpdatedAt
            FROM Usuarios AS u
            WHERE (u.Rut == @__rutLimpio_0) && u.Activo, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Usuario entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Usuario instance1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Usuario);
                (object)dataReader.GetInt32(0) != null ? 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")]: 
                            {
                                return 
                                {
                                    Usuario instance;
                                    instance = new Usuario();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Activo>k__BackingField = dataReader.GetBoolean(1);
                                    instance.<Apellido>k__BackingField = dataReader.GetString(2);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(3);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<EmpresaId>k__BackingField = dataReader.GetInt32(5);
                                    instance.<Nombre>k__BackingField = dataReader.GetString(6);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(7);
                                    instance.<Rol>k__BackingField = Invoke(((EnumToNumberConverter<RolUsuario, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Usuario.Rol (RolUsuario) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario").FindProperty("Rol")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(8));
                                    instance.<Rut>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<SucursalId>k__BackingField = dataReader.IsDBNull(10) ? default(int?) : (int?)dataReader.GetInt32(10);
                                    instance.<UltimoAcceso>k__BackingField = dataReader.IsDBNull(11) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(11);
                                    instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(12) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(12);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Usuario)
                    }
                    ;
                    return instance1;
                } : 
                {
                    object[] keyValues1;
                    keyValues1 = new object[]{ (object)dataReader.GetInt32(0) };
                    return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                        entityType: [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")], 
                        properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario").FindPrimaryKey().Properties], 
                        keyValues: keyValues1);
                };
                return instance1;
            };
            return entity;
        }, 
        contextType: Project_Gon.Infrastructure.Data.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2026-01-28 16:11:51.246 -03:00 [DBG] Creating DbConnection.
2026-01-28 16:11:51.247 -03:00 [DBG] Created DbConnection. (0ms).
2026-01-28 16:11:51.248 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:11:51.249 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:11:51.250 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:11:51.250 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:11:51.252 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2026-01-28 16:11:51.254 -03:00 [DBG] Executing DbCommand [Parameters=[@__rutLimpio_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Rut" = @__rutLimpio_0 AND u."Activo"
LIMIT 1
2026-01-28 16:11:51.264 -03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__rutLimpio_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Rut" = @__rutLimpio_0 AND u."Activo"
LIMIT 1
2026-01-28 16:11:51.273 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:11:51.273 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 8ms reading results.
2026-01-28 16:11:51.275 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:11:51.276 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:11:51.277 -03:00 [INF] [FIND] Usuario encontrado - ID: 2, RUT: 12345678-9
2026-01-28 16:11:51.284 -03:00 [DBG] Compiling query expression: 
'DbSet<Empresa>()
    .FirstOrDefault(e => EF.Property<int>(e, "Id") == __p_0)'
2026-01-28 16:11:51.291 -03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Empresa>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Empresa>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Empresa.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Empresa.Activo (bool) Required, 1], [Property: Empresa.Ciudad (string), 2], [Property: Empresa.CreatedAt (DateTime) Required, 3], [Property: Empresa.Direccion (string), 4], [Property: Empresa.Nombre (string) Required MaxLength(255), 5], [Property: Empresa.Region (string), 6], [Property: Empresa.Rut (string), 7], [Property: Empresa.UpdatedAt (DateTime?), 8] }
            SELECT TOP(1) e.Id, e.Activo, e.Ciudad, e.CreatedAt, e.Direccion, e.Nombre, e.Region, e.Rut, e.UpdatedAt
            FROM Empresas AS e
            WHERE e.Id == @__p_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Empresa.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Empresa.Activo (bool) Required, 1], [Property: Empresa.Ciudad (string), 2], [Property: Empresa.CreatedAt (DateTime) Required, 3], [Property: Empresa.Direccion (string), 4], [Property: Empresa.Nombre (string) Required MaxLength(255), 5], [Property: Empresa.Region (string), 6], [Property: Empresa.Rut (string), 7], [Property: Empresa.UpdatedAt (DateTime?), 8] }
            SELECT TOP(1) e.Id, e.Activo, e.Ciudad, e.CreatedAt, e.Direccion, e.Nombre, e.Region, e.Rut, e.UpdatedAt
            FROM Empresas AS e
            WHERE e.Id == @__p_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Empresa entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Empresa instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Empresa);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Empresa.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Empresa").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (Empresa)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Empresa | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Empresa")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Empresa | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Empresa")]: 
                            {
                                return 
                                {
                                    Empresa instance;
                                    instance = new Empresa();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Activo>k__BackingField = dataReader.GetBoolean(1);
                                    instance.<Ciudad>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(3);
                                    instance.<Direccion>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<Nombre>k__BackingField = dataReader.GetString(5);
                                    instance.<Region>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                    instance.<Rut>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(8) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(8);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Empresa | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Empresa")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Empresa)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: Project_Gon.Infrastructure.Data.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2026-01-28 16:11:51.299 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:11:51.300 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:11:51.301 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:11:51.301 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:11:51.302 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:11:51.302 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 16:11:51.305 -03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 16:11:51.328 -03:00 [DBG] Context 'AppDbContext' started tracking 'Empresa' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:11:51.345 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:11:51.346 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 39ms reading results.
2026-01-28 16:11:51.347 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:11:51.348 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:11:51.349 -03:00 [INF] [LOGIN] Usuario encontrado: true
2026-01-28 16:11:51.349 -03:00 [INF] [LOGIN] Usuario ID: 2, RUT: 12345678-9, Email: null, Activo: true
2026-01-28 16:11:51.350 -03:00 [INF] [LOGIN] Verificando contrasea para usuario ID: 2
2026-01-28 16:11:52.008 -03:00 [INF] [LOGIN] Password vlido: false
2026-01-28 16:11:52.009 -03:00 [WRN] [LOGIN] Login rechazado - Contrasea incorrecta para usuario ID: 2
2026-01-28 16:11:52.011 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-01-28 16:11:52.013 -03:00 [DBG] No information found on request to perform content negotiation.
2026-01-28 16:11:52.014 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-01-28 16:11:52.014 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-01-28 16:11:52.015 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2026-01-28 16:11:52.016 -03:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'System.String'.
2026-01-28 16:11:52.019 -03:00 [INF] Executed action Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api) in 1053.8016ms
2026-01-28 16:11:52.022 -03:00 [INF] Executed endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 16:11:52.024 -03:00 [INF] HTTP POST /api/auth/login responded 401 in 1087.0162 ms
2026-01-28 16:11:52.028 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 16:11:52.030 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:11:52.031 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (1ms).
2026-01-28 16:11:52.033 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/auth/login - 401 null text/plain; charset=utf-8 1123.1156ms
2026-01-28 16:12:34.940 -03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-01-28 16:12:35.513 -03:00 [DBG] The index {'ProductoId'} was not created on entity type 'Stock' as the properties are already covered by the index {'ProductoId', 'SucursalId'}.
2026-01-28 16:12:35.515 -03:00 [DBG] The index {'EmpresaId'} was not created on entity type 'Usuario' as the properties are already covered by the index {'EmpresaId', 'Email'}.
2026-01-28 16:12:35.516 -03:00 [DBG] The index {'EmpresaId'} was not created on entity type 'Usuario' as the properties are already covered by the index {'EmpresaId', 'Rut'}.
2026-01-28 16:12:35.613 -03:00 [DBG] The property 'MovimientoStock.DevolucionId' was created in shadow state because there are no eligible CLR members with a matching name.
2026-01-28 16:12:35.693 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 16:12:35.715 -03:00 [DBG] Creating DbConnection.
2026-01-28 16:12:35.760 -03:00 [DBG] Created DbConnection. (43ms).
2026-01-28 16:12:35.765 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:12:35.891 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:12:35.896 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:12:35.902 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2026-01-28 16:12:35.904 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
2026-01-28 16:12:35.910 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-28 16:12:35.940 -03:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-28 16:12:35.973 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:12:35.980 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 34ms reading results.
2026-01-28 16:12:35.983 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:12:35.988 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (5ms).
2026-01-28 16:12:36.119 -03:00 [DBG] Migrating using database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:12:36.122 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:12:36.124 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:12:36.165 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:12:36.166 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:12:36.169 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (2ms).
2026-01-28 16:12:36.170 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:12:36.171 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:12:36.202 -03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-01-28 16:12:36.202 -03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-01-28 16:12:36.203 -03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1ms).
2026-01-28 16:12:36.204 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2026-01-28 16:12:36.210 -03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2026-01-28 16:12:36.214 -03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2026-01-28 16:12:36.217 -03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2026-01-28 16:12:36.218 -03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2026-01-28 16:12:36.219 -03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-01-28 16:12:36.220 -03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-01-28 16:12:36.221 -03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (2ms).
2026-01-28 16:12:36.222 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2026-01-28 16:12:36.224 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2026-01-28 16:12:36.225 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:12:36.226 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:12:36.227 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:12:36.228 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-28 16:12:36.229 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-28 16:12:36.231 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:12:36.231 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-01-28 16:12:36.238 -03:00 [INF] No migrations were applied. The database is already up to date.
2026-01-28 16:12:36.239 -03:00 [DBG] Committing transaction.
2026-01-28 16:12:36.242 -03:00 [DBG] Committed transaction.
2026-01-28 16:12:36.243 -03:00 [DBG] Disposing transaction.
2026-01-28 16:12:36.244 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:12:36.245 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (1ms).
2026-01-28 16:12:36.246 -03:00 [INF] Database migrations applied successfully
2026-01-28 16:12:36.248 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 16:12:36.250 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:12:36.251 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (1ms).
2026-01-28 16:12:36.296 -03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-01-28 16:12:36.345 -03:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2026-01-28 16:12:36.362 -03:00 [INF] Project Gon API iniciada en ambiente: Development
2026-01-28 16:12:36.365 -03:00 [DBG] Hosting starting
2026-01-28 16:12:36.390 -03:00 [INF] User profile is available. Using 'C:\Users\Jossan\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-28 16:12:36.400 -03:00 [DBG] Reading data from file 'C:\Users\Jossan\AppData\Local\ASP.NET\DataProtection-Keys\key-7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c.xml'.
2026-01-28 16:12:36.407 -03:00 [DBG] Found key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c}.
2026-01-28 16:12:36.415 -03:00 [DBG] Considering key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} with expiration date 2026-04-28 18:20:11Z as default key.
2026-01-28 16:12:36.418 -03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2026-01-28 16:12:36.419 -03:00 [DBG] Decrypting secret element using Windows DPAPI.
2026-01-28 16:12:36.420 -03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2026-01-28 16:12:36.422 -03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2026-01-28 16:12:36.424 -03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2026-01-28 16:12:36.425 -03:00 [DBG] Using key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} as the default key.
2026-01-28 16:12:36.426 -03:00 [DBG] Key ring with default key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} was loaded during application startup.
2026-01-28 16:12:36.430 -03:00 [DBG] Middleware loaded
2026-01-28 16:12:36.432 -03:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16515 B).
2026-01-28 16:12:36.434 -03:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2026-01-28 16:12:36.564 -03:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2026-01-28 16:12:36.565 -03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-01-28 16:12:36.575 -03:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2026-01-28 16:12:36.622 -03:00 [INF] Now listening on: https://localhost:7058
2026-01-28 16:12:36.623 -03:00 [INF] Now listening on: http://localhost:5070
2026-01-28 16:12:36.624 -03:00 [DBG] Loaded hosting startup assembly Project_Gon.Api
2026-01-28 16:12:36.624 -03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-01-28 16:12:36.624 -03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-01-28 16:12:36.625 -03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-01-28 16:12:36.629 -03:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2026-01-28 16:12:36.632 -03:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2026-01-28 16:12:36.744 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-28 16:12:36.745 -03:00 [INF] Hosting environment: Development
2026-01-28 16:12:36.745 -03:00 [INF] Content root path: C:\Proyectos\Project_Gon\Project_Gon.Api
2026-01-28 16:12:36.747 -03:00 [DBG] Hosting started
2026-01-28 16:12:38.643 -03:00 [DBG] Connection id "0HNIUK4PU5896" accepted.
2026-01-28 16:12:38.645 -03:00 [DBG] Connection id "0HNIUK4PU5896" started.
2026-01-28 16:12:38.683 -03:00 [DBG] Connection 0HNIUK4PU5896 established using the following protocol: "Tls12"
2026-01-28 16:12:38.710 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/auth/login - application/json 59
2026-01-28 16:12:38.737 -03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2026-01-28 16:12:38.738 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)' with route pattern 'api/Auth/login' is valid for the request path '/api/auth/login'
2026-01-28 16:12:38.740 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 16:12:38.743 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 16:12:38.787 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 16:12:38.789 -03:00 [INF] Executing endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 16:12:38.801 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Project_Gon.Core.DTOs.Auth.LoginDto) on controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api).
2026-01-28 16:12:38.803 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-01-28 16:12:38.804 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-01-28 16:12:38.805 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-01-28 16:12:38.806 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-01-28 16:12:38.807 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-01-28 16:12:38.808 -03:00 [DBG] Executing controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-01-28 16:12:38.886 -03:00 [DBG] Executed controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-01-28 16:12:38.889 -03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' ...
2026-01-28 16:12:38.891 -03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' using the name '' in request data ...
2026-01-28 16:12:38.893 -03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2026-01-28 16:12:38.897 -03:00 [DBG] Connection id "0HNIUK4PU5896", Request id "0HNIUK4PU5896:00000001": started reading request body.
2026-01-28 16:12:38.898 -03:00 [DBG] Connection id "0HNIUK4PU5896", Request id "0HNIUK4PU5896:00000001": done reading request body.
2026-01-28 16:12:38.903 -03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Project_Gon.Core.DTOs.Auth.LoginDto'
2026-01-28 16:12:38.903 -03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 16:12:38.904 -03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 16:12:38.905 -03:00 [DBG] Attempting to validate the bound parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' ...
2026-01-28 16:12:38.921 -03:00 [DBG] Done attempting to validate the bound parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 16:12:38.924 -03:00 [INF] [LOGIN] Intento de login con: 12345678-9
2026-01-28 16:12:38.926 -03:00 [DBG] [CLEAN_RUT] Original: 12345678-9 -> Limpio: 12345678-9
2026-01-28 16:12:38.927 -03:00 [INF] [FIND] Buscando por RUT limpio: 12345678-9
2026-01-28 16:12:38.935 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 16:12:38.980 -03:00 [DBG] Compiling query expression: 
'DbSet<Usuario>()
    .Where(u => u.Rut == __rutLimpio_0 && u.Activo)
    .AsNoTracking()
    .FirstOrDefault()'
2026-01-28 16:12:39.140 -03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Usuario>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Usuario>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Usuario.Activo (bool) Required, 1], [Property: Usuario.Apellido (string) Required, 2], [Property: Usuario.CreatedAt (DateTime) Required, 3], [Property: Usuario.Email (string) Index MaxLength(255), 4], [Property: Usuario.EmpresaId (int) Required FK Index, 5], [Property: Usuario.Nombre (string) Required, 6], [Property: Usuario.PasswordHash (string) Required, 7], [Property: Usuario.Rol (RolUsuario) Required, 8], [Property: Usuario.Rut (string) Index MaxLength(12), 9], [Property: Usuario.SucursalId (int?) FK Index, 10], [Property: Usuario.UltimoAcceso (DateTime?), 11], [Property: Usuario.UpdatedAt (DateTime?), 12] }
            SELECT TOP(1) u.Id, u.Activo, u.Apellido, u.CreatedAt, u.Email, u.EmpresaId, u.Nombre, u.PasswordHash, u.Rol, u.Rut, u.SucursalId, u.UltimoAcceso, u.UpdatedAt
            FROM Usuarios AS u
            WHERE (u.Rut == @__rutLimpio_0) && u.Activo) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Usuario.Activo (bool) Required, 1], [Property: Usuario.Apellido (string) Required, 2], [Property: Usuario.CreatedAt (DateTime) Required, 3], [Property: Usuario.Email (string) Index MaxLength(255), 4], [Property: Usuario.EmpresaId (int) Required FK Index, 5], [Property: Usuario.Nombre (string) Required, 6], [Property: Usuario.PasswordHash (string) Required, 7], [Property: Usuario.Rol (RolUsuario) Required, 8], [Property: Usuario.Rut (string) Index MaxLength(12), 9], [Property: Usuario.SucursalId (int?) FK Index, 10], [Property: Usuario.UltimoAcceso (DateTime?), 11], [Property: Usuario.UpdatedAt (DateTime?), 12] }
            SELECT TOP(1) u.Id, u.Activo, u.Apellido, u.CreatedAt, u.Email, u.EmpresaId, u.Nombre, u.PasswordHash, u.Rol, u.Rut, u.SucursalId, u.UltimoAcceso, u.UpdatedAt
            FROM Usuarios AS u
            WHERE (u.Rut == @__rutLimpio_0) && u.Activo, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Usuario entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Usuario instance1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Usuario);
                (object)dataReader.GetInt32(0) != null ? 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")]: 
                            {
                                return 
                                {
                                    Usuario instance;
                                    instance = new Usuario();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Activo>k__BackingField = dataReader.GetBoolean(1);
                                    instance.<Apellido>k__BackingField = dataReader.GetString(2);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(3);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<EmpresaId>k__BackingField = dataReader.GetInt32(5);
                                    instance.<Nombre>k__BackingField = dataReader.GetString(6);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(7);
                                    instance.<Rol>k__BackingField = Invoke(((EnumToNumberConverter<RolUsuario, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Usuario.Rol (RolUsuario) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario").FindProperty("Rol")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(8));
                                    instance.<Rut>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<SucursalId>k__BackingField = dataReader.IsDBNull(10) ? default(int?) : (int?)dataReader.GetInt32(10);
                                    instance.<UltimoAcceso>k__BackingField = dataReader.IsDBNull(11) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(11);
                                    instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(12) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(12);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Usuario)
                    }
                    ;
                    return instance1;
                } : 
                {
                    object[] keyValues1;
                    keyValues1 = new object[]{ (object)dataReader.GetInt32(0) };
                    return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                        entityType: [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")], 
                        properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario").FindPrimaryKey().Properties], 
                        keyValues: keyValues1);
                };
                return instance1;
            };
            return entity;
        }, 
        contextType: Project_Gon.Infrastructure.Data.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2026-01-28 16:12:39.174 -03:00 [DBG] Creating DbConnection.
2026-01-28 16:12:39.175 -03:00 [DBG] Created DbConnection. (0ms).
2026-01-28 16:12:39.176 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:12:39.177 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:12:39.178 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:12:39.179 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:12:39.182 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2026-01-28 16:12:39.185 -03:00 [DBG] Executing DbCommand [Parameters=[@__rutLimpio_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Rut" = @__rutLimpio_0 AND u."Activo"
LIMIT 1
2026-01-28 16:12:39.198 -03:00 [INF] Executed DbCommand (14ms) [Parameters=[@__rutLimpio_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Rut" = @__rutLimpio_0 AND u."Activo"
LIMIT 1
2026-01-28 16:12:39.209 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:12:39.210 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 11ms reading results.
2026-01-28 16:12:39.213 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:12:39.214 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (1ms).
2026-01-28 16:12:39.215 -03:00 [INF] [FIND] Usuario encontrado - ID: 2, RUT: 12345678-9
2026-01-28 16:12:39.223 -03:00 [DBG] Compiling query expression: 
'DbSet<Empresa>()
    .FirstOrDefault(e => EF.Property<int>(e, "Id") == __p_0)'
2026-01-28 16:12:39.232 -03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Empresa>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Empresa>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Empresa.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Empresa.Activo (bool) Required, 1], [Property: Empresa.Ciudad (string), 2], [Property: Empresa.CreatedAt (DateTime) Required, 3], [Property: Empresa.Direccion (string), 4], [Property: Empresa.Nombre (string) Required MaxLength(255), 5], [Property: Empresa.Region (string), 6], [Property: Empresa.Rut (string), 7], [Property: Empresa.UpdatedAt (DateTime?), 8] }
            SELECT TOP(1) e.Id, e.Activo, e.Ciudad, e.CreatedAt, e.Direccion, e.Nombre, e.Region, e.Rut, e.UpdatedAt
            FROM Empresas AS e
            WHERE e.Id == @__p_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Empresa.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Empresa.Activo (bool) Required, 1], [Property: Empresa.Ciudad (string), 2], [Property: Empresa.CreatedAt (DateTime) Required, 3], [Property: Empresa.Direccion (string), 4], [Property: Empresa.Nombre (string) Required MaxLength(255), 5], [Property: Empresa.Region (string), 6], [Property: Empresa.Rut (string), 7], [Property: Empresa.UpdatedAt (DateTime?), 8] }
            SELECT TOP(1) e.Id, e.Activo, e.Ciudad, e.CreatedAt, e.Direccion, e.Nombre, e.Region, e.Rut, e.UpdatedAt
            FROM Empresas AS e
            WHERE e.Id == @__p_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Empresa entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Empresa instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Empresa);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Empresa.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Empresa").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (Empresa)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Empresa | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Empresa")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Empresa | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Empresa")]: 
                            {
                                return 
                                {
                                    Empresa instance;
                                    instance = new Empresa();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Activo>k__BackingField = dataReader.GetBoolean(1);
                                    instance.<Ciudad>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(3);
                                    instance.<Direccion>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<Nombre>k__BackingField = dataReader.GetString(5);
                                    instance.<Region>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                    instance.<Rut>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(8) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(8);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Empresa | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Empresa")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Empresa)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: Project_Gon.Infrastructure.Data.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2026-01-28 16:12:39.240 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:12:39.240 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:12:39.241 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:12:39.242 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:12:39.243 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:12:39.243 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 16:12:39.246 -03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 16:12:39.275 -03:00 [DBG] Context 'AppDbContext' started tracking 'Empresa' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:12:39.296 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:12:39.297 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 48ms reading results.
2026-01-28 16:12:39.298 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:12:39.299 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:12:39.300 -03:00 [INF] [LOGIN] Usuario encontrado: true
2026-01-28 16:12:39.300 -03:00 [INF] [LOGIN] Usuario ID: 2, RUT: 12345678-9, Email: null, Activo: true
2026-01-28 16:12:39.301 -03:00 [INF] [LOGIN] Verificando contrasea para usuario ID: 2
2026-01-28 16:12:40.077 -03:00 [INF] [LOGIN] Password vlido: false
2026-01-28 16:12:40.078 -03:00 [WRN] [LOGIN] Login rechazado - Contrasea incorrecta para usuario ID: 2
2026-01-28 16:12:40.082 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-01-28 16:12:40.085 -03:00 [DBG] No information found on request to perform content negotiation.
2026-01-28 16:12:40.085 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-01-28 16:12:40.086 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-01-28 16:12:40.087 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2026-01-28 16:12:40.088 -03:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'System.String'.
2026-01-28 16:12:40.093 -03:00 [INF] Executed action Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api) in 1283.4332ms
2026-01-28 16:12:40.095 -03:00 [INF] Executed endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 16:12:40.098 -03:00 [INF] HTTP POST /api/auth/login responded 401 in 1351.4643 ms
2026-01-28 16:12:40.102 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 16:12:40.105 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:12:40.106 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (1ms).
2026-01-28 16:12:40.108 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/auth/login - 401 null text/plain; charset=utf-8 1402.2906ms
2026-01-28 16:17:17.254 -03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-01-28 16:17:17.593 -03:00 [DBG] The index {'ProductoId'} was not created on entity type 'Stock' as the properties are already covered by the index {'ProductoId', 'SucursalId'}.
2026-01-28 16:17:17.595 -03:00 [DBG] The index {'EmpresaId'} was not created on entity type 'Usuario' as the properties are already covered by the index {'EmpresaId', 'Email'}.
2026-01-28 16:17:17.596 -03:00 [DBG] The index {'EmpresaId'} was not created on entity type 'Usuario' as the properties are already covered by the index {'EmpresaId', 'Rut'}.
2026-01-28 16:17:17.673 -03:00 [DBG] The property 'MovimientoStock.DevolucionId' was created in shadow state because there are no eligible CLR members with a matching name.
2026-01-28 16:17:17.734 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 16:17:17.745 -03:00 [DBG] Creating DbConnection.
2026-01-28 16:17:17.761 -03:00 [DBG] Created DbConnection. (15ms).
2026-01-28 16:17:17.764 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:17:17.835 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:17:17.838 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:17:17.842 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2026-01-28 16:17:17.843 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2026-01-28 16:17:17.847 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-28 16:17:17.867 -03:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-28 16:17:17.886 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:17:17.892 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 20ms reading results.
2026-01-28 16:17:17.893 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:17:17.896 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (2ms).
2026-01-28 16:17:18.009 -03:00 [DBG] Migrating using database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:17:18.011 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:17:18.013 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:17:18.048 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:17:18.049 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:17:18.051 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (1ms).
2026-01-28 16:17:18.052 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:17:18.053 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:17:18.081 -03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-01-28 16:17:18.082 -03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-01-28 16:17:18.083 -03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1ms).
2026-01-28 16:17:18.083 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2026-01-28 16:17:18.088 -03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2026-01-28 16:17:18.092 -03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2026-01-28 16:17:18.094 -03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2026-01-28 16:17:18.095 -03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2026-01-28 16:17:18.095 -03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-01-28 16:17:18.096 -03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-01-28 16:17:18.097 -03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1ms).
2026-01-28 16:17:18.097 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2026-01-28 16:17:18.098 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2026-01-28 16:17:18.099 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:17:18.100 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:17:18.100 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:17:18.101 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-28 16:17:18.102 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-28 16:17:18.104 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:17:18.104 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-01-28 16:17:18.109 -03:00 [INF] No migrations were applied. The database is already up to date.
2026-01-28 16:17:18.110 -03:00 [DBG] Committing transaction.
2026-01-28 16:17:18.112 -03:00 [DBG] Committed transaction.
2026-01-28 16:17:18.113 -03:00 [DBG] Disposing transaction.
2026-01-28 16:17:18.113 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:17:18.114 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:17:18.115 -03:00 [INF] Database migrations applied successfully
2026-01-28 16:17:18.117 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 16:17:18.118 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:17:18.119 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:17:18.138 -03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-01-28 16:17:18.166 -03:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2026-01-28 16:17:18.180 -03:00 [INF] Project Gon API iniciada en ambiente: Development
2026-01-28 16:17:18.182 -03:00 [DBG] Hosting starting
2026-01-28 16:17:18.190 -03:00 [INF] User profile is available. Using 'C:\Users\Jossan\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-28 16:17:18.195 -03:00 [DBG] Reading data from file 'C:\Users\Jossan\AppData\Local\ASP.NET\DataProtection-Keys\key-7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c.xml'.
2026-01-28 16:17:18.201 -03:00 [DBG] Found key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c}.
2026-01-28 16:17:18.206 -03:00 [DBG] Considering key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} with expiration date 2026-04-28 18:20:11Z as default key.
2026-01-28 16:17:18.209 -03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2026-01-28 16:17:18.210 -03:00 [DBG] Decrypting secret element using Windows DPAPI.
2026-01-28 16:17:18.211 -03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2026-01-28 16:17:18.213 -03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2026-01-28 16:17:18.214 -03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2026-01-28 16:17:18.216 -03:00 [DBG] Using key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} as the default key.
2026-01-28 16:17:18.216 -03:00 [DBG] Key ring with default key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} was loaded during application startup.
2026-01-28 16:17:18.219 -03:00 [DBG] Middleware loaded
2026-01-28 16:17:18.220 -03:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16515 B).
2026-01-28 16:17:18.221 -03:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2026-01-28 16:17:18.266 -03:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2026-01-28 16:17:18.267 -03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-01-28 16:17:18.270 -03:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2026-01-28 16:17:18.298 -03:00 [INF] Now listening on: https://localhost:7058
2026-01-28 16:17:18.298 -03:00 [INF] Now listening on: http://localhost:5070
2026-01-28 16:17:18.299 -03:00 [DBG] Loaded hosting startup assembly Project_Gon.Api
2026-01-28 16:17:18.300 -03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-01-28 16:17:18.300 -03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-01-28 16:17:18.301 -03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-01-28 16:17:18.304 -03:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2026-01-28 16:17:18.306 -03:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2026-01-28 16:17:18.405 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-28 16:17:18.406 -03:00 [INF] Hosting environment: Development
2026-01-28 16:17:18.406 -03:00 [INF] Content root path: C:\Proyectos\Project_Gon\Project_Gon.Api
2026-01-28 16:17:18.408 -03:00 [DBG] Hosting started
2026-01-28 16:17:19.214 -03:00 [DBG] Connection id "0HNIUK7DHSPSF" accepted.
2026-01-28 16:17:19.215 -03:00 [DBG] Connection id "0HNIUK7DHSPSF" started.
2026-01-28 16:17:19.244 -03:00 [DBG] Connection 0HNIUK7DHSPSF established using the following protocol: "Tls12"
2026-01-28 16:17:19.262 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/auth/login - application/json 59
2026-01-28 16:17:19.281 -03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2026-01-28 16:17:19.282 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)' with route pattern 'api/Auth/login' is valid for the request path '/api/auth/login'
2026-01-28 16:17:19.283 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 16:17:19.287 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 16:17:19.299 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 16:17:19.301 -03:00 [INF] Executing endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 16:17:19.310 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Project_Gon.Core.DTOs.Auth.LoginDto) on controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api).
2026-01-28 16:17:19.312 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-01-28 16:17:19.313 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-01-28 16:17:19.314 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-01-28 16:17:19.315 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-01-28 16:17:19.316 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-01-28 16:17:19.317 -03:00 [DBG] Executing controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-01-28 16:17:19.389 -03:00 [DBG] Executed controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-01-28 16:17:19.392 -03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' ...
2026-01-28 16:17:19.394 -03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' using the name '' in request data ...
2026-01-28 16:17:19.397 -03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2026-01-28 16:17:19.402 -03:00 [DBG] Connection id "0HNIUK7DHSPSF", Request id "0HNIUK7DHSPSF:00000001": started reading request body.
2026-01-28 16:17:19.403 -03:00 [DBG] Connection id "0HNIUK7DHSPSF", Request id "0HNIUK7DHSPSF:00000001": done reading request body.
2026-01-28 16:17:19.407 -03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Project_Gon.Core.DTOs.Auth.LoginDto'
2026-01-28 16:17:19.408 -03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 16:17:19.408 -03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 16:17:19.409 -03:00 [DBG] Attempting to validate the bound parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' ...
2026-01-28 16:17:19.416 -03:00 [DBG] Done attempting to validate the bound parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 16:17:19.419 -03:00 [INF] [LOGIN] Intento de login con: 12345678-9
2026-01-28 16:17:19.421 -03:00 [DBG] [CLEAN_RUT] Original: 12345678-9 -> Limpio: 12345678-9
2026-01-28 16:17:19.422 -03:00 [INF] [FIND] Buscando por RUT limpio: 12345678-9
2026-01-28 16:17:19.441 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 16:17:19.474 -03:00 [DBG] Compiling query expression: 
'DbSet<Usuario>()
    .Where(u => u.Rut == __rutLimpio_0 && u.Activo)
    .AsNoTracking()
    .FirstOrDefault()'
2026-01-28 16:17:19.604 -03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Usuario>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Usuario>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Usuario.Activo (bool) Required, 1], [Property: Usuario.Apellido (string) Required, 2], [Property: Usuario.CreatedAt (DateTime) Required, 3], [Property: Usuario.Email (string) Index MaxLength(255), 4], [Property: Usuario.EmpresaId (int) Required FK Index, 5], [Property: Usuario.Nombre (string) Required, 6], [Property: Usuario.PasswordHash (string) Required, 7], [Property: Usuario.Rol (RolUsuario) Required, 8], [Property: Usuario.Rut (string) Index MaxLength(12), 9], [Property: Usuario.SucursalId (int?) FK Index, 10], [Property: Usuario.UltimoAcceso (DateTime?), 11], [Property: Usuario.UpdatedAt (DateTime?), 12] }
            SELECT TOP(1) u.Id, u.Activo, u.Apellido, u.CreatedAt, u.Email, u.EmpresaId, u.Nombre, u.PasswordHash, u.Rol, u.Rut, u.SucursalId, u.UltimoAcceso, u.UpdatedAt
            FROM Usuarios AS u
            WHERE (u.Rut == @__rutLimpio_0) && u.Activo) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Usuario.Activo (bool) Required, 1], [Property: Usuario.Apellido (string) Required, 2], [Property: Usuario.CreatedAt (DateTime) Required, 3], [Property: Usuario.Email (string) Index MaxLength(255), 4], [Property: Usuario.EmpresaId (int) Required FK Index, 5], [Property: Usuario.Nombre (string) Required, 6], [Property: Usuario.PasswordHash (string) Required, 7], [Property: Usuario.Rol (RolUsuario) Required, 8], [Property: Usuario.Rut (string) Index MaxLength(12), 9], [Property: Usuario.SucursalId (int?) FK Index, 10], [Property: Usuario.UltimoAcceso (DateTime?), 11], [Property: Usuario.UpdatedAt (DateTime?), 12] }
            SELECT TOP(1) u.Id, u.Activo, u.Apellido, u.CreatedAt, u.Email, u.EmpresaId, u.Nombre, u.PasswordHash, u.Rol, u.Rut, u.SucursalId, u.UltimoAcceso, u.UpdatedAt
            FROM Usuarios AS u
            WHERE (u.Rut == @__rutLimpio_0) && u.Activo, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Usuario entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Usuario instance1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Usuario);
                (object)dataReader.GetInt32(0) != null ? 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")]: 
                            {
                                return 
                                {
                                    Usuario instance;
                                    instance = new Usuario();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Activo>k__BackingField = dataReader.GetBoolean(1);
                                    instance.<Apellido>k__BackingField = dataReader.GetString(2);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(3);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<EmpresaId>k__BackingField = dataReader.GetInt32(5);
                                    instance.<Nombre>k__BackingField = dataReader.GetString(6);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(7);
                                    instance.<Rol>k__BackingField = Invoke(((EnumToNumberConverter<RolUsuario, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Usuario.Rol (RolUsuario) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario").FindProperty("Rol")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(8));
                                    instance.<Rut>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<SucursalId>k__BackingField = dataReader.IsDBNull(10) ? default(int?) : (int?)dataReader.GetInt32(10);
                                    instance.<UltimoAcceso>k__BackingField = dataReader.IsDBNull(11) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(11);
                                    instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(12) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(12);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Usuario)
                    }
                    ;
                    return instance1;
                } : 
                {
                    object[] keyValues1;
                    keyValues1 = new object[]{ (object)dataReader.GetInt32(0) };
                    return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                        entityType: [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")], 
                        properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario").FindPrimaryKey().Properties], 
                        keyValues: keyValues1);
                };
                return instance1;
            };
            return entity;
        }, 
        contextType: Project_Gon.Infrastructure.Data.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2026-01-28 16:17:19.633 -03:00 [DBG] Creating DbConnection.
2026-01-28 16:17:19.634 -03:00 [DBG] Created DbConnection. (0ms).
2026-01-28 16:17:19.635 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:17:19.636 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:17:19.637 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:17:19.637 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:17:19.640 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2026-01-28 16:17:19.642 -03:00 [DBG] Executing DbCommand [Parameters=[@__rutLimpio_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Rut" = @__rutLimpio_0 AND u."Activo"
LIMIT 1
2026-01-28 16:17:19.652 -03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__rutLimpio_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Rut" = @__rutLimpio_0 AND u."Activo"
LIMIT 1
2026-01-28 16:17:19.661 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:17:19.662 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 8ms reading results.
2026-01-28 16:17:19.664 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:17:19.665 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:17:19.666 -03:00 [INF] [FIND] Usuario encontrado - ID: 2, RUT: 12345678-9
2026-01-28 16:17:19.671 -03:00 [DBG] Compiling query expression: 
'DbSet<Empresa>()
    .FirstOrDefault(e => EF.Property<int>(e, "Id") == __p_0)'
2026-01-28 16:17:19.680 -03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Empresa>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Empresa>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Empresa.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Empresa.Activo (bool) Required, 1], [Property: Empresa.Ciudad (string), 2], [Property: Empresa.CreatedAt (DateTime) Required, 3], [Property: Empresa.Direccion (string), 4], [Property: Empresa.Nombre (string) Required MaxLength(255), 5], [Property: Empresa.Region (string), 6], [Property: Empresa.Rut (string), 7], [Property: Empresa.UpdatedAt (DateTime?), 8] }
            SELECT TOP(1) e.Id, e.Activo, e.Ciudad, e.CreatedAt, e.Direccion, e.Nombre, e.Region, e.Rut, e.UpdatedAt
            FROM Empresas AS e
            WHERE e.Id == @__p_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Empresa.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Empresa.Activo (bool) Required, 1], [Property: Empresa.Ciudad (string), 2], [Property: Empresa.CreatedAt (DateTime) Required, 3], [Property: Empresa.Direccion (string), 4], [Property: Empresa.Nombre (string) Required MaxLength(255), 5], [Property: Empresa.Region (string), 6], [Property: Empresa.Rut (string), 7], [Property: Empresa.UpdatedAt (DateTime?), 8] }
            SELECT TOP(1) e.Id, e.Activo, e.Ciudad, e.CreatedAt, e.Direccion, e.Nombre, e.Region, e.Rut, e.UpdatedAt
            FROM Empresas AS e
            WHERE e.Id == @__p_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Empresa entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Empresa instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Empresa);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Empresa.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Empresa").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (Empresa)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Empresa | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Empresa")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Empresa | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Empresa")]: 
                            {
                                return 
                                {
                                    Empresa instance;
                                    instance = new Empresa();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Activo>k__BackingField = dataReader.GetBoolean(1);
                                    instance.<Ciudad>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(3);
                                    instance.<Direccion>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<Nombre>k__BackingField = dataReader.GetString(5);
                                    instance.<Region>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                    instance.<Rut>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(8) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(8);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Empresa | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Empresa")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Empresa)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: Project_Gon.Infrastructure.Data.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2026-01-28 16:17:19.687 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:17:19.688 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:17:19.688 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:17:19.689 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:17:19.690 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:17:19.690 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 16:17:19.693 -03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 16:17:19.715 -03:00 [DBG] Context 'AppDbContext' started tracking 'Empresa' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:17:19.732 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:17:19.733 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 38ms reading results.
2026-01-28 16:17:19.734 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:17:19.735 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:17:19.736 -03:00 [INF] [LOGIN] Usuario encontrado: true
2026-01-28 16:17:19.736 -03:00 [INF] [LOGIN] Usuario ID: 2, RUT: 12345678-9, Email: null, Activo: true
2026-01-28 16:17:19.737 -03:00 [INF] [LOGIN] Verificando contrasea para usuario ID: 2
2026-01-28 16:17:20.430 -03:00 [INF] [LOGIN] Password vlido: false
2026-01-28 16:17:20.431 -03:00 [WRN] [LOGIN] Login rechazado - Contrasea incorrecta para usuario ID: 2
2026-01-28 16:17:20.433 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-01-28 16:17:20.435 -03:00 [DBG] No information found on request to perform content negotiation.
2026-01-28 16:17:20.436 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-01-28 16:17:20.436 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-01-28 16:17:20.437 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2026-01-28 16:17:20.438 -03:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'System.String'.
2026-01-28 16:17:20.441 -03:00 [INF] Executed action Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api) in 1122.3975ms
2026-01-28 16:17:20.444 -03:00 [INF] Executed endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 16:17:20.446 -03:00 [INF] HTTP POST /api/auth/login responded 401 in 1156.4959 ms
2026-01-28 16:17:20.449 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 16:17:20.451 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:17:20.452 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (1ms).
2026-01-28 16:17:20.454 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/auth/login - 401 null text/plain; charset=utf-8 1192.7934ms
2026-01-28 16:17:23.168 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/auth/login - application/json 59
2026-01-28 16:17:23.171 -03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2026-01-28 16:17:23.172 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)' with route pattern 'api/Auth/login' is valid for the request path '/api/auth/login'
2026-01-28 16:17:23.173 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 16:17:23.174 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 16:17:23.175 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 16:17:23.175 -03:00 [INF] Executing endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 16:17:23.176 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Project_Gon.Core.DTOs.Auth.LoginDto) on controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api).
2026-01-28 16:17:23.177 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-01-28 16:17:23.178 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-01-28 16:17:23.178 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-01-28 16:17:23.179 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-01-28 16:17:23.180 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-01-28 16:17:23.181 -03:00 [DBG] Executing controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-01-28 16:17:23.183 -03:00 [DBG] Executed controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-01-28 16:17:23.184 -03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' ...
2026-01-28 16:17:23.185 -03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' using the name '' in request data ...
2026-01-28 16:17:23.186 -03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2026-01-28 16:17:23.186 -03:00 [DBG] Connection id "0HNIUK7DHSPSF", Request id "0HNIUK7DHSPSF:00000003": started reading request body.
2026-01-28 16:17:23.187 -03:00 [DBG] Connection id "0HNIUK7DHSPSF", Request id "0HNIUK7DHSPSF:00000003": done reading request body.
2026-01-28 16:17:23.188 -03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Project_Gon.Core.DTOs.Auth.LoginDto'
2026-01-28 16:17:23.188 -03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 16:17:23.189 -03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 16:17:23.189 -03:00 [DBG] Attempting to validate the bound parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' ...
2026-01-28 16:17:23.190 -03:00 [DBG] Done attempting to validate the bound parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 16:17:23.191 -03:00 [INF] [LOGIN] Intento de login con: 12345678-9
2026-01-28 16:17:23.191 -03:00 [DBG] [CLEAN_RUT] Original: 12345678-9 -> Limpio: 12345678-9
2026-01-28 16:17:23.192 -03:00 [INF] [FIND] Buscando por RUT limpio: 12345678-9
2026-01-28 16:17:23.221 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 16:17:23.225 -03:00 [DBG] Creating DbConnection.
2026-01-28 16:17:23.225 -03:00 [DBG] Created DbConnection. (0ms).
2026-01-28 16:17:23.226 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:17:23.226 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:17:23.227 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:17:23.227 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:17:23.228 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:17:23.229 -03:00 [DBG] Executing DbCommand [Parameters=[@__rutLimpio_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Rut" = @__rutLimpio_0 AND u."Activo"
LIMIT 1
2026-01-28 16:17:23.230 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__rutLimpio_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Rut" = @__rutLimpio_0 AND u."Activo"
LIMIT 1
2026-01-28 16:17:23.232 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:17:23.232 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-01-28 16:17:23.233 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:17:23.234 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:17:23.234 -03:00 [INF] [FIND] Usuario encontrado - ID: 2, RUT: 12345678-9
2026-01-28 16:17:23.236 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:17:23.236 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:17:23.237 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:17:23.238 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:17:23.238 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:17:23.239 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 16:17:23.240 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 16:17:23.242 -03:00 [DBG] Context 'AppDbContext' started tracking 'Empresa' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:17:23.242 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:17:23.243 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-01-28 16:17:23.244 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:17:23.244 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:17:23.245 -03:00 [INF] [LOGIN] Usuario encontrado: true
2026-01-28 16:17:23.246 -03:00 [INF] [LOGIN] Usuario ID: 2, RUT: 12345678-9, Email: null, Activo: true
2026-01-28 16:17:23.247 -03:00 [INF] [LOGIN] Verificando contrasea para usuario ID: 2
2026-01-28 16:17:23.458 -03:00 [INF] [LOGIN] Password vlido: false
2026-01-28 16:17:23.458 -03:00 [WRN] [LOGIN] Login rechazado - Contrasea incorrecta para usuario ID: 2
2026-01-28 16:17:23.459 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-01-28 16:17:23.460 -03:00 [DBG] No information found on request to perform content negotiation.
2026-01-28 16:17:23.461 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-01-28 16:17:23.461 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-01-28 16:17:23.462 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2026-01-28 16:17:23.462 -03:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'System.String'.
2026-01-28 16:17:23.463 -03:00 [INF] Executed action Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api) in 282.4985ms
2026-01-28 16:17:23.464 -03:00 [INF] Executed endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 16:17:23.464 -03:00 [INF] HTTP POST /api/auth/login responded 401 in 290.1790 ms
2026-01-28 16:17:23.465 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 16:17:23.466 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:17:23.467 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:17:23.467 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/auth/login - 401 null text/plain; charset=utf-8 298.9099ms
2026-01-28 16:17:38.318 -03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-01-28 16:17:38.866 -03:00 [DBG] The index {'ProductoId'} was not created on entity type 'Stock' as the properties are already covered by the index {'ProductoId', 'SucursalId'}.
2026-01-28 16:17:38.868 -03:00 [DBG] The index {'EmpresaId'} was not created on entity type 'Usuario' as the properties are already covered by the index {'EmpresaId', 'Email'}.
2026-01-28 16:17:38.869 -03:00 [DBG] The index {'EmpresaId'} was not created on entity type 'Usuario' as the properties are already covered by the index {'EmpresaId', 'Rut'}.
2026-01-28 16:17:38.951 -03:00 [DBG] The property 'MovimientoStock.DevolucionId' was created in shadow state because there are no eligible CLR members with a matching name.
2026-01-28 16:17:39.052 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 16:17:39.068 -03:00 [DBG] Creating DbConnection.
2026-01-28 16:17:39.104 -03:00 [DBG] Created DbConnection. (34ms).
2026-01-28 16:17:39.107 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:17:39.232 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:17:39.238 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:17:39.244 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2026-01-28 16:17:39.246 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
2026-01-28 16:17:39.256 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-28 16:17:39.288 -03:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-28 16:17:39.336 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:17:39.342 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 50ms reading results.
2026-01-28 16:17:39.345 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:17:39.348 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (3ms).
2026-01-28 16:17:39.497 -03:00 [DBG] Migrating using database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:17:39.501 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:17:39.504 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:17:39.549 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:17:39.550 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:17:39.552 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (2ms).
2026-01-28 16:17:39.554 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:17:39.555 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:17:39.596 -03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-01-28 16:17:39.596 -03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-01-28 16:17:39.597 -03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1ms).
2026-01-28 16:17:39.598 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2026-01-28 16:17:39.604 -03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2026-01-28 16:17:39.607 -03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2026-01-28 16:17:39.610 -03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2026-01-28 16:17:39.611 -03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2026-01-28 16:17:39.612 -03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-01-28 16:17:39.612 -03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-01-28 16:17:39.613 -03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1ms).
2026-01-28 16:17:39.614 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2026-01-28 16:17:39.615 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2026-01-28 16:17:39.616 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:17:39.617 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:17:39.617 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:17:39.618 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-28 16:17:39.619 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-28 16:17:39.620 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:17:39.621 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-01-28 16:17:39.627 -03:00 [INF] No migrations were applied. The database is already up to date.
2026-01-28 16:17:39.628 -03:00 [DBG] Committing transaction.
2026-01-28 16:17:39.666 -03:00 [DBG] Committed transaction.
2026-01-28 16:17:39.668 -03:00 [DBG] Disposing transaction.
2026-01-28 16:17:39.668 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:17:39.669 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:17:39.670 -03:00 [INF] Database migrations applied successfully
2026-01-28 16:17:39.672 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 16:17:39.673 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:17:39.674 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (1ms).
2026-01-28 16:17:39.716 -03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-01-28 16:17:39.764 -03:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2026-01-28 16:17:39.781 -03:00 [INF] Project Gon API iniciada en ambiente: Development
2026-01-28 16:17:39.784 -03:00 [DBG] Hosting starting
2026-01-28 16:17:39.806 -03:00 [INF] User profile is available. Using 'C:\Users\Jossan\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-28 16:17:39.816 -03:00 [DBG] Reading data from file 'C:\Users\Jossan\AppData\Local\ASP.NET\DataProtection-Keys\key-7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c.xml'.
2026-01-28 16:17:39.823 -03:00 [DBG] Found key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c}.
2026-01-28 16:17:39.829 -03:00 [DBG] Considering key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} with expiration date 2026-04-28 18:20:11Z as default key.
2026-01-28 16:17:39.832 -03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2026-01-28 16:17:39.834 -03:00 [DBG] Decrypting secret element using Windows DPAPI.
2026-01-28 16:17:39.835 -03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2026-01-28 16:17:39.837 -03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2026-01-28 16:17:39.839 -03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2026-01-28 16:17:39.840 -03:00 [DBG] Using key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} as the default key.
2026-01-28 16:17:39.841 -03:00 [DBG] Key ring with default key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} was loaded during application startup.
2026-01-28 16:17:39.844 -03:00 [DBG] Middleware loaded
2026-01-28 16:17:39.846 -03:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16515 B).
2026-01-28 16:17:39.847 -03:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2026-01-28 16:17:39.931 -03:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2026-01-28 16:17:39.932 -03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-01-28 16:17:39.939 -03:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2026-01-28 16:17:39.984 -03:00 [INF] Now listening on: https://localhost:7058
2026-01-28 16:17:39.985 -03:00 [INF] Now listening on: http://localhost:5070
2026-01-28 16:17:39.985 -03:00 [DBG] Loaded hosting startup assembly Project_Gon.Api
2026-01-28 16:17:39.986 -03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-01-28 16:17:39.986 -03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-01-28 16:17:39.987 -03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-01-28 16:17:39.991 -03:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2026-01-28 16:17:39.994 -03:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2026-01-28 16:17:40.021 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-28 16:17:40.021 -03:00 [INF] Hosting environment: Development
2026-01-28 16:17:40.022 -03:00 [INF] Content root path: C:\Proyectos\Project_Gon\Project_Gon.Api
2026-01-28 16:17:40.024 -03:00 [DBG] Hosting started
2026-01-28 16:17:46.263 -03:00 [DBG] Connection id "0HNIUK7LJRMB3" accepted.
2026-01-28 16:17:46.264 -03:00 [DBG] Connection id "0HNIUK7LJRMB3" started.
2026-01-28 16:17:46.297 -03:00 [DBG] Connection 0HNIUK7LJRMB3 established using the following protocol: "Tls12"
2026-01-28 16:17:46.325 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/auth/login - application/json 59
2026-01-28 16:17:46.350 -03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2026-01-28 16:17:46.351 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)' with route pattern 'api/Auth/login' is valid for the request path '/api/auth/login'
2026-01-28 16:17:46.353 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 16:17:46.357 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 16:17:46.393 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 16:17:46.396 -03:00 [INF] Executing endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 16:17:46.410 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Project_Gon.Core.DTOs.Auth.LoginDto) on controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api).
2026-01-28 16:17:46.412 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-01-28 16:17:46.413 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-01-28 16:17:46.413 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-01-28 16:17:46.414 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-01-28 16:17:46.415 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-01-28 16:17:46.417 -03:00 [DBG] Executing controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-01-28 16:17:46.488 -03:00 [DBG] Executed controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-01-28 16:17:46.491 -03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' ...
2026-01-28 16:17:46.493 -03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' using the name '' in request data ...
2026-01-28 16:17:46.494 -03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2026-01-28 16:17:46.499 -03:00 [DBG] Connection id "0HNIUK7LJRMB3", Request id "0HNIUK7LJRMB3:00000001": started reading request body.
2026-01-28 16:17:46.499 -03:00 [DBG] Connection id "0HNIUK7LJRMB3", Request id "0HNIUK7LJRMB3:00000001": done reading request body.
2026-01-28 16:17:46.504 -03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Project_Gon.Core.DTOs.Auth.LoginDto'
2026-01-28 16:17:46.505 -03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 16:17:46.506 -03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 16:17:46.506 -03:00 [DBG] Attempting to validate the bound parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' ...
2026-01-28 16:17:46.519 -03:00 [DBG] Done attempting to validate the bound parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 16:17:46.522 -03:00 [INF] [LOGIN] Intento de login con: 12345678-9
2026-01-28 16:17:46.524 -03:00 [DBG] [CLEAN_RUT] Original: 12345678-9 -> Limpio: 12345678-9
2026-01-28 16:17:46.524 -03:00 [INF] [FIND] Buscando por RUT limpio: 12345678-9
2026-01-28 16:17:46.531 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 16:17:46.574 -03:00 [DBG] Compiling query expression: 
'DbSet<Usuario>()
    .Where(u => u.Rut == __rutLimpio_0 && u.Activo)
    .AsNoTracking()
    .FirstOrDefault()'
2026-01-28 16:17:46.734 -03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Usuario>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Usuario>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Usuario.Activo (bool) Required, 1], [Property: Usuario.Apellido (string) Required, 2], [Property: Usuario.CreatedAt (DateTime) Required, 3], [Property: Usuario.Email (string) Index MaxLength(255), 4], [Property: Usuario.EmpresaId (int) Required FK Index, 5], [Property: Usuario.Nombre (string) Required, 6], [Property: Usuario.PasswordHash (string) Required, 7], [Property: Usuario.Rol (RolUsuario) Required, 8], [Property: Usuario.Rut (string) Index MaxLength(12), 9], [Property: Usuario.SucursalId (int?) FK Index, 10], [Property: Usuario.UltimoAcceso (DateTime?), 11], [Property: Usuario.UpdatedAt (DateTime?), 12] }
            SELECT TOP(1) u.Id, u.Activo, u.Apellido, u.CreatedAt, u.Email, u.EmpresaId, u.Nombre, u.PasswordHash, u.Rol, u.Rut, u.SucursalId, u.UltimoAcceso, u.UpdatedAt
            FROM Usuarios AS u
            WHERE (u.Rut == @__rutLimpio_0) && u.Activo) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Usuario.Activo (bool) Required, 1], [Property: Usuario.Apellido (string) Required, 2], [Property: Usuario.CreatedAt (DateTime) Required, 3], [Property: Usuario.Email (string) Index MaxLength(255), 4], [Property: Usuario.EmpresaId (int) Required FK Index, 5], [Property: Usuario.Nombre (string) Required, 6], [Property: Usuario.PasswordHash (string) Required, 7], [Property: Usuario.Rol (RolUsuario) Required, 8], [Property: Usuario.Rut (string) Index MaxLength(12), 9], [Property: Usuario.SucursalId (int?) FK Index, 10], [Property: Usuario.UltimoAcceso (DateTime?), 11], [Property: Usuario.UpdatedAt (DateTime?), 12] }
            SELECT TOP(1) u.Id, u.Activo, u.Apellido, u.CreatedAt, u.Email, u.EmpresaId, u.Nombre, u.PasswordHash, u.Rol, u.Rut, u.SucursalId, u.UltimoAcceso, u.UpdatedAt
            FROM Usuarios AS u
            WHERE (u.Rut == @__rutLimpio_0) && u.Activo, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Usuario entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Usuario instance1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Usuario);
                (object)dataReader.GetInt32(0) != null ? 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")]: 
                            {
                                return 
                                {
                                    Usuario instance;
                                    instance = new Usuario();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Activo>k__BackingField = dataReader.GetBoolean(1);
                                    instance.<Apellido>k__BackingField = dataReader.GetString(2);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(3);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<EmpresaId>k__BackingField = dataReader.GetInt32(5);
                                    instance.<Nombre>k__BackingField = dataReader.GetString(6);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(7);
                                    instance.<Rol>k__BackingField = Invoke(((EnumToNumberConverter<RolUsuario, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Usuario.Rol (RolUsuario) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario").FindProperty("Rol")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(8));
                                    instance.<Rut>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<SucursalId>k__BackingField = dataReader.IsDBNull(10) ? default(int?) : (int?)dataReader.GetInt32(10);
                                    instance.<UltimoAcceso>k__BackingField = dataReader.IsDBNull(11) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(11);
                                    instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(12) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(12);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Usuario)
                    }
                    ;
                    return instance1;
                } : 
                {
                    object[] keyValues1;
                    keyValues1 = new object[]{ (object)dataReader.GetInt32(0) };
                    return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                        entityType: [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")], 
                        properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario").FindPrimaryKey().Properties], 
                        keyValues: keyValues1);
                };
                return instance1;
            };
            return entity;
        }, 
        contextType: Project_Gon.Infrastructure.Data.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2026-01-28 16:17:46.766 -03:00 [DBG] Creating DbConnection.
2026-01-28 16:17:46.767 -03:00 [DBG] Created DbConnection. (0ms).
2026-01-28 16:17:46.768 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:17:46.770 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:17:46.771 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:17:46.771 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:17:46.775 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2026-01-28 16:17:46.777 -03:00 [DBG] Executing DbCommand [Parameters=[@__rutLimpio_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Rut" = @__rutLimpio_0 AND u."Activo"
LIMIT 1
2026-01-28 16:17:46.789 -03:00 [INF] Executed DbCommand (13ms) [Parameters=[@__rutLimpio_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Rut" = @__rutLimpio_0 AND u."Activo"
LIMIT 1
2026-01-28 16:17:46.800 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:17:46.801 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 10ms reading results.
2026-01-28 16:17:46.804 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:17:46.804 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:17:46.806 -03:00 [INF] [FIND] Usuario encontrado - ID: 2, RUT: 12345678-9
2026-01-28 16:17:46.814 -03:00 [DBG] Compiling query expression: 
'DbSet<Empresa>()
    .FirstOrDefault(e => EF.Property<int>(e, "Id") == __p_0)'
2026-01-28 16:17:46.824 -03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Empresa>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Empresa>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Empresa.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Empresa.Activo (bool) Required, 1], [Property: Empresa.Ciudad (string), 2], [Property: Empresa.CreatedAt (DateTime) Required, 3], [Property: Empresa.Direccion (string), 4], [Property: Empresa.Nombre (string) Required MaxLength(255), 5], [Property: Empresa.Region (string), 6], [Property: Empresa.Rut (string), 7], [Property: Empresa.UpdatedAt (DateTime?), 8] }
            SELECT TOP(1) e.Id, e.Activo, e.Ciudad, e.CreatedAt, e.Direccion, e.Nombre, e.Region, e.Rut, e.UpdatedAt
            FROM Empresas AS e
            WHERE e.Id == @__p_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Empresa.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Empresa.Activo (bool) Required, 1], [Property: Empresa.Ciudad (string), 2], [Property: Empresa.CreatedAt (DateTime) Required, 3], [Property: Empresa.Direccion (string), 4], [Property: Empresa.Nombre (string) Required MaxLength(255), 5], [Property: Empresa.Region (string), 6], [Property: Empresa.Rut (string), 7], [Property: Empresa.UpdatedAt (DateTime?), 8] }
            SELECT TOP(1) e.Id, e.Activo, e.Ciudad, e.CreatedAt, e.Direccion, e.Nombre, e.Region, e.Rut, e.UpdatedAt
            FROM Empresas AS e
            WHERE e.Id == @__p_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Empresa entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Empresa instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Empresa);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Empresa.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Empresa").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (Empresa)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Empresa | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Empresa")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Empresa | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Empresa")]: 
                            {
                                return 
                                {
                                    Empresa instance;
                                    instance = new Empresa();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Activo>k__BackingField = dataReader.GetBoolean(1);
                                    instance.<Ciudad>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(3);
                                    instance.<Direccion>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<Nombre>k__BackingField = dataReader.GetString(5);
                                    instance.<Region>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                    instance.<Rut>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(8) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(8);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Empresa | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Empresa")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Empresa)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: Project_Gon.Infrastructure.Data.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2026-01-28 16:17:46.832 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:17:46.833 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:17:46.833 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:17:46.834 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:17:46.835 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:17:46.835 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 16:17:46.838 -03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 16:17:46.864 -03:00 [DBG] Context 'AppDbContext' started tracking 'Empresa' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 16:17:46.883 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:17:46.884 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 43ms reading results.
2026-01-28 16:17:46.885 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:17:46.885 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:17:46.886 -03:00 [INF] [LOGIN] Usuario encontrado: true
2026-01-28 16:17:46.887 -03:00 [INF] [LOGIN] Usuario ID: 2, RUT: 12345678-9, Email: null, Activo: true
2026-01-28 16:17:46.888 -03:00 [INF] [LOGIN] Verificando contrasea para usuario ID: 2
2026-01-28 16:17:47.650 -03:00 [INF] [LOGIN] Password vlido: false
2026-01-28 16:17:47.651 -03:00 [WRN] [LOGIN] Login rechazado - Contrasea incorrecta para usuario ID: 2
2026-01-28 16:17:47.655 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-01-28 16:17:47.658 -03:00 [DBG] No information found on request to perform content negotiation.
2026-01-28 16:17:47.658 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-01-28 16:17:47.659 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-01-28 16:17:47.660 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2026-01-28 16:17:47.661 -03:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'System.String'.
2026-01-28 16:17:47.665 -03:00 [INF] Executed action Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api) in 1247.5064ms
2026-01-28 16:17:47.668 -03:00 [INF] Executed endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 16:17:47.671 -03:00 [INF] HTTP POST /api/auth/login responded 401 in 1310.6780 ms
2026-01-28 16:17:47.676 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 16:17:47.678 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:17:47.680 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (1ms).
2026-01-28 16:17:47.682 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/auth/login - 401 null text/plain; charset=utf-8 1360.9362ms
2026-01-28 16:18:50.205 -03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-01-28 16:18:50.561 -03:00 [DBG] The index {'ProductoId'} was not created on entity type 'Stock' as the properties are already covered by the index {'ProductoId', 'SucursalId'}.
2026-01-28 16:18:50.564 -03:00 [DBG] The index {'EmpresaId'} was not created on entity type 'Usuario' as the properties are already covered by the index {'EmpresaId', 'Email'}.
2026-01-28 16:18:50.565 -03:00 [DBG] The index {'EmpresaId'} was not created on entity type 'Usuario' as the properties are already covered by the index {'EmpresaId', 'Rut'}.
2026-01-28 16:18:50.643 -03:00 [DBG] The property 'MovimientoStock.DevolucionId' was created in shadow state because there are no eligible CLR members with a matching name.
2026-01-28 16:18:50.705 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 16:18:50.716 -03:00 [DBG] Creating DbConnection.
2026-01-28 16:18:50.734 -03:00 [DBG] Created DbConnection. (16ms).
2026-01-28 16:18:50.737 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:18:50.810 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:18:50.814 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:18:50.818 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2026-01-28 16:18:50.819 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2026-01-28 16:18:50.825 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-28 16:18:50.846 -03:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-28 16:18:50.866 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:18:50.872 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 21ms reading results.
2026-01-28 16:18:50.874 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:18:50.877 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (2ms).
2026-01-28 16:18:50.983 -03:00 [DBG] Migrating using database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:18:50.985 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:18:50.987 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:18:51.071 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:18:51.072 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:18:51.074 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (2ms).
2026-01-28 16:18:51.076 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:18:51.077 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:18:51.105 -03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-01-28 16:18:51.106 -03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-01-28 16:18:51.106 -03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1ms).
2026-01-28 16:18:51.108 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2026-01-28 16:18:51.113 -03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2026-01-28 16:18:51.117 -03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2026-01-28 16:18:51.119 -03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2026-01-28 16:18:51.121 -03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2026-01-28 16:18:51.122 -03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-01-28 16:18:51.123 -03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-01-28 16:18:51.124 -03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1ms).
2026-01-28 16:18:51.125 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2026-01-28 16:18:51.126 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2026-01-28 16:18:51.128 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:18:51.128 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:18:51.129 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:18:51.130 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-28 16:18:51.132 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-28 16:18:51.133 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:18:51.134 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-01-28 16:18:51.140 -03:00 [INF] No migrations were applied. The database is already up to date.
2026-01-28 16:18:51.141 -03:00 [DBG] Committing transaction.
2026-01-28 16:18:51.144 -03:00 [DBG] Committed transaction.
2026-01-28 16:18:51.145 -03:00 [DBG] Disposing transaction.
2026-01-28 16:18:51.146 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:18:51.147 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (1ms).
2026-01-28 16:18:51.148 -03:00 [INF] Database migrations applied successfully
2026-01-28 16:18:51.150 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 16:18:51.152 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:18:51.154 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (1ms).
2026-01-28 16:18:51.176 -03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-01-28 16:18:51.206 -03:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2026-01-28 16:18:51.219 -03:00 [INF] Project Gon API iniciada en ambiente: Development
2026-01-28 16:18:51.222 -03:00 [DBG] Hosting starting
2026-01-28 16:18:51.231 -03:00 [INF] User profile is available. Using 'C:\Users\Jossan\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-28 16:18:51.237 -03:00 [DBG] Reading data from file 'C:\Users\Jossan\AppData\Local\ASP.NET\DataProtection-Keys\key-7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c.xml'.
2026-01-28 16:18:51.247 -03:00 [DBG] Found key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c}.
2026-01-28 16:18:51.253 -03:00 [DBG] Considering key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} with expiration date 2026-04-28 18:20:11Z as default key.
2026-01-28 16:18:51.256 -03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2026-01-28 16:18:51.257 -03:00 [DBG] Decrypting secret element using Windows DPAPI.
2026-01-28 16:18:51.259 -03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2026-01-28 16:18:51.261 -03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2026-01-28 16:18:51.263 -03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2026-01-28 16:18:51.264 -03:00 [DBG] Using key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} as the default key.
2026-01-28 16:18:51.265 -03:00 [DBG] Key ring with default key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} was loaded during application startup.
2026-01-28 16:18:51.306 -03:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2026-01-28 16:18:51.307 -03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-01-28 16:18:51.313 -03:00 [INF] Now listening on: http://localhost:5070
2026-01-28 16:18:51.314 -03:00 [DBG] Loaded hosting startup assembly Project_Gon.Api
2026-01-28 16:18:51.315 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-28 16:18:51.316 -03:00 [INF] Hosting environment: Development
2026-01-28 16:18:51.316 -03:00 [INF] Content root path: C:\Proyectos\Project_Gon\Project_Gon.Api
2026-01-28 16:18:51.318 -03:00 [DBG] Hosting started
2026-01-28 16:19:32.870 -03:00 [INF] Application is shutting down...
2026-01-28 16:19:32.871 -03:00 [DBG] Hosting stopping
2026-01-28 16:19:32.876 -03:00 [DBG] Hosting stopped
