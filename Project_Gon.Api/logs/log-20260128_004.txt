2026-01-28 16:24:13.934 -03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-01-28 16:24:14.272 -03:00 [DBG] The index {'ProductoId'} was not created on entity type 'Stock' as the properties are already covered by the index {'ProductoId', 'SucursalId'}.
2026-01-28 16:24:14.275 -03:00 [DBG] The index {'EmpresaId'} was not created on entity type 'Usuario' as the properties are already covered by the index {'EmpresaId', 'Email'}.
2026-01-28 16:24:14.276 -03:00 [DBG] The index {'EmpresaId'} was not created on entity type 'Usuario' as the properties are already covered by the index {'EmpresaId', 'Rut'}.
2026-01-28 16:24:14.362 -03:00 [DBG] The property 'MovimientoStock.DevolucionId' was created in shadow state because there are no eligible CLR members with a matching name.
2026-01-28 16:24:14.428 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 16:24:14.441 -03:00 [DBG] Creating DbConnection.
2026-01-28 16:24:14.459 -03:00 [DBG] Created DbConnection. (17ms).
2026-01-28 16:24:14.462 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:24:14.540 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:24:14.544 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:24:14.548 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2026-01-28 16:24:14.550 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2026-01-28 16:24:14.554 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-28 16:24:14.577 -03:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-28 16:24:14.597 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:24:14.602 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 21ms reading results.
2026-01-28 16:24:14.605 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:24:14.608 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (3ms).
2026-01-28 16:24:14.713 -03:00 [DBG] Migrating using database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:24:14.715 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:24:14.718 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:24:14.756 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:24:14.757 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:24:14.759 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (2ms).
2026-01-28 16:24:14.761 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:24:14.762 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:24:14.789 -03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-01-28 16:24:14.790 -03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-01-28 16:24:14.791 -03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1ms).
2026-01-28 16:24:14.792 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2026-01-28 16:24:14.798 -03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2026-01-28 16:24:14.801 -03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2026-01-28 16:24:14.804 -03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2026-01-28 16:24:14.806 -03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2026-01-28 16:24:14.807 -03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-01-28 16:24:14.807 -03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-01-28 16:24:14.808 -03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1ms).
2026-01-28 16:24:14.809 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2026-01-28 16:24:14.811 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2026-01-28 16:24:14.813 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:24:14.814 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:24:14.815 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:24:14.816 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-28 16:24:14.817 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-28 16:24:14.819 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:24:14.820 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-01-28 16:24:14.825 -03:00 [INF] No migrations were applied. The database is already up to date.
2026-01-28 16:24:14.826 -03:00 [DBG] Committing transaction.
2026-01-28 16:24:14.882 -03:00 [DBG] Committed transaction.
2026-01-28 16:24:14.883 -03:00 [DBG] Disposing transaction.
2026-01-28 16:24:14.884 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:24:14.885 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (1ms).
2026-01-28 16:24:14.886 -03:00 [INF] Database migrations applied successfully
2026-01-28 16:24:14.888 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 16:24:14.890 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:24:14.891 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (1ms).
2026-01-28 16:24:14.917 -03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-01-28 16:24:14.954 -03:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2026-01-28 16:24:14.967 -03:00 [INF] Project Gon API iniciada en ambiente: Development
2026-01-28 16:24:14.969 -03:00 [DBG] Hosting starting
2026-01-28 16:24:14.979 -03:00 [INF] User profile is available. Using 'C:\Users\Jossan\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-28 16:24:14.984 -03:00 [DBG] Reading data from file 'C:\Users\Jossan\AppData\Local\ASP.NET\DataProtection-Keys\key-7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c.xml'.
2026-01-28 16:24:14.989 -03:00 [DBG] Found key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c}.
2026-01-28 16:24:14.996 -03:00 [DBG] Considering key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} with expiration date 2026-04-28 18:20:11Z as default key.
2026-01-28 16:24:14.999 -03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2026-01-28 16:24:15.000 -03:00 [DBG] Decrypting secret element using Windows DPAPI.
2026-01-28 16:24:15.001 -03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2026-01-28 16:24:15.003 -03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2026-01-28 16:24:15.005 -03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2026-01-28 16:24:15.006 -03:00 [DBG] Using key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} as the default key.
2026-01-28 16:24:15.007 -03:00 [DBG] Key ring with default key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} was loaded during application startup.
2026-01-28 16:24:15.045 -03:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2026-01-28 16:24:15.046 -03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-01-28 16:24:15.055 -03:00 [ERR] Hosting failed to start
System.IO.IOException: Failed to bind to address http://127.0.0.1:5070: address already in use.
 ---> Microsoft.AspNetCore.Connections.AddressInUseException: Solo se permite un uso de cada dirección de socket (protocolo/dirección de red/puerto)
 ---> System.Net.Sockets.SocketException (10048): Solo se permite un uso de cada dirección de socket (protocolo/dirección de red/puerto)
   at System.Net.Sockets.Socket.UpdateStatusAfterSocketErrorAndThrowException(SocketError error, Boolean disconnectOnFailure, String callerName)
   at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Bind(EndPoint localEP)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportOptions.CreateDefaultBoundListenSocket(EndPoint endpoint)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportFactory.BindAsync(EndPoint endpoint, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Infrastructure.TransportManager.BindAsync(EndPoint endPoint, ConnectionDelegate connectionDelegate, EndpointConfig endpointConfig, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.<>c__DisplayClass28_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.BindAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__14_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
2026-01-28 16:24:15.068 -03:00 [FTL] Aplicación terminó inesperadamente
System.IO.IOException: Failed to bind to address http://127.0.0.1:5070: address already in use.
 ---> Microsoft.AspNetCore.Connections.AddressInUseException: Solo se permite un uso de cada dirección de socket (protocolo/dirección de red/puerto)
 ---> System.Net.Sockets.SocketException (10048): Solo se permite un uso de cada dirección de socket (protocolo/dirección de red/puerto)
   at System.Net.Sockets.Socket.UpdateStatusAfterSocketErrorAndThrowException(SocketError error, Boolean disconnectOnFailure, String callerName)
   at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Bind(EndPoint localEP)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportOptions.CreateDefaultBoundListenSocket(EndPoint endpoint)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportFactory.BindAsync(EndPoint endpoint, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Infrastructure.TransportManager.BindAsync(EndPoint endPoint, ConnectionDelegate connectionDelegate, EndpointConfig endpointConfig, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.<>c__DisplayClass28_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.BindAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__14_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
   at Microsoft.Extensions.Hosting.Internal.Host.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.Run(IHost host)
   at Program.<Main>$(String[] args) in C:\Proyectos\Project_Gon\Project_Gon.Api\Program.cs:line 289
2026-01-28 16:49:49.854 -03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-01-28 16:49:50.203 -03:00 [DBG] The index {'ProductoId'} was not created on entity type 'Stock' as the properties are already covered by the index {'ProductoId', 'SucursalId'}.
2026-01-28 16:49:50.205 -03:00 [DBG] The index {'EmpresaId'} was not created on entity type 'Usuario' as the properties are already covered by the index {'EmpresaId', 'Email'}.
2026-01-28 16:49:50.206 -03:00 [DBG] The index {'EmpresaId'} was not created on entity type 'Usuario' as the properties are already covered by the index {'EmpresaId', 'Rut'}.
2026-01-28 16:49:50.283 -03:00 [DBG] The property 'MovimientoStock.DevolucionId' was created in shadow state because there are no eligible CLR members with a matching name.
2026-01-28 16:49:50.345 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 16:49:50.356 -03:00 [DBG] Creating DbConnection.
2026-01-28 16:49:50.372 -03:00 [DBG] Created DbConnection. (15ms).
2026-01-28 16:49:50.375 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:49:50.547 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:49:50.551 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:49:50.554 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2026-01-28 16:49:50.555 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2026-01-28 16:49:50.559 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-28 16:49:50.583 -03:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-28 16:49:50.602 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:49:50.608 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 20ms reading results.
2026-01-28 16:49:50.610 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:49:50.612 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (2ms).
2026-01-28 16:49:50.715 -03:00 [DBG] Migrating using database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:49:50.717 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:49:50.719 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:49:50.857 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:49:50.858 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:49:50.859 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (1ms).
2026-01-28 16:49:50.860 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:49:50.861 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:49:50.888 -03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-01-28 16:49:50.889 -03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-01-28 16:49:50.890 -03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1ms).
2026-01-28 16:49:50.890 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2026-01-28 16:49:50.896 -03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2026-01-28 16:49:50.899 -03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2026-01-28 16:49:50.901 -03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2026-01-28 16:49:50.902 -03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2026-01-28 16:49:50.903 -03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-01-28 16:49:50.903 -03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-01-28 16:49:50.904 -03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1ms).
2026-01-28 16:49:50.905 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2026-01-28 16:49:50.941 -03:00 [INF] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2026-01-28 16:49:50.942 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 16:49:50.943 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 16:49:50.944 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 16:49:50.944 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-28 16:49:50.946 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-28 16:49:50.947 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:49:50.947 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-01-28 16:49:50.952 -03:00 [INF] No migrations were applied. The database is already up to date.
2026-01-28 16:49:50.953 -03:00 [DBG] Committing transaction.
2026-01-28 16:49:50.956 -03:00 [DBG] Committed transaction.
2026-01-28 16:49:50.957 -03:00 [DBG] Disposing transaction.
2026-01-28 16:49:50.957 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:49:50.958 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:49:50.959 -03:00 [INF] Database migrations applied successfully
2026-01-28 16:49:50.960 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 16:49:50.962 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 16:49:50.963 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 16:49:50.982 -03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-01-28 16:49:51.011 -03:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2026-01-28 16:49:51.023 -03:00 [INF] Project Gon API iniciada en ambiente: Development
2026-01-28 16:49:51.025 -03:00 [DBG] Hosting starting
2026-01-28 16:49:51.033 -03:00 [INF] User profile is available. Using 'C:\Users\Jossan\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-28 16:49:51.038 -03:00 [DBG] Reading data from file 'C:\Users\Jossan\AppData\Local\ASP.NET\DataProtection-Keys\key-7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c.xml'.
2026-01-28 16:49:51.043 -03:00 [DBG] Found key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c}.
2026-01-28 16:49:51.049 -03:00 [DBG] Considering key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} with expiration date 2026-04-28 18:20:11Z as default key.
2026-01-28 16:49:51.051 -03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2026-01-28 16:49:51.052 -03:00 [DBG] Decrypting secret element using Windows DPAPI.
2026-01-28 16:49:51.053 -03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2026-01-28 16:49:51.055 -03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2026-01-28 16:49:51.056 -03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2026-01-28 16:49:51.057 -03:00 [DBG] Using key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} as the default key.
2026-01-28 16:49:51.058 -03:00 [DBG] Key ring with default key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} was loaded during application startup.
2026-01-28 16:49:51.060 -03:00 [DBG] Middleware loaded
2026-01-28 16:49:51.061 -03:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16515 B).
2026-01-28 16:49:51.062 -03:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2026-01-28 16:49:51.104 -03:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2026-01-28 16:49:51.106 -03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-01-28 16:49:51.108 -03:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2026-01-28 16:49:51.134 -03:00 [INF] Now listening on: https://localhost:7058
2026-01-28 16:49:51.135 -03:00 [INF] Now listening on: http://localhost:5070
2026-01-28 16:49:51.136 -03:00 [DBG] Loaded hosting startup assembly Project_Gon.Api
2026-01-28 16:49:51.136 -03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-01-28 16:49:51.136 -03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-01-28 16:49:51.137 -03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-01-28 16:49:51.140 -03:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2026-01-28 16:49:51.142 -03:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2026-01-28 16:49:51.237 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-28 16:49:51.237 -03:00 [INF] Hosting environment: Development
2026-01-28 16:49:51.238 -03:00 [INF] Content root path: C:\Proyectos\Project_Gon\Project_Gon.Api
2026-01-28 16:49:51.239 -03:00 [DBG] Hosting started
2026-01-28 17:21:09.114 -03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-01-28 17:21:09.555 -03:00 [DBG] The index {'ProductoId'} was not created on entity type 'Stock' as the properties are already covered by the index {'ProductoId', 'SucursalId'}.
2026-01-28 17:21:09.557 -03:00 [DBG] The index {'EmpresaId'} was not created on entity type 'Usuario' as the properties are already covered by the index {'EmpresaId', 'Email'}.
2026-01-28 17:21:09.558 -03:00 [DBG] The index {'EmpresaId'} was not created on entity type 'Usuario' as the properties are already covered by the index {'EmpresaId', 'Rut'}.
2026-01-28 17:21:09.644 -03:00 [DBG] The property 'MovimientoStock.DevolucionId' was created in shadow state because there are no eligible CLR members with a matching name.
2026-01-28 17:21:09.712 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 17:21:09.726 -03:00 [DBG] Creating DbConnection.
2026-01-28 17:21:09.752 -03:00 [DBG] Created DbConnection. (26ms).
2026-01-28 17:21:09.756 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:21:09.950 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:21:09.954 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 17:21:09.958 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2026-01-28 17:21:09.959 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2026-01-28 17:21:09.964 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-28 17:21:09.987 -03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-28 17:21:10.008 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:21:10.014 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 24ms reading results.
2026-01-28 17:21:10.016 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:21:10.019 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (2ms).
2026-01-28 17:21:10.135 -03:00 [DBG] Migrating using database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:21:10.138 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:21:10.140 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:21:10.175 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:21:10.176 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:21:10.178 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (1ms).
2026-01-28 17:21:10.179 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:21:10.180 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:21:10.208 -03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-01-28 17:21:10.209 -03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-01-28 17:21:10.210 -03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1ms).
2026-01-28 17:21:10.210 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2026-01-28 17:21:10.220 -03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2026-01-28 17:21:10.224 -03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2026-01-28 17:21:10.226 -03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2026-01-28 17:21:10.227 -03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2026-01-28 17:21:10.228 -03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-01-28 17:21:10.228 -03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-01-28 17:21:10.229 -03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1ms).
2026-01-28 17:21:10.230 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2026-01-28 17:21:10.231 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2026-01-28 17:21:10.232 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 17:21:10.233 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 17:21:10.233 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 17:21:10.234 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-28 17:21:10.235 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-28 17:21:10.237 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:21:10.237 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-01-28 17:21:10.243 -03:00 [INF] No migrations were applied. The database is already up to date.
2026-01-28 17:21:10.244 -03:00 [DBG] Committing transaction.
2026-01-28 17:21:10.247 -03:00 [DBG] Committed transaction.
2026-01-28 17:21:10.248 -03:00 [DBG] Disposing transaction.
2026-01-28 17:21:10.249 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:21:10.249 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 17:21:10.250 -03:00 [INF] Database migrations applied successfully
2026-01-28 17:21:10.252 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 17:21:10.254 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:21:10.255 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 17:21:10.292 -03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-01-28 17:21:10.331 -03:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2026-01-28 17:21:10.348 -03:00 [INF] Project Gon API iniciada en ambiente: Development
2026-01-28 17:21:10.351 -03:00 [DBG] Hosting starting
2026-01-28 17:21:10.366 -03:00 [INF] User profile is available. Using 'C:\Users\Jossan\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-28 17:21:10.383 -03:00 [DBG] Reading data from file 'C:\Users\Jossan\AppData\Local\ASP.NET\DataProtection-Keys\key-7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c.xml'.
2026-01-28 17:21:10.407 -03:00 [DBG] Found key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c}.
2026-01-28 17:21:10.421 -03:00 [DBG] Considering key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} with expiration date 2026-04-28 18:20:11Z as default key.
2026-01-28 17:21:10.425 -03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2026-01-28 17:21:10.426 -03:00 [DBG] Decrypting secret element using Windows DPAPI.
2026-01-28 17:21:10.427 -03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2026-01-28 17:21:10.429 -03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2026-01-28 17:21:10.431 -03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2026-01-28 17:21:10.432 -03:00 [DBG] Using key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} as the default key.
2026-01-28 17:21:10.433 -03:00 [DBG] Key ring with default key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} was loaded during application startup.
2026-01-28 17:21:10.436 -03:00 [DBG] Middleware loaded
2026-01-28 17:21:10.437 -03:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16515 B).
2026-01-28 17:21:10.440 -03:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2026-01-28 17:21:10.499 -03:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2026-01-28 17:21:10.501 -03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-01-28 17:21:10.503 -03:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2026-01-28 17:21:10.543 -03:00 [INF] Now listening on: https://localhost:7058
2026-01-28 17:21:10.544 -03:00 [INF] Now listening on: http://localhost:5070
2026-01-28 17:21:10.544 -03:00 [DBG] Loaded hosting startup assembly Project_Gon.Api
2026-01-28 17:21:10.545 -03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-01-28 17:21:10.545 -03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-01-28 17:21:10.546 -03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-01-28 17:21:10.550 -03:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2026-01-28 17:21:10.554 -03:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2026-01-28 17:21:10.575 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-28 17:21:10.581 -03:00 [INF] Hosting environment: Development
2026-01-28 17:21:10.582 -03:00 [INF] Content root path: C:\Proyectos\Project_Gon\Project_Gon.Api
2026-01-28 17:21:10.584 -03:00 [DBG] Hosting started
2026-01-28 17:22:14.953 -03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-01-28 17:22:15.472 -03:00 [DBG] The index {'ProductoId'} was not created on entity type 'Stock' as the properties are already covered by the index {'ProductoId', 'SucursalId'}.
2026-01-28 17:22:15.474 -03:00 [DBG] The index {'EmpresaId'} was not created on entity type 'Usuario' as the properties are already covered by the index {'EmpresaId', 'Email'}.
2026-01-28 17:22:15.475 -03:00 [DBG] The index {'EmpresaId'} was not created on entity type 'Usuario' as the properties are already covered by the index {'EmpresaId', 'Rut'}.
2026-01-28 17:22:15.559 -03:00 [DBG] The property 'MovimientoStock.DevolucionId' was created in shadow state because there are no eligible CLR members with a matching name.
2026-01-28 17:22:15.652 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 17:22:15.669 -03:00 [DBG] Creating DbConnection.
2026-01-28 17:22:15.703 -03:00 [DBG] Created DbConnection. (32ms).
2026-01-28 17:22:15.706 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:22:15.903 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:22:15.907 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 17:22:15.912 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2026-01-28 17:22:15.913 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2026-01-28 17:22:15.919 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-28 17:22:15.942 -03:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-28 17:22:15.967 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:22:15.973 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 27ms reading results.
2026-01-28 17:22:15.976 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:22:16.006 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (29ms).
2026-01-28 17:22:16.146 -03:00 [DBG] Migrating using database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:22:16.148 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:22:16.151 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:22:16.198 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:22:16.199 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:22:16.202 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (3ms).
2026-01-28 17:22:16.204 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:22:16.205 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:22:16.238 -03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-01-28 17:22:16.238 -03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-01-28 17:22:16.239 -03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1ms).
2026-01-28 17:22:16.240 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2026-01-28 17:22:16.246 -03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2026-01-28 17:22:16.249 -03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2026-01-28 17:22:16.252 -03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2026-01-28 17:22:16.253 -03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2026-01-28 17:22:16.254 -03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-01-28 17:22:16.254 -03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-01-28 17:22:16.255 -03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1ms).
2026-01-28 17:22:16.256 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2026-01-28 17:22:16.257 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2026-01-28 17:22:16.258 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 17:22:16.259 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 17:22:16.259 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 17:22:16.260 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-28 17:22:16.261 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-28 17:22:16.262 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:22:16.263 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-01-28 17:22:16.268 -03:00 [INF] No migrations were applied. The database is already up to date.
2026-01-28 17:22:16.270 -03:00 [DBG] Committing transaction.
2026-01-28 17:22:16.273 -03:00 [DBG] Committed transaction.
2026-01-28 17:22:16.274 -03:00 [DBG] Disposing transaction.
2026-01-28 17:22:16.275 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:22:16.275 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 17:22:16.277 -03:00 [INF] Database migrations applied successfully
2026-01-28 17:22:16.278 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 17:22:16.280 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:22:16.281 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (1ms).
2026-01-28 17:22:16.326 -03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-01-28 17:22:16.375 -03:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2026-01-28 17:22:16.390 -03:00 [INF] Project Gon API iniciada en ambiente: Development
2026-01-28 17:22:16.392 -03:00 [DBG] Hosting starting
2026-01-28 17:22:16.416 -03:00 [INF] User profile is available. Using 'C:\Users\Jossan\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-28 17:22:16.428 -03:00 [DBG] Reading data from file 'C:\Users\Jossan\AppData\Local\ASP.NET\DataProtection-Keys\key-7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c.xml'.
2026-01-28 17:22:16.437 -03:00 [DBG] Found key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c}.
2026-01-28 17:22:16.445 -03:00 [DBG] Considering key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} with expiration date 2026-04-28 18:20:11Z as default key.
2026-01-28 17:22:16.448 -03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2026-01-28 17:22:16.449 -03:00 [DBG] Decrypting secret element using Windows DPAPI.
2026-01-28 17:22:16.451 -03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2026-01-28 17:22:16.453 -03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2026-01-28 17:22:16.454 -03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2026-01-28 17:22:16.456 -03:00 [DBG] Using key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} as the default key.
2026-01-28 17:22:16.457 -03:00 [DBG] Key ring with default key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} was loaded during application startup.
2026-01-28 17:22:16.461 -03:00 [DBG] Middleware loaded
2026-01-28 17:22:16.463 -03:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16515 B).
2026-01-28 17:22:16.464 -03:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2026-01-28 17:22:16.554 -03:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2026-01-28 17:22:16.556 -03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-01-28 17:22:16.565 -03:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2026-01-28 17:22:16.617 -03:00 [INF] Now listening on: https://localhost:7058
2026-01-28 17:22:16.617 -03:00 [INF] Now listening on: http://localhost:5070
2026-01-28 17:22:16.618 -03:00 [DBG] Loaded hosting startup assembly Project_Gon.Api
2026-01-28 17:22:16.618 -03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-01-28 17:22:16.619 -03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-01-28 17:22:16.619 -03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-01-28 17:22:16.623 -03:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2026-01-28 17:22:16.627 -03:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2026-01-28 17:22:16.747 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-28 17:22:16.748 -03:00 [INF] Hosting environment: Development
2026-01-28 17:22:16.749 -03:00 [INF] Content root path: C:\Proyectos\Project_Gon\Project_Gon.Api
2026-01-28 17:22:16.751 -03:00 [DBG] Hosting started
2026-01-28 17:22:30.634 -03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2026-01-28 17:22:30.994 -03:00 [DBG] The index {'ProductoId'} was not created on entity type 'Stock' as the properties are already covered by the index {'ProductoId', 'SucursalId'}.
2026-01-28 17:22:30.997 -03:00 [DBG] The index {'EmpresaId'} was not created on entity type 'Usuario' as the properties are already covered by the index {'EmpresaId', 'Email'}.
2026-01-28 17:22:30.997 -03:00 [DBG] The index {'EmpresaId'} was not created on entity type 'Usuario' as the properties are already covered by the index {'EmpresaId', 'Rut'}.
2026-01-28 17:22:31.074 -03:00 [DBG] The property 'MovimientoStock.DevolucionId' was created in shadow state because there are no eligible CLR members with a matching name.
2026-01-28 17:22:31.147 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 17:22:31.158 -03:00 [DBG] Creating DbConnection.
2026-01-28 17:22:31.176 -03:00 [DBG] Created DbConnection. (16ms).
2026-01-28 17:22:31.178 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:22:31.254 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:22:31.257 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 17:22:31.261 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2026-01-28 17:22:31.262 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2026-01-28 17:22:31.266 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-28 17:22:31.286 -03:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-28 17:22:31.305 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:22:31.310 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 20ms reading results.
2026-01-28 17:22:31.312 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:22:31.314 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (2ms).
2026-01-28 17:22:31.422 -03:00 [DBG] Migrating using database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:22:31.424 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:22:31.427 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:22:31.564 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:22:31.565 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:22:31.567 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (1ms).
2026-01-28 17:22:31.568 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:22:31.568 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:22:31.595 -03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-01-28 17:22:31.595 -03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-01-28 17:22:31.596 -03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1ms).
2026-01-28 17:22:31.597 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2026-01-28 17:22:31.602 -03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2026-01-28 17:22:31.606 -03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2026-01-28 17:22:31.608 -03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2026-01-28 17:22:31.609 -03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2026-01-28 17:22:31.609 -03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2026-01-28 17:22:31.610 -03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2026-01-28 17:22:31.611 -03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1ms).
2026-01-28 17:22:31.611 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2026-01-28 17:22:31.612 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2026-01-28 17:22:31.613 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 17:22:31.614 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 17:22:31.614 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 17:22:31.615 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-28 17:22:31.616 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-28 17:22:31.618 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:22:31.619 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-01-28 17:22:31.624 -03:00 [INF] No migrations were applied. The database is already up to date.
2026-01-28 17:22:31.626 -03:00 [DBG] Committing transaction.
2026-01-28 17:22:31.637 -03:00 [DBG] Committed transaction.
2026-01-28 17:22:31.638 -03:00 [DBG] Disposing transaction.
2026-01-28 17:22:31.638 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:22:31.639 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 17:22:31.640 -03:00 [INF] Database migrations applied successfully
2026-01-28 17:22:31.642 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 17:22:31.643 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:22:31.644 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 17:22:31.663 -03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-01-28 17:22:31.692 -03:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2026-01-28 17:22:31.705 -03:00 [INF] Project Gon API iniciada en ambiente: Development
2026-01-28 17:22:31.707 -03:00 [DBG] Hosting starting
2026-01-28 17:22:31.716 -03:00 [INF] User profile is available. Using 'C:\Users\Jossan\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-28 17:22:31.721 -03:00 [DBG] Reading data from file 'C:\Users\Jossan\AppData\Local\ASP.NET\DataProtection-Keys\key-7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c.xml'.
2026-01-28 17:22:31.726 -03:00 [DBG] Found key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c}.
2026-01-28 17:22:31.732 -03:00 [DBG] Considering key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} with expiration date 2026-04-28 18:20:11Z as default key.
2026-01-28 17:22:31.734 -03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2026-01-28 17:22:31.735 -03:00 [DBG] Decrypting secret element using Windows DPAPI.
2026-01-28 17:22:31.736 -03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2026-01-28 17:22:31.738 -03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2026-01-28 17:22:31.739 -03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2026-01-28 17:22:31.740 -03:00 [DBG] Using key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} as the default key.
2026-01-28 17:22:31.741 -03:00 [DBG] Key ring with default key {7e5fd75b-dac7-44c1-ba43-f0abb7c83c5c} was loaded during application startup.
2026-01-28 17:22:31.744 -03:00 [DBG] Middleware loaded
2026-01-28 17:22:31.745 -03:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16515 B).
2026-01-28 17:22:31.747 -03:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2026-01-28 17:22:31.798 -03:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2026-01-28 17:22:31.799 -03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2026-01-28 17:22:31.801 -03:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2026-01-28 17:22:31.827 -03:00 [INF] Now listening on: https://localhost:7058
2026-01-28 17:22:31.828 -03:00 [INF] Now listening on: http://localhost:5070
2026-01-28 17:22:31.829 -03:00 [DBG] Loaded hosting startup assembly Project_Gon.Api
2026-01-28 17:22:31.829 -03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-01-28 17:22:31.830 -03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-01-28 17:22:31.830 -03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-01-28 17:22:31.833 -03:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2026-01-28 17:22:31.836 -03:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2026-01-28 17:22:31.938 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-28 17:22:31.938 -03:00 [INF] Hosting environment: Development
2026-01-28 17:22:31.939 -03:00 [INF] Content root path: C:\Proyectos\Project_Gon\Project_Gon.Api
2026-01-28 17:22:31.940 -03:00 [DBG] Hosting started
2026-01-28 17:22:39.160 -03:00 [DBG] Connection id "0HNIULBTPDJCR" accepted.
2026-01-28 17:22:39.161 -03:00 [DBG] Connection id "0HNIULBTPDJCR" started.
2026-01-28 17:22:39.186 -03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5070/swagger - null null
2026-01-28 17:22:39.268 -03:00 [DBG] No candidates found for the request path '/swagger'
2026-01-28 17:22:39.269 -03:00 [DBG] Request did not match any endpoints
2026-01-28 17:22:39.274 -03:00 [DBG] Connection id "0HNIULBTPDJCR" completed keep alive response.
2026-01-28 17:22:39.275 -03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5070/swagger - 301 0 null 89.7638ms
2026-01-28 17:22:39.280 -03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5070/swagger/index.html - null null
2026-01-28 17:22:39.283 -03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-01-28 17:22:39.284 -03:00 [DBG] Request did not match any endpoints
2026-01-28 17:22:39.310 -03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-01-28 17:22:39.311 -03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-01-28 17:22:39.316 -03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-01-28 17:22:39.317 -03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-01-28 17:22:39.318 -03:00 [DBG] Connection id "0HNIULBTPDJCR" completed keep alive response.
2026-01-28 17:22:39.318 -03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5070/swagger/index.html - 200 null text/html;charset=utf-8 38.6616ms
2026-01-28 17:22:39.326 -03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5070/swagger/swagger-ui.css - null null
2026-01-28 17:22:39.326 -03:00 [DBG] Connection id "0HNIULBTPDJCS" accepted.
2026-01-28 17:22:39.327 -03:00 [DBG] No candidates found for the request path '/swagger/swagger-ui.css'
2026-01-28 17:22:39.328 -03:00 [DBG] Connection id "0HNIULBTPDJCS" started.
2026-01-28 17:22:39.328 -03:00 [DBG] Connection id "0HNIULBTPDJCT" accepted.
2026-01-28 17:22:39.329 -03:00 [DBG] Request did not match any endpoints
2026-01-28 17:22:39.330 -03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5070/swagger/swagger-ui-bundle.js - null null
2026-01-28 17:22:39.330 -03:00 [DBG] Connection id "0HNIULBTPDJCT" started.
2026-01-28 17:22:39.332 -03:00 [DBG] No candidates found for the request path '/swagger/swagger-ui-bundle.js'
2026-01-28 17:22:39.332 -03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5070/swagger/swagger-ui-standalone-preset.js - null null
2026-01-28 17:22:39.333 -03:00 [DBG] Request did not match any endpoints
2026-01-28 17:22:39.334 -03:00 [DBG] No candidates found for the request path '/swagger/swagger-ui-standalone-preset.js'
2026-01-28 17:22:39.335 -03:00 [DBG] Request did not match any endpoints
2026-01-28 17:22:39.339 -03:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2026-01-28 17:22:39.340 -03:00 [DBG] Connection id "0HNIULBTPDJCR" completed keep alive response.
2026-01-28 17:22:39.341 -03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5070/swagger/swagger-ui.css - 200 152034 text/css 14.6281ms
2026-01-28 17:22:39.342 -03:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2026-01-28 17:22:39.343 -03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5070/_framework/aspnetcore-browser-refresh.js - null null
2026-01-28 17:22:39.345 -03:00 [DBG] Connection id "0HNIULBTPDJCT" completed keep alive response.
2026-01-28 17:22:39.347 -03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5070/swagger/swagger-ui-standalone-preset.js - 200 230280 text/javascript 14.0725ms
2026-01-28 17:22:39.347 -03:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2026-01-28 17:22:39.349 -03:00 [DBG] Connection id "0HNIULBTPDJCR" completed keep alive response.
2026-01-28 17:22:39.350 -03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5070/_framework/aspnetcore-browser-refresh.js - 200 16515 application/javascript; charset=utf-8 6.2465ms
2026-01-28 17:22:39.358 -03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5070/_vs/browserLink - null null
2026-01-28 17:22:39.359 -03:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2026-01-28 17:22:39.361 -03:00 [DBG] Connection id "0HNIULBTPDJCS" completed keep alive response.
2026-01-28 17:22:39.361 -03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5070/swagger/swagger-ui-bundle.js - 200 1456926 text/javascript 31.566ms
2026-01-28 17:22:39.388 -03:00 [DBG] Connection id "0HNIULBTPDJCR" completed keep alive response.
2026-01-28 17:22:39.388 -03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5070/_vs/browserLink - 200 null text/javascript; charset=UTF-8 29.8571ms
2026-01-28 17:22:39.491 -03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5070/swagger/v1/swagger.json - null null
2026-01-28 17:22:39.493 -03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-01-28 17:22:39.493 -03:00 [DBG] Request did not match any endpoints
2026-01-28 17:22:39.502 -03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5070/swagger/favicon-32x32.png - null null
2026-01-28 17:22:39.503 -03:00 [DBG] No candidates found for the request path '/swagger/favicon-32x32.png'
2026-01-28 17:22:39.504 -03:00 [DBG] Request did not match any endpoints
2026-01-28 17:22:39.504 -03:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2026-01-28 17:22:39.505 -03:00 [DBG] Connection id "0HNIULBTPDJCS" completed keep alive response.
2026-01-28 17:22:39.506 -03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5070/swagger/favicon-32x32.png - 200 628 image/png 3.8676ms
2026-01-28 17:22:39.510 -03:00 [DBG] Connection id "0HNIULBTPDJCR" completed keep alive response.
2026-01-28 17:22:39.511 -03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5070/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 19.3954ms
2026-01-28 17:22:40.592 -03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5070/swagger/index.html - null null
2026-01-28 17:22:40.596 -03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2026-01-28 17:22:40.596 -03:00 [DBG] Request did not match any endpoints
2026-01-28 17:22:40.597 -03:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2026-01-28 17:22:40.598 -03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2026-01-28 17:22:40.598 -03:00 [DBG] Response markup was updated to include Browser Link script injection.
2026-01-28 17:22:40.599 -03:00 [DBG] Response markup was updated to include browser refresh script injection.
2026-01-28 17:22:40.599 -03:00 [DBG] Connection id "0HNIULBTPDJCR" completed keep alive response.
2026-01-28 17:22:40.600 -03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5070/swagger/index.html - 200 null text/html;charset=utf-8 8.0001ms
2026-01-28 17:22:40.608 -03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5070/_framework/aspnetcore-browser-refresh.js - null null
2026-01-28 17:22:40.610 -03:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2026-01-28 17:22:40.611 -03:00 [DBG] Connection id "0HNIULBTPDJCR" completed keep alive response.
2026-01-28 17:22:40.611 -03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5070/_framework/aspnetcore-browser-refresh.js - 200 16515 application/javascript; charset=utf-8 3.2244ms
2026-01-28 17:22:40.613 -03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5070/_vs/browserLink - null null
2026-01-28 17:22:40.616 -03:00 [DBG] Connection id "0HNIULBTPDJCR" completed keep alive response.
2026-01-28 17:22:40.617 -03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5070/_vs/browserLink - 200 null text/javascript; charset=UTF-8 4.1896ms
2026-01-28 17:22:40.784 -03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5070/swagger/v1/swagger.json - null null
2026-01-28 17:22:40.786 -03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2026-01-28 17:22:40.788 -03:00 [DBG] Request did not match any endpoints
2026-01-28 17:22:40.807 -03:00 [DBG] Connection id "0HNIULBTPDJCR" completed keep alive response.
2026-01-28 17:22:40.808 -03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5070/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 23.7474ms
2026-01-28 17:24:50.992 -03:00 [DBG] Connection id "0HNIULBTPDJCT" disconnecting.
2026-01-28 17:24:50.992 -03:00 [DBG] Connection id "0HNIULBTPDJCS" disconnecting.
2026-01-28 17:24:50.992 -03:00 [DBG] Connection id "0HNIULBTPDJCR" disconnecting.
2026-01-28 17:24:50.993 -03:00 [DBG] Connection id "0HNIULBTPDJCT" stopped.
2026-01-28 17:24:50.993 -03:00 [DBG] Connection id "0HNIULBTPDJCS" stopped.
2026-01-28 17:24:50.994 -03:00 [DBG] Connection id "0HNIULBTPDJCR" stopped.
2026-01-28 17:24:50.995 -03:00 [DBG] Connection id "0HNIULBTPDJCT" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-01-28 17:24:50.995 -03:00 [DBG] Connection id "0HNIULBTPDJCS" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-01-28 17:24:50.995 -03:00 [DBG] Connection id "0HNIULBTPDJCR" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-01-28 17:25:28.963 -03:00 [DBG] Connection id "0HNIULBTPDJCU" accepted.
2026-01-28 17:25:28.964 -03:00 [DBG] Connection id "0HNIULBTPDJCU" started.
2026-01-28 17:25:28.965 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5070/api/Auth/login - application/json 59
2026-01-28 17:25:28.969 -03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2026-01-28 17:25:28.970 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2026-01-28 17:25:28.971 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 17:25:28.972 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 17:25:28.973 -03:00 [DBG] Https port '7058' loaded from configuration.
2026-01-28 17:25:28.974 -03:00 [DBG] Redirecting to 'https://localhost:7058/api/Auth/login'.
2026-01-28 17:25:28.975 -03:00 [DBG] Connection id "0HNIULBTPDJCU" completed keep alive response.
2026-01-28 17:25:28.976 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5070/api/Auth/login - 307 0 null 10.3267ms
2026-01-28 17:25:28.978 -03:00 [DBG] Connection id "0HNIULBTPDJCU", Request id "0HNIULBTPDJCU:00000001": started reading request body.
2026-01-28 17:25:28.978 -03:00 [DBG] Connection id "0HNIULBTPDJCV" accepted.
2026-01-28 17:25:28.978 -03:00 [DBG] Connection id "0HNIULBTPDJCU", Request id "0HNIULBTPDJCU:00000001": done reading request body.
2026-01-28 17:25:28.979 -03:00 [DBG] Connection id "0HNIULBTPDJCV" started.
2026-01-28 17:25:29.006 -03:00 [DBG] Connection 0HNIULBTPDJCV established using the following protocol: "Tls12"
2026-01-28 17:25:29.015 -03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7058/api/Auth/login - null null
2026-01-28 17:25:29.016 -03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2026-01-28 17:25:29.017 -03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2026-01-28 17:25:29.018 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 17:25:29.019 -03:00 [DBG] The request has an origin header: 'http://localhost:5070'.
2026-01-28 17:25:29.019 -03:00 [INF] CORS policy execution failed.
2026-01-28 17:25:29.019 -03:00 [INF] Request origin http://localhost:5070 does not have permission to access the resource.
2026-01-28 17:25:29.021 -03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7058/api/Auth/login - 204 null null 6.0047ms
2026-01-28 17:26:51.051 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5070/api/Auth/register - application/json 178
2026-01-28 17:26:51.052 -03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/register'
2026-01-28 17:26:51.053 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)' with route pattern 'api/Auth/register' is valid for the request path '/api/Auth/register'
2026-01-28 17:26:51.054 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)'
2026-01-28 17:26:51.055 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 17:26:51.055 -03:00 [DBG] Redirecting to 'https://localhost:7058/api/Auth/register'.
2026-01-28 17:26:51.056 -03:00 [DBG] Connection id "0HNIULBTPDJCU" completed keep alive response.
2026-01-28 17:26:51.056 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5070/api/Auth/register - 307 0 null 5.8146ms
2026-01-28 17:26:51.058 -03:00 [DBG] Connection id "0HNIULBTPDJCU", Request id "0HNIULBTPDJCU:00000002": started reading request body.
2026-01-28 17:26:51.058 -03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7058/api/Auth/register - null null
2026-01-28 17:26:51.059 -03:00 [DBG] Connection id "0HNIULBTPDJCU", Request id "0HNIULBTPDJCU:00000002": done reading request body.
2026-01-28 17:26:51.060 -03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/register'
2026-01-28 17:26:51.061 -03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2026-01-28 17:26:51.061 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 17:26:51.062 -03:00 [DBG] The request has an origin header: 'http://localhost:5070'.
2026-01-28 17:26:51.063 -03:00 [INF] CORS policy execution failed.
2026-01-28 17:26:51.063 -03:00 [INF] Request origin http://localhost:5070 does not have permission to access the resource.
2026-01-28 17:26:51.064 -03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7058/api/Auth/register - 204 null null 5.167ms
2026-01-28 17:28:06.450 -03:00 [DBG] Connection id "0HNIULBTPDJD0" accepted.
2026-01-28 17:28:06.450 -03:00 [DBG] Connection id "0HNIULBTPDJD0" started.
2026-01-28 17:28:06.451 -03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5070/api/empresas - application/json 69
2026-01-28 17:28:06.452 -03:00 [DBG] 1 candidate(s) found for the request path '/api/empresas'
2026-01-28 17:28:06.453 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.EmpresasController.GetAll (Project_Gon.Api)' with route pattern 'api/Empresas' is valid for the request path '/api/empresas'
2026-01-28 17:28:06.453 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.EmpresasController.GetAll (Project_Gon.Api)'
2026-01-28 17:28:06.454 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 17:28:06.454 -03:00 [DBG] Redirecting to 'https://localhost:7058/api/empresas'.
2026-01-28 17:28:06.455 -03:00 [DBG] Connection id "0HNIULBTPDJD0" completed keep alive response.
2026-01-28 17:28:06.455 -03:00 [DBG] Connection id "0HNIULBTPDJD1" accepted.
2026-01-28 17:28:06.455 -03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5070/api/empresas - 307 0 null 4.3144ms
2026-01-28 17:28:06.456 -03:00 [DBG] Connection id "0HNIULBTPDJD1" started.
2026-01-28 17:28:06.458 -03:00 [DBG] Connection id "0HNIULBTPDJD0", Request id "0HNIULBTPDJD0:00000001": started reading request body.
2026-01-28 17:28:06.459 -03:00 [DBG] Connection id "0HNIULBTPDJD0", Request id "0HNIULBTPDJD0:00000001": done reading request body.
2026-01-28 17:28:06.465 -03:00 [DBG] Connection 0HNIULBTPDJD1 established using the following protocol: "Tls12"
2026-01-28 17:28:06.466 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/api/empresas - application/json 69
2026-01-28 17:28:06.467 -03:00 [DBG] 1 candidate(s) found for the request path '/api/empresas'
2026-01-28 17:28:06.468 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.EmpresasController.GetAll (Project_Gon.Api)' with route pattern 'api/Empresas' is valid for the request path '/api/empresas'
2026-01-28 17:28:06.469 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.EmpresasController.GetAll (Project_Gon.Api)'
2026-01-28 17:28:06.469 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 17:28:06.501 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 17:28:06.503 -03:00 [INF] Executing endpoint 'Project_Gon.Api.Controllers.EmpresasController.GetAll (Project_Gon.Api)'
2026-01-28 17:28:06.513 -03:00 [INF] Route matched with {action = "GetAll", controller = "Empresas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Project_Gon.Api.Controllers.EmpresasController (Project_Gon.Api).
2026-01-28 17:28:06.515 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-01-28 17:28:06.516 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-01-28 17:28:06.517 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-01-28 17:28:06.518 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-01-28 17:28:06.518 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-01-28 17:28:06.520 -03:00 [DBG] Executing controller factory for controller Project_Gon.Api.Controllers.EmpresasController (Project_Gon.Api)
2026-01-28 17:28:06.581 -03:00 [DBG] Executed controller factory for controller Project_Gon.Api.Controllers.EmpresasController (Project_Gon.Api)
2026-01-28 17:28:06.596 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 17:28:06.615 -03:00 [DBG] Compiling query expression: 
'DbSet<Empresa>()
    .AsNoTracking()'
2026-01-28 17:28:06.730 -03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<Empresa>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Empresa.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Empresa.Activo (bool) Required, 1], [Property: Empresa.Ciudad (string), 2], [Property: Empresa.CreatedAt (DateTime) Required, 3], [Property: Empresa.Direccion (string), 4], [Property: Empresa.Nombre (string) Required MaxLength(255), 5], [Property: Empresa.Region (string), 6], [Property: Empresa.Rut (string), 7], [Property: Empresa.UpdatedAt (DateTime?), 8] }
        SELECT e.Id, e.Activo, e.Ciudad, e.CreatedAt, e.Direccion, e.Nombre, e.Region, e.Rut, e.UpdatedAt
        FROM Empresas AS e) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Empresa.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Empresa.Activo (bool) Required, 1], [Property: Empresa.Ciudad (string), 2], [Property: Empresa.CreatedAt (DateTime) Required, 3], [Property: Empresa.Direccion (string), 4], [Property: Empresa.Nombre (string) Required MaxLength(255), 5], [Property: Empresa.Region (string), 6], [Property: Empresa.Rut (string), 7], [Property: Empresa.UpdatedAt (DateTime?), 8] }
        SELECT e.Id, e.Activo, e.Ciudad, e.CreatedAt, e.Direccion, e.Nombre, e.Region, e.Rut, e.UpdatedAt
        FROM Empresas AS e, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Empresa entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            Empresa instance1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(Empresa);
            (object)dataReader.GetInt32(0) != null ? 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: Empresa | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Empresa")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: Empresa | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Empresa")]: 
                        {
                            return 
                            {
                                Empresa instance;
                                instance = new Empresa();
                                instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                instance.<Activo>k__BackingField = dataReader.GetBoolean(1);
                                instance.<Ciudad>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(3);
                                instance.<Direccion>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                instance.<Nombre>k__BackingField = dataReader.GetString(5);
                                instance.<Region>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                instance.<Rut>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(8) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(8);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: NoTracking, 
                                    structuralType: [LIFTABLE Constant: EntityType: Empresa | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Empresa")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(Empresa)
                }
                ;
                return instance1;
            } : 
            {
                object[] keyValues1;
                keyValues1 = new object[]{ (object)dataReader.GetInt32(0) };
                return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                    entityType: [LIFTABLE Constant: EntityType: Empresa | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Empresa")], 
                    properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: Empresa.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Empresa").FindPrimaryKey().Properties], 
                    keyValues: keyValues1);
            };
            return instance1;
        };
        return entity;
    }, 
    contextType: Project_Gon.Infrastructure.Data.AppDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2026-01-28 17:28:06.749 -03:00 [DBG] Creating DbConnection.
2026-01-28 17:28:06.750 -03:00 [DBG] Created DbConnection. (0ms).
2026-01-28 17:28:06.751 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:28:06.888 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:28:06.889 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 17:28:06.889 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 17:28:06.890 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 17:28:06.891 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
2026-01-28 17:28:06.895 -03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
2026-01-28 17:28:06.905 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:28:06.906 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 8ms reading results.
2026-01-28 17:28:06.908 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:28:06.909 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 17:28:06.919 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-01-28 17:28:06.922 -03:00 [DBG] No information found on request to perform content negotiation.
2026-01-28 17:28:06.922 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-01-28 17:28:06.923 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-01-28 17:28:06.924 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-01-28 17:28:06.924 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Project_Gon.Core.DTOs.Empresa.EmpresaDto, Project_Gon.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-28 17:28:06.934 -03:00 [INF] Executed action Project_Gon.Api.Controllers.EmpresasController.GetAll (Project_Gon.Api) in 413.4244ms
2026-01-28 17:28:06.935 -03:00 [INF] Executed endpoint 'Project_Gon.Api.Controllers.EmpresasController.GetAll (Project_Gon.Api)'
2026-01-28 17:28:06.937 -03:00 [INF] HTTP GET /api/empresas responded 200 in 465.6305 ms
2026-01-28 17:28:06.939 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 17:28:06.941 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:28:06.942 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (1ms).
2026-01-28 17:28:06.943 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/api/empresas - 200 null application/json; charset=utf-8 476.9048ms
2026-01-28 17:28:06.945 -03:00 [DBG] Connection id "0HNIULBTPDJD1", Request id "0HNIULBTPDJD1:00000001": started reading request body.
2026-01-28 17:28:06.946 -03:00 [DBG] Connection id "0HNIULBTPDJD1", Request id "0HNIULBTPDJD1:00000001": done reading request body.
2026-01-28 17:28:18.679 -03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5070/api/sucursales - application/json 69
2026-01-28 17:28:18.680 -03:00 [DBG] 1 candidate(s) found for the request path '/api/sucursales'
2026-01-28 17:28:18.681 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.SucursalesController.GetAll (Project_Gon.Api)' with route pattern 'api/Sucursales' is valid for the request path '/api/sucursales'
2026-01-28 17:28:18.682 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.SucursalesController.GetAll (Project_Gon.Api)'
2026-01-28 17:28:18.682 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 17:28:18.683 -03:00 [DBG] Redirecting to 'https://localhost:7058/api/sucursales'.
2026-01-28 17:28:18.683 -03:00 [DBG] Connection id "0HNIULBTPDJD0" completed keep alive response.
2026-01-28 17:28:18.684 -03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5070/api/sucursales - 307 0 null 4.7193ms
2026-01-28 17:28:18.684 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7058/api/sucursales - application/json 69
2026-01-28 17:28:18.685 -03:00 [DBG] Connection id "0HNIULBTPDJD0", Request id "0HNIULBTPDJD0:00000002": started reading request body.
2026-01-28 17:28:18.687 -03:00 [DBG] 1 candidate(s) found for the request path '/api/sucursales'
2026-01-28 17:28:18.687 -03:00 [DBG] Connection id "0HNIULBTPDJD0", Request id "0HNIULBTPDJD0:00000002": done reading request body.
2026-01-28 17:28:18.688 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.SucursalesController.GetAll (Project_Gon.Api)' with route pattern 'api/Sucursales' is valid for the request path '/api/sucursales'
2026-01-28 17:28:18.689 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.SucursalesController.GetAll (Project_Gon.Api)'
2026-01-28 17:28:18.690 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 17:28:18.691 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 17:28:18.692 -03:00 [INF] Executing endpoint 'Project_Gon.Api.Controllers.SucursalesController.GetAll (Project_Gon.Api)'
2026-01-28 17:28:18.695 -03:00 [INF] Route matched with {action = "GetAll", controller = "Sucursales"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Project_Gon.Api.Controllers.SucursalesController (Project_Gon.Api).
2026-01-28 17:28:18.696 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-01-28 17:28:18.696 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-01-28 17:28:18.697 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-01-28 17:28:18.698 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-01-28 17:28:18.699 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-01-28 17:28:18.700 -03:00 [DBG] Executing controller factory for controller Project_Gon.Api.Controllers.SucursalesController (Project_Gon.Api)
2026-01-28 17:28:18.702 -03:00 [DBG] Executed controller factory for controller Project_Gon.Api.Controllers.SucursalesController (Project_Gon.Api)
2026-01-28 17:28:18.732 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 17:28:18.735 -03:00 [DBG] Compiling query expression: 
'DbSet<Sucursal>()
    .AsNoTracking()'
2026-01-28 17:28:18.739 -03:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<Sucursal>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Sucursal.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Sucursal.Activo (bool) Required, 1], [Property: Sucursal.Ciudad (string), 2], [Property: Sucursal.CreatedAt (DateTime) Required, 3], [Property: Sucursal.Direccion (string), 4], [Property: Sucursal.EmpresaId (int) Required FK Index, 5], [Property: Sucursal.Nombre (string) Required MaxLength(255), 6], [Property: Sucursal.Region (string), 7], [Property: Sucursal.Telefono (string), 8], [Property: Sucursal.UpdatedAt (DateTime?), 9] }
        SELECT s.Id, s.Activo, s.Ciudad, s.CreatedAt, s.Direccion, s.EmpresaId, s.Nombre, s.Region, s.Telefono, s.UpdatedAt
        FROM Sucursales AS s) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Sucursal.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Sucursal.Activo (bool) Required, 1], [Property: Sucursal.Ciudad (string), 2], [Property: Sucursal.CreatedAt (DateTime) Required, 3], [Property: Sucursal.Direccion (string), 4], [Property: Sucursal.EmpresaId (int) Required FK Index, 5], [Property: Sucursal.Nombre (string) Required MaxLength(255), 6], [Property: Sucursal.Region (string), 7], [Property: Sucursal.Telefono (string), 8], [Property: Sucursal.UpdatedAt (DateTime?), 9] }
        SELECT s.Id, s.Activo, s.Ciudad, s.CreatedAt, s.Direccion, s.EmpresaId, s.Nombre, s.Region, s.Telefono, s.UpdatedAt
        FROM Sucursales AS s, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Sucursal entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            Sucursal instance1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(Sucursal);
            (object)dataReader.GetInt32(0) != null ? 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: Sucursal | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Sucursal")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: Sucursal | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Sucursal")]: 
                        {
                            return 
                            {
                                Sucursal instance;
                                instance = new Sucursal();
                                instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                instance.<Activo>k__BackingField = dataReader.GetBoolean(1);
                                instance.<Ciudad>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(3);
                                instance.<Direccion>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                instance.<EmpresaId>k__BackingField = dataReader.GetInt32(5);
                                instance.<Nombre>k__BackingField = dataReader.GetString(6);
                                instance.<Region>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                instance.<Telefono>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(9) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(9);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: NoTracking, 
                                    structuralType: [LIFTABLE Constant: EntityType: Sucursal | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Sucursal")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(Sucursal)
                }
                ;
                return instance1;
            } : 
            {
                object[] keyValues1;
                keyValues1 = new object[]{ (object)dataReader.GetInt32(0) };
                return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                    entityType: [LIFTABLE Constant: EntityType: Sucursal | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Sucursal")], 
                    properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: Sucursal.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Sucursal").FindPrimaryKey().Properties], 
                    keyValues: keyValues1);
            };
            return instance1;
        };
        return entity;
    }, 
    contextType: Project_Gon.Infrastructure.Data.AppDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2026-01-28 17:28:18.745 -03:00 [DBG] Creating DbConnection.
2026-01-28 17:28:18.746 -03:00 [DBG] Created DbConnection. (0ms).
2026-01-28 17:28:18.746 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:28:18.747 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:28:18.748 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 17:28:18.748 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 17:28:18.749 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 17:28:18.749 -03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Activo", s."Ciudad", s."CreatedAt", s."Direccion", s."EmpresaId", s."Nombre", s."Region", s."Telefono", s."UpdatedAt"
FROM "Sucursales" AS s
2026-01-28 17:28:18.752 -03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Activo", s."Ciudad", s."CreatedAt", s."Direccion", s."EmpresaId", s."Nombre", s."Region", s."Telefono", s."UpdatedAt"
FROM "Sucursales" AS s
2026-01-28 17:28:18.754 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:28:18.754 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-01-28 17:28:18.755 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:28:18.756 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 17:28:18.765 -03:00 [DBG] Compiling query expression: 
'DbSet<Empresa>()
    .FirstOrDefault(e => EF.Property<int>(e, "Id") == __p_0)'
2026-01-28 17:28:18.803 -03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Empresa>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Empresa>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Empresa.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Empresa.Activo (bool) Required, 1], [Property: Empresa.Ciudad (string), 2], [Property: Empresa.CreatedAt (DateTime) Required, 3], [Property: Empresa.Direccion (string), 4], [Property: Empresa.Nombre (string) Required MaxLength(255), 5], [Property: Empresa.Region (string), 6], [Property: Empresa.Rut (string), 7], [Property: Empresa.UpdatedAt (DateTime?), 8] }
            SELECT TOP(1) e.Id, e.Activo, e.Ciudad, e.CreatedAt, e.Direccion, e.Nombre, e.Region, e.Rut, e.UpdatedAt
            FROM Empresas AS e
            WHERE e.Id == @__p_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Empresa.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Empresa.Activo (bool) Required, 1], [Property: Empresa.Ciudad (string), 2], [Property: Empresa.CreatedAt (DateTime) Required, 3], [Property: Empresa.Direccion (string), 4], [Property: Empresa.Nombre (string) Required MaxLength(255), 5], [Property: Empresa.Region (string), 6], [Property: Empresa.Rut (string), 7], [Property: Empresa.UpdatedAt (DateTime?), 8] }
            SELECT TOP(1) e.Id, e.Activo, e.Ciudad, e.CreatedAt, e.Direccion, e.Nombre, e.Region, e.Rut, e.UpdatedAt
            FROM Empresas AS e
            WHERE e.Id == @__p_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Empresa entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Empresa instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Empresa);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Empresa.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Empresa").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (Empresa)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Empresa | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Empresa")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Empresa | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Empresa")]: 
                            {
                                return 
                                {
                                    Empresa instance;
                                    instance = new Empresa();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Activo>k__BackingField = dataReader.GetBoolean(1);
                                    instance.<Ciudad>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(3);
                                    instance.<Direccion>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<Nombre>k__BackingField = dataReader.GetString(5);
                                    instance.<Region>k__BackingField = dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6);
                                    instance.<Rut>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(8) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(8);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Empresa | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Empresa")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Empresa)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: Project_Gon.Infrastructure.Data.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2026-01-28 17:28:18.815 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:28:18.816 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:28:18.816 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 17:28:18.817 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 17:28:18.819 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2026-01-28 17:28:18.821 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 17:28:18.827 -03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 17:28:18.850 -03:00 [DBG] Context 'AppDbContext' started tracking 'Empresa' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 17:28:18.869 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:28:18.869 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 40ms reading results.
2026-01-28 17:28:18.870 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:28:18.871 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 17:28:18.874 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:28:18.875 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:28:18.875 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 17:28:18.876 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 17:28:18.876 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 17:28:18.877 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 17:28:18.879 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 17:28:18.880 -03:00 [DBG] Context 'AppDbContext' started tracking 'Empresa' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 17:28:18.881 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:28:18.881 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-01-28 17:28:18.882 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:28:18.883 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 17:28:18.887 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-01-28 17:28:18.889 -03:00 [DBG] No information found on request to perform content negotiation.
2026-01-28 17:28:18.889 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-01-28 17:28:18.890 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-01-28 17:28:18.890 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-01-28 17:28:18.891 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Project_Gon.Core.DTOs.Sucursal.SucursalDto, Project_Gon.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-28 17:28:18.893 -03:00 [INF] Executed action Project_Gon.Api.Controllers.SucursalesController.GetAll (Project_Gon.Api) in 193.2996ms
2026-01-28 17:28:18.894 -03:00 [INF] Executed endpoint 'Project_Gon.Api.Controllers.SucursalesController.GetAll (Project_Gon.Api)'
2026-01-28 17:28:18.894 -03:00 [INF] HTTP GET /api/sucursales responded 200 in 204.1358 ms
2026-01-28 17:28:18.895 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 17:28:18.896 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:28:18.897 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 17:28:18.897 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7058/api/sucursales - 200 null application/json; charset=utf-8 213.3435ms
2026-01-28 17:28:18.899 -03:00 [DBG] Connection id "0HNIULBTPDJD1", Request id "0HNIULBTPDJD1:00000003": started reading request body.
2026-01-28 17:28:18.900 -03:00 [DBG] Connection id "0HNIULBTPDJD1", Request id "0HNIULBTPDJD1:00000003": done reading request body.
2026-01-28 17:28:46.867 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5070/api/auth/register - application/json 178
2026-01-28 17:28:46.868 -03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/register'
2026-01-28 17:28:46.869 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)' with route pattern 'api/Auth/register' is valid for the request path '/api/auth/register'
2026-01-28 17:28:46.870 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)'
2026-01-28 17:28:46.870 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 17:28:46.871 -03:00 [DBG] Redirecting to 'https://localhost:7058/api/auth/register'.
2026-01-28 17:28:46.871 -03:00 [DBG] Connection id "0HNIULBTPDJD0" completed keep alive response.
2026-01-28 17:28:46.872 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5070/api/auth/register - 307 0 null 5.0884ms
2026-01-28 17:28:46.872 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/auth/register - application/json 178
2026-01-28 17:28:46.873 -03:00 [DBG] Connection id "0HNIULBTPDJD0", Request id "0HNIULBTPDJD0:00000003": started reading request body.
2026-01-28 17:28:46.874 -03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/register'
2026-01-28 17:28:46.875 -03:00 [DBG] Connection id "0HNIULBTPDJD0", Request id "0HNIULBTPDJD0:00000003": done reading request body.
2026-01-28 17:28:46.875 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)' with route pattern 'api/Auth/register' is valid for the request path '/api/auth/register'
2026-01-28 17:28:46.877 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)'
2026-01-28 17:28:46.877 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 17:28:46.879 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 17:28:46.880 -03:00 [INF] Executing endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)'
2026-01-28 17:28:46.885 -03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(Project_Gon.Core.DTOs.Auth.RegisterDto) on controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api).
2026-01-28 17:28:46.886 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-01-28 17:28:46.887 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-01-28 17:28:46.888 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-01-28 17:28:46.889 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-01-28 17:28:46.889 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-01-28 17:28:46.890 -03:00 [DBG] Executing controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-01-28 17:28:46.892 -03:00 [DBG] Executed controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-01-28 17:28:46.906 -03:00 [DBG] Attempting to bind parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto' ...
2026-01-28 17:28:46.907 -03:00 [DBG] Attempting to bind parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto' using the name '' in request data ...
2026-01-28 17:28:46.908 -03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2026-01-28 17:28:46.913 -03:00 [DBG] Connection id "0HNIULBTPDJD1", Request id "0HNIULBTPDJD1:00000005": started reading request body.
2026-01-28 17:28:46.914 -03:00 [DBG] Connection id "0HNIULBTPDJD1", Request id "0HNIULBTPDJD1:00000005": done reading request body.
2026-01-28 17:28:46.920 -03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Project_Gon.Core.DTOs.Auth.RegisterDto'
2026-01-28 17:28:46.920 -03:00 [DBG] Done attempting to bind parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto'.
2026-01-28 17:28:46.921 -03:00 [DBG] Done attempting to bind parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto'.
2026-01-28 17:28:46.921 -03:00 [DBG] Attempting to validate the bound parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto' ...
2026-01-28 17:28:46.935 -03:00 [DBG] Done attempting to validate the bound parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto'.
2026-01-28 17:28:46.939 -03:00 [DBG] [CLEAN_RUT] Original: 12345678-9 -> Limpio: 12345678-9
2026-01-28 17:28:46.939 -03:00 [INF] [REGISTER] RUT limpio guardado: 12345678-9
2026-01-28 17:28:46.940 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 17:28:46.942 -03:00 [DBG] Creating DbConnection.
2026-01-28 17:28:46.943 -03:00 [DBG] Created DbConnection. (0ms).
2026-01-28 17:28:46.943 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:28:46.944 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:28:46.944 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 17:28:46.945 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 17:28:46.945 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 17:28:46.946 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 17:28:46.948 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 17:28:46.949 -03:00 [DBG] Context 'AppDbContext' started tracking 'Empresa' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 17:28:46.950 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:28:46.950 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-01-28 17:28:46.951 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:28:46.952 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 17:28:46.953 -03:00 [DBG] Compiling query expression: 
'DbSet<Sucursal>()
    .FirstOrDefault(e => EF.Property<int>(e, "Id") == __p_0)'
2026-01-28 17:28:46.957 -03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Sucursal>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Sucursal>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Sucursal.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Sucursal.Activo (bool) Required, 1], [Property: Sucursal.Ciudad (string), 2], [Property: Sucursal.CreatedAt (DateTime) Required, 3], [Property: Sucursal.Direccion (string), 4], [Property: Sucursal.EmpresaId (int) Required FK Index, 5], [Property: Sucursal.Nombre (string) Required MaxLength(255), 6], [Property: Sucursal.Region (string), 7], [Property: Sucursal.Telefono (string), 8], [Property: Sucursal.UpdatedAt (DateTime?), 9] }
            SELECT TOP(1) s.Id, s.Activo, s.Ciudad, s.CreatedAt, s.Direccion, s.EmpresaId, s.Nombre, s.Region, s.Telefono, s.UpdatedAt
            FROM Sucursales AS s
            WHERE s.Id == @__p_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Sucursal.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Sucursal.Activo (bool) Required, 1], [Property: Sucursal.Ciudad (string), 2], [Property: Sucursal.CreatedAt (DateTime) Required, 3], [Property: Sucursal.Direccion (string), 4], [Property: Sucursal.EmpresaId (int) Required FK Index, 5], [Property: Sucursal.Nombre (string) Required MaxLength(255), 6], [Property: Sucursal.Region (string), 7], [Property: Sucursal.Telefono (string), 8], [Property: Sucursal.UpdatedAt (DateTime?), 9] }
            SELECT TOP(1) s.Id, s.Activo, s.Ciudad, s.CreatedAt, s.Direccion, s.EmpresaId, s.Nombre, s.Region, s.Telefono, s.UpdatedAt
            FROM Sucursales AS s
            WHERE s.Id == @__p_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Sucursal entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Sucursal instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Sucursal);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Sucursal.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Sucursal").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (Sucursal)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Sucursal | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Sucursal")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Sucursal | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Sucursal")]: 
                            {
                                return 
                                {
                                    Sucursal instance;
                                    instance = new Sucursal();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Activo>k__BackingField = dataReader.GetBoolean(1);
                                    instance.<Ciudad>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(3);
                                    instance.<Direccion>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<EmpresaId>k__BackingField = dataReader.GetInt32(5);
                                    instance.<Nombre>k__BackingField = dataReader.GetString(6);
                                    instance.<Region>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<Telefono>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(9) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(9);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Sucursal | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Sucursal")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Sucursal)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: Project_Gon.Infrastructure.Data.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2026-01-28 17:28:46.964 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:28:46.964 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:28:46.965 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 17:28:46.965 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 17:28:46.966 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 17:28:46.966 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Activo", s."Ciudad", s."CreatedAt", s."Direccion", s."EmpresaId", s."Nombre", s."Region", s."Telefono", s."UpdatedAt"
FROM "Sucursales" AS s
WHERE s."Id" = @__p_0
LIMIT 1
2026-01-28 17:28:46.968 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Activo", s."Ciudad", s."CreatedAt", s."Direccion", s."EmpresaId", s."Nombre", s."Region", s."Telefono", s."UpdatedAt"
FROM "Sucursales" AS s
WHERE s."Id" = @__p_0
LIMIT 1
2026-01-28 17:28:46.969 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:28:46.970 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-01-28 17:28:46.971 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:28:46.971 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 17:28:46.975 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-01-28 17:28:46.976 -03:00 [DBG] No information found on request to perform content negotiation.
2026-01-28 17:28:46.977 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-01-28 17:28:46.977 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-01-28 17:28:46.978 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2026-01-28 17:28:46.978 -03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2026-01-28 17:28:46.979 -03:00 [INF] Executed action Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api) in 89.0443ms
2026-01-28 17:28:46.980 -03:00 [INF] Executed endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)'
2026-01-28 17:28:46.980 -03:00 [INF] HTTP POST /api/auth/register responded 400 in 102.4846 ms
2026-01-28 17:28:46.981 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 17:28:46.982 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:28:46.982 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 17:28:46.983 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/auth/register - 400 null text/plain; charset=utf-8 111.2083ms
2026-01-28 17:28:55.103 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5070/api/auth/register - application/json 178
2026-01-28 17:28:55.105 -03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/register'
2026-01-28 17:28:55.105 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)' with route pattern 'api/Auth/register' is valid for the request path '/api/auth/register'
2026-01-28 17:28:55.106 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)'
2026-01-28 17:28:55.107 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 17:28:55.107 -03:00 [DBG] Redirecting to 'https://localhost:7058/api/auth/register'.
2026-01-28 17:28:55.108 -03:00 [DBG] Connection id "0HNIULBTPDJD0" completed keep alive response.
2026-01-28 17:28:55.108 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/auth/register - application/json 178
2026-01-28 17:28:55.108 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5070/api/auth/register - 307 0 null 4.9863ms
2026-01-28 17:28:55.109 -03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/register'
2026-01-28 17:28:55.111 -03:00 [DBG] Connection id "0HNIULBTPDJD0", Request id "0HNIULBTPDJD0:00000004": started reading request body.
2026-01-28 17:28:55.111 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)' with route pattern 'api/Auth/register' is valid for the request path '/api/auth/register'
2026-01-28 17:28:55.112 -03:00 [DBG] Connection id "0HNIULBTPDJD0", Request id "0HNIULBTPDJD0:00000004": done reading request body.
2026-01-28 17:28:55.113 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)'
2026-01-28 17:28:55.114 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 17:28:55.114 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 17:28:55.115 -03:00 [INF] Executing endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)'
2026-01-28 17:28:55.115 -03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(Project_Gon.Core.DTOs.Auth.RegisterDto) on controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api).
2026-01-28 17:28:55.116 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-01-28 17:28:55.117 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-01-28 17:28:55.118 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-01-28 17:28:55.119 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-01-28 17:28:55.119 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-01-28 17:28:55.120 -03:00 [DBG] Executing controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-01-28 17:28:55.121 -03:00 [DBG] Executed controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-01-28 17:28:55.122 -03:00 [DBG] Attempting to bind parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto' ...
2026-01-28 17:28:55.123 -03:00 [DBG] Attempting to bind parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto' using the name '' in request data ...
2026-01-28 17:28:55.124 -03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2026-01-28 17:28:55.124 -03:00 [DBG] Connection id "0HNIULBTPDJD1", Request id "0HNIULBTPDJD1:00000007": started reading request body.
2026-01-28 17:28:55.125 -03:00 [DBG] Connection id "0HNIULBTPDJD1", Request id "0HNIULBTPDJD1:00000007": done reading request body.
2026-01-28 17:28:55.125 -03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Project_Gon.Core.DTOs.Auth.RegisterDto'
2026-01-28 17:28:55.126 -03:00 [DBG] Done attempting to bind parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto'.
2026-01-28 17:28:55.126 -03:00 [DBG] Done attempting to bind parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto'.
2026-01-28 17:28:55.127 -03:00 [DBG] Attempting to validate the bound parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto' ...
2026-01-28 17:28:55.128 -03:00 [DBG] Done attempting to validate the bound parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto'.
2026-01-28 17:28:55.129 -03:00 [DBG] [CLEAN_RUT] Original: 12345678-9 -> Limpio: 12345678-9
2026-01-28 17:28:55.129 -03:00 [INF] [REGISTER] RUT limpio guardado: 12345678-9
2026-01-28 17:28:55.130 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 17:28:55.131 -03:00 [DBG] Creating DbConnection.
2026-01-28 17:28:55.132 -03:00 [DBG] Created DbConnection. (0ms).
2026-01-28 17:28:55.132 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:28:55.133 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:28:55.133 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 17:28:55.134 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 17:28:55.135 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 17:28:55.135 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 17:28:55.137 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 17:28:55.138 -03:00 [DBG] Context 'AppDbContext' started tracking 'Empresa' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 17:28:55.139 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:28:55.140 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-01-28 17:28:55.140 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:28:55.141 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 17:28:55.142 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:28:55.142 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:28:55.143 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 17:28:55.143 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 17:28:55.144 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 17:28:55.145 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Activo", s."Ciudad", s."CreatedAt", s."Direccion", s."EmpresaId", s."Nombre", s."Region", s."Telefono", s."UpdatedAt"
FROM "Sucursales" AS s
WHERE s."Id" = @__p_0
LIMIT 1
2026-01-28 17:28:55.146 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Activo", s."Ciudad", s."CreatedAt", s."Direccion", s."EmpresaId", s."Nombre", s."Region", s."Telefono", s."UpdatedAt"
FROM "Sucursales" AS s
WHERE s."Id" = @__p_0
LIMIT 1
2026-01-28 17:28:55.147 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:28:55.148 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-01-28 17:28:55.148 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:28:55.149 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 17:28:55.150 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-01-28 17:28:55.151 -03:00 [DBG] No information found on request to perform content negotiation.
2026-01-28 17:28:55.151 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-01-28 17:28:55.152 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-01-28 17:28:55.152 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2026-01-28 17:28:55.153 -03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2026-01-28 17:28:55.154 -03:00 [INF] Executed action Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api) in 33.3441ms
2026-01-28 17:28:55.154 -03:00 [INF] Executed endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)'
2026-01-28 17:28:55.155 -03:00 [INF] HTTP POST /api/auth/register responded 400 in 40.4054 ms
2026-01-28 17:28:55.155 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 17:28:55.156 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:28:55.157 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 17:28:55.157 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/auth/register - 400 null text/plain; charset=utf-8 49.2025ms
2026-01-28 17:29:02.032 -03:00 [DBG] Connection id "0HNIULBTPDJCU" disconnecting.
2026-01-28 17:29:02.033 -03:00 [DBG] Connection id "0HNIULBTPDJCU" stopped.
2026-01-28 17:29:02.034 -03:00 [DBG] Connection id "0HNIULBTPDJCU" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-01-28 17:29:03.047 -03:00 [DBG] Connection id "0HNIULBTPDJCV" is closing.
2026-01-28 17:29:03.048 -03:00 [DBG] Connection id "0HNIULBTPDJCV" is closed. The last processed stream ID was 3.
2026-01-28 17:29:03.049 -03:00 [DBG] Connection id "0HNIULBTPDJCV" received FIN.
2026-01-28 17:29:03.050 -03:00 [DBG] Connection id "0HNIULBTPDJCV" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-01-28 17:29:03.085 -03:00 [DBG] The connection queue processing loop for 0HNIULBTPDJCV completed.
2026-01-28 17:29:03.087 -03:00 [DBG] Connection id "0HNIULBTPDJCV" stopped.
2026-01-28 17:29:30.676 -03:00 [DBG] Connection id "0HNIULBTPDJD2" accepted.
2026-01-28 17:29:30.677 -03:00 [DBG] Connection id "0HNIULBTPDJD2" started.
2026-01-28 17:29:30.678 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5070/api/Auth/register - application/json 178
2026-01-28 17:29:30.679 -03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/register'
2026-01-28 17:29:30.682 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)' with route pattern 'api/Auth/register' is valid for the request path '/api/Auth/register'
2026-01-28 17:29:30.684 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)'
2026-01-28 17:29:30.684 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 17:29:30.685 -03:00 [DBG] Redirecting to 'https://localhost:7058/api/Auth/register'.
2026-01-28 17:29:30.685 -03:00 [DBG] Connection id "0HNIULBTPDJD2" completed keep alive response.
2026-01-28 17:29:30.686 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5070/api/Auth/register - 307 0 null 8.3325ms
2026-01-28 17:29:30.688 -03:00 [DBG] Connection id "0HNIULBTPDJD3" accepted.
2026-01-28 17:29:30.688 -03:00 [DBG] Connection id "0HNIULBTPDJD2", Request id "0HNIULBTPDJD2:00000001": started reading request body.
2026-01-28 17:29:30.688 -03:00 [DBG] Connection id "0HNIULBTPDJD3" started.
2026-01-28 17:29:30.689 -03:00 [DBG] Connection id "0HNIULBTPDJD2", Request id "0HNIULBTPDJD2:00000001": done reading request body.
2026-01-28 17:29:30.690 -03:00 [DBG] Connection 0HNIULBTPDJD3 established using the following protocol: "Tls12"
2026-01-28 17:29:30.691 -03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7058/api/Auth/register - null null
2026-01-28 17:29:30.693 -03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/register'
2026-01-28 17:29:30.693 -03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2026-01-28 17:29:30.694 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 17:29:30.694 -03:00 [DBG] The request has an origin header: 'http://localhost:5070'.
2026-01-28 17:29:30.695 -03:00 [INF] CORS policy execution failed.
2026-01-28 17:29:30.695 -03:00 [INF] Request origin http://localhost:5070 does not have permission to access the resource.
2026-01-28 17:29:30.696 -03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7058/api/Auth/register - 204 null null 4.2483ms
2026-01-28 17:29:41.145 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5070/api/Auth/register - application/json 178
2026-01-28 17:29:41.147 -03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/register'
2026-01-28 17:29:41.147 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)' with route pattern 'api/Auth/register' is valid for the request path '/api/Auth/register'
2026-01-28 17:29:41.148 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)'
2026-01-28 17:29:41.149 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 17:29:41.149 -03:00 [DBG] Redirecting to 'https://localhost:7058/api/Auth/register'.
2026-01-28 17:29:41.150 -03:00 [DBG] Connection id "0HNIULBTPDJD2" completed keep alive response.
2026-01-28 17:29:41.150 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5070/api/Auth/register - 307 0 null 4.9902ms
2026-01-28 17:29:41.151 -03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7058/api/Auth/register - null null
2026-01-28 17:29:41.152 -03:00 [DBG] Connection id "0HNIULBTPDJD2", Request id "0HNIULBTPDJD2:00000002": started reading request body.
2026-01-28 17:29:41.153 -03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/register'
2026-01-28 17:29:41.154 -03:00 [DBG] Connection id "0HNIULBTPDJD2", Request id "0HNIULBTPDJD2:00000002": done reading request body.
2026-01-28 17:29:41.155 -03:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2026-01-28 17:29:41.156 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 17:29:41.156 -03:00 [DBG] The request has an origin header: 'http://localhost:5070'.
2026-01-28 17:29:41.157 -03:00 [INF] CORS policy execution failed.
2026-01-28 17:29:41.157 -03:00 [INF] Request origin http://localhost:5070 does not have permission to access the resource.
2026-01-28 17:29:41.157 -03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7058/api/Auth/register - 204 null null 6.2008ms
2026-01-28 17:29:52.206 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5070/api/auth/register - application/json 178
2026-01-28 17:29:52.217 -03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/register'
2026-01-28 17:29:52.218 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)' with route pattern 'api/Auth/register' is valid for the request path '/api/auth/register'
2026-01-28 17:29:52.219 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)'
2026-01-28 17:29:52.220 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 17:29:52.221 -03:00 [DBG] Redirecting to 'https://localhost:7058/api/auth/register'.
2026-01-28 17:29:52.222 -03:00 [DBG] Connection id "0HNIULBTPDJD0" completed keep alive response.
2026-01-28 17:29:52.223 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5070/api/auth/register - 307 0 null 17.1389ms
2026-01-28 17:29:52.225 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/auth/register - application/json 178
2026-01-28 17:29:52.232 -03:00 [DBG] Connection id "0HNIULBTPDJD0", Request id "0HNIULBTPDJD0:00000005": started reading request body.
2026-01-28 17:29:52.233 -03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/register'
2026-01-28 17:29:52.234 -03:00 [DBG] Connection id "0HNIULBTPDJD0", Request id "0HNIULBTPDJD0:00000005": done reading request body.
2026-01-28 17:29:52.235 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)' with route pattern 'api/Auth/register' is valid for the request path '/api/auth/register'
2026-01-28 17:29:52.236 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)'
2026-01-28 17:29:52.237 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 17:29:52.237 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 17:29:52.238 -03:00 [INF] Executing endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)'
2026-01-28 17:29:52.238 -03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(Project_Gon.Core.DTOs.Auth.RegisterDto) on controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api).
2026-01-28 17:29:52.239 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-01-28 17:29:52.240 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-01-28 17:29:52.241 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-01-28 17:29:52.242 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-01-28 17:29:52.242 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-01-28 17:29:52.243 -03:00 [DBG] Executing controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-01-28 17:29:52.244 -03:00 [DBG] Executed controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-01-28 17:29:52.245 -03:00 [DBG] Attempting to bind parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto' ...
2026-01-28 17:29:52.246 -03:00 [DBG] Attempting to bind parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto' using the name '' in request data ...
2026-01-28 17:29:52.247 -03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2026-01-28 17:29:52.248 -03:00 [DBG] Connection id "0HNIULBTPDJD1", Request id "0HNIULBTPDJD1:00000009": started reading request body.
2026-01-28 17:29:52.248 -03:00 [DBG] Connection id "0HNIULBTPDJD1", Request id "0HNIULBTPDJD1:00000009": done reading request body.
2026-01-28 17:29:52.249 -03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Project_Gon.Core.DTOs.Auth.RegisterDto'
2026-01-28 17:29:52.249 -03:00 [DBG] Done attempting to bind parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto'.
2026-01-28 17:29:52.250 -03:00 [DBG] Done attempting to bind parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto'.
2026-01-28 17:29:52.251 -03:00 [DBG] Attempting to validate the bound parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto' ...
2026-01-28 17:29:52.252 -03:00 [DBG] Done attempting to validate the bound parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto'.
2026-01-28 17:29:52.253 -03:00 [DBG] [CLEAN_RUT] Original: 12345678-9 -> Limpio: 12345678-9
2026-01-28 17:29:52.253 -03:00 [INF] [REGISTER] RUT limpio guardado: 12345678-9
2026-01-28 17:29:52.254 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 17:29:52.255 -03:00 [DBG] Creating DbConnection.
2026-01-28 17:29:52.255 -03:00 [DBG] Created DbConnection. (0ms).
2026-01-28 17:29:52.256 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:29:52.257 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:29:52.257 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 17:29:52.258 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 17:29:52.258 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 17:29:52.259 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 17:29:52.260 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 17:29:52.262 -03:00 [DBG] Context 'AppDbContext' started tracking 'Empresa' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 17:29:52.263 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:29:52.263 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-01-28 17:29:52.264 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:29:52.265 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 17:29:52.266 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:29:52.267 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:29:52.267 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 17:29:52.268 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 17:29:52.269 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 17:29:52.269 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Activo", s."Ciudad", s."CreatedAt", s."Direccion", s."EmpresaId", s."Nombre", s."Region", s."Telefono", s."UpdatedAt"
FROM "Sucursales" AS s
WHERE s."Id" = @__p_0
LIMIT 1
2026-01-28 17:29:52.272 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Activo", s."Ciudad", s."CreatedAt", s."Direccion", s."EmpresaId", s."Nombre", s."Region", s."Telefono", s."UpdatedAt"
FROM "Sucursales" AS s
WHERE s."Id" = @__p_0
LIMIT 1
2026-01-28 17:29:52.289 -03:00 [DBG] Context 'AppDbContext' started tracking 'Sucursal' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 17:29:52.297 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:29:52.298 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 24ms reading results.
2026-01-28 17:29:52.299 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:29:52.299 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 17:29:52.303 -03:00 [DBG] Compiling query expression: 
'DbSet<Usuario>()
    .Where(u => u.Rut == __rutLimpio_0 && u.EmpresaId == __8__locals1_registerDto_EmpresaId_1)
    .AsNoTracking()
    .FirstOrDefault()'
2026-01-28 17:29:52.309 -03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Usuario>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Usuario>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Usuario.Activo (bool) Required, 1], [Property: Usuario.Apellido (string) Required, 2], [Property: Usuario.CreatedAt (DateTime) Required, 3], [Property: Usuario.Email (string) Index MaxLength(255), 4], [Property: Usuario.EmpresaId (int) Required FK Index, 5], [Property: Usuario.Nombre (string) Required, 6], [Property: Usuario.PasswordHash (string) Required, 7], [Property: Usuario.Rol (RolUsuario) Required, 8], [Property: Usuario.Rut (string) Index MaxLength(12), 9], [Property: Usuario.SucursalId (int?) FK Index, 10], [Property: Usuario.UltimoAcceso (DateTime?), 11], [Property: Usuario.UpdatedAt (DateTime?), 12] }
            SELECT TOP(1) u.Id, u.Activo, u.Apellido, u.CreatedAt, u.Email, u.EmpresaId, u.Nombre, u.PasswordHash, u.Rol, u.Rut, u.SucursalId, u.UltimoAcceso, u.UpdatedAt
            FROM Usuarios AS u
            WHERE (u.Rut == @__rutLimpio_0) && (u.EmpresaId == @__8__locals1_registerDto_EmpresaId_1)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Usuario.Activo (bool) Required, 1], [Property: Usuario.Apellido (string) Required, 2], [Property: Usuario.CreatedAt (DateTime) Required, 3], [Property: Usuario.Email (string) Index MaxLength(255), 4], [Property: Usuario.EmpresaId (int) Required FK Index, 5], [Property: Usuario.Nombre (string) Required, 6], [Property: Usuario.PasswordHash (string) Required, 7], [Property: Usuario.Rol (RolUsuario) Required, 8], [Property: Usuario.Rut (string) Index MaxLength(12), 9], [Property: Usuario.SucursalId (int?) FK Index, 10], [Property: Usuario.UltimoAcceso (DateTime?), 11], [Property: Usuario.UpdatedAt (DateTime?), 12] }
            SELECT TOP(1) u.Id, u.Activo, u.Apellido, u.CreatedAt, u.Email, u.EmpresaId, u.Nombre, u.PasswordHash, u.Rol, u.Rut, u.SucursalId, u.UltimoAcceso, u.UpdatedAt
            FROM Usuarios AS u
            WHERE (u.Rut == @__rutLimpio_0) && (u.EmpresaId == @__8__locals1_registerDto_EmpresaId_1), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Usuario entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Usuario instance1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Usuario);
                (object)dataReader.GetInt32(0) != null ? 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")]: 
                            {
                                return 
                                {
                                    Usuario instance;
                                    instance = new Usuario();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Activo>k__BackingField = dataReader.GetBoolean(1);
                                    instance.<Apellido>k__BackingField = dataReader.GetString(2);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(3);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<EmpresaId>k__BackingField = dataReader.GetInt32(5);
                                    instance.<Nombre>k__BackingField = dataReader.GetString(6);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(7);
                                    instance.<Rol>k__BackingField = Invoke(((EnumToNumberConverter<RolUsuario, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Usuario.Rol (RolUsuario) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario").FindProperty("Rol")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(8));
                                    instance.<Rut>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<SucursalId>k__BackingField = dataReader.IsDBNull(10) ? default(int?) : (int?)dataReader.GetInt32(10);
                                    instance.<UltimoAcceso>k__BackingField = dataReader.IsDBNull(11) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(11);
                                    instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(12) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(12);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Usuario)
                    }
                    ;
                    return instance1;
                } : 
                {
                    object[] keyValues1;
                    keyValues1 = new object[]{ (object)dataReader.GetInt32(0) };
                    return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                        entityType: [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")], 
                        properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario").FindPrimaryKey().Properties], 
                        keyValues: keyValues1);
                };
                return instance1;
            };
            return entity;
        }, 
        contextType: Project_Gon.Infrastructure.Data.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2026-01-28 17:29:52.321 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:29:52.322 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:29:52.323 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 17:29:52.323 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 17:29:52.324 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 17:29:52.324 -03:00 [DBG] Executing DbCommand [Parameters=[@__rutLimpio_0='?', @__8__locals1_registerDto_EmpresaId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Rut" = @__rutLimpio_0 AND u."EmpresaId" = @__8__locals1_registerDto_EmpresaId_1
LIMIT 1
2026-01-28 17:29:52.329 -03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__rutLimpio_0='?', @__8__locals1_registerDto_EmpresaId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Rut" = @__rutLimpio_0 AND u."EmpresaId" = @__8__locals1_registerDto_EmpresaId_1
LIMIT 1
2026-01-28 17:29:52.332 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:29:52.332 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-01-28 17:29:52.333 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:29:52.334 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 17:29:52.335 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-01-28 17:29:52.336 -03:00 [DBG] No information found on request to perform content negotiation.
2026-01-28 17:29:52.336 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-01-28 17:29:52.337 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-01-28 17:29:52.337 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2026-01-28 17:29:52.338 -03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2026-01-28 17:29:52.339 -03:00 [INF] Executed action Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api) in 95.5941ms
2026-01-28 17:29:52.339 -03:00 [INF] Executed endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)'
2026-01-28 17:29:52.340 -03:00 [INF] HTTP POST /api/auth/register responded 400 in 102.8773 ms
2026-01-28 17:29:52.341 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 17:29:52.341 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:29:52.342 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 17:29:52.343 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/auth/register - 400 null text/plain; charset=utf-8 118.0539ms
2026-01-28 17:30:23.818 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5070/api/auth/register - application/json 61
2026-01-28 17:30:23.820 -03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/register'
2026-01-28 17:30:23.820 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)' with route pattern 'api/Auth/register' is valid for the request path '/api/auth/register'
2026-01-28 17:30:23.821 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)'
2026-01-28 17:30:23.822 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 17:30:23.822 -03:00 [DBG] Redirecting to 'https://localhost:7058/api/auth/register'.
2026-01-28 17:30:23.823 -03:00 [DBG] Connection id "0HNIULBTPDJD0" completed keep alive response.
2026-01-28 17:30:23.823 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5070/api/auth/register - 307 0 null 4.84ms
2026-01-28 17:30:23.823 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/auth/register - application/json 61
2026-01-28 17:30:23.824 -03:00 [DBG] Connection id "0HNIULBTPDJD0", Request id "0HNIULBTPDJD0:00000006": started reading request body.
2026-01-28 17:30:23.826 -03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/register'
2026-01-28 17:30:23.826 -03:00 [DBG] Connection id "0HNIULBTPDJD0", Request id "0HNIULBTPDJD0:00000006": done reading request body.
2026-01-28 17:30:23.827 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)' with route pattern 'api/Auth/register' is valid for the request path '/api/auth/register'
2026-01-28 17:30:23.829 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)'
2026-01-28 17:30:23.829 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 17:30:23.830 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 17:30:23.830 -03:00 [INF] Executing endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)'
2026-01-28 17:30:23.831 -03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(Project_Gon.Core.DTOs.Auth.RegisterDto) on controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api).
2026-01-28 17:30:23.832 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-01-28 17:30:23.832 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-01-28 17:30:23.833 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-01-28 17:30:23.834 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-01-28 17:30:23.835 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-01-28 17:30:23.836 -03:00 [DBG] Executing controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-01-28 17:30:23.836 -03:00 [DBG] Executed controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-01-28 17:30:23.837 -03:00 [DBG] Attempting to bind parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto' ...
2026-01-28 17:30:23.838 -03:00 [DBG] Attempting to bind parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto' using the name '' in request data ...
2026-01-28 17:30:23.838 -03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2026-01-28 17:30:23.839 -03:00 [DBG] Connection id "0HNIULBTPDJD1", Request id "0HNIULBTPDJD1:0000000B": started reading request body.
2026-01-28 17:30:23.840 -03:00 [DBG] Connection id "0HNIULBTPDJD1", Request id "0HNIULBTPDJD1:0000000B": done reading request body.
2026-01-28 17:30:23.840 -03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Project_Gon.Core.DTOs.Auth.RegisterDto'
2026-01-28 17:30:23.841 -03:00 [DBG] Done attempting to bind parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto'.
2026-01-28 17:30:23.841 -03:00 [DBG] Done attempting to bind parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto'.
2026-01-28 17:30:23.842 -03:00 [DBG] Attempting to validate the bound parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto' ...
2026-01-28 17:30:23.844 -03:00 [DBG] Done attempting to validate the bound parameter 'registerDto' of type 'Project_Gon.Core.DTOs.Auth.RegisterDto'.
2026-01-28 17:30:23.845 -03:00 [DBG] The request has model state errors, returning an error response.
2026-01-28 17:30:23.846 -03:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2026-01-28 17:30:23.846 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-01-28 17:30:23.847 -03:00 [DBG] No information found on request to perform content negotiation.
2026-01-28 17:30:23.848 -03:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2026-01-28 17:30:23.849 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2026-01-28 17:30:23.850 -03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2026-01-28 17:30:23.858 -03:00 [INF] Executed action Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api) in 22.1985ms
2026-01-28 17:30:23.859 -03:00 [INF] Executed endpoint 'Project_Gon.Api.Controllers.AuthController.Register (Project_Gon.Api)'
2026-01-28 17:30:23.859 -03:00 [INF] HTTP POST /api/auth/register responded 400 in 29.9060 ms
2026-01-28 17:30:23.860 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/auth/register - 400 null application/problem+json; charset=utf-8 37.0358ms
2026-01-28 17:30:42.162 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5070/api/auth/login - application/json 61
2026-01-28 17:30:42.163 -03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2026-01-28 17:30:42.163 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)' with route pattern 'api/Auth/login' is valid for the request path '/api/auth/login'
2026-01-28 17:30:42.164 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 17:30:42.165 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 17:30:42.165 -03:00 [DBG] Redirecting to 'https://localhost:7058/api/auth/login'.
2026-01-28 17:30:42.166 -03:00 [DBG] Connection id "0HNIULBTPDJD0" completed keep alive response.
2026-01-28 17:30:42.166 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/auth/login - application/json 61
2026-01-28 17:30:42.166 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5070/api/auth/login - 307 0 null 4.7394ms
2026-01-28 17:30:42.167 -03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2026-01-28 17:30:42.169 -03:00 [DBG] Connection id "0HNIULBTPDJD0", Request id "0HNIULBTPDJD0:00000007": started reading request body.
2026-01-28 17:30:42.169 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)' with route pattern 'api/Auth/login' is valid for the request path '/api/auth/login'
2026-01-28 17:30:42.170 -03:00 [DBG] Connection id "0HNIULBTPDJD0", Request id "0HNIULBTPDJD0:00000007": done reading request body.
2026-01-28 17:30:42.171 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 17:30:42.172 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 17:30:42.173 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 17:30:42.173 -03:00 [INF] Executing endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 17:30:42.176 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Project_Gon.Core.DTOs.Auth.LoginDto) on controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api).
2026-01-28 17:30:42.177 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-01-28 17:30:42.177 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-01-28 17:30:42.178 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-01-28 17:30:42.179 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-01-28 17:30:42.180 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-01-28 17:30:42.181 -03:00 [DBG] Executing controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-01-28 17:30:42.182 -03:00 [DBG] Executed controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-01-28 17:30:42.182 -03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' ...
2026-01-28 17:30:42.183 -03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' using the name '' in request data ...
2026-01-28 17:30:42.184 -03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2026-01-28 17:30:42.185 -03:00 [DBG] Connection id "0HNIULBTPDJD1", Request id "0HNIULBTPDJD1:0000000D": started reading request body.
2026-01-28 17:30:42.185 -03:00 [DBG] Connection id "0HNIULBTPDJD1", Request id "0HNIULBTPDJD1:0000000D": done reading request body.
2026-01-28 17:30:42.186 -03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Project_Gon.Core.DTOs.Auth.LoginDto'
2026-01-28 17:30:42.187 -03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 17:30:42.187 -03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 17:30:42.188 -03:00 [DBG] Attempting to validate the bound parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' ...
2026-01-28 17:30:42.189 -03:00 [DBG] Done attempting to validate the bound parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 17:30:42.191 -03:00 [INF] [LOGIN] Intento de login con: 12345678-9
2026-01-28 17:30:42.192 -03:00 [DBG] [CLEAN_RUT] Original: 12345678-9 -> Limpio: 12345678-9
2026-01-28 17:30:42.193 -03:00 [INF] [FIND] Buscando por RUT limpio: 12345678-9
2026-01-28 17:30:42.193 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 17:30:42.195 -03:00 [DBG] Compiling query expression: 
'DbSet<Usuario>()
    .Where(u => u.Rut == __rutLimpio_0 && u.Activo)
    .AsNoTracking()
    .FirstOrDefault()'
2026-01-28 17:30:42.198 -03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Usuario>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Usuario>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Usuario.Activo (bool) Required, 1], [Property: Usuario.Apellido (string) Required, 2], [Property: Usuario.CreatedAt (DateTime) Required, 3], [Property: Usuario.Email (string) Index MaxLength(255), 4], [Property: Usuario.EmpresaId (int) Required FK Index, 5], [Property: Usuario.Nombre (string) Required, 6], [Property: Usuario.PasswordHash (string) Required, 7], [Property: Usuario.Rol (RolUsuario) Required, 8], [Property: Usuario.Rut (string) Index MaxLength(12), 9], [Property: Usuario.SucursalId (int?) FK Index, 10], [Property: Usuario.UltimoAcceso (DateTime?), 11], [Property: Usuario.UpdatedAt (DateTime?), 12] }
            SELECT TOP(1) u.Id, u.Activo, u.Apellido, u.CreatedAt, u.Email, u.EmpresaId, u.Nombre, u.PasswordHash, u.Rol, u.Rut, u.SucursalId, u.UltimoAcceso, u.UpdatedAt
            FROM Usuarios AS u
            WHERE (u.Rut == @__rutLimpio_0) && u.Activo) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Usuario.Activo (bool) Required, 1], [Property: Usuario.Apellido (string) Required, 2], [Property: Usuario.CreatedAt (DateTime) Required, 3], [Property: Usuario.Email (string) Index MaxLength(255), 4], [Property: Usuario.EmpresaId (int) Required FK Index, 5], [Property: Usuario.Nombre (string) Required, 6], [Property: Usuario.PasswordHash (string) Required, 7], [Property: Usuario.Rol (RolUsuario) Required, 8], [Property: Usuario.Rut (string) Index MaxLength(12), 9], [Property: Usuario.SucursalId (int?) FK Index, 10], [Property: Usuario.UltimoAcceso (DateTime?), 11], [Property: Usuario.UpdatedAt (DateTime?), 12] }
            SELECT TOP(1) u.Id, u.Activo, u.Apellido, u.CreatedAt, u.Email, u.EmpresaId, u.Nombre, u.PasswordHash, u.Rol, u.Rut, u.SucursalId, u.UltimoAcceso, u.UpdatedAt
            FROM Usuarios AS u
            WHERE (u.Rut == @__rutLimpio_0) && u.Activo, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Usuario entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Usuario instance1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Usuario);
                (object)dataReader.GetInt32(0) != null ? 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")]: 
                            {
                                return 
                                {
                                    Usuario instance;
                                    instance = new Usuario();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Activo>k__BackingField = dataReader.GetBoolean(1);
                                    instance.<Apellido>k__BackingField = dataReader.GetString(2);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(3);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<EmpresaId>k__BackingField = dataReader.GetInt32(5);
                                    instance.<Nombre>k__BackingField = dataReader.GetString(6);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(7);
                                    instance.<Rol>k__BackingField = Invoke(((EnumToNumberConverter<RolUsuario, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Usuario.Rol (RolUsuario) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario").FindProperty("Rol")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(8));
                                    instance.<Rut>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<SucursalId>k__BackingField = dataReader.IsDBNull(10) ? default(int?) : (int?)dataReader.GetInt32(10);
                                    instance.<UltimoAcceso>k__BackingField = dataReader.IsDBNull(11) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(11);
                                    instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(12) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(12);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Usuario)
                    }
                    ;
                    return instance1;
                } : 
                {
                    object[] keyValues1;
                    keyValues1 = new object[]{ (object)dataReader.GetInt32(0) };
                    return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                        entityType: [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")], 
                        properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario").FindPrimaryKey().Properties], 
                        keyValues: keyValues1);
                };
                return instance1;
            };
            return entity;
        }, 
        contextType: Project_Gon.Infrastructure.Data.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2026-01-28 17:30:42.205 -03:00 [DBG] Creating DbConnection.
2026-01-28 17:30:42.205 -03:00 [DBG] Created DbConnection. (0ms).
2026-01-28 17:30:42.206 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:30:42.207 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:30:42.207 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 17:30:42.208 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 17:30:42.208 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 17:30:42.209 -03:00 [DBG] Executing DbCommand [Parameters=[@__rutLimpio_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Rut" = @__rutLimpio_0 AND u."Activo"
LIMIT 1
2026-01-28 17:30:42.210 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__rutLimpio_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Rut" = @__rutLimpio_0 AND u."Activo"
LIMIT 1
2026-01-28 17:30:42.212 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:30:42.212 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-01-28 17:30:42.213 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:30:42.214 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 17:30:42.215 -03:00 [INF] [FIND] Usuario encontrado - ID: 3, RUT: 12345678-9
2026-01-28 17:30:42.215 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:30:42.216 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:30:42.217 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 17:30:42.217 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 17:30:42.218 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 17:30:42.218 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 17:30:42.220 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 17:30:42.221 -03:00 [DBG] Context 'AppDbContext' started tracking 'Empresa' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 17:30:42.222 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:30:42.222 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-01-28 17:30:42.223 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:30:42.224 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 17:30:42.225 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:30:42.225 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:30:42.226 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 17:30:42.226 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 17:30:42.227 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 17:30:42.228 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Activo", s."Ciudad", s."CreatedAt", s."Direccion", s."EmpresaId", s."Nombre", s."Region", s."Telefono", s."UpdatedAt"
FROM "Sucursales" AS s
WHERE s."Id" = @__p_0
LIMIT 1
2026-01-28 17:30:42.229 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Activo", s."Ciudad", s."CreatedAt", s."Direccion", s."EmpresaId", s."Nombre", s."Region", s."Telefono", s."UpdatedAt"
FROM "Sucursales" AS s
WHERE s."Id" = @__p_0
LIMIT 1
2026-01-28 17:30:42.231 -03:00 [DBG] Context 'AppDbContext' started tracking 'Sucursal' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 17:30:42.232 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:30:42.232 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-01-28 17:30:42.233 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:30:42.234 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 17:30:42.234 -03:00 [INF] [LOGIN] Usuario encontrado: true
2026-01-28 17:30:42.235 -03:00 [INF] [LOGIN] Usuario ID: 3, RUT: 12345678-9, Email: vendedor@empresa.com, Activo: true
2026-01-28 17:30:42.236 -03:00 [INF] [LOGIN] Verificando contraseña para usuario ID: 3
2026-01-28 17:30:42.772 -03:00 [INF] [LOGIN] Password válido: false
2026-01-28 17:30:42.772 -03:00 [WRN] [LOGIN] Login rechazado - Contraseña incorrecta para usuario ID: 3
2026-01-28 17:30:42.773 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-01-28 17:30:42.774 -03:00 [DBG] No information found on request to perform content negotiation.
2026-01-28 17:30:42.775 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-01-28 17:30:42.775 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-01-28 17:30:42.776 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2026-01-28 17:30:42.776 -03:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'System.String'.
2026-01-28 17:30:42.777 -03:00 [INF] Executed action Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api) in 596.1266ms
2026-01-28 17:30:42.778 -03:00 [INF] Executed endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 17:30:42.778 -03:00 [INF] HTTP POST /api/auth/login responded 401 in 605.7662 ms
2026-01-28 17:30:42.779 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 17:30:42.780 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:30:42.781 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 17:30:42.782 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/auth/login - 401 null text/plain; charset=utf-8 615.3085ms
2026-01-28 17:31:51.417 -03:00 [DBG] Connection id "0HNIULBTPDJD2" disconnecting.
2026-01-28 17:31:51.417 -03:00 [DBG] Connection id "0HNIULBTPDJD2" stopped.
2026-01-28 17:31:51.418 -03:00 [DBG] Connection id "0HNIULBTPDJD2" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-01-28 17:31:52.424 -03:00 [DBG] Connection id "0HNIULBTPDJD3" is closing.
2026-01-28 17:31:52.425 -03:00 [DBG] Connection id "0HNIULBTPDJD3" is closed. The last processed stream ID was 3.
2026-01-28 17:31:52.426 -03:00 [DBG] Connection id "0HNIULBTPDJD3" received FIN.
2026-01-28 17:31:52.426 -03:00 [DBG] Connection id "0HNIULBTPDJD3" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-01-28 17:31:52.461 -03:00 [DBG] The connection queue processing loop for 0HNIULBTPDJD3 completed.
2026-01-28 17:31:52.462 -03:00 [DBG] Connection id "0HNIULBTPDJD3" stopped.
2026-01-28 17:32:52.894 -03:00 [DBG] Connection id "0HNIULBTPDJD0" disconnecting.
2026-01-28 17:32:52.894 -03:00 [DBG] Connection id "0HNIULBTPDJD0" stopped.
2026-01-28 17:32:52.895 -03:00 [DBG] Connection id "0HNIULBTPDJD0" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-01-28 17:32:54.907 -03:00 [DBG] Connection id "0HNIULBTPDJD1" is closing.
2026-01-28 17:32:54.908 -03:00 [DBG] Connection id "0HNIULBTPDJD1" is closed. The last processed stream ID was 13.
2026-01-28 17:32:54.923 -03:00 [DBG] The connection queue processing loop for 0HNIULBTPDJD1 completed.
2026-01-28 17:32:54.924 -03:00 [DBG] Connection id "0HNIULBTPDJD1" stopped.
2026-01-28 17:32:54.925 -03:00 [DBG] Connection id "0HNIULBTPDJD1" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-01-28 17:33:14.563 -03:00 [DBG] Connection id "0HNIULBTPDJD4" accepted.
2026-01-28 17:33:14.564 -03:00 [DBG] Connection id "0HNIULBTPDJD4" started.
2026-01-28 17:33:14.565 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5070/api/auth/login - application/json 61
2026-01-28 17:33:14.566 -03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2026-01-28 17:33:14.566 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)' with route pattern 'api/Auth/login' is valid for the request path '/api/auth/login'
2026-01-28 17:33:14.567 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 17:33:14.568 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 17:33:14.568 -03:00 [DBG] Redirecting to 'https://localhost:7058/api/auth/login'.
2026-01-28 17:33:14.569 -03:00 [DBG] Connection id "0HNIULBTPDJD4" completed keep alive response.
2026-01-28 17:33:14.569 -03:00 [DBG] Connection id "0HNIULBTPDJD5" accepted.
2026-01-28 17:33:14.569 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5070/api/auth/login - 307 0 null 4.5501ms
2026-01-28 17:33:14.570 -03:00 [DBG] Connection id "0HNIULBTPDJD5" started.
2026-01-28 17:33:14.571 -03:00 [DBG] Connection id "0HNIULBTPDJD4", Request id "0HNIULBTPDJD4:00000001": started reading request body.
2026-01-28 17:33:14.572 -03:00 [DBG] Connection id "0HNIULBTPDJD4", Request id "0HNIULBTPDJD4:00000001": done reading request body.
2026-01-28 17:33:14.578 -03:00 [DBG] Connection 0HNIULBTPDJD5 established using the following protocol: "Tls12"
2026-01-28 17:33:14.578 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/auth/login - application/json 61
2026-01-28 17:33:14.580 -03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2026-01-28 17:33:14.580 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)' with route pattern 'api/Auth/login' is valid for the request path '/api/auth/login'
2026-01-28 17:33:14.581 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 17:33:14.582 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 17:33:14.582 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 17:33:14.583 -03:00 [INF] Executing endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 17:33:14.583 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Project_Gon.Core.DTOs.Auth.LoginDto) on controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api).
2026-01-28 17:33:14.584 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-01-28 17:33:14.585 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-01-28 17:33:14.586 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-01-28 17:33:14.587 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-01-28 17:33:14.587 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-01-28 17:33:14.588 -03:00 [DBG] Executing controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-01-28 17:33:14.589 -03:00 [DBG] Executed controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-01-28 17:33:14.589 -03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' ...
2026-01-28 17:33:14.590 -03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' using the name '' in request data ...
2026-01-28 17:33:14.591 -03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2026-01-28 17:33:14.591 -03:00 [DBG] Connection id "0HNIULBTPDJD5", Request id "0HNIULBTPDJD5:00000001": started reading request body.
2026-01-28 17:33:14.592 -03:00 [DBG] Connection id "0HNIULBTPDJD5", Request id "0HNIULBTPDJD5:00000001": done reading request body.
2026-01-28 17:33:14.593 -03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Project_Gon.Core.DTOs.Auth.LoginDto'
2026-01-28 17:33:14.593 -03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 17:33:14.594 -03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 17:33:14.594 -03:00 [DBG] Attempting to validate the bound parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' ...
2026-01-28 17:33:14.595 -03:00 [DBG] Done attempting to validate the bound parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 17:33:14.596 -03:00 [INF] [LOGIN] Intento de login con: 12345678-9
2026-01-28 17:33:14.596 -03:00 [DBG] [CLEAN_RUT] Original: 12345678-9 -> Limpio: 12345678-9
2026-01-28 17:33:14.597 -03:00 [INF] [FIND] Buscando por RUT limpio: 12345678-9
2026-01-28 17:33:14.598 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 17:33:14.599 -03:00 [DBG] Creating DbConnection.
2026-01-28 17:33:14.600 -03:00 [DBG] Created DbConnection. (0ms).
2026-01-28 17:33:14.600 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:33:14.625 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:33:14.626 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 17:33:14.626 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 17:33:14.627 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 17:33:14.628 -03:00 [DBG] Executing DbCommand [Parameters=[@__rutLimpio_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Rut" = @__rutLimpio_0 AND u."Activo"
LIMIT 1
2026-01-28 17:33:14.631 -03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__rutLimpio_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Rut" = @__rutLimpio_0 AND u."Activo"
LIMIT 1
2026-01-28 17:33:14.633 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:33:14.633 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-01-28 17:33:14.634 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:33:14.635 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 17:33:14.635 -03:00 [INF] [FIND] Usuario encontrado - ID: 3, RUT: 12345678-9
2026-01-28 17:33:14.636 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:33:14.637 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:33:14.637 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 17:33:14.638 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 17:33:14.638 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 17:33:14.639 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 17:33:14.641 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 17:33:14.642 -03:00 [DBG] Context 'AppDbContext' started tracking 'Empresa' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 17:33:14.643 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:33:14.644 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-01-28 17:33:14.645 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:33:14.645 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 17:33:14.646 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:33:14.647 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:33:14.648 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 17:33:14.648 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 17:33:14.649 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 17:33:14.649 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Activo", s."Ciudad", s."CreatedAt", s."Direccion", s."EmpresaId", s."Nombre", s."Region", s."Telefono", s."UpdatedAt"
FROM "Sucursales" AS s
WHERE s."Id" = @__p_0
LIMIT 1
2026-01-28 17:33:14.652 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Activo", s."Ciudad", s."CreatedAt", s."Direccion", s."EmpresaId", s."Nombre", s."Region", s."Telefono", s."UpdatedAt"
FROM "Sucursales" AS s
WHERE s."Id" = @__p_0
LIMIT 1
2026-01-28 17:33:14.653 -03:00 [DBG] Context 'AppDbContext' started tracking 'Sucursal' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 17:33:14.654 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:33:14.654 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-01-28 17:33:14.655 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:33:14.656 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 17:33:14.656 -03:00 [INF] [LOGIN] Usuario encontrado: true
2026-01-28 17:33:14.657 -03:00 [INF] [LOGIN] Usuario ID: 3, RUT: 12345678-9, Email: vendedor@empresa.com, Activo: true
2026-01-28 17:33:14.658 -03:00 [INF] [LOGIN] Verificando contraseña para usuario ID: 3
2026-01-28 17:33:14.869 -03:00 [INF] [LOGIN] Password válido: false
2026-01-28 17:33:14.870 -03:00 [WRN] [LOGIN] Login rechazado - Contraseña incorrecta para usuario ID: 3
2026-01-28 17:33:14.871 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-01-28 17:33:14.872 -03:00 [DBG] No information found on request to perform content negotiation.
2026-01-28 17:33:14.872 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-01-28 17:33:14.873 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-01-28 17:33:14.873 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2026-01-28 17:33:14.874 -03:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'System.String'.
2026-01-28 17:33:14.875 -03:00 [INF] Executed action Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api) in 286.5513ms
2026-01-28 17:33:14.875 -03:00 [INF] Executed endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 17:33:14.876 -03:00 [INF] HTTP POST /api/auth/login responded 401 in 293.6662 ms
2026-01-28 17:33:14.877 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 17:33:14.877 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:33:14.878 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 17:33:14.879 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/auth/login - 401 null text/plain; charset=utf-8 300.3735ms
2026-01-28 17:33:16.048 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5070/api/auth/login - application/json 61
2026-01-28 17:33:16.049 -03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2026-01-28 17:33:16.050 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)' with route pattern 'api/Auth/login' is valid for the request path '/api/auth/login'
2026-01-28 17:33:16.050 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 17:33:16.051 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 17:33:16.051 -03:00 [DBG] Redirecting to 'https://localhost:7058/api/auth/login'.
2026-01-28 17:33:16.052 -03:00 [DBG] Connection id "0HNIULBTPDJD4" completed keep alive response.
2026-01-28 17:33:16.053 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5070/api/auth/login - 307 0 null 4.9811ms
2026-01-28 17:33:16.053 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/auth/login - application/json 61
2026-01-28 17:33:16.054 -03:00 [DBG] Connection id "0HNIULBTPDJD4", Request id "0HNIULBTPDJD4:00000002": started reading request body.
2026-01-28 17:33:16.055 -03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2026-01-28 17:33:16.056 -03:00 [DBG] Connection id "0HNIULBTPDJD4", Request id "0HNIULBTPDJD4:00000002": done reading request body.
2026-01-28 17:33:16.056 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)' with route pattern 'api/Auth/login' is valid for the request path '/api/auth/login'
2026-01-28 17:33:16.058 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 17:33:16.058 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 17:33:16.059 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 17:33:16.059 -03:00 [INF] Executing endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 17:33:16.060 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Project_Gon.Core.DTOs.Auth.LoginDto) on controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api).
2026-01-28 17:33:16.061 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-01-28 17:33:16.061 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-01-28 17:33:16.062 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-01-28 17:33:16.063 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-01-28 17:33:16.064 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-01-28 17:33:16.065 -03:00 [DBG] Executing controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-01-28 17:33:16.066 -03:00 [DBG] Executed controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-01-28 17:33:16.066 -03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' ...
2026-01-28 17:33:16.067 -03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' using the name '' in request data ...
2026-01-28 17:33:16.068 -03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2026-01-28 17:33:16.069 -03:00 [DBG] Connection id "0HNIULBTPDJD5", Request id "0HNIULBTPDJD5:00000003": started reading request body.
2026-01-28 17:33:16.069 -03:00 [DBG] Connection id "0HNIULBTPDJD5", Request id "0HNIULBTPDJD5:00000003": done reading request body.
2026-01-28 17:33:16.070 -03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Project_Gon.Core.DTOs.Auth.LoginDto'
2026-01-28 17:33:16.070 -03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 17:33:16.071 -03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 17:33:16.071 -03:00 [DBG] Attempting to validate the bound parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' ...
2026-01-28 17:33:16.072 -03:00 [DBG] Done attempting to validate the bound parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 17:33:16.073 -03:00 [INF] [LOGIN] Intento de login con: 12345678-9
2026-01-28 17:33:16.073 -03:00 [DBG] [CLEAN_RUT] Original: 12345678-9 -> Limpio: 12345678-9
2026-01-28 17:33:16.074 -03:00 [INF] [FIND] Buscando por RUT limpio: 12345678-9
2026-01-28 17:33:16.074 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 17:33:16.076 -03:00 [DBG] Creating DbConnection.
2026-01-28 17:33:16.076 -03:00 [DBG] Created DbConnection. (0ms).
2026-01-28 17:33:16.076 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:33:16.077 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:33:16.077 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 17:33:16.078 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 17:33:16.079 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 17:33:16.079 -03:00 [DBG] Executing DbCommand [Parameters=[@__rutLimpio_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Rut" = @__rutLimpio_0 AND u."Activo"
LIMIT 1
2026-01-28 17:33:16.081 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__rutLimpio_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Rut" = @__rutLimpio_0 AND u."Activo"
LIMIT 1
2026-01-28 17:33:16.082 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:33:16.083 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-01-28 17:33:16.083 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:33:16.084 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 17:33:16.085 -03:00 [INF] [FIND] Usuario encontrado - ID: 3, RUT: 12345678-9
2026-01-28 17:33:16.086 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:33:16.086 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:33:16.087 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 17:33:16.087 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 17:33:16.088 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 17:33:16.089 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 17:33:16.090 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 17:33:16.091 -03:00 [DBG] Context 'AppDbContext' started tracking 'Empresa' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 17:33:16.092 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:33:16.093 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-01-28 17:33:16.093 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:33:16.094 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 17:33:16.095 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:33:16.095 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:33:16.096 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 17:33:16.097 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 17:33:16.097 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 17:33:16.098 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Activo", s."Ciudad", s."CreatedAt", s."Direccion", s."EmpresaId", s."Nombre", s."Region", s."Telefono", s."UpdatedAt"
FROM "Sucursales" AS s
WHERE s."Id" = @__p_0
LIMIT 1
2026-01-28 17:33:16.100 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Activo", s."Ciudad", s."CreatedAt", s."Direccion", s."EmpresaId", s."Nombre", s."Region", s."Telefono", s."UpdatedAt"
FROM "Sucursales" AS s
WHERE s."Id" = @__p_0
LIMIT 1
2026-01-28 17:33:16.101 -03:00 [DBG] Context 'AppDbContext' started tracking 'Sucursal' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 17:33:16.101 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:33:16.102 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-01-28 17:33:16.103 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:33:16.104 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 17:33:16.104 -03:00 [INF] [LOGIN] Usuario encontrado: true
2026-01-28 17:33:16.105 -03:00 [INF] [LOGIN] Usuario ID: 3, RUT: 12345678-9, Email: vendedor@empresa.com, Activo: true
2026-01-28 17:33:16.105 -03:00 [INF] [LOGIN] Verificando contraseña para usuario ID: 3
2026-01-28 17:33:16.316 -03:00 [INF] [LOGIN] Password válido: false
2026-01-28 17:33:16.317 -03:00 [WRN] [LOGIN] Login rechazado - Contraseña incorrecta para usuario ID: 3
2026-01-28 17:33:16.317 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-01-28 17:33:16.318 -03:00 [DBG] No information found on request to perform content negotiation.
2026-01-28 17:33:16.319 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-01-28 17:33:16.319 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-01-28 17:33:16.320 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2026-01-28 17:33:16.321 -03:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'System.String'.
2026-01-28 17:33:16.321 -03:00 [INF] Executed action Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api) in 256.3816ms
2026-01-28 17:33:16.322 -03:00 [INF] Executed endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 17:33:16.322 -03:00 [INF] HTTP POST /api/auth/login responded 401 in 263.7843 ms
2026-01-28 17:33:16.323 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 17:33:16.324 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:33:16.325 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 17:33:16.326 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/auth/login - 401 null text/plain; charset=utf-8 272.9432ms
2026-01-28 17:33:21.174 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5070/api/auth/login - application/json 61
2026-01-28 17:33:21.175 -03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2026-01-28 17:33:21.176 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)' with route pattern 'api/Auth/login' is valid for the request path '/api/auth/login'
2026-01-28 17:33:21.177 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 17:33:21.178 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 17:33:21.178 -03:00 [DBG] Redirecting to 'https://localhost:7058/api/auth/login'.
2026-01-28 17:33:21.179 -03:00 [DBG] Connection id "0HNIULBTPDJD4" completed keep alive response.
2026-01-28 17:33:21.180 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/auth/login - application/json 61
2026-01-28 17:33:21.184 -03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2026-01-28 17:33:21.184 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)' with route pattern 'api/Auth/login' is valid for the request path '/api/auth/login'
2026-01-28 17:33:21.185 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 17:33:21.186 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 17:33:21.186 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 17:33:21.187 -03:00 [INF] Executing endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 17:33:21.188 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Project_Gon.Core.DTOs.Auth.LoginDto) on controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api).
2026-01-28 17:33:21.202 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-01-28 17:33:21.204 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-01-28 17:33:21.205 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-01-28 17:33:21.181 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5070/api/auth/login - 307 0 null 6.4683ms
2026-01-28 17:33:21.206 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-01-28 17:33:21.208 -03:00 [DBG] Connection id "0HNIULBTPDJD4", Request id "0HNIULBTPDJD4:00000003": started reading request body.
2026-01-28 17:33:21.209 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-01-28 17:33:21.209 -03:00 [DBG] Connection id "0HNIULBTPDJD4", Request id "0HNIULBTPDJD4:00000003": done reading request body.
2026-01-28 17:33:21.210 -03:00 [DBG] Executing controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-01-28 17:33:21.212 -03:00 [DBG] Executed controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-01-28 17:33:21.213 -03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' ...
2026-01-28 17:33:21.213 -03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' using the name '' in request data ...
2026-01-28 17:33:21.214 -03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2026-01-28 17:33:21.215 -03:00 [DBG] Connection id "0HNIULBTPDJD5", Request id "0HNIULBTPDJD5:00000005": started reading request body.
2026-01-28 17:33:21.215 -03:00 [DBG] Connection id "0HNIULBTPDJD5", Request id "0HNIULBTPDJD5:00000005": done reading request body.
2026-01-28 17:33:21.216 -03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Project_Gon.Core.DTOs.Auth.LoginDto'
2026-01-28 17:33:21.216 -03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 17:33:21.217 -03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 17:33:21.217 -03:00 [DBG] Attempting to validate the bound parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' ...
2026-01-28 17:33:21.218 -03:00 [DBG] Done attempting to validate the bound parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 17:33:21.219 -03:00 [INF] [LOGIN] Intento de login con: 12345678-9
2026-01-28 17:33:21.219 -03:00 [DBG] [CLEAN_RUT] Original: 12345678-9 -> Limpio: 12345678-9
2026-01-28 17:33:21.220 -03:00 [INF] [FIND] Buscando por RUT limpio: 12345678-9
2026-01-28 17:33:21.221 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 17:33:21.222 -03:00 [DBG] Creating DbConnection.
2026-01-28 17:33:21.222 -03:00 [DBG] Created DbConnection. (0ms).
2026-01-28 17:33:21.223 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:33:21.223 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:33:21.224 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 17:33:21.224 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 17:33:21.225 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 17:33:21.226 -03:00 [DBG] Executing DbCommand [Parameters=[@__rutLimpio_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Rut" = @__rutLimpio_0 AND u."Activo"
LIMIT 1
2026-01-28 17:33:21.227 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__rutLimpio_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Rut" = @__rutLimpio_0 AND u."Activo"
LIMIT 1
2026-01-28 17:33:21.228 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:33:21.229 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-01-28 17:33:21.230 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:33:21.230 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 17:33:21.231 -03:00 [INF] [FIND] Usuario encontrado - ID: 3, RUT: 12345678-9
2026-01-28 17:33:21.232 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:33:21.232 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:33:21.233 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 17:33:21.234 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 17:33:21.234 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 17:33:21.235 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 17:33:21.237 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 17:33:21.238 -03:00 [DBG] Context 'AppDbContext' started tracking 'Empresa' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 17:33:21.239 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:33:21.239 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-01-28 17:33:21.240 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:33:21.241 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 17:33:21.242 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:33:21.242 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:33:21.243 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 17:33:21.243 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 17:33:21.244 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 17:33:21.244 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Activo", s."Ciudad", s."CreatedAt", s."Direccion", s."EmpresaId", s."Nombre", s."Region", s."Telefono", s."UpdatedAt"
FROM "Sucursales" AS s
WHERE s."Id" = @__p_0
LIMIT 1
2026-01-28 17:33:21.246 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Activo", s."Ciudad", s."CreatedAt", s."Direccion", s."EmpresaId", s."Nombre", s."Region", s."Telefono", s."UpdatedAt"
FROM "Sucursales" AS s
WHERE s."Id" = @__p_0
LIMIT 1
2026-01-28 17:33:21.247 -03:00 [DBG] Context 'AppDbContext' started tracking 'Sucursal' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 17:33:21.248 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:33:21.248 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-01-28 17:33:21.249 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:33:21.250 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 17:33:21.251 -03:00 [INF] [LOGIN] Usuario encontrado: true
2026-01-28 17:33:21.251 -03:00 [INF] [LOGIN] Usuario ID: 3, RUT: 12345678-9, Email: vendedor@empresa.com, Activo: true
2026-01-28 17:33:21.252 -03:00 [INF] [LOGIN] Verificando contraseña para usuario ID: 3
2026-01-28 17:33:21.464 -03:00 [INF] [LOGIN] Password válido: false
2026-01-28 17:33:21.464 -03:00 [WRN] [LOGIN] Login rechazado - Contraseña incorrecta para usuario ID: 3
2026-01-28 17:33:21.465 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-01-28 17:33:21.466 -03:00 [DBG] No information found on request to perform content negotiation.
2026-01-28 17:33:21.467 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-01-28 17:33:21.467 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-01-28 17:33:21.468 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2026-01-28 17:33:21.468 -03:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'System.String'.
2026-01-28 17:33:21.469 -03:00 [INF] Executed action Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api) in 258.8036ms
2026-01-28 17:33:21.470 -03:00 [INF] Executed endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 17:33:21.470 -03:00 [INF] HTTP POST /api/auth/login responded 401 in 284.1268 ms
2026-01-28 17:33:21.471 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 17:33:21.472 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:33:21.473 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 17:33:21.474 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/auth/login - 401 null text/plain; charset=utf-8 293.6472ms
2026-01-28 17:34:49.584 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5070/api/auth/login - application/json 61
2026-01-28 17:34:49.585 -03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2026-01-28 17:34:49.586 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)' with route pattern 'api/Auth/login' is valid for the request path '/api/auth/login'
2026-01-28 17:34:49.587 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 17:34:49.587 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 17:34:49.588 -03:00 [DBG] Redirecting to 'https://localhost:7058/api/auth/login'.
2026-01-28 17:34:49.588 -03:00 [DBG] Connection id "0HNIULBTPDJD4" completed keep alive response.
2026-01-28 17:34:49.589 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5070/api/auth/login - 307 0 null 4.7304ms
2026-01-28 17:34:49.589 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/auth/login - application/json 61
2026-01-28 17:34:49.590 -03:00 [DBG] Connection id "0HNIULBTPDJD4", Request id "0HNIULBTPDJD4:00000004": started reading request body.
2026-01-28 17:34:49.591 -03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2026-01-28 17:34:49.592 -03:00 [DBG] Connection id "0HNIULBTPDJD4", Request id "0HNIULBTPDJD4:00000004": done reading request body.
2026-01-28 17:34:49.592 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)' with route pattern 'api/Auth/login' is valid for the request path '/api/auth/login'
2026-01-28 17:34:49.594 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 17:34:49.595 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 17:34:49.595 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 17:34:49.596 -03:00 [INF] Executing endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 17:34:49.596 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Project_Gon.Core.DTOs.Auth.LoginDto) on controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api).
2026-01-28 17:34:49.597 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-01-28 17:34:49.598 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-01-28 17:34:49.598 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-01-28 17:34:49.600 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-01-28 17:34:49.600 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-01-28 17:34:49.601 -03:00 [DBG] Executing controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-01-28 17:34:49.602 -03:00 [DBG] Executed controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-01-28 17:34:49.602 -03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' ...
2026-01-28 17:34:49.603 -03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' using the name '' in request data ...
2026-01-28 17:34:49.604 -03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2026-01-28 17:34:49.605 -03:00 [DBG] Connection id "0HNIULBTPDJD5", Request id "0HNIULBTPDJD5:00000007": started reading request body.
2026-01-28 17:34:49.605 -03:00 [DBG] Connection id "0HNIULBTPDJD5", Request id "0HNIULBTPDJD5:00000007": done reading request body.
2026-01-28 17:34:49.606 -03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Project_Gon.Core.DTOs.Auth.LoginDto'
2026-01-28 17:34:49.606 -03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 17:34:49.607 -03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 17:34:49.608 -03:00 [DBG] Attempting to validate the bound parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' ...
2026-01-28 17:34:49.608 -03:00 [DBG] Done attempting to validate the bound parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 17:34:49.609 -03:00 [INF] [LOGIN] Intento de login con: 12345678-9
2026-01-28 17:34:49.609 -03:00 [DBG] [CLEAN_RUT] Original: 12345678-9 -> Limpio: 12345678-9
2026-01-28 17:34:49.610 -03:00 [INF] [FIND] Buscando por RUT limpio: 12345678-9
2026-01-28 17:34:49.611 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 17:34:49.612 -03:00 [DBG] Creating DbConnection.
2026-01-28 17:34:49.612 -03:00 [DBG] Created DbConnection. (0ms).
2026-01-28 17:34:49.613 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:34:49.613 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:34:49.614 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 17:34:49.614 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 17:34:49.615 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 17:34:49.616 -03:00 [DBG] Executing DbCommand [Parameters=[@__rutLimpio_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Rut" = @__rutLimpio_0 AND u."Activo"
LIMIT 1
2026-01-28 17:34:49.617 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__rutLimpio_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Rut" = @__rutLimpio_0 AND u."Activo"
LIMIT 1
2026-01-28 17:34:49.618 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:34:49.619 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-01-28 17:34:49.619 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:34:49.620 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 17:34:49.621 -03:00 [INF] [FIND] Usuario encontrado - ID: 3, RUT: 12345678-9
2026-01-28 17:34:49.621 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:34:49.622 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:34:49.622 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 17:34:49.623 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 17:34:49.624 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 17:34:49.624 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 17:34:49.626 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 17:34:49.627 -03:00 [DBG] Context 'AppDbContext' started tracking 'Empresa' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 17:34:49.628 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:34:49.629 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-01-28 17:34:49.629 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:34:49.630 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 17:34:49.631 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:34:49.631 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:34:49.632 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 17:34:49.632 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 17:34:49.633 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 17:34:49.634 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Activo", s."Ciudad", s."CreatedAt", s."Direccion", s."EmpresaId", s."Nombre", s."Region", s."Telefono", s."UpdatedAt"
FROM "Sucursales" AS s
WHERE s."Id" = @__p_0
LIMIT 1
2026-01-28 17:34:49.635 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Activo", s."Ciudad", s."CreatedAt", s."Direccion", s."EmpresaId", s."Nombre", s."Region", s."Telefono", s."UpdatedAt"
FROM "Sucursales" AS s
WHERE s."Id" = @__p_0
LIMIT 1
2026-01-28 17:34:49.636 -03:00 [DBG] Context 'AppDbContext' started tracking 'Sucursal' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 17:34:49.637 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:34:49.638 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-01-28 17:34:49.639 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:34:49.639 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 17:34:49.640 -03:00 [INF] [LOGIN] Usuario encontrado: true
2026-01-28 17:34:49.640 -03:00 [INF] [LOGIN] Usuario ID: 3, RUT: 12345678-9, Email: vendedor@empresa.com, Activo: true
2026-01-28 17:34:49.641 -03:00 [INF] [LOGIN] Verificando contraseña para usuario ID: 3
2026-01-28 17:34:49.854 -03:00 [INF] [LOGIN] Password válido: false
2026-01-28 17:34:49.855 -03:00 [WRN] [LOGIN] Login rechazado - Contraseña incorrecta para usuario ID: 3
2026-01-28 17:34:49.856 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-01-28 17:34:49.857 -03:00 [DBG] No information found on request to perform content negotiation.
2026-01-28 17:34:49.857 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-01-28 17:34:49.858 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-01-28 17:34:49.859 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2026-01-28 17:34:49.859 -03:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'System.String'.
2026-01-28 17:34:49.860 -03:00 [INF] Executed action Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api) in 259.005ms
2026-01-28 17:34:49.861 -03:00 [INF] Executed endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 17:34:49.861 -03:00 [INF] HTTP POST /api/auth/login responded 401 in 266.2996 ms
2026-01-28 17:34:49.862 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 17:34:49.863 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:34:49.863 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 17:34:49.864 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/auth/login - 401 null text/plain; charset=utf-8 275.5276ms
2026-01-28 17:34:50.806 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5070/api/auth/login - application/json 61
2026-01-28 17:34:50.807 -03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2026-01-28 17:34:50.808 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)' with route pattern 'api/Auth/login' is valid for the request path '/api/auth/login'
2026-01-28 17:34:50.809 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 17:34:50.810 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 17:34:50.810 -03:00 [DBG] Redirecting to 'https://localhost:7058/api/auth/login'.
2026-01-28 17:34:50.810 -03:00 [DBG] Connection id "0HNIULBTPDJD4" completed keep alive response.
2026-01-28 17:34:50.811 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/auth/login - application/json 61
2026-01-28 17:34:50.811 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5070/api/auth/login - 307 0 null 4.9537ms
2026-01-28 17:34:50.812 -03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2026-01-28 17:34:50.814 -03:00 [DBG] Connection id "0HNIULBTPDJD4", Request id "0HNIULBTPDJD4:00000005": started reading request body.
2026-01-28 17:34:50.814 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)' with route pattern 'api/Auth/login' is valid for the request path '/api/auth/login'
2026-01-28 17:34:50.815 -03:00 [DBG] Connection id "0HNIULBTPDJD4", Request id "0HNIULBTPDJD4:00000005": done reading request body.
2026-01-28 17:34:50.816 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 17:34:50.817 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 17:34:50.817 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 17:34:50.818 -03:00 [INF] Executing endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 17:34:50.818 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Project_Gon.Core.DTOs.Auth.LoginDto) on controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api).
2026-01-28 17:34:50.819 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-01-28 17:34:50.820 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-01-28 17:34:50.820 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-01-28 17:34:50.822 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-01-28 17:34:50.822 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-01-28 17:34:50.823 -03:00 [DBG] Executing controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-01-28 17:34:50.824 -03:00 [DBG] Executed controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-01-28 17:34:50.824 -03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' ...
2026-01-28 17:34:50.825 -03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' using the name '' in request data ...
2026-01-28 17:34:50.826 -03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2026-01-28 17:34:50.827 -03:00 [DBG] Connection id "0HNIULBTPDJD5", Request id "0HNIULBTPDJD5:00000009": started reading request body.
2026-01-28 17:34:50.827 -03:00 [DBG] Connection id "0HNIULBTPDJD5", Request id "0HNIULBTPDJD5:00000009": done reading request body.
2026-01-28 17:34:50.828 -03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Project_Gon.Core.DTOs.Auth.LoginDto'
2026-01-28 17:34:50.829 -03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 17:34:50.829 -03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 17:34:50.830 -03:00 [DBG] Attempting to validate the bound parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' ...
2026-01-28 17:34:50.830 -03:00 [DBG] Done attempting to validate the bound parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 17:34:50.831 -03:00 [INF] [LOGIN] Intento de login con: 12345678-9
2026-01-28 17:34:50.831 -03:00 [DBG] [CLEAN_RUT] Original: 12345678-9 -> Limpio: 12345678-9
2026-01-28 17:34:50.832 -03:00 [INF] [FIND] Buscando por RUT limpio: 12345678-9
2026-01-28 17:34:50.833 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 17:34:50.834 -03:00 [DBG] Creating DbConnection.
2026-01-28 17:34:50.834 -03:00 [DBG] Created DbConnection. (0ms).
2026-01-28 17:34:50.835 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:34:50.835 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:34:50.836 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 17:34:50.836 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 17:34:50.837 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 17:34:50.838 -03:00 [DBG] Executing DbCommand [Parameters=[@__rutLimpio_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Rut" = @__rutLimpio_0 AND u."Activo"
LIMIT 1
2026-01-28 17:34:50.839 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__rutLimpio_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Rut" = @__rutLimpio_0 AND u."Activo"
LIMIT 1
2026-01-28 17:34:50.840 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:34:50.841 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-01-28 17:34:50.841 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:34:50.842 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 17:34:50.843 -03:00 [INF] [FIND] Usuario encontrado - ID: 3, RUT: 12345678-9
2026-01-28 17:34:50.844 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:34:50.845 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:34:50.845 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 17:34:50.846 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 17:34:50.846 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 17:34:50.847 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 17:34:50.848 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 17:34:50.850 -03:00 [DBG] Context 'AppDbContext' started tracking 'Empresa' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 17:34:50.850 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:34:50.851 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-01-28 17:34:50.852 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:34:50.852 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 17:34:50.853 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:34:50.854 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:34:50.854 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 17:34:50.855 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 17:34:50.855 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 17:34:50.856 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Activo", s."Ciudad", s."CreatedAt", s."Direccion", s."EmpresaId", s."Nombre", s."Region", s."Telefono", s."UpdatedAt"
FROM "Sucursales" AS s
WHERE s."Id" = @__p_0
LIMIT 1
2026-01-28 17:34:50.857 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Activo", s."Ciudad", s."CreatedAt", s."Direccion", s."EmpresaId", s."Nombre", s."Region", s."Telefono", s."UpdatedAt"
FROM "Sucursales" AS s
WHERE s."Id" = @__p_0
LIMIT 1
2026-01-28 17:34:50.859 -03:00 [DBG] Context 'AppDbContext' started tracking 'Sucursal' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 17:34:50.860 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:34:50.860 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-01-28 17:34:50.861 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:34:50.861 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 17:34:50.862 -03:00 [INF] [LOGIN] Usuario encontrado: true
2026-01-28 17:34:50.863 -03:00 [INF] [LOGIN] Usuario ID: 3, RUT: 12345678-9, Email: vendedor@empresa.com, Activo: true
2026-01-28 17:34:50.863 -03:00 [INF] [LOGIN] Verificando contraseña para usuario ID: 3
2026-01-28 17:34:51.078 -03:00 [INF] [LOGIN] Password válido: false
2026-01-28 17:34:51.079 -03:00 [WRN] [LOGIN] Login rechazado - Contraseña incorrecta para usuario ID: 3
2026-01-28 17:34:51.079 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-01-28 17:34:51.080 -03:00 [DBG] No information found on request to perform content negotiation.
2026-01-28 17:34:51.081 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-01-28 17:34:51.081 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-01-28 17:34:51.082 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2026-01-28 17:34:51.082 -03:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'System.String'.
2026-01-28 17:34:51.083 -03:00 [INF] Executed action Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api) in 260.0545ms
2026-01-28 17:34:51.084 -03:00 [INF] Executed endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 17:34:51.084 -03:00 [INF] HTTP POST /api/auth/login responded 401 in 267.0402 ms
2026-01-28 17:34:51.085 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 17:34:51.086 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:34:51.086 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 17:34:51.087 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/auth/login - 401 null text/plain; charset=utf-8 276.3067ms
2026-01-28 17:34:52.064 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5070/api/auth/login - application/json 61
2026-01-28 17:34:52.065 -03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2026-01-28 17:34:52.066 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)' with route pattern 'api/Auth/login' is valid for the request path '/api/auth/login'
2026-01-28 17:34:52.067 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 17:34:52.067 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 17:34:52.068 -03:00 [DBG] Redirecting to 'https://localhost:7058/api/auth/login'.
2026-01-28 17:34:52.068 -03:00 [DBG] Connection id "0HNIULBTPDJD4" completed keep alive response.
2026-01-28 17:34:52.069 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/auth/login - application/json 61
2026-01-28 17:34:52.069 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5070/api/auth/login - 307 0 null 4.619ms
2026-01-28 17:34:52.070 -03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2026-01-28 17:34:52.071 -03:00 [DBG] Connection id "0HNIULBTPDJD4", Request id "0HNIULBTPDJD4:00000006": started reading request body.
2026-01-28 17:34:52.072 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)' with route pattern 'api/Auth/login' is valid for the request path '/api/auth/login'
2026-01-28 17:34:52.072 -03:00 [DBG] Connection id "0HNIULBTPDJD4", Request id "0HNIULBTPDJD4:00000006": done reading request body.
2026-01-28 17:34:52.073 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 17:34:52.074 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 17:34:52.075 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 17:34:52.075 -03:00 [INF] Executing endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 17:34:52.076 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Project_Gon.Core.DTOs.Auth.LoginDto) on controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api).
2026-01-28 17:34:52.077 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-01-28 17:34:52.078 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-01-28 17:34:52.078 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-01-28 17:34:52.080 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-01-28 17:34:52.080 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-01-28 17:34:52.081 -03:00 [DBG] Executing controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-01-28 17:34:52.082 -03:00 [DBG] Executed controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-01-28 17:34:52.082 -03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' ...
2026-01-28 17:34:52.083 -03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' using the name '' in request data ...
2026-01-28 17:34:52.084 -03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2026-01-28 17:34:52.085 -03:00 [DBG] Connection id "0HNIULBTPDJD5", Request id "0HNIULBTPDJD5:0000000B": started reading request body.
2026-01-28 17:34:52.086 -03:00 [DBG] Connection id "0HNIULBTPDJD5", Request id "0HNIULBTPDJD5:0000000B": done reading request body.
2026-01-28 17:34:52.087 -03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Project_Gon.Core.DTOs.Auth.LoginDto'
2026-01-28 17:34:52.087 -03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 17:34:52.088 -03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 17:34:52.089 -03:00 [DBG] Attempting to validate the bound parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' ...
2026-01-28 17:34:52.090 -03:00 [DBG] Done attempting to validate the bound parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 17:34:52.091 -03:00 [INF] [LOGIN] Intento de login con: 12345678-9
2026-01-28 17:34:52.091 -03:00 [DBG] [CLEAN_RUT] Original: 12345678-9 -> Limpio: 12345678-9
2026-01-28 17:34:52.092 -03:00 [INF] [FIND] Buscando por RUT limpio: 12345678-9
2026-01-28 17:34:52.093 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 17:34:52.094 -03:00 [DBG] Creating DbConnection.
2026-01-28 17:34:52.095 -03:00 [DBG] Created DbConnection. (0ms).
2026-01-28 17:34:52.095 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:34:52.096 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:34:52.097 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 17:34:52.097 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 17:34:52.098 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 17:34:52.098 -03:00 [DBG] Executing DbCommand [Parameters=[@__rutLimpio_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Rut" = @__rutLimpio_0 AND u."Activo"
LIMIT 1
2026-01-28 17:34:52.100 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__rutLimpio_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Rut" = @__rutLimpio_0 AND u."Activo"
LIMIT 1
2026-01-28 17:34:52.101 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:34:52.102 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-01-28 17:34:52.103 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:34:52.103 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 17:34:52.104 -03:00 [INF] [FIND] Usuario encontrado - ID: 3, RUT: 12345678-9
2026-01-28 17:34:52.105 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:34:52.105 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:34:52.106 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 17:34:52.106 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 17:34:52.107 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 17:34:52.107 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 17:34:52.109 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 17:34:52.110 -03:00 [DBG] Context 'AppDbContext' started tracking 'Empresa' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 17:34:52.111 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:34:52.112 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-01-28 17:34:52.112 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:34:52.113 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 17:34:52.114 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:34:52.114 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:34:52.115 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 17:34:52.116 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 17:34:52.116 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 17:34:52.117 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Activo", s."Ciudad", s."CreatedAt", s."Direccion", s."EmpresaId", s."Nombre", s."Region", s."Telefono", s."UpdatedAt"
FROM "Sucursales" AS s
WHERE s."Id" = @__p_0
LIMIT 1
2026-01-28 17:34:52.118 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Activo", s."Ciudad", s."CreatedAt", s."Direccion", s."EmpresaId", s."Nombre", s."Region", s."Telefono", s."UpdatedAt"
FROM "Sucursales" AS s
WHERE s."Id" = @__p_0
LIMIT 1
2026-01-28 17:34:52.120 -03:00 [DBG] Context 'AppDbContext' started tracking 'Sucursal' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 17:34:52.120 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:34:52.121 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-01-28 17:34:52.122 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:34:52.122 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 17:34:52.123 -03:00 [INF] [LOGIN] Usuario encontrado: true
2026-01-28 17:34:52.123 -03:00 [INF] [LOGIN] Usuario ID: 3, RUT: 12345678-9, Email: vendedor@empresa.com, Activo: true
2026-01-28 17:34:52.124 -03:00 [INF] [LOGIN] Verificando contraseña para usuario ID: 3
2026-01-28 17:34:52.341 -03:00 [INF] [LOGIN] Password válido: false
2026-01-28 17:34:52.342 -03:00 [WRN] [LOGIN] Login rechazado - Contraseña incorrecta para usuario ID: 3
2026-01-28 17:34:52.343 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-01-28 17:34:52.344 -03:00 [DBG] No information found on request to perform content negotiation.
2026-01-28 17:34:52.344 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-01-28 17:34:52.345 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-01-28 17:34:52.346 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2026-01-28 17:34:52.346 -03:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'System.String'.
2026-01-28 17:34:52.347 -03:00 [INF] Executed action Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api) in 265.8846ms
2026-01-28 17:34:52.348 -03:00 [INF] Executed endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 17:34:52.348 -03:00 [INF] HTTP POST /api/auth/login responded 401 in 273.2624 ms
2026-01-28 17:34:52.349 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 17:34:52.349 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:34:52.350 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 17:34:52.351 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/auth/login - 401 null text/plain; charset=utf-8 282.2174ms
2026-01-28 17:35:11.139 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5070/api/auth/login - application/json 59
2026-01-28 17:35:11.141 -03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2026-01-28 17:35:11.142 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)' with route pattern 'api/Auth/login' is valid for the request path '/api/auth/login'
2026-01-28 17:35:11.143 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 17:35:11.143 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 17:35:11.144 -03:00 [DBG] Redirecting to 'https://localhost:7058/api/auth/login'.
2026-01-28 17:35:11.144 -03:00 [DBG] Connection id "0HNIULBTPDJD4" completed keep alive response.
2026-01-28 17:35:11.145 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5070/api/auth/login - 307 0 null 5.295ms
2026-01-28 17:35:11.145 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/auth/login - application/json 59
2026-01-28 17:35:11.146 -03:00 [DBG] Connection id "0HNIULBTPDJD4", Request id "0HNIULBTPDJD4:00000007": started reading request body.
2026-01-28 17:35:11.148 -03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2026-01-28 17:35:11.148 -03:00 [DBG] Connection id "0HNIULBTPDJD4", Request id "0HNIULBTPDJD4:00000007": done reading request body.
2026-01-28 17:35:11.149 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)' with route pattern 'api/Auth/login' is valid for the request path '/api/auth/login'
2026-01-28 17:35:11.150 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 17:35:11.151 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 17:35:11.151 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 17:35:11.152 -03:00 [INF] Executing endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 17:35:11.152 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Project_Gon.Core.DTOs.Auth.LoginDto) on controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api).
2026-01-28 17:35:11.153 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-01-28 17:35:11.154 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-01-28 17:35:11.155 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-01-28 17:35:11.156 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-01-28 17:35:11.156 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-01-28 17:35:11.157 -03:00 [DBG] Executing controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-01-28 17:35:11.158 -03:00 [DBG] Executed controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-01-28 17:35:11.158 -03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' ...
2026-01-28 17:35:11.159 -03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' using the name '' in request data ...
2026-01-28 17:35:11.160 -03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2026-01-28 17:35:11.161 -03:00 [DBG] Connection id "0HNIULBTPDJD5", Request id "0HNIULBTPDJD5:0000000D": started reading request body.
2026-01-28 17:35:11.161 -03:00 [DBG] Connection id "0HNIULBTPDJD5", Request id "0HNIULBTPDJD5:0000000D": done reading request body.
2026-01-28 17:35:11.162 -03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Project_Gon.Core.DTOs.Auth.LoginDto'
2026-01-28 17:35:11.162 -03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 17:35:11.163 -03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 17:35:11.164 -03:00 [DBG] Attempting to validate the bound parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' ...
2026-01-28 17:35:11.164 -03:00 [DBG] Done attempting to validate the bound parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 17:35:11.165 -03:00 [INF] [LOGIN] Intento de login con: 12345678-9
2026-01-28 17:35:11.165 -03:00 [DBG] [CLEAN_RUT] Original: 12345678-9 -> Limpio: 12345678-9
2026-01-28 17:35:11.166 -03:00 [INF] [FIND] Buscando por RUT limpio: 12345678-9
2026-01-28 17:35:11.167 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 17:35:11.168 -03:00 [DBG] Creating DbConnection.
2026-01-28 17:35:11.168 -03:00 [DBG] Created DbConnection. (0ms).
2026-01-28 17:35:11.169 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:35:11.169 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:35:11.170 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 17:35:11.170 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 17:35:11.171 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 17:35:11.172 -03:00 [DBG] Executing DbCommand [Parameters=[@__rutLimpio_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Rut" = @__rutLimpio_0 AND u."Activo"
LIMIT 1
2026-01-28 17:35:11.173 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__rutLimpio_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Rut" = @__rutLimpio_0 AND u."Activo"
LIMIT 1
2026-01-28 17:35:11.174 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:35:11.175 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-01-28 17:35:11.176 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:35:11.176 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 17:35:11.177 -03:00 [INF] [FIND] Usuario encontrado - ID: 3, RUT: 12345678-9
2026-01-28 17:35:11.178 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:35:11.178 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:35:11.179 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 17:35:11.180 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 17:35:11.180 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 17:35:11.181 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 17:35:11.182 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 17:35:11.183 -03:00 [DBG] Context 'AppDbContext' started tracking 'Empresa' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 17:35:11.184 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:35:11.185 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-01-28 17:35:11.186 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:35:11.186 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 17:35:11.187 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:35:11.188 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:35:11.188 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 17:35:11.189 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 17:35:11.189 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 17:35:11.190 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Activo", s."Ciudad", s."CreatedAt", s."Direccion", s."EmpresaId", s."Nombre", s."Region", s."Telefono", s."UpdatedAt"
FROM "Sucursales" AS s
WHERE s."Id" = @__p_0
LIMIT 1
2026-01-28 17:35:11.191 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Activo", s."Ciudad", s."CreatedAt", s."Direccion", s."EmpresaId", s."Nombre", s."Region", s."Telefono", s."UpdatedAt"
FROM "Sucursales" AS s
WHERE s."Id" = @__p_0
LIMIT 1
2026-01-28 17:35:11.193 -03:00 [DBG] Context 'AppDbContext' started tracking 'Sucursal' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 17:35:11.193 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:35:11.194 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-01-28 17:35:11.195 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:35:11.195 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 17:35:11.196 -03:00 [INF] [LOGIN] Usuario encontrado: true
2026-01-28 17:35:11.197 -03:00 [INF] [LOGIN] Usuario ID: 3, RUT: 12345678-9, Email: vendedor@empresa.com, Activo: true
2026-01-28 17:35:11.197 -03:00 [INF] [LOGIN] Verificando contraseña para usuario ID: 3
2026-01-28 17:35:11.411 -03:00 [INF] [LOGIN] Password válido: true
2026-01-28 17:35:11.445 -03:00 [DBG] Context 'AppDbContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 17:35:11.448 -03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2026-01-28 17:35:11.450 -03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2026-01-28 17:35:11.464 -03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2026-01-28 17:35:11.503 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:35:11.504 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:35:11.506 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 17:35:11.506 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 17:35:11.508 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2026-01-28 17:35:11.508 -03:00 [DBG] Executing DbCommand [Parameters=[@p12='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = Int32), @p5='?', @p6='?', @p7='?' (DbType = Int32), @p8='?', @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Usuarios" SET "Activo" = @p0, "Apellido" = @p1, "CreatedAt" = @p2, "Email" = @p3, "EmpresaId" = @p4, "Nombre" = @p5, "PasswordHash" = @p6, "Rol" = @p7, "Rut" = @p8, "SucursalId" = @p9, "UltimoAcceso" = @p10, "UpdatedAt" = @p11
WHERE "Id" = @p12;
2026-01-28 17:35:11.512 -03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p12='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = Int32), @p5='?', @p6='?', @p7='?' (DbType = Int32), @p8='?', @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Usuarios" SET "Activo" = @p0, "Apellido" = @p1, "CreatedAt" = @p2, "Email" = @p3, "EmpresaId" = @p4, "Nombre" = @p5, "PasswordHash" = @p6, "Rol" = @p7, "Rut" = @p8, "SucursalId" = @p9, "UltimoAcceso" = @p10, "UpdatedAt" = @p11
WHERE "Id" = @p12;
2026-01-28 17:35:11.516 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:35:11.516 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 2ms reading results.
2026-01-28 17:35:11.517 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:35:11.518 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 17:35:11.523 -03:00 [DBG] An entity of type 'Usuario' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 17:35:11.525 -03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2026-01-28 17:35:11.525 -03:00 [INF] [LOGIN] Login exitoso para usuario ID: 3
2026-01-28 17:35:11.546 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-01-28 17:35:11.548 -03:00 [DBG] No information found on request to perform content negotiation.
2026-01-28 17:35:11.548 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-01-28 17:35:11.549 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-01-28 17:35:11.549 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-01-28 17:35:11.550 -03:00 [INF] Executing OkObjectResult, writing value of type 'Project_Gon.Core.DTOs.Auth.LoginResponseDto'.
2026-01-28 17:35:11.552 -03:00 [INF] Executed action Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api) in 395.1619ms
2026-01-28 17:35:11.553 -03:00 [INF] Executed endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 17:35:11.553 -03:00 [INF] HTTP POST /api/auth/login responded 200 in 402.3296 ms
2026-01-28 17:35:11.554 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 17:35:11.555 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:35:11.556 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 17:35:11.556 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/auth/login - 200 null application/json; charset=utf-8 411.6055ms
2026-01-28 17:35:33.156 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5070/api/auth/login - application/json 69
2026-01-28 17:35:33.157 -03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2026-01-28 17:35:33.157 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)' with route pattern 'api/Auth/login' is valid for the request path '/api/auth/login'
2026-01-28 17:35:33.158 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 17:35:33.159 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 17:35:33.159 -03:00 [DBG] Redirecting to 'https://localhost:7058/api/auth/login'.
2026-01-28 17:35:33.160 -03:00 [DBG] Connection id "0HNIULBTPDJD4" completed keep alive response.
2026-01-28 17:35:33.160 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5070/api/auth/login - 307 0 null 4.6467ms
2026-01-28 17:35:33.161 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7058/api/auth/login - application/json 69
2026-01-28 17:35:33.162 -03:00 [DBG] Connection id "0HNIULBTPDJD4", Request id "0HNIULBTPDJD4:00000008": started reading request body.
2026-01-28 17:35:33.163 -03:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2026-01-28 17:35:33.163 -03:00 [DBG] Connection id "0HNIULBTPDJD4", Request id "0HNIULBTPDJD4:00000008": done reading request body.
2026-01-28 17:35:33.164 -03:00 [DBG] Endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)' with route pattern 'api/Auth/login' is valid for the request path '/api/auth/login'
2026-01-28 17:35:33.165 -03:00 [DBG] Request matched endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 17:35:33.166 -03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2026-01-28 17:35:33.166 -03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2026-01-28 17:35:33.167 -03:00 [INF] Executing endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 17:35:33.167 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Project_Gon.Core.DTOs.Auth.LoginDto) on controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api).
2026-01-28 17:35:33.168 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2026-01-28 17:35:33.169 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2026-01-28 17:35:33.170 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2026-01-28 17:35:33.171 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2026-01-28 17:35:33.172 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2026-01-28 17:35:33.173 -03:00 [DBG] Executing controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-01-28 17:35:33.173 -03:00 [DBG] Executed controller factory for controller Project_Gon.Api.Controllers.AuthController (Project_Gon.Api)
2026-01-28 17:35:33.174 -03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' ...
2026-01-28 17:35:33.175 -03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' using the name '' in request data ...
2026-01-28 17:35:33.175 -03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2026-01-28 17:35:33.176 -03:00 [DBG] Connection id "0HNIULBTPDJD5", Request id "0HNIULBTPDJD5:0000000F": started reading request body.
2026-01-28 17:35:33.177 -03:00 [DBG] Connection id "0HNIULBTPDJD5", Request id "0HNIULBTPDJD5:0000000F": done reading request body.
2026-01-28 17:35:33.177 -03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Project_Gon.Core.DTOs.Auth.LoginDto'
2026-01-28 17:35:33.178 -03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 17:35:33.178 -03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 17:35:33.179 -03:00 [DBG] Attempting to validate the bound parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto' ...
2026-01-28 17:35:33.180 -03:00 [DBG] Done attempting to validate the bound parameter 'loginDto' of type 'Project_Gon.Core.DTOs.Auth.LoginDto'.
2026-01-28 17:35:33.180 -03:00 [INF] [LOGIN] Intento de login con: vendedor@empresa.com
2026-01-28 17:35:33.181 -03:00 [INF] [FIND] Buscando por EMAIL: vendedor@empresa.com
2026-01-28 17:35:33.181 -03:00 [DBG] Entity Framework Core 9.0.0 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:9.0.2+697dd7182173ff3450eddc63b44837fba76331df' with options: None
2026-01-28 17:35:33.183 -03:00 [DBG] Compiling query expression: 
'DbSet<Usuario>()
    .Where(u => u.Email == __emailOrRut_0 && u.Activo)
    .AsNoTracking()
    .FirstOrDefault()'
2026-01-28 17:35:33.185 -03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Usuario>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Usuario>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Usuario.Activo (bool) Required, 1], [Property: Usuario.Apellido (string) Required, 2], [Property: Usuario.CreatedAt (DateTime) Required, 3], [Property: Usuario.Email (string) Index MaxLength(255), 4], [Property: Usuario.EmpresaId (int) Required FK Index, 5], [Property: Usuario.Nombre (string) Required, 6], [Property: Usuario.PasswordHash (string) Required, 7], [Property: Usuario.Rol (RolUsuario) Required, 8], [Property: Usuario.Rut (string) Index MaxLength(12), 9], [Property: Usuario.SucursalId (int?) FK Index, 10], [Property: Usuario.UltimoAcceso (DateTime?), 11], [Property: Usuario.UpdatedAt (DateTime?), 12] }
            SELECT TOP(1) u.Id, u.Activo, u.Apellido, u.CreatedAt, u.Email, u.EmpresaId, u.Nombre, u.PasswordHash, u.Rol, u.Rut, u.SucursalId, u.UltimoAcceso, u.UpdatedAt
            FROM Usuarios AS u
            WHERE (u.Email == @__emailOrRut_0) && u.Activo) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Usuario.Activo (bool) Required, 1], [Property: Usuario.Apellido (string) Required, 2], [Property: Usuario.CreatedAt (DateTime) Required, 3], [Property: Usuario.Email (string) Index MaxLength(255), 4], [Property: Usuario.EmpresaId (int) Required FK Index, 5], [Property: Usuario.Nombre (string) Required, 6], [Property: Usuario.PasswordHash (string) Required, 7], [Property: Usuario.Rol (RolUsuario) Required, 8], [Property: Usuario.Rut (string) Index MaxLength(12), 9], [Property: Usuario.SucursalId (int?) FK Index, 10], [Property: Usuario.UltimoAcceso (DateTime?), 11], [Property: Usuario.UpdatedAt (DateTime?), 12] }
            SELECT TOP(1) u.Id, u.Activo, u.Apellido, u.CreatedAt, u.Email, u.EmpresaId, u.Nombre, u.PasswordHash, u.Rol, u.Rut, u.SucursalId, u.UltimoAcceso, u.UpdatedAt
            FROM Usuarios AS u
            WHERE (u.Email == @__emailOrRut_0) && u.Activo, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Usuario entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Usuario instance1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Usuario);
                (object)dataReader.GetInt32(0) != null ? 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")]: 
                            {
                                return 
                                {
                                    Usuario instance;
                                    instance = new Usuario();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Activo>k__BackingField = dataReader.GetBoolean(1);
                                    instance.<Apellido>k__BackingField = dataReader.GetString(2);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(3);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<EmpresaId>k__BackingField = dataReader.GetInt32(5);
                                    instance.<Nombre>k__BackingField = dataReader.GetString(6);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(7);
                                    instance.<Rol>k__BackingField = Invoke(((EnumToNumberConverter<RolUsuario, int>)((IReadOnlyProperty)[LIFTABLE Constant: Property: Usuario.Rol (RolUsuario) Required | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario").FindProperty("Rol")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetInt32(8));
                                    instance.<Rut>k__BackingField = dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9);
                                    instance.<SucursalId>k__BackingField = dataReader.IsDBNull(10) ? default(int?) : (int?)dataReader.GetInt32(10);
                                    instance.<UltimoAcceso>k__BackingField = dataReader.IsDBNull(11) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(11);
                                    instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(12) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(12);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Usuario)
                    }
                    ;
                    return instance1;
                } : 
                {
                    object[] keyValues1;
                    keyValues1 = new object[]{ (object)dataReader.GetInt32(0) };
                    return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                        entityType: [LIFTABLE Constant: EntityType: Usuario | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario")], 
                        properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("Project_Gon.Core.Entities.Usuario").FindPrimaryKey().Properties], 
                        keyValues: keyValues1);
                };
                return instance1;
            };
            return entity;
        }, 
        contextType: Project_Gon.Infrastructure.Data.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2026-01-28 17:35:33.193 -03:00 [DBG] Creating DbConnection.
2026-01-28 17:35:33.193 -03:00 [DBG] Created DbConnection. (0ms).
2026-01-28 17:35:33.194 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:35:33.195 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:35:33.195 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 17:35:33.196 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 17:35:33.196 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 17:35:33.197 -03:00 [DBG] Executing DbCommand [Parameters=[@__emailOrRut_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Email" = @__emailOrRut_0 AND u."Activo"
LIMIT 1
2026-01-28 17:35:33.199 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__emailOrRut_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Activo", u."Apellido", u."CreatedAt", u."Email", u."EmpresaId", u."Nombre", u."PasswordHash", u."Rol", u."Rut", u."SucursalId", u."UltimoAcceso", u."UpdatedAt"
FROM "Usuarios" AS u
WHERE u."Email" = @__emailOrRut_0 AND u."Activo"
LIMIT 1
2026-01-28 17:35:33.200 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:35:33.200 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-01-28 17:35:33.201 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:35:33.202 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 17:35:33.203 -03:00 [INF] [FIND] Usuario encontrado - ID: 3, RUT: 12345678-9
2026-01-28 17:35:33.203 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:35:33.204 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:35:33.205 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 17:35:33.205 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 17:35:33.206 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 17:35:33.206 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 17:35:33.208 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Activo", e."Ciudad", e."CreatedAt", e."Direccion", e."Nombre", e."Region", e."Rut", e."UpdatedAt"
FROM "Empresas" AS e
WHERE e."Id" = @__p_0
LIMIT 1
2026-01-28 17:35:33.209 -03:00 [DBG] Context 'AppDbContext' started tracking 'Empresa' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 17:35:33.210 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:35:33.210 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-01-28 17:35:33.211 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:35:33.212 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 17:35:33.213 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:35:33.213 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:35:33.214 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 17:35:33.214 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 17:35:33.215 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 17:35:33.216 -03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Activo", s."Ciudad", s."CreatedAt", s."Direccion", s."EmpresaId", s."Nombre", s."Region", s."Telefono", s."UpdatedAt"
FROM "Sucursales" AS s
WHERE s."Id" = @__p_0
LIMIT 1
2026-01-28 17:35:33.217 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Activo", s."Ciudad", s."CreatedAt", s."Direccion", s."EmpresaId", s."Nombre", s."Region", s."Telefono", s."UpdatedAt"
FROM "Sucursales" AS s
WHERE s."Id" = @__p_0
LIMIT 1
2026-01-28 17:35:33.219 -03:00 [DBG] Context 'AppDbContext' started tracking 'Sucursal' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 17:35:33.219 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:35:33.220 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 1ms reading results.
2026-01-28 17:35:33.221 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:35:33.221 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 17:35:33.222 -03:00 [INF] [LOGIN] Usuario encontrado: true
2026-01-28 17:35:33.222 -03:00 [INF] [LOGIN] Usuario ID: 3, RUT: 12345678-9, Email: vendedor@empresa.com, Activo: true
2026-01-28 17:35:33.223 -03:00 [INF] [LOGIN] Verificando contraseña para usuario ID: 3
2026-01-28 17:35:33.437 -03:00 [INF] [LOGIN] Password válido: true
2026-01-28 17:35:33.439 -03:00 [DBG] Context 'AppDbContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 17:35:33.440 -03:00 [DBG] SaveChanges starting for 'AppDbContext'.
2026-01-28 17:35:33.440 -03:00 [DBG] DetectChanges starting for 'AppDbContext'.
2026-01-28 17:35:33.441 -03:00 [DBG] DetectChanges completed for 'AppDbContext'.
2026-01-28 17:35:33.442 -03:00 [DBG] Opening connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:35:33.442 -03:00 [DBG] Opened connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:35:33.443 -03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2026-01-28 17:35:33.443 -03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2026-01-28 17:35:33.444 -03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-28 17:35:33.445 -03:00 [DBG] Executing DbCommand [Parameters=[@p12='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = Int32), @p5='?', @p6='?', @p7='?' (DbType = Int32), @p8='?', @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Usuarios" SET "Activo" = @p0, "Apellido" = @p1, "CreatedAt" = @p2, "Email" = @p3, "EmpresaId" = @p4, "Nombre" = @p5, "PasswordHash" = @p6, "Rol" = @p7, "Rut" = @p8, "SucursalId" = @p9, "UltimoAcceso" = @p10, "UpdatedAt" = @p11
WHERE "Id" = @p12;
2026-01-28 17:35:33.489 -03:00 [INF] Executed DbCommand (45ms) [Parameters=[@p12='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = Int32), @p5='?', @p6='?', @p7='?' (DbType = Int32), @p8='?', @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Usuarios" SET "Activo" = @p0, "Apellido" = @p1, "CreatedAt" = @p2, "Email" = @p3, "EmpresaId" = @p4, "Nombre" = @p5, "PasswordHash" = @p6, "Rol" = @p7, "Rut" = @p8, "SucursalId" = @p9, "UltimoAcceso" = @p10, "UpdatedAt" = @p11
WHERE "Id" = @p12;
2026-01-28 17:35:33.491 -03:00 [DBG] Closing data reader to 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:35:33.492 -03:00 [DBG] A data reader for 'gon_db' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2026-01-28 17:35:33.493 -03:00 [DBG] Closing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:35:33.493 -03:00 [DBG] Closed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 17:35:33.494 -03:00 [DBG] An entity of type 'Usuario' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-28 17:35:33.495 -03:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2026-01-28 17:35:33.495 -03:00 [INF] [LOGIN] Login exitoso para usuario ID: 3
2026-01-28 17:35:33.496 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-01-28 17:35:33.497 -03:00 [DBG] No information found on request to perform content negotiation.
2026-01-28 17:35:33.498 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-01-28 17:35:33.498 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2026-01-28 17:35:33.499 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-01-28 17:35:33.499 -03:00 [INF] Executing OkObjectResult, writing value of type 'Project_Gon.Core.DTOs.Auth.LoginResponseDto'.
2026-01-28 17:35:33.500 -03:00 [INF] Executed action Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api) in 327.6691ms
2026-01-28 17:35:33.501 -03:00 [INF] Executed endpoint 'Project_Gon.Api.Controllers.AuthController.Login (Project_Gon.Api)'
2026-01-28 17:35:33.501 -03:00 [INF] HTTP POST /api/auth/login responded 200 in 335.2499 ms
2026-01-28 17:35:33.502 -03:00 [DBG] 'AppDbContext' disposed.
2026-01-28 17:35:33.503 -03:00 [DBG] Disposing connection to database 'gon_db' on server 'tcp://localhost:5432'.
2026-01-28 17:35:33.504 -03:00 [DBG] Disposed connection to database 'gon_db' on server 'tcp://localhost:5432' (0ms).
2026-01-28 17:35:33.504 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7058/api/auth/login - 200 null application/json; charset=utf-8 343.8616ms
2026-01-28 17:37:44.158 -03:00 [DBG] Connection id "0HNIULBTPDJD4" disconnecting.
2026-01-28 17:37:44.159 -03:00 [DBG] Connection id "0HNIULBTPDJD4" stopped.
2026-01-28 17:37:44.159 -03:00 [DBG] Connection id "0HNIULBTPDJD4" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-01-28 17:37:46.174 -03:00 [DBG] Connection id "0HNIULBTPDJD5" is closing.
2026-01-28 17:37:46.175 -03:00 [DBG] Connection id "0HNIULBTPDJD5" is closed. The last processed stream ID was 15.
2026-01-28 17:37:46.176 -03:00 [DBG] The connection queue processing loop for 0HNIULBTPDJD5 completed.
2026-01-28 17:37:46.176 -03:00 [DBG] Connection id "0HNIULBTPDJD5" stopped.
2026-01-28 17:37:46.177 -03:00 [DBG] Connection id "0HNIULBTPDJD5" sending FIN because: "The Socket transport's send loop completed gracefully."
